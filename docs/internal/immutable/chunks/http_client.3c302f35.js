import{b as ek}from"./paths.7182011b.js";import{S as vn,i as wn,s as xn,e as rt,c as st,b as at,d as H,g as z,h as Et,n as Wt,t as ke,a as be,m as Ce,f as _e,j as Q,p as Je,M as mf,G as Sn,I as En,J as An,K as In,v as je,r as He,N as Z,O as kr,l as jn,z as oa,P as pb,Q as nk,R as _t,T as ce,U as Ws,V as vc,W as ua,q as Hs,F as sd,y as ik,u as rk,X as sk,B as V2,C as $2,D as j2,E as z2,Y as ak,Z as ok,_ as uk,$ as ck,a0 as mb,a1 as lk,a2 as Ff,a3 as fk,a4 as hk}from"./index.6651d26c.js";import{w as Mn}from"./index.4f67b53c.js";/* empty css                                              */import{_ as dk}from"./preload-helper.41c905a7.js";function pk(t){let e;return{c(){e=rt("div"),this.h()},l(n){e=st(n,"DIV",{id:!0,class:!0}),at(e).forEach(H),this.h()},h(){z(e,"id","loading"),z(e,"class","svelte-1e2b3ig")},m(n,i){Et(n,e,i)},p:Wt,i:Wt,o:Wt,d(n){n&&H(e)}}}class mk extends vn{constructor(e){super(),wn(this,e,null,pk,xn,{})}}function gk(t){let e,n,i,r,s,a,u,c;return{c(){e=rt("div"),n=ke("Time to initialize database is "),i=ke(t[1]),r=ke(" milliseconds."),s=be(),a=rt("div"),u=ke("DESDR: "),c=ke(t[0]),this.h()},l(l){e=st(l,"DIV",{class:!0});var f=at(e);n=Ce(f,"Time to initialize database is "),i=Ce(f,t[1]),r=Ce(f," milliseconds."),f.forEach(H),s=_e(l),a=st(l,"DIV",{class:!0});var h=at(a);u=Ce(h,"DESDR: "),c=Ce(h,t[0]),h.forEach(H),this.h()},h(){z(e,"class","text-xs"),z(a,"class","text-center py-5 px-2 text-5xl font-bold")},m(l,f){Et(l,e,f),Q(e,n),Q(e,i),Q(e,r),Et(l,s,f),Et(l,a,f),Q(a,u),Q(a,c)},p(l,[f]){f&2&&Je(i,l[1]),f&1&&Je(c,l[0])},i:Wt,o:Wt,d(l){l&&H(e),l&&H(s),l&&H(a)}}}function yk(t,e,n){let{country:i,initTime:r}=e;return t.$$set=s=>{"country"in s&&n(0,i=s.country),"initTime"in s&&n(1,r=s.initTime)},[i,r]}class bk extends vn{constructor(e){super(),wn(this,e,yk,gk,xn,{country:0,initTime:1})}}const _k={"@@functional/placeholder":!0};function Te(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function Ie(t){return function e(n){return arguments.length===0||Te(n)?e:t.apply(this,arguments)}}function gt(t){return function e(n,i){switch(arguments.length){case 0:return e;case 1:return Te(n)?e:Ie(function(r){return t(n,r)});default:return Te(n)&&Te(i)?e:Te(n)?Ie(function(r){return t(r,i)}):Te(i)?Ie(function(r){return t(n,r)}):t(n,i)}}}function q2(t,e){t=t||[],e=e||[];var n,i=t.length,r=e.length,s=[];for(n=0;n<i;)s[s.length]=t[n],n+=1;for(n=0;n<r;)s[s.length]=e[n],n+=1;return s}function Zc(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,i){return e.apply(this,arguments)};case 3:return function(n,i,r){return e.apply(this,arguments)};case 4:return function(n,i,r,s){return e.apply(this,arguments)};case 5:return function(n,i,r,s,a){return e.apply(this,arguments)};case 6:return function(n,i,r,s,a,u){return e.apply(this,arguments)};case 7:return function(n,i,r,s,a,u,c){return e.apply(this,arguments)};case 8:return function(n,i,r,s,a,u,c,l){return e.apply(this,arguments)};case 9:return function(n,i,r,s,a,u,c,l,f){return e.apply(this,arguments)};case 10:return function(n,i,r,s,a,u,c,l,f,h){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function W2(t,e,n){return function(){for(var i=[],r=0,s=t,a=0;a<e.length||r<arguments.length;){var u;a<e.length&&(!Te(e[a])||r>=arguments.length)?u=e[a]:(u=arguments[r],r+=1),i[a]=u,Te(u)||(s-=1),a+=1}return s<=0?n.apply(this,i):Zc(s,W2(t,i,n))}}var Va=gt(function(e,n){return e===1?Ie(n):Zc(e,W2(e,[],n))});function tl(t){return function e(n,i,r){switch(arguments.length){case 0:return e;case 1:return Te(n)?e:gt(function(s,a){return t(n,s,a)});case 2:return Te(n)&&Te(i)?e:Te(n)?gt(function(s,a){return t(s,i,a)}):Te(i)?gt(function(s,a){return t(n,s,a)}):Ie(function(s){return t(n,i,s)});default:return Te(n)&&Te(i)&&Te(r)?e:Te(n)&&Te(i)?gt(function(s,a){return t(s,a,r)}):Te(n)&&Te(r)?gt(function(s,a){return t(s,i,a)}):Te(i)&&Te(r)?gt(function(s,a){return t(n,s,a)}):Te(n)?Ie(function(s){return t(s,i,r)}):Te(i)?Ie(function(s){return t(n,s,r)}):Te(r)?Ie(function(s){return t(n,i,s)}):t(n,i,r)}}}const $a=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function vk(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function el(t,e,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!$a(i)){for(var r=0;r<t.length;){if(typeof i[t[r]]=="function")return i[t[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(vk(i)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}function wk(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}const hs={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};var xk=gt(function(e,n){return n>e?n:e});function gf(t,e){for(var n=0,i=e.length,r=Array(i);n<i;)r[n]=t(e[n]),n+=1;return r}function wc(t){return Object.prototype.toString.call(t)==="[object String]"}var bg=Ie(function(e){return $a(e)?!0:!e||typeof e!="object"||wc(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Sk=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},t}();function Ek(t){return new Sk(t)}var Ak=gt(function(e,n){return Zc(e.length,function(){return e.apply(n,arguments)})});function Ik(t,e,n){for(var i=0,r=n.length;i<r;){if(e=t["@@transducer/step"](e,n[i]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i+=1}return t["@@transducer/result"](e)}function gb(t,e,n){for(var i=n.next();!i.done;){if(e=t["@@transducer/step"](e,i.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i=n.next()}return t["@@transducer/result"](e)}function yb(t,e,n,i){return t["@@transducer/result"](n[i](Ak(t["@@transducer/step"],t),e))}var bb=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Ys(t,e,n){if(typeof t=="function"&&(t=Ek(t)),bg(n))return Ik(t,e,n);if(typeof n["fantasy-land/reduce"]=="function")return yb(t,e,n,"fantasy-land/reduce");if(n[bb]!=null)return gb(t,e,n[bb]());if(typeof n.next=="function")return gb(t,e,n);if(typeof n.reduce=="function")return yb(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Tk=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),kk=gt(function(e,n){return new Tk(e,n)});function Er(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var _b=Object.prototype.toString,H2=function(){return _b.call(arguments)==="[object Arguments]"?function(e){return _b.call(e)==="[object Arguments]"}:function(e){return Er("callee",e)}}(),Ck=!{toString:null}.propertyIsEnumerable("toString"),vb=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],wb=function(){return arguments.propertyIsEnumerable("length")}(),Mk=function(e,n){for(var i=0;i<e.length;){if(e[i]===n)return!0;i+=1}return!1},Nk=Ie(typeof Object.keys=="function"&&!wb?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,i,r=[],s=wb&&H2(e);for(n in e)Er(n,e)&&(!s||n!=="length")&&(r[r.length]=n);if(Ck)for(i=vb.length-1;i>=0;)n=vb[i],Er(n,e)&&!Mk(r,n)&&(r[r.length]=n),i-=1;return r});const ui=Nk;var Ok=gt(el(["fantasy-land/map","map"],kk,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return Va(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return Ys(function(i,r){return i[r]=e(n[r]),i},{},ui(n));default:return gf(e,n)}}));const ds=Ok,Fk=Number.isInteger||function(e){return e<<0===e};var Dk=gt(function(e,n){var i=e<0?n.length+e:e;return wc(n)?n.charAt(i):n[i]});const Y2=Dk;var Rk=gt(function(e,n){if(n!=null)return Fk(e)?Y2(e,n):n[e]});const U0=Rk;var Lk=gt(function(e,n){return ds(U0(e),n)});const G2=Lk;var Bk=tl(Ys);const K2=Bk;var Pk=function(){function t(e,n){this.xf=n,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=wk(this.xf["@@transducer/step"](e,!0))),e},t}(),Uk=gt(function(e,n){return new Pk(e,n)}),Vk=gt(el(["any"],Uk,function(e,n){for(var i=0;i<n.length;){if(e(n[i]))return!0;i+=1}return!1}));const _g=Vk;var $k=gt(function(e,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(n):typeof e=="function"?function(i){return e(i)(n(i))}:Ys(function(i,r){return q2(i,ds(r,n))},[],e)}),jk=gt(function(e,n){return e.apply(this,n)}),zk=Ie(function(e){for(var n=ui(e),i=n.length,r=[],s=0;s<i;)r[s]=e[n[s]],s+=1;return r});const ri=zk;function xb(t,e){return $a(e)?e.map(t):ui(e).reduce(function(n,i){return n[i]=t(e[i]),n},{})}var qk=Ie(function t(e){return e=xb(function(n){return typeof n=="function"?n:t(n)},e),Va(K2(xk,0,G2("length",ri(e))),function(){var n=arguments;return xb(function(i){return jk(i,n)},e)})});const Sb=qk;var Wk=Ie(function(e){return e==null});const zt=Wk;function V0(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Hk=gt(function(e,n){var i=Va(e,n);return Va(e,function(){return Ys($k,ds(i,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Yk=Ie(function(e){return Hk(e.length,e)});function X2(t){return function e(n){for(var i,r,s,a=[],u=0,c=n.length;u<c;){if(bg(n[u]))for(i=t?e(n[u]):n[u],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[u];u+=1}return a}}function Gk(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var Kk=function(t){return{"@@transducer/init":hs.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var i=t["@@transducer/step"](e,n);return i["@@transducer/reduced"]?Gk(i):i}}},Xk=function(e){var n=Kk(e);return{"@@transducer/init":hs.init,"@@transducer/result":function(i){return n["@@transducer/result"](i)},"@@transducer/step":function(i,r){return bg(r)?Ys(n,i,r):Ys(n,i,[r])}}},Jk=gt(function(e,n){return ds(e,Xk(n))}),Qk=gt(el(["fantasy-land/chain","chain"],Jk,function(e,n){return typeof n=="function"?function(i){return e(n(i))(i)}:X2(!1)(ds(e,n))}));const J2=Qk;function Zk(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var $0=Ie(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function Q2(t,e,n,i){var r=function(a){for(var u=e.length,c=0;c<u;){if(t===e[c])return n[c];c+=1}e[c]=t,n[c]=a;for(var l in t)t.hasOwnProperty(l)&&(a[l]=i?Q2(t[l],e,n,!0):t[l]);return a};switch($0(t)){case"Object":return r(Object.create(Object.getPrototypeOf(t)));case"Array":return r([]);case"Date":return new Date(t.valueOf());case"RegExp":return Zk(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}var t5=Ie(function(e){return e!=null&&typeof e.clone=="function"?e.clone():Q2(e,[],[],!0)});const xc=t5;function e5(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Z2(t,e){return function(){var n=arguments.length;if(n===0)return e();var i=arguments[n-1];return $a(i)||typeof i[t]!="function"?e.apply(this,arguments):i[t].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var n5=tl(Z2("slice",function(e,n,i){return Array.prototype.slice.call(i,e,n)})),i5=Ie(Z2("tail",n5(1,1/0)));const r5=i5;function s5(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Zc(arguments[0].length,K2(e5,arguments[0],r5(arguments)))}function a5(t){return t}var o5=Ie(a5);const Df=o5;function Eb(t){for(var e=[],n;!(n=t.next()).done;)e.push(n.value);return e}function Ab(t,e,n){for(var i=0,r=n.length;i<r;){if(t(e,n[i]))return!0;i+=1}return!1}function u5(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function c5(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}const _p=typeof Object.is=="function"?Object.is:c5;function Ib(t,e,n,i){var r=Eb(t),s=Eb(e);function a(u,c){return vg(u,c,n.slice(),i.slice())}return!Ab(function(u,c){return!Ab(a,c,u)},s,r)}function vg(t,e,n,i){if(_p(t,e))return!0;var r=$0(t);if(r!==$0(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(r){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&u5(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&_p(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!_p(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===t)return i[s]===e;s-=1}switch(r){case"Map":return t.size!==e.size?!1:Ib(t.entries(),e.entries(),n.concat([t]),i.concat([e]));case"Set":return t.size!==e.size?!1:Ib(t.values(),e.values(),n.concat([t]),i.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=ui(t);if(a.length!==ui(e).length)return!1;var u=n.concat([t]),c=i.concat([e]);for(s=a.length-1;s>=0;){var l=a[s];if(!(Er(l,e)&&vg(e[l],t[l],u,c)))return!1;s-=1}return!0}var l5=gt(function(e,n){return vg(e,n,[],[])});const wg=l5;function f5(t,e,n){var i,r;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(i=1/e;n<t.length;){if(r=t[n],r===0&&1/r===i)return n;n+=1}return-1}else if(e!==e){for(;n<t.length;){if(r=t[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(e===null)return t.indexOf(e,n)}for(;n<t.length;){if(wg(t[n],e))return n;n+=1}return-1}function Sc(t,e){return f5(e,t,0)>=0}function vp(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var $u=function(e){return(e<10?"0":"")+e},h5=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+$u(e.getUTCMonth()+1)+"-"+$u(e.getUTCDate())+"T"+$u(e.getUTCHours())+":"+$u(e.getUTCMinutes())+":"+$u(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function d5(t){return function(){return!t.apply(this,arguments)}}function tx(t,e){for(var n=0,i=e.length,r=[];n<i;)t(e[n])&&(r[r.length]=e[n]),n+=1;return r}function Rf(t){return Object.prototype.toString.call(t)==="[object Object]"}var p5=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},t}(),m5=gt(function(e,n){return new p5(e,n)}),g5=gt(el(["fantasy-land/filter","filter"],m5,function(t,e){return Rf(e)?Ys(function(n,i){return t(e[i])&&(n[i]=e[i]),n},{},ui(e)):tx(t,e)}));const xg=g5;var y5=gt(function(e,n){return xg(d5(e),n)});const ex=y5;function nx(t,e){var n=function(a){var u=e.concat([t]);return Sc(a,u)?"<Circular>":nx(a,u)},i=function(s,a){return gf(function(u){return vp(u)+": "+n(s[u])},a.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+gf(n,t).join(", ")+"))";case"[object Array]":return"["+gf(n,t).concat(i(t,ex(function(s){return/^\d+$/.test(s)},ui(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):vp(h5(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":vp(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var r=t.toString();if(r!=="[object Object]")return r}return"{"+i(t,ui(t)).join(", ")+"}"}}var wp=Ie(function(e){return nx(e,[])}),b5=gt(function(e,n){if($a(e)){if($a(n))return e.concat(n);throw new TypeError(wp(n)+" is not an array")}if(wc(e)){if(wc(n))return e+n;throw new TypeError(wp(n)+" is not a string")}if(e!=null&&V0(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&V0(e.concat))return e.concat(n);throw new TypeError(wp(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const Ec=b5;var _5=Ie(function(e){return Va(e.length,e)});const Tb=_5;var Sg=function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!kb(e,!0,this)},t.prototype.has=function(e){return kb(e,!1,this)},t}();function kb(t,e,n){var i=typeof t,r,s;switch(i){case"string":case"number":return t===0&&1/t===-1/0?n._items["-0"]?!0:(e&&(n._items["-0"]=!0),!1):n._nativeSet!==null?e?(r=n._nativeSet.size,n._nativeSet.add(t),s=n._nativeSet.size,s===r):n._nativeSet.has(t):i in n._items?t in n._items[i]?!0:(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var a=t?1:0;return n._items[i][a]?!0:(e&&(n._items[i][a]=!0),!1)}else return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?e?(r=n._nativeSet.size,n._nativeSet.add(t),s=n._nativeSet.size,s===r):n._nativeSet.has(t):i in n._items?Sc(t,n._items[i])?!0:(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return n._items[i]?!0:(e&&(n._items[i]=!0),!1);case"object":if(t===null)return n._items.null?!0:(e&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(t),i in n._items?Sc(t,n._items[i])?!0:(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}var v5=gt(function(e,n){for(var i=[],r=0,s=e.length,a=n.length,u=new Sg,c=0;c<a;c+=1)u.add(n[c]);for(;r<s;)u.add(e[r])&&(i[i.length]=e[r]),r+=1;return i});const Ac=v5;var w5=Y2(-1);const xp=w5;var x5=gt(function(e,n){return e||n}),S5=gt(function(e,n){return V0(e)?function(){return e.apply(this,arguments)||n.apply(this,arguments)}:Yk(x5)(e,n)});const ix=S5;function E5(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var A5=Ie(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():$a(e)?[]:wc(e)?"":Rf(e)?{}:H2(e)?function(){return arguments}():E5(e)?e.constructor.from(""):void 0}),I5=Ie(X2(!0));const T5=I5;var k5=Ie(function(e){return Va(e.length,function(n,i){var r=Array.prototype.slice.call(arguments,0);return r[0]=i,r[1]=n,e.apply(this,r)})}),C5=gt(function(e,n){for(var i=ui(n),r=0;r<i.length;){var s=i[r];e(n[s],s,n),r+=1}return n});const Un=C5;var M5=Ie(function(e){for(var n={},i=0;i<e.length;)n[e[i][0]]=e[i][1],i+=1;return n});const N5=M5;var O5=gt(function(e,n){if(e.length===0||zt(n))return!1;for(var i=n,r=0;r<e.length;)if(!zt(i)&&Er(e[r],i))i=i[e[r]],r+=1;else return!1;return!0}),F5=gt(function(e,n){return O5([e],n)});const zo=F5;var D5=gt(function(e,n){return zt(n)?!1:e in n});const R5=D5;var L5=tl(function(e,n,i){return Va(Math.max(e.length,n.length,i.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):i.apply(this,arguments)})});const j0=L5;var B5=gt(Sc);const P5=B5;var U5=function(){function t(e,n){this.xf=n,this.f=e,this.set=new Sg}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),V5=gt(function(e,n){return new U5(e,n)}),$5=gt(el([],V5,function(t,e){for(var n=new Sg,i=[],r=0,s,a;r<e.length;)a=e[r],s=t(a),n.add(s)&&i.push(a),r+=1;return i}));const j5=$5;var z5=j5(Df);const rx=z5;var q5=gt(function(e,n){var i,r;return e.length>n.length?(i=e,r=n):(i=n,r=e),rx(tx(k5(Sc)(i),r))});const W5=q5;function H5(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)Er(s,r)&&(e[s]=r[s]);n+=1}return e}const sx=typeof Object.assign=="function"?Object.assign:H5;var Y5=gt(function(e,n){return n instanceof e||n!=null&&(n.constructor===e||e.name==="Object"&&typeof n=="object")});const we=Y5;var G5=Ie(function(e){return e!=null&&wg(e,A5(e))});const si=G5;var K5=gt(function(e,n){return Ys(function(i,r){return i[r]=e(n[r],r,n),i},{},ui(n))});const X5=K5;var J5=tl(function(e,n,i){var r={},s;for(s in n)Er(s,n)&&(r[s]=Er(s,i)?e(s,n[s],i[s]):n[s]);for(s in i)Er(s,i)&&!Er(s,r)&&(r[s]=i[s]);return r}),Q5=tl(function t(e,n,i){return J5(function(r,s,a){return Rf(s)&&Rf(a)?t(e,s,a):e(r,s,a)},n,i)}),Z5=gt(function(e,n){return Q5(function(i,r,s){return s},e,n)});const tC=Z5;var eC=gt(function(e,n){return sx({},n,e)});const Lf=eC;var nC=gt(function(e,n){return sx({},e,n)});const ad=nC;var iC=gt(function(e,n){for(var i={},r={},s=0,a=e.length;s<a;)r[e[s]]=1,s+=1;for(var u in n)r.hasOwnProperty(u)||(i[u]=n[u]);return i});const Cb=iC;function rC(t){return gt(function(e,n){return Zc(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})})}var sC=rC(q2);const aC=sC;var oC=gt(function(e,n){for(var i={},r=0;r<e.length;)e[r]in n&&(i[e[r]]=n[e[r]]),r+=1;return i});const ax=oC;var uC=gt(function(e,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=e(r),r+=1;return s});const ox=uC;var cC=gt(function(e,n){return Array.prototype.slice.call(n,0).sort(e)});const lC=cC;var fC=gt(function(e,n){return Ec(Ac(e,n),Ac(n,e))});const hC=fC;var dC=gt(function(e,n){for(var i=0,r=e.length,s,a=n.length,u=[];i<r;){for(s=0;s<a;)u[u.length]=[e[i],n[s]],s+=1;i+=1}return u});const pC=dC;var mC=gt(function(e,n){for(var i=[],r=0,s=Math.min(e.length,n.length);r<s;)i[r]=[e[r],n[r]],r+=1;return i});const gC=mC;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ux(t){return typeof t>"u"||t===null}function yC(t){return typeof t=="object"&&t!==null}function bC(t){return Array.isArray(t)?t:ux(t)?[]:[t]}function _C(t,e){var n,i,r,s;if(e)for(s=Object.keys(e),n=0,i=s.length;n<i;n+=1)r=s[n],t[r]=e[r];return t}function vC(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function wC(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var xC=ux,SC=yC,EC=bC,AC=vC,IC=wC,TC=_C,kn={isNothing:xC,isObject:SC,toArray:EC,repeat:AC,isNegativeZero:IC,extend:TC};function cx(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function Ic(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=cx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ic.prototype=Object.create(Error.prototype);Ic.prototype.constructor=Ic;Ic.prototype.toString=function(e){return this.name+": "+cx(this,e)};var es=Ic;function Sp(t,e,n,i,r){var s="",a="",u=Math.floor(r/2)-1;return i-e>u&&(s=" ... ",e=i-u+s.length),n-i>u&&(a=" ...",n=i+u-a.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+a,pos:i-e+s.length}}function Ep(t,e){return kn.repeat(" ",e-t.length)+t}function kC(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,a=-1;s=n.exec(t.buffer);)r.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var u="",c,l,f=Math.min(t.line+e.linesAfter,r.length).toString().length,h=e.maxLength-(e.indent+f+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)l=Sp(t.buffer,i[a-c],r[a-c],t.position-(i[a]-i[a-c]),h),u=kn.repeat(" ",e.indent)+Ep((t.line-c+1).toString(),f)+" | "+l.str+`
`+u;for(l=Sp(t.buffer,i[a],r[a],t.position,h),u+=kn.repeat(" ",e.indent)+Ep((t.line+1).toString(),f)+" | "+l.str+`
`,u+=kn.repeat("-",e.indent+f+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=r.length);c++)l=Sp(t.buffer,i[a+c],r[a+c],t.position-(i[a]-i[a+c]),h),u+=kn.repeat(" ",e.indent)+Ep((t.line+c+1).toString(),f)+" | "+l.str+`
`;return u.replace(/\n$/,"")}var CC=kC,MC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],NC=["scalar","sequence","mapping"];function OC(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function FC(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(MC.indexOf(n)===-1)throw new es('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=OC(e.styleAliases||null),NC.indexOf(this.kind)===-1)throw new es('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var bn=FC;function Mb(t,e){var n=[];return t[e].forEach(function(i){var r=n.length;n.forEach(function(s,a){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=a)}),n[r]=i}),n}function DC(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function z0(t){return this.extend(t)}z0.prototype.extend=function(e){var n=[],i=[];if(e instanceof bn)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new es("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof bn))throw new es("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new es("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new es("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof bn))throw new es("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(z0.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Mb(r,"implicit"),r.compiledExplicit=Mb(r,"explicit"),r.compiledTypeMap=DC(r.compiledImplicit,r.compiledExplicit),r};var RC=z0,LC=new bn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),BC=new bn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),PC=new bn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),UC=new RC({explicit:[LC,BC,PC]});function VC(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function $C(){return null}function jC(t){return t===null}var zC=new bn("tag:yaml.org,2002:null",{kind:"scalar",resolve:VC,construct:$C,predicate:jC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function qC(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function WC(t){return t==="true"||t==="True"||t==="TRUE"}function HC(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var YC=new bn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qC,construct:WC,predicate:HC,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function GC(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function KC(t){return 48<=t&&t<=55}function XC(t){return 48<=t&&t<=57}function JC(t){if(t===null)return!1;var e=t.length,n=0,i=!1,r;if(!e)return!1;if(r=t[n],(r==="-"||r==="+")&&(r=t[++n]),r==="0"){if(n+1===e)return!0;if(r=t[++n],r==="b"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!GC(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!KC(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<e;n++)if(r=t[n],r!=="_"){if(!XC(t.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function QC(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function ZC(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!kn.isNegativeZero(t)}var tM=new bn("tag:yaml.org,2002:int",{kind:"scalar",resolve:JC,construct:QC,predicate:ZC,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),eM=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function nM(t){return!(t===null||!eM.test(t)||t[t.length-1]==="_")}function iM(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var rM=/^[-+]?[0-9]+e/;function sM(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(kn.isNegativeZero(t))return"-0.0";return n=t.toString(10),rM.test(n)?n.replace("e",".e"):n}function aM(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||kn.isNegativeZero(t))}var oM=new bn("tag:yaml.org,2002:float",{kind:"scalar",resolve:nM,construct:iM,predicate:aM,represent:sM,defaultStyle:"lowercase"}),uM=UC.extend({implicit:[zC,YC,tM,oM]}),cM=uM,lx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lM(t){return t===null?!1:lx.exec(t)!==null||fx.exec(t)!==null}function fM(t){var e,n,i,r,s,a,u,c=0,l=null,f,h,d;if(e=lx.exec(t),e===null&&(e=fx.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(n,i,r));if(s=+e[4],a=+e[5],u=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(f=+e[10],h=+(e[11]||0),l=(f*60+h)*6e4,e[9]==="-"&&(l=-l)),d=new Date(Date.UTC(n,i,r,s,a,u,c)),l&&d.setTime(d.getTime()-l),d}function hM(t){return t.toISOString()}var dM=new bn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lM,construct:fM,instanceOf:Date,represent:hM});function pM(t){return t==="<<"||t===null}var mM=new bn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pM}),Eg=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function gM(t){if(t===null)return!1;var e,n,i=0,r=t.length,s=Eg;for(n=0;n<r;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function yM(t){var e,n,i=t.replace(/[\r\n=]/g,""),r=i.length,s=Eg,a=0,u=[];for(e=0;e<r;e++)e%4===0&&e&&(u.push(a>>16&255),u.push(a>>8&255),u.push(a&255)),a=a<<6|s.indexOf(i.charAt(e));return n=r%4*6,n===0?(u.push(a>>16&255),u.push(a>>8&255),u.push(a&255)):n===18?(u.push(a>>10&255),u.push(a>>2&255)):n===12&&u.push(a>>4&255),new Uint8Array(u)}function bM(t){var e="",n=0,i,r,s=t.length,a=Eg;for(i=0;i<s;i++)i%3===0&&i&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[i];return r=s%3,r===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):r===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):r===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}function _M(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var vM=new bn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:gM,construct:yM,predicate:_M,represent:bM}),wM=Object.prototype.hasOwnProperty,xM=Object.prototype.toString;function SM(t){if(t===null)return!0;var e=[],n,i,r,s,a,u=t;for(n=0,i=u.length;n<i;n+=1){if(r=u[n],a=!1,xM.call(r)!=="[object Object]")return!1;for(s in r)if(wM.call(r,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function EM(t){return t!==null?t:[]}var AM=new bn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:SM,construct:EM}),IM=Object.prototype.toString;function TM(t){if(t===null)return!0;var e,n,i,r,s,a=t;for(s=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(i=a[e],IM.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[e]=[r[0],i[r[0]]]}return!0}function kM(t){if(t===null)return[];var e,n,i,r,s,a=t;for(s=new Array(a.length),e=0,n=a.length;e<n;e+=1)i=a[e],r=Object.keys(i),s[e]=[r[0],i[r[0]]];return s}var CM=new bn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TM,construct:kM}),MM=Object.prototype.hasOwnProperty;function NM(t){if(t===null)return!0;var e,n=t;for(e in n)if(MM.call(n,e)&&n[e]!==null)return!1;return!0}function OM(t){return t!==null?t:{}}var FM=new bn("tag:yaml.org,2002:set",{kind:"mapping",resolve:NM,construct:OM}),DM=cM.extend({implicit:[dM,mM],explicit:[vM,AM,CM,FM]}),Gs=Object.prototype.hasOwnProperty,Bf=1,hx=2,dx=3,Pf=4,Ap=1,RM=2,Nb=3,LM=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,BM=/[\x85\u2028\u2029]/,PM=/[,\[\]\{\}]/,px=/^(?:!|!!|![a-z\-]+!)$/i,mx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ob(t){return Object.prototype.toString.call(t)}function Cr(t){return t===10||t===13}function Ra(t){return t===9||t===32}function Yn(t){return t===9||t===32||t===10||t===13}function Io(t){return t===44||t===91||t===93||t===123||t===125}function UM(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function VM(t){return t===120?2:t===117?4:t===85?8:0}function $M(t){return 48<=t&&t<=57?t-48:-1}function Fb(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function jM(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var gx=new Array(256),yx=new Array(256);for(var fo=0;fo<256;fo++)gx[fo]=Fb(fo)?1:0,yx[fo]=Fb(fo);function zM(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||DM,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bx(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=CC(n),new es(e,n)}function lt(t,e){throw bx(t,e)}function Uf(t,e){t.onWarning&&t.onWarning.call(null,bx(t,e))}var Db={YAML:function(e,n,i){var r,s,a;e.version!==null&&lt(e,"duplication of %YAML directive"),i.length!==1&&lt(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&lt(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),a=parseInt(r[2],10),s!==1&&lt(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Uf(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var r,s;i.length!==2&&lt(e,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],px.test(r)||lt(e,"ill-formed tag handle (first argument) of the TAG directive"),Gs.call(e.tagMap,r)&&lt(e,'there is a previously declared suffix for "'+r+'" tag handle'),mx.test(s)||lt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{lt(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function js(t,e,n,i){var r,s,a,u;if(e<n){if(u=t.input.slice(e,n),i)for(r=0,s=u.length;r<s;r+=1)a=u.charCodeAt(r),a===9||32<=a&&a<=1114111||lt(t,"expected valid JSON character");else LM.test(u)&&lt(t,"the stream contains non-printable characters");t.result+=u}}function Rb(t,e,n,i){var r,s,a,u;for(kn.isObject(n)||lt(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),a=0,u=r.length;a<u;a+=1)s=r[a],Gs.call(e,s)||(e[s]=n[s],i[s]=!0)}function To(t,e,n,i,r,s,a,u,c){var l,f;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),l=0,f=r.length;l<f;l+=1)Array.isArray(r[l])&&lt(t,"nested arrays are not supported inside keys"),typeof r=="object"&&Ob(r[l])==="[object Object]"&&(r[l]="[object Object]");if(typeof r=="object"&&Ob(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(l=0,f=s.length;l<f;l+=1)Rb(t,e,s[l],n);else Rb(t,e,s,n);else!t.json&&!Gs.call(n,r)&&Gs.call(e,r)&&(t.line=a||t.line,t.lineStart=u||t.lineStart,t.position=c||t.position,lt(t,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete n[r];return e}function Ag(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):lt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ze(t,e,n){for(var i=0,r=t.input.charCodeAt(t.position);r!==0;){for(;Ra(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(Cr(r))for(Ag(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&Uf(t,"deficient indentation"),i}function od(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Yn(n)))}function Ig(t,e){e===1?t.result+=" ":e>1&&(t.result+=kn.repeat(`
`,e-1))}function qM(t,e,n){var i,r,s,a,u,c,l,f,h=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Yn(p)||Io(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(r=t.input.charCodeAt(t.position+1),Yn(r)||n&&Io(r)))return!1;for(t.kind="scalar",t.result="",s=a=t.position,u=!1;p!==0;){if(p===58){if(r=t.input.charCodeAt(t.position+1),Yn(r)||n&&Io(r))break}else if(p===35){if(i=t.input.charCodeAt(t.position-1),Yn(i))break}else{if(t.position===t.lineStart&&od(t)||n&&Io(p))break;if(Cr(p))if(c=t.line,l=t.lineStart,f=t.lineIndent,ze(t,!1,-1),t.lineIndent>=e){u=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=l,t.lineIndent=f;break}}u&&(js(t,s,a,!1),Ig(t,t.line-c),s=a=t.position,u=!1),Ra(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return js(t,s,a,!1),t.result?!0:(t.kind=h,t.result=d,!1)}function WM(t,e){var n,i,r;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(js(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,r=t.position;else return!0;else Cr(n)?(js(t,i,r,!0),Ig(t,ze(t,!1,e)),i=r=t.position):t.position===t.lineStart&&od(t)?lt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);lt(t,"unexpected end of the stream within a single quoted scalar")}function HM(t,e){var n,i,r,s,a,u;if(u=t.input.charCodeAt(t.position),u!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(u=t.input.charCodeAt(t.position))!==0;){if(u===34)return js(t,n,t.position,!0),t.position++,!0;if(u===92){if(js(t,n,t.position,!0),u=t.input.charCodeAt(++t.position),Cr(u))ze(t,!1,e);else if(u<256&&gx[u])t.result+=yx[u],t.position++;else if((a=VM(u))>0){for(r=a,s=0;r>0;r--)u=t.input.charCodeAt(++t.position),(a=UM(u))>=0?s=(s<<4)+a:lt(t,"expected hexadecimal character");t.result+=jM(s),t.position++}else lt(t,"unknown escape sequence");n=i=t.position}else Cr(u)?(js(t,n,i,!0),Ig(t,ze(t,!1,e)),n=i=t.position):t.position===t.lineStart&&od(t)?lt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}lt(t,"unexpected end of the stream within a double quoted scalar")}function YM(t,e){var n=!0,i,r,s,a=t.tag,u,c=t.anchor,l,f,h,d,p,m=Object.create(null),g,y,_,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,p=!1,u=[];else if(b===123)f=125,p=!0,u={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),b=t.input.charCodeAt(++t.position);b!==0;){if(ze(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=u,!0;n?b===44&&lt(t,"expected the node content, but found ','"):lt(t,"missed comma between flow collection entries"),y=g=_=null,h=d=!1,b===63&&(l=t.input.charCodeAt(t.position+1),Yn(l)&&(h=d=!0,t.position++,ze(t,!0,e))),i=t.line,r=t.lineStart,s=t.position,qo(t,e,Bf,!1,!0),y=t.tag,g=t.result,ze(t,!0,e),b=t.input.charCodeAt(t.position),(d||t.line===i)&&b===58&&(h=!0,b=t.input.charCodeAt(++t.position),ze(t,!0,e),qo(t,e,Bf,!1,!0),_=t.result),p?To(t,u,m,y,g,_,i,r,s):h?u.push(To(t,null,m,y,g,_,i,r,s)):u.push(g),ze(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(n=!0,b=t.input.charCodeAt(++t.position)):n=!1}lt(t,"unexpected end of the stream within a flow collection")}function GM(t,e){var n,i,r=Ap,s=!1,a=!1,u=e,c=0,l=!1,f,h;if(h=t.input.charCodeAt(t.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)Ap===r?r=h===43?Nb:RM:lt(t,"repeat of a chomping mode identifier");else if((f=$M(h))>=0)f===0?lt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?lt(t,"repeat of an indentation width identifier"):(u=e+f-1,a=!0);else break;if(Ra(h)){do h=t.input.charCodeAt(++t.position);while(Ra(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Cr(h)&&h!==0)}for(;h!==0;){for(Ag(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<u)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>u&&(u=t.lineIndent),Cr(h)){c++;continue}if(t.lineIndent<u){r===Nb?t.result+=kn.repeat(`
`,s?1+c:c):r===Ap&&s&&(t.result+=`
`);break}for(i?Ra(h)?(l=!0,t.result+=kn.repeat(`
`,s?1+c:c)):l?(l=!1,t.result+=kn.repeat(`
`,c+1)):c===0?s&&(t.result+=" "):t.result+=kn.repeat(`
`,c):t.result+=kn.repeat(`
`,s?1+c:c),s=!0,a=!0,c=0,n=t.position;!Cr(h)&&h!==0;)h=t.input.charCodeAt(++t.position);js(t,n,t.position,!1)}return!0}function Lb(t,e){var n,i=t.tag,r=t.anchor,s=[],a,u=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Yn(a))));){if(u=!0,t.position++,ze(t,!0,-1)&&t.lineIndent<=e){s.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,qo(t,e,dx,!1,!0),s.push(t.result),ze(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)lt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return u?(t.tag=i,t.anchor=r,t.kind="sequence",t.result=s,!0):!1}function KM(t,e,n){var i,r,s,a,u,c,l=t.tag,f=t.anchor,h={},d=Object.create(null),p=null,m=null,g=null,y=!1,_=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(b===63||b===58)&&Yn(i))b===63?(y&&(To(t,h,d,p,m,null,a,u,c),p=m=g=null),_=!0,y=!0,r=!0):y?(y=!1,r=!0):lt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=i;else{if(a=t.line,u=t.lineStart,c=t.position,!qo(t,n,hx,!1,!0))break;if(t.line===s){for(b=t.input.charCodeAt(t.position);Ra(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),Yn(b)||lt(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(To(t,h,d,p,m,null,a,u,c),p=m=g=null),_=!0,y=!1,r=!1,p=t.tag,m=t.result;else if(_)lt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=f,!0}else if(_)lt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=f,!0}if((t.line===s||t.lineIndent>e)&&(y&&(a=t.line,u=t.lineStart,c=t.position),qo(t,e,Pf,!0,r)&&(y?m=t.result:g=t.result),y||(To(t,h,d,p,m,g,a,u,c),p=m=g=null),ze(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&b!==0)lt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&To(t,h,d,p,m,null,a,u,c),_&&(t.tag=l,t.anchor=f,t.kind="mapping",t.result=h),_}function XM(t){var e,n=!1,i=!1,r,s,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&lt(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(i=!0,r="!!",a=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(s=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):lt(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Yn(a);)a===33&&(i?lt(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),px.test(r)||lt(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),PM.test(s)&&lt(t,"tag suffix cannot contain flow indicator characters")}s&&!mx.test(s)&&lt(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{lt(t,"tag name is malformed: "+s)}return n?t.tag=s:Gs.call(t.tagMap,r)?t.tag=t.tagMap[r]+s:r==="!"?t.tag="!"+s:r==="!!"?t.tag="tag:yaml.org,2002:"+s:lt(t,'undeclared tag handle "'+r+'"'),!0}function JM(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&lt(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Yn(n)&&!Io(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function QM(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Yn(i)&&!Io(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Gs.call(t.anchorMap,n)||lt(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],ze(t,!0,-1),!0}function qo(t,e,n,i,r){var s,a,u,c=1,l=!1,f=!1,h,d,p,m,g,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=a=u=Pf===n||dx===n,i&&ze(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;XM(t)||JM(t);)ze(t,!0,-1)?(l=!0,u=s,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):u=!1;if(u&&(u=l||r),(c===1||Pf===n)&&(Bf===n||hx===n?g=e:g=e+1,y=t.position-t.lineStart,c===1?u&&(Lb(t,y)||KM(t,y,g))||YM(t,g)?f=!0:(a&&GM(t,g)||WM(t,g)||HM(t,g)?f=!0:QM(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&lt(t,"alias node should not have any properties")):qM(t,g,Bf===n)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(f=u&&Lb(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&lt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,d=t.implicitTypes.length;h<d;h+=1)if(m=t.implicitTypes[h],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Gs.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,p=t.typeMap.multi[t.kind||"fallback"],h=0,d=p.length;h<d;h+=1)if(t.tag.slice(0,p[h].tag.length)===p[h].tag){m=p[h];break}m||lt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&lt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):lt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}function ZM(t){var e=t.position,n,i,r,s=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ze(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(s=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Yn(a);)a=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),r=[],i.length<1&&lt(t,"directive name must not be less than one character in length");a!==0;){for(;Ra(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Cr(a));break}if(Cr(a))break;for(n=t.position;a!==0&&!Yn(a);)a=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}a!==0&&Ag(t),Gs.call(Db,i)?Db[i](t,i,r):Uf(t,'unknown document directive "'+i+'"')}if(ze(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ze(t,!0,-1)):s&&lt(t,"directives end mark is expected"),qo(t,t.lineIndent-1,Pf,!1,!0),ze(t,!0,-1),t.checkLineBreaks&&BM.test(t.input.slice(e,t.position))&&Uf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&od(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ze(t,!0,-1));return}if(t.position<t.length-1)lt(t,"end of the stream or a document separator is expected");else return}function _x(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new zM(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,lt(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)ZM(n);return n.documents}function tN(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=_x(t,n);if(typeof e!="function")return i;for(var r=0,s=i.length;r<s;r+=1)e(i[r])}function eN(t,e){var n=_x(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new es("expected a single document in the stream, but found more")}}var nN=tN,iN=eN,rN={loadAll:nN,load:iN},rZ=rN.load;function Gn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nl(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tg(t){let e,n,i;t.length!==2?(e=Gn,n=(u,c)=>Gn(t(u),c),i=(u,c)=>t(u)-c):(e=t===Gn||t===nl?t:sN,n=t,i=t);function r(u,c,l=0,f=u.length){if(l<f){if(e(c,c)!==0)return f;do{const h=l+f>>>1;n(u[h],c)<0?l=h+1:f=h}while(l<f)}return l}function s(u,c,l=0,f=u.length){if(l<f){if(e(c,c)!==0)return f;do{const h=l+f>>>1;n(u[h],c)<=0?l=h+1:f=h}while(l<f)}return l}function a(u,c,l=0,f=u.length){const h=r(u,c,l,f-1);return h>l&&i(u[h-1],c)>-i(u[h],c)?h-1:h}return{left:r,center:a,right:s}}function sN(){return 0}function vx(t){return t===null?NaN:+t}function*aN(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const oN=Tg(Gn),uN=oN.right;Tg(vx).center;const kg=uN;function cN(t){return t.length|0}function lN(t){return!(t>0)}function fN(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function hN(t){return e=>t(...e)}function dN(...t){const e=typeof t[t.length-1]=="function"&&hN(t.pop());t=t.map(fN);const n=t.map(cN),i=t.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(lN))return s;for(;;){s.push(r.map((u,c)=>t[c][u]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?s.map(e):s;r[a--]=0}}}function pN(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function wx(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r));else{let a=-1;for(let u of t)(u=e(u,++a,t))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++n,s+=i*(u-r))}if(n>1)return s/(n-1)}function mN(t,e){const n=wx(t,e);return n&&Math.sqrt(n)}function Wo(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class ja{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],a=e+s,u=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);u&&(n[i++]=u),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,s=r-(a-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}class za extends Map{constructor(e,n=Ex){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(q0(this,e))}has(e){return super.has(q0(this,e))}set(e,n){return super.set(xx(this,e),n)}delete(e){return super.delete(Sx(this,e))}}class Cg extends Set{constructor(e,n=Ex){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(q0(this,e))}add(e){return super.add(xx(this,e))}delete(e){return super.delete(Sx(this,e))}}function q0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function xx({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Sx({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Ex(t){return t!==null&&typeof t=="object"?t.valueOf():t}function W0(t){return t}function Mg(t,...e){return Ng(t,W0,W0,e)}function hc(t,e,...n){return Ng(t,W0,e,n)}function gN(t,e,...n){return Ng(t,Array.from,e,n)}function Ng(t,e,n,i){return function r(s,a){if(a>=i.length)return n(s);const u=new za,c=i[a++];let l=-1;for(const f of s){const h=c(f,++l,s),d=u.get(h);d?d.push(f):u.set(h,[f])}for(const[f,h]of u)u.set(f,r(h,a));return e(u)}(t,0)}function yN(t,e){return Array.from(e,n=>t[n])}function H0(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,s)=>s);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,s)=>{for(const a of e){const u=Vf(a[r],a[s]);if(u)return u}})):(n=t.map(n),i.sort((r,s)=>Vf(n[r],n[s]))),yN(t,i)}return t.sort(Ax(n))}function Ax(t=Gn){if(t===Gn)return Vf;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Vf(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Og(t,e,n){return(e.length!==2?H0(hc(t,e,n),([i,r],[s,a])=>Gn(r,a)||Gn(i,s)):H0(Mg(t,n),([i,r],[s,a])=>e(r,a)||Gn(i,s))).map(([i])=>i)}const bN=Math.sqrt(50),_N=Math.sqrt(10),vN=Math.sqrt(2);function $f(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=bN?10:s>=_N?5:s>=vN?2:1;let u,c,l;return r<0?(l=Math.pow(10,-r)/a,u=Math.round(t*l),c=Math.round(e*l),u/l<t&&++u,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*a,u=Math.round(t/l),c=Math.round(e/l),u*l<t&&++u,c*l>e&&--c),c<u&&.5<=n&&n<2?$f(t,e,n*2):[u,c,l]}function jf(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?$f(e,t,n):$f(t,e,n);if(!(s>=r))return[];const u=s-r+1,c=new Array(u);if(i)if(a<0)for(let l=0;l<u;++l)c[l]=(s-l)/-a;else for(let l=0;l<u;++l)c[l]=(s-l)*a;else if(a<0)for(let l=0;l<u;++l)c[l]=(r+l)/-a;else for(let l=0;l<u;++l)c[l]=(r+l)*a;return c}function Y0(t,e,n){return e=+e,t=+t,n=+n,$f(t,e,n)[2]}function G0(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Y0(e,t,n):Y0(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Ri(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function wN(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Or(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function xN(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Ix(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Vf:Ax(r);i>n;){if(i-n>600){const c=i-n+1,l=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*h*(c-h)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(e-l*h/c+d)),m=Math.min(i,Math.floor(e+(c-l)*h/c+d));Ix(t,e,p,m,r)}const s=t[e];let a=n,u=i;for(ju(t,n,e),r(t[i],s)>0&&ju(t,n,i);a<u;){for(ju(t,a,u),++a,--u;r(t[a],s)<0;)++a;for(;r(t[u],s)>0;)--u}r(t[n],s)===0?ju(t,n,u):(++u,ju(t,u,i)),u<=e&&(n=u+1),e<=u&&(i=u-1)}return t}function ju(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Tx(t,e=Gn){let n,i=!1;if(e.length===1){let r;for(const s of t){const a=e(s);(i?Gn(a,r)>0:Gn(a,a)===0)&&(n=s,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function zf(t,e,n){if(t=Float64Array.from(aN(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return Or(t);if(e>=1)return Ri(t);var i,r=(i-1)*e,s=Math.floor(r),a=Ri(Ix(t,s).subarray(0,s+1)),u=Or(t.subarray(s+1));return a+(u-a)*(r-s)}}function SN(t,e,n=vx){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),u=+n(t[s+1],s+1,t);return a+(u-a)*(r-s)}}function EN(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function K0(t,e){return zf(t,.5,e)}function*AN(t){for(const e of t)yield*e}function kx(t){return Array.from(AN(t))}function IN(t,e){const n=new za;if(e===void 0)for(let s of t)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let a of t)(a=e(a,++s,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[s,a]of n)a>r&&(r=a,i=s);return i}function X0(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function qa(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function qf(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function TN(t){return t}var Ip=1,Tp=2,J0=3,Rl=4,Bb=1e-6;function kN(t){return"translate("+t+",0)"}function CN(t){return"translate(0,"+t+")"}function MN(t){return e=>+t(e)}function NN(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ON(){return!this.__axis}function FN(t,e){var n=[],i=null,r=null,s=6,a=6,u=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Ip||t===Rl?-1:1,f=t===Rl||t===Tp?"x":"y",h=t===Ip||t===J0?kN:CN;function d(p){var m=i??(e.ticks?e.ticks.apply(e,n):e.domain()),g=r??(e.tickFormat?e.tickFormat.apply(e,n):TN),y=Math.max(s,0)+u,_=e.range(),b=+_[0]+c,x=+_[_.length-1]+c,v=(e.bandwidth?NN:MN)(e.copy(),c),w=p.selection?p.selection():p,A=w.selectAll(".domain").data([null]),T=w.selectAll(".tick").data(m,e).order(),C=T.exit(),L=T.enter().append("g").attr("class","tick"),O=T.select("line"),k=T.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(L),O=O.merge(L.append("line").attr("stroke","currentColor").attr(f+"2",l*s)),k=k.merge(L.append("text").attr("fill","currentColor").attr(f,l*y).attr("dy",t===Ip?"0em":t===J0?"0.71em":"0.32em")),p!==w&&(A=A.transition(p),T=T.transition(p),O=O.transition(p),k=k.transition(p),C=C.transition(p).attr("opacity",Bb).attr("transform",function(N){return isFinite(N=v(N))?h(N+c):this.getAttribute("transform")}),L.attr("opacity",Bb).attr("transform",function(N){var B=this.parentNode.__axis;return h((B&&isFinite(B=B(N))?B:v(N))+c)})),C.remove(),A.attr("d",t===Rl||t===Tp?a?"M"+l*a+","+b+"H"+c+"V"+x+"H"+l*a:"M"+c+","+b+"V"+x:a?"M"+b+","+l*a+"V"+c+"H"+x+"V"+l*a:"M"+b+","+c+"H"+x),T.attr("opacity",1).attr("transform",function(N){return h(v(N)+c)}),O.attr(f+"2",l*s),k.attr(f,l*y).text(g),w.filter(ON).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Tp?"start":t===Rl?"end":"middle"),w.each(function(){this.__axis=v})}return d.scale=function(p){return arguments.length?(e=p,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),d):i&&i.slice()},d.tickFormat=function(p){return arguments.length?(r=p,d):r},d.tickSize=function(p){return arguments.length?(s=a=+p,d):s},d.tickSizeInner=function(p){return arguments.length?(s=+p,d):s},d.tickSizeOuter=function(p){return arguments.length?(a=+p,d):a},d.tickPadding=function(p){return arguments.length?(u=+p,d):u},d.offset=function(p){return arguments.length?(c=+p,d):c},d}function DN(t){return FN(J0,t)}var RN={value:()=>{}};function Fg(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new yf(n)}function yf(t){this._=t}function LN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}yf.prototype=Fg.prototype={constructor:yf,on:function(t,e){var n=this._,i=LN(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=BN(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=Pb(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Pb(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yf(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function BN(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Pb(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=RN,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Q0="http://www.w3.org/1999/xhtml";const Ho={svg:"http://www.w3.org/2000/svg",xhtml:Q0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ud(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ho.hasOwnProperty(e)?{space:Ho[e],local:t}:t}function PN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q0&&e.documentElement.namespaceURI===Q0?e.createElement(t):e.createElementNS(n,t)}}function UN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cd(t){var e=ud(t);return(e.local?UN:PN)(e)}function VN(){}function Dg(t){return t==null?VN:function(){return this.querySelector(t)}}function $N(t){typeof t!="function"&&(t=Dg(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,u=i[r]=new Array(a),c,l,f=0;f<a;++f)(c=s[f])&&(l=t.call(c,c.__data__,f,s))&&("__data__"in c&&(l.__data__=c.__data__),u[f]=l);return new ci(i,this._parents)}function jN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zN(){return[]}function Cx(t){return t==null?zN:function(){return this.querySelectorAll(t)}}function qN(t){return function(){return jN(t.apply(this,arguments))}}function WN(t){typeof t=="function"?t=qN(t):t=Cx(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],u=a.length,c,l=0;l<u;++l)(c=a[l])&&(i.push(t.call(c,c.__data__,l,a)),r.push(c));return new ci(i,r)}function Mx(t){return function(){return this.matches(t)}}function Nx(t){return function(e){return e.matches(t)}}var HN=Array.prototype.find;function YN(t){return function(){return HN.call(this.children,t)}}function GN(){return this.firstElementChild}function KN(t){return this.select(t==null?GN:YN(typeof t=="function"?t:Nx(t)))}var XN=Array.prototype.filter;function JN(){return Array.from(this.children)}function QN(t){return function(){return XN.call(this.children,t)}}function ZN(t){return this.selectAll(t==null?JN:QN(typeof t=="function"?t:Nx(t)))}function t7(t){typeof t!="function"&&(t=Mx(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,u=i[r]=[],c,l=0;l<a;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&u.push(c);return new ci(i,this._parents)}function Ox(t){return new Array(t.length)}function e7(){return new ci(this._enter||this._groups.map(Ox),this._parents)}function Wf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wf.prototype={constructor:Wf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function n7(t){return function(){return t}}function i7(t,e,n,i,r,s){for(var a=0,u,c=e.length,l=s.length;a<l;++a)(u=e[a])?(u.__data__=s[a],i[a]=u):n[a]=new Wf(t,s[a]);for(;a<c;++a)(u=e[a])&&(r[a]=u)}function r7(t,e,n,i,r,s,a){var u,c,l=new Map,f=e.length,h=s.length,d=new Array(f),p;for(u=0;u<f;++u)(c=e[u])&&(d[u]=p=a.call(c,c.__data__,u,e)+"",l.has(p)?r[u]=c:l.set(p,c));for(u=0;u<h;++u)p=a.call(t,s[u],u,s)+"",(c=l.get(p))?(i[u]=c,c.__data__=s[u],l.delete(p)):n[u]=new Wf(t,s[u]);for(u=0;u<f;++u)(c=e[u])&&l.get(d[u])===c&&(r[u]=c)}function s7(t){return t.__data__}function a7(t,e){if(!arguments.length)return Array.from(this,s7);var n=e?r7:i7,i=this._parents,r=this._groups;typeof t!="function"&&(t=n7(t));for(var s=r.length,a=new Array(s),u=new Array(s),c=new Array(s),l=0;l<s;++l){var f=i[l],h=r[l],d=h.length,p=o7(t.call(f,f&&f.__data__,l,i)),m=p.length,g=u[l]=new Array(m),y=a[l]=new Array(m),_=c[l]=new Array(d);n(f,h,g,y,_,p,e);for(var b=0,x=0,v,w;b<m;++b)if(v=g[b]){for(b>=x&&(x=b+1);!(w=y[x])&&++x<m;);v._next=w||null}}return a=new ci(a,i),a._enter=u,a._exit=c,a}function o7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u7(){return new ci(this._exit||this._groups.map(Ox),this._parents)}function c7(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function l7(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),u=new Array(r),c=0;c<a;++c)for(var l=n[c],f=i[c],h=l.length,d=u[c]=new Array(h),p,m=0;m<h;++m)(p=l[m]||f[m])&&(d[m]=p);for(;c<r;++c)u[c]=n[c];return new ci(u,this._parents)}function f7(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function h7(t){t||(t=d7);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],u=a.length,c=r[s]=new Array(u),l,f=0;f<u;++f)(l=a[f])&&(c[f]=l);c.sort(e)}return new ci(r,this._parents).order()}function d7(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function p7(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function m7(){return Array.from(this)}function g7(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function y7(){let t=0;for(const e of this)++t;return t}function b7(){return!this.node()}function _7(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,u;s<a;++s)(u=r[s])&&t.call(u,u.__data__,s,r);return this}function v7(t){return function(){this.removeAttribute(t)}}function w7(t){return function(){this.removeAttributeNS(t.space,t.local)}}function x7(t,e){return function(){this.setAttribute(t,e)}}function S7(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function E7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function A7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function I7(t,e){var n=ud(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?w7:v7:typeof e=="function"?n.local?A7:E7:n.local?S7:x7)(n,e))}function Fx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function T7(t){return function(){this.style.removeProperty(t)}}function k7(t,e,n){return function(){this.style.setProperty(t,e,n)}}function C7(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function M7(t,e,n){return arguments.length>1?this.each((e==null?T7:typeof e=="function"?C7:k7)(t,e,n??"")):Yo(this.node(),t)}function Yo(t,e){return t.style.getPropertyValue(e)||Fx(t).getComputedStyle(t,null).getPropertyValue(e)}function N7(t){return function(){delete this[t]}}function O7(t,e){return function(){this[t]=e}}function F7(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function D7(t,e){return arguments.length>1?this.each((e==null?N7:typeof e=="function"?F7:O7)(t,e)):this.node()[t]}function Dx(t){return t.trim().split(/^|\s+/)}function Rg(t){return t.classList||new Rx(t)}function Rx(t){this._node=t,this._names=Dx(t.getAttribute("class")||"")}Rx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lx(t,e){for(var n=Rg(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Bx(t,e){for(var n=Rg(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function R7(t){return function(){Lx(this,t)}}function L7(t){return function(){Bx(this,t)}}function B7(t,e){return function(){(e.apply(this,arguments)?Lx:Bx)(this,t)}}function P7(t,e){var n=Dx(t+"");if(arguments.length<2){for(var i=Rg(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?B7:e?R7:L7)(n,e))}function U7(){this.textContent=""}function V7(t){return function(){this.textContent=t}}function $7(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function j7(t){return arguments.length?this.each(t==null?U7:(typeof t=="function"?$7:V7)(t)):this.node().textContent}function z7(){this.innerHTML=""}function q7(t){return function(){this.innerHTML=t}}function W7(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function H7(t){return arguments.length?this.each(t==null?z7:(typeof t=="function"?W7:q7)(t)):this.node().innerHTML}function Y7(){this.nextSibling&&this.parentNode.appendChild(this)}function G7(){return this.each(Y7)}function K7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X7(){return this.each(K7)}function J7(t){var e=typeof t=="function"?t:cd(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Q7(){return null}function Z7(t,e){var n=typeof t=="function"?t:cd(t),i=e==null?Q7:typeof e=="function"?e:Dg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function t9(){var t=this.parentNode;t&&t.removeChild(this)}function e9(){return this.each(t9)}function n9(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function i9(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r9(t){return this.select(t?i9:n9)}function s9(t){return arguments.length?this.property("__data__",t):this.node().__data__}function a9(t){return function(e){t.call(this,e,this.__data__)}}function o9(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function u9(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function c9(t,e,n){return function(){var i=this.__on,r,s=a9(e);if(i){for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function l9(t,e,n){var i=o9(t+""),r,s=i.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,l=u.length,f;c<l;++c)for(r=0,f=u[c];r<s;++r)if((a=i[r]).type===f.type&&a.name===f.name)return f.value}return}for(u=e?c9:u9,r=0;r<s;++r)this.each(u(i[r],e,n));return this}function Px(t,e,n){var i=Fx(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function f9(t,e){return function(){return Px(this,t,e)}}function h9(t,e){return function(){return Px(this,t,e.apply(this,arguments))}}function d9(t,e){return this.each((typeof e=="function"?h9:f9)(t,e))}function*p9(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var Ux=[null];function ci(t,e){this._groups=t,this._parents=e}function il(){return new ci([[document.documentElement]],Ux)}function m9(){return this}ci.prototype=il.prototype={constructor:ci,select:$N,selectAll:WN,selectChild:KN,selectChildren:ZN,filter:t7,data:a7,enter:e7,exit:u7,join:c7,merge:l7,selection:m9,order:f7,sort:h7,call:p7,nodes:m7,node:g7,size:y7,empty:b7,each:_7,attr:I7,style:M7,property:D7,classed:P7,text:j7,html:H7,raise:G7,lower:X7,append:J7,insert:Z7,remove:e9,clone:r9,datum:s9,on:l9,dispatch:d9,[Symbol.iterator]:p9};function Wn(t){return typeof t=="string"?new ci([[document.querySelector(t)]],[document.documentElement]):new ci([[t]],Ux)}function g9(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Z0(t,e){if(t=g9(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const tm={capture:!0,passive:!1};function em(t){t.preventDefault(),t.stopImmediatePropagation()}function y9(t){var e=t.document.documentElement,n=Wn(t).on("dragstart.drag",em,tm);"onselectstart"in e?n.on("selectstart.drag",em,tm):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function b9(t,e){var n=t.document.documentElement,i=Wn(t).on("dragstart.drag",null);e&&(i.on("click.drag",em,tm),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function vu(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ca(){}var Wa=.7,Go=1/Wa,Fo="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_9=/^#([0-9a-f]{3,8})$/,v9=new RegExp(`^rgb\\(${Fo},${Fo},${Fo}\\)$`),w9=new RegExp(`^rgb\\(${Mr},${Mr},${Mr}\\)$`),x9=new RegExp(`^rgba\\(${Fo},${Fo},${Fo},${Tc}\\)$`),S9=new RegExp(`^rgba\\(${Mr},${Mr},${Mr},${Tc}\\)$`),E9=new RegExp(`^hsl\\(${Tc},${Mr},${Mr}\\)$`),A9=new RegExp(`^hsla\\(${Tc},${Mr},${Mr},${Tc}\\)$`),Ub={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vu(ca,Ks,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vb,formatHex:Vb,formatHex8:I9,formatHsl:T9,formatRgb:$b,toString:$b});function Vb(){return this.rgb().formatHex()}function I9(){return this.rgb().formatHex8()}function T9(){return Vx(this).formatHsl()}function $b(){return this.rgb().formatRgb()}function Ks(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_9.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?jb(e):n===3?new sn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ll(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ll(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v9.exec(t))?new sn(e[1],e[2],e[3],1):(e=w9.exec(t))?new sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=x9.exec(t))?Ll(e[1],e[2],e[3],e[4]):(e=S9.exec(t))?Ll(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=E9.exec(t))?Wb(e[1],e[2]/100,e[3]/100,1):(e=A9.exec(t))?Wb(e[1],e[2]/100,e[3]/100,e[4]):Ub.hasOwnProperty(t)?jb(Ub[t]):t==="transparent"?new sn(NaN,NaN,NaN,0):null}function jb(t){return new sn(t>>16&255,t>>8&255,t&255,1)}function Ll(t,e,n,i){return i<=0&&(t=e=n=NaN),new sn(t,e,n,i)}function Lg(t){return t instanceof ca||(t=Ks(t)),t?(t=t.rgb(),new sn(t.r,t.g,t.b,t.opacity)):new sn}function Xs(t,e,n,i){return arguments.length===1?Lg(t):new sn(t,e,n,i??1)}function sn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}vu(sn,Xs,rl(ca,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sn(La(this.r),La(this.g),La(this.b),Hf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zb,formatHex:zb,formatHex8:k9,formatRgb:qb,toString:qb}));function zb(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}`}function k9(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}${Aa((isNaN(this.opacity)?1:this.opacity)*255)}`}function qb(){const t=Hf(this.opacity);return`${t===1?"rgb(":"rgba("}${La(this.r)}, ${La(this.g)}, ${La(this.b)}${t===1?")":`, ${t})`}`}function Hf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function La(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Aa(t){return t=La(t),(t<16?"0":"")+t.toString(16)}function Wb(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hi(t,e,n,i)}function Vx(t){if(t instanceof Hi)return new Hi(t.h,t.s,t.l,t.opacity);if(t instanceof ca||(t=Ks(t)),!t)return new Hi;if(t instanceof Hi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,u=s-r,c=(s+r)/2;return u?(e===s?a=(n-i)/u+(n<i)*6:n===s?a=(i-e)/u+2:a=(e-n)/u+4,u/=c<.5?s+r:2-s-r,a*=60):u=c>0&&c<1?0:a,new Hi(a,u,c,t.opacity)}function nm(t,e,n,i){return arguments.length===1?Vx(t):new Hi(t,e,n,i??1)}function Hi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}vu(Hi,nm,rl(ca,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new Hi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new Hi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new sn(kp(t>=240?t-240:t+120,r,i),kp(t,r,i),kp(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Hi(Hb(this.h),Bl(this.s),Bl(this.l),Hf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hf(this.opacity);return`${t===1?"hsl(":"hsla("}${Hb(this.h)}, ${Bl(this.s)*100}%, ${Bl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Hb(t){return t=(t||0)%360,t<0?t+360:t}function Bl(t){return Math.max(0,Math.min(1,t||0))}function kp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $x=Math.PI/180,jx=180/Math.PI,Yf=18,zx=.96422,qx=1,Wx=.82521,Hx=4/29,Do=6/29,Yx=3*Do*Do,C9=Do*Do*Do;function Gx(t){if(t instanceof Nr)return new Nr(t.l,t.a,t.b,t.opacity);if(t instanceof ss)return Kx(t);t instanceof sn||(t=Lg(t));var e=Op(t.r),n=Op(t.g),i=Op(t.b),r=Cp((.2225045*e+.7168786*n+.0606169*i)/qx),s,a;return e===n&&n===i?s=a=r:(s=Cp((.4360747*e+.3850649*n+.1430804*i)/zx),a=Cp((.0139322*e+.0971045*n+.7141733*i)/Wx)),new Nr(116*r-16,500*(s-r),200*(r-a),t.opacity)}function im(t,e,n,i){return arguments.length===1?Gx(t):new Nr(t,e,n,i??1)}function Nr(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}vu(Nr,im,rl(ca,{brighter(t){return new Nr(this.l+Yf*(t??1),this.a,this.b,this.opacity)},darker(t){return new Nr(this.l-Yf*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=zx*Mp(e),t=qx*Mp(t),n=Wx*Mp(n),new sn(Np(3.1338561*e-1.6168667*t-.4906146*n),Np(-.9787684*e+1.9161415*t+.033454*n),Np(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Cp(t){return t>C9?Math.pow(t,1/3):t/Yx+Hx}function Mp(t){return t>Do?t*t*t:Yx*(t-Hx)}function Np(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Op(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function M9(t){if(t instanceof ss)return new ss(t.h,t.c,t.l,t.opacity);if(t instanceof Nr||(t=Gx(t)),t.a===0&&t.b===0)return new ss(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*jx;return new ss(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Gf(t,e,n,i){return arguments.length===1?M9(t):new ss(t,e,n,i??1)}function ss(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Kx(t){if(isNaN(t.h))return new Nr(t.l,0,0,t.opacity);var e=t.h*$x;return new Nr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}vu(ss,Gf,rl(ca,{brighter(t){return new ss(this.h,this.c,this.l+Yf*(t??1),this.opacity)},darker(t){return new ss(this.h,this.c,this.l-Yf*(t??1),this.opacity)},rgb(){return Kx(this).rgb()}}));var Xx=-.14861,Bg=1.78277,Pg=-.29227,ld=-.90649,kc=1.97294,Yb=kc*ld,Gb=kc*Bg,Kb=Bg*Pg-ld*Xx;function N9(t){if(t instanceof Ba)return new Ba(t.h,t.s,t.l,t.opacity);t instanceof sn||(t=Lg(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Kb*i+Yb*e-Gb*n)/(Kb+Yb-Gb),s=i-r,a=(kc*(n-r)-Pg*s)/ld,u=Math.sqrt(a*a+s*s)/(kc*r*(1-r)),c=u?Math.atan2(a,s)*jx-120:NaN;return new Ba(c<0?c+360:c,u,r,t.opacity)}function Fr(t,e,n,i){return arguments.length===1?N9(t):new Ba(t,e,n,i??1)}function Ba(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}vu(Ba,Fr,rl(ca,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new Ba(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new Ba(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*$x,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new sn(255*(e+n*(Xx*i+Bg*r)),255*(e+n*(Pg*i+ld*r)),255*(e+n*(kc*i)),this.opacity)}}));function O9(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}function F9(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,u=i<e-1?t[i+2]:2*s-r;return O9((n-i/e)*e,a,r,s,u)}}const fd=t=>()=>t;function Jx(t,e){return function(n){return t+n*e}}function D9(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ug(t,e){var n=e-t;return n?Jx(t,n>180||n<-180?n-360*Math.round(n/360):n):fd(isNaN(t)?e:t)}function R9(t){return(t=+t)==1?gn:function(e,n){return n-e?D9(e,n,t):fd(isNaN(e)?n:e)}}function gn(t,e){var n=e-t;return n?Jx(t,n):fd(isNaN(t)?e:t)}const Ha=function t(e){var n=R9(e);function i(r,s){var a=n((r=Xs(r)).r,(s=Xs(s)).r),u=n(r.g,s.g),c=n(r.b,s.b),l=gn(r.opacity,s.opacity);return function(f){return r.r=a(f),r.g=u(f),r.b=c(f),r.opacity=l(f),r+""}}return i.gamma=t,i}(1);function L9(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),a,u;for(a=0;a<n;++a)u=Xs(e[a]),i[a]=u.r||0,r[a]=u.g||0,s[a]=u.b||0;return i=t(i),r=t(r),s=t(s),u.opacity=1,function(c){return u.r=i(c),u.g=r(c),u.b=s(c),u+""}}}var B9=L9(F9);function P9(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function U9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function V9(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=wu(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(u){for(a=0;a<i;++a)s[a]=r[a](u);return s}}function $9(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function pn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function j9(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=wu(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var rm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fp=new RegExp(rm.source,"g");function z9(t){return function(){return t}}function q9(t){return function(e){return t(e)+""}}function Qx(t,e){var n=rm.lastIndex=Fp.lastIndex=0,i,r,s,a=-1,u=[],c=[];for(t=t+"",e=e+"";(i=rm.exec(t))&&(r=Fp.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(i=i[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:pn(i,r)})),n=Fp.lastIndex;return n<e.length&&(s=e.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?c[0]?q9(c[0].x):z9(e):(e=c.length,function(l){for(var f=0,h;f<e;++f)u[(h=c[f]).i]=h.x(l);return u.join("")})}function wu(t,e){var n=typeof e,i;return e==null||n==="boolean"?fd(e):(n==="number"?pn:n==="string"?(i=Ks(e))?(e=i,Ha):Qx:e instanceof Ks?Ha:e instanceof Date?$9:U9(e)?P9:Array.isArray(e)?V9:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?j9:pn)(t,e)}function Vg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Xb=180/Math.PI,sm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zx(t,e,n,i,r,s){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),t*i<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Xb,skewX:Math.atan(c)*Xb,scaleX:a,scaleY:u}}var Pl;function W9(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?sm:Zx(e.a,e.b,e.c,e.d,e.e,e.f)}function H9(t){return t==null||(Pl||(Pl=document.createElementNS("http://www.w3.org/2000/svg","g")),Pl.setAttribute("transform",t),!(t=Pl.transform.baseVal.consolidate()))?sm:(t=t.matrix,Zx(t.a,t.b,t.c,t.d,t.e,t.f))}function tS(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function s(l,f,h,d,p,m){if(l!==h||f!==d){var g=p.push("translate(",null,e,null,n);m.push({i:g-4,x:pn(l,h)},{i:g-2,x:pn(f,d)})}else(h||d)&&p.push("translate("+h+e+d+n)}function a(l,f,h,d){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:pn(l,f)})):f&&h.push(r(h)+"rotate("+f+i)}function u(l,f,h,d){l!==f?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:pn(l,f)}):f&&h.push(r(h)+"skewX("+f+i)}function c(l,f,h,d,p,m){if(l!==h||f!==d){var g=p.push(r(p)+"scale(",null,",",null,")");m.push({i:g-4,x:pn(l,h)},{i:g-2,x:pn(f,d)})}else(h!==1||d!==1)&&p.push(r(p)+"scale("+h+","+d+")")}return function(l,f){var h=[],d=[];return l=t(l),f=t(f),s(l.translateX,l.translateY,f.translateX,f.translateY,h,d),a(l.rotate,f.rotate,h,d),u(l.skewX,f.skewX,h,d),c(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,d),l=f=null,function(p){for(var m=-1,g=d.length,y;++m<g;)h[(y=d[m]).i]=y.x(p);return h.join("")}}}var Y9=tS(W9,"px, ","px)","deg)"),G9=tS(H9,", ",")",")");function K9(t){return function(e,n){var i=t((e=nm(e)).h,(n=nm(n)).h),r=gn(e.s,n.s),s=gn(e.l,n.l),a=gn(e.opacity,n.opacity);return function(u){return e.h=i(u),e.s=r(u),e.l=s(u),e.opacity=a(u),e+""}}}const X9=K9(Ug);function J9(t,e){var n=gn((t=im(t)).l,(e=im(e)).l),i=gn(t.a,e.a),r=gn(t.b,e.b),s=gn(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=s(a),t+""}}function Q9(t){return function(e,n){var i=t((e=Gf(e)).h,(n=Gf(n)).h),r=gn(e.c,n.c),s=gn(e.l,n.l),a=gn(e.opacity,n.opacity);return function(u){return e.h=i(u),e.c=r(u),e.l=s(u),e.opacity=a(u),e+""}}}const Z9=Q9(Ug);function eS(t){return function e(n){n=+n;function i(r,s){var a=t((r=Fr(r)).h,(s=Fr(s)).h),u=gn(r.s,s.s),c=gn(r.l,s.l),l=gn(r.opacity,s.opacity);return function(f){return r.h=a(f),r.s=u(f),r.l=c(Math.pow(f,n)),r.opacity=l(f),r+""}}return i.gamma=e,i}(1)}eS(Ug);var $g=eS(gn);function jg(t,e){e===void 0&&(e=t,t=wu);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var u=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[u](a-u)}}function Ji(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Ko=0,ec=0,zu=0,nS=1e3,Kf,nc,Xf=0,Ya=0,hd=0,Cc=typeof performance=="object"&&performance.now?performance:Date,iS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function zg(){return Ya||(iS(tO),Ya=Cc.now()+hd)}function tO(){Ya=0}function Jf(){this._call=this._time=this._next=null}Jf.prototype=rS.prototype={constructor:Jf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?zg():+n)+(e==null?0:+e),!this._next&&nc!==this&&(nc?nc._next=this:Kf=this,nc=this),this._call=t,this._time=n,am()},stop:function(){this._call&&(this._call=null,this._time=1/0,am())}};function rS(t,e,n){var i=new Jf;return i.restart(t,e,n),i}function eO(){zg(),++Ko;for(var t=Kf,e;t;)(e=Ya-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ko}function Jb(){Ya=(Xf=Cc.now())+hd,Ko=ec=0;try{eO()}finally{Ko=0,iO(),Ya=0}}function nO(){var t=Cc.now(),e=t-Xf;e>nS&&(hd-=e,Xf=t)}function iO(){for(var t,e=Kf,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Kf=n);nc=t,am(i)}function am(t){if(!Ko){ec&&(ec=clearTimeout(ec));var e=t-Ya;e>24?(t<1/0&&(ec=setTimeout(Jb,t-Cc.now()-hd)),zu&&(zu=clearInterval(zu))):(zu||(Xf=Cc.now(),zu=setInterval(nO,nS)),Ko=1,iS(Jb))}}function Qb(t,e,n){var i=new Jf;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var rO=Fg("start","end","cancel","interrupt"),sO=[],sS=0,Zb=1,om=2,bf=3,t_=4,um=5,_f=6;function dd(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;aO(t,n,{name:e,index:i,group:r,on:rO,tween:sO,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:sS})}function qg(t,e){var n=rr(t,e);if(n.state>sS)throw new Error("too late; already scheduled");return n}function Vr(t,e){var n=rr(t,e);if(n.state>bf)throw new Error("too late; already running");return n}function rr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function aO(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=rS(s,0,n.time);function s(l){n.state=Zb,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var f,h,d,p;if(n.state!==Zb)return c();for(f in i)if(p=i[f],p.name===n.name){if(p.state===bf)return Qb(a);p.state===t_?(p.state=_f,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[f]):+f<e&&(p.state=_f,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[f])}if(Qb(function(){n.state===bf&&(n.state=t_,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=om,n.on.call("start",t,t.__data__,n.index,n.group),n.state===om){for(n.state=bf,r=new Array(d=n.tween.length),f=0,h=-1;f<d;++f)(p=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function u(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=um,1),h=-1,d=r.length;++h<d;)r[h].call(t,f);n.state===um&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=_f,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function cm(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>om&&i.state<um,i.state=_f,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function oO(t){return this.each(function(){cm(this,t)})}function uO(t,e){var n,i;return function(){var r=Vr(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,u=i.length;a<u;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function cO(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Vr(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var u={name:e,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=u;break}c===l&&r.push(u)}s.tween=r}}function lO(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=rr(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?uO:cO)(n,t,e))}function Wg(t,e,n){var i=t._id;return t.each(function(){var r=Vr(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return rr(r,i).value[e]}}function aS(t,e){var n;return(typeof e=="number"?pn:e instanceof Ks?Ha:(n=Ks(e))?(e=n,Ha):Qx)(t,e)}function fO(t){return function(){this.removeAttribute(t)}}function hO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dO(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function pO(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function mO(t,e,n){var i,r,s;return function(){var a,u=n(this),c;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=u+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,u)))}}function gO(t,e,n){var i,r,s;return function(){var a,u=n(this),c;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=u+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,u)))}}function yO(t,e){var n=ud(t),i=n==="transform"?G9:aS;return this.attrTween(t,typeof e=="function"?(n.local?gO:mO)(n,i,Wg(this,"attr."+t,e)):e==null?(n.local?hO:fO)(n):(n.local?pO:dO)(n,i,e))}function bO(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function _O(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function vO(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&_O(t,s)),n}return r._value=e,r}function wO(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&bO(t,s)),n}return r._value=e,r}function xO(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=ud(t);return this.tween(n,(i.local?vO:wO)(i,e))}function SO(t,e){return function(){qg(this,t).delay=+e.apply(this,arguments)}}function EO(t,e){return e=+e,function(){qg(this,t).delay=e}}function AO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?SO:EO)(e,t)):rr(this.node(),e).delay}function IO(t,e){return function(){Vr(this,t).duration=+e.apply(this,arguments)}}function TO(t,e){return e=+e,function(){Vr(this,t).duration=e}}function kO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?IO:TO)(e,t)):rr(this.node(),e).duration}function CO(t,e){if(typeof e!="function")throw new Error;return function(){Vr(this,t).ease=e}}function MO(t){var e=this._id;return arguments.length?this.each(CO(e,t)):rr(this.node(),e).ease}function NO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Vr(this,t).ease=n}}function OO(t){if(typeof t!="function")throw new Error;return this.each(NO(this._id,t))}function FO(t){typeof t!="function"&&(t=Mx(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,u=i[r]=[],c,l=0;l<a;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&u.push(c);return new ps(i,this._parents,this._name,this._id)}function DO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),u=0;u<s;++u)for(var c=e[u],l=n[u],f=c.length,h=a[u]=new Array(f),d,p=0;p<f;++p)(d=c[p]||l[p])&&(h[p]=d);for(;u<i;++u)a[u]=e[u];return new ps(a,this._parents,this._name,this._id)}function RO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function LO(t,e,n){var i,r,s=RO(e)?qg:Vr;return function(){var a=s(this,t),u=a.on;u!==i&&(r=(i=u).copy()).on(e,n),a.on=r}}function BO(t,e){var n=this._id;return arguments.length<2?rr(this.node(),n).on.on(t):this.each(LO(n,t,e))}function PO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function UO(){return this.on("end.remove",PO(this._id))}function VO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Dg(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var u=i[a],c=u.length,l=s[a]=new Array(c),f,h,d=0;d<c;++d)(f=u[d])&&(h=t.call(f,f.__data__,d,u))&&("__data__"in f&&(h.__data__=f.__data__),l[d]=h,dd(l[d],e,n,d,l,rr(f,n)));return new ps(s,this._parents,e,n)}function $O(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Cx(t));for(var i=this._groups,r=i.length,s=[],a=[],u=0;u<r;++u)for(var c=i[u],l=c.length,f,h=0;h<l;++h)if(f=c[h]){for(var d=t.call(f,f.__data__,h,c),p,m=rr(f,n),g=0,y=d.length;g<y;++g)(p=d[g])&&dd(p,e,n,g,d,m);s.push(d),a.push(f)}return new ps(s,a,e,n)}var jO=il.prototype.constructor;function zO(){return new jO(this._groups,this._parents)}function qO(t,e){var n,i,r;return function(){var s=Yo(this,t),a=(this.style.removeProperty(t),Yo(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function oS(t){return function(){this.style.removeProperty(t)}}function WO(t,e,n){var i,r=n+"",s;return function(){var a=Yo(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function HO(t,e,n){var i,r,s;return function(){var a=Yo(this,t),u=n(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(t),Yo(this,t))),a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,u))}}function YO(t,e){var n,i,r,s="style."+e,a="end."+s,u;return function(){var c=Vr(this,t),l=c.on,f=c.value[s]==null?u||(u=oS(e)):void 0;(l!==n||r!==f)&&(i=(n=l).copy()).on(a,r=f),c.on=i}}function GO(t,e,n){var i=(t+="")=="transform"?Y9:aS;return e==null?this.styleTween(t,qO(t,i)).on("end.style."+t,oS(t)):typeof e=="function"?this.styleTween(t,HO(t,i,Wg(this,"style."+t,e))).each(YO(this._id,t)):this.styleTween(t,WO(t,i,e),n).on("end.style."+t,null)}function KO(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function XO(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&KO(t,a,n)),i}return s._value=e,s}function JO(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,XO(t,e,n??""))}function QO(t){return function(){this.textContent=t}}function ZO(t){return function(){var e=t(this);this.textContent=e??""}}function tF(t){return this.tween("text",typeof t=="function"?ZO(Wg(this,"text",t)):QO(t==null?"":t+""))}function eF(t){return function(e){this.textContent=t.call(this,e)}}function nF(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&eF(r)),e}return i._value=t,i}function iF(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,nF(t))}function rF(){for(var t=this._name,e=this._id,n=uS(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],u=a.length,c,l=0;l<u;++l)if(c=a[l]){var f=rr(c,e);dd(c,t,n,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ps(i,this._parents,t,n)}function sF(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var u={value:a},c={value:function(){--r===0&&s()}};n.each(function(){var l=Vr(this,i),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(c)),l.on=e}),r===0&&s()})}var aF=0;function ps(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function uS(){return++aF}var qr=il.prototype;ps.prototype={constructor:ps,select:VO,selectAll:$O,selectChild:qr.selectChild,selectChildren:qr.selectChildren,filter:FO,merge:DO,selection:zO,transition:rF,call:qr.call,nodes:qr.nodes,node:qr.node,size:qr.size,empty:qr.empty,each:qr.each,on:BO,attr:yO,attrTween:xO,style:GO,styleTween:JO,text:tF,textTween:iF,remove:UO,tween:lO,delay:AO,duration:kO,ease:MO,easeVarying:OO,end:sF,[Symbol.iterator]:qr[Symbol.iterator]};function oF(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uF={time:null,delay:0,duration:250,ease:oF};function cF(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function lF(t){var e,n;t instanceof ps?(e=t._id,t=t._name):(e=uS(),(n=uF).time=zg(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],u=a.length,c,l=0;l<u;++l)(c=a[l])&&dd(c,t,e,l,a,n||cF(c,e));return new ps(i,this._parents,t,e)}il.prototype.interrupt=oO;il.prototype.transition=lF;const Dp=t=>()=>t;function fF(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function hF(t){t.stopImmediatePropagation()}function Rp(t){t.preventDefault(),t.stopImmediatePropagation()}var e_={name:"drag"},Lp={name:"space"},ho={name:"handle"},po={name:"center"};const{abs:n_,max:hn,min:dn}=Math;function i_(t){return[+t[0],+t[1]]}function r_(t){return[i_(t[0]),i_(t[1])]}var vf={name:"x",handles:["w","e"].map(Qf),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Bp={name:"y",handles:["n","s"].map(Qf),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Wr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},s_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},a_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},dF={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},pF={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Qf(t){return{type:t}}function mF(t){return!t.ctrlKey&&!t.button}function gF(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function yF(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pp(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function bF(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function _F(){return vF(vf)}function vF(t){var e=gF,n=mF,i=yF,r=!0,s=Fg("start","brush","end"),a=6,u;function c(y){var _=y.property("__brush",g).selectAll(".overlay").data([Qf("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Wr.overlay).merge(_).each(function(){var x=Pp(this).extent;Wn(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),y.selectAll(".selection").data([Qf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Wr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=y.selectAll(".handle").data(t.handles,function(x){return x.type});b.exit().remove(),b.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return Wr[x.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(y,_,b){y.tween?y.on("start.brush",function(x){f(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){f(this,arguments).end(x)}).tween("brush",function(){var x=this,v=x.__brush,w=f(x,arguments),A=v.selection,T=t.input(typeof _=="function"?_.apply(this,arguments):_,v.extent),C=wu(A,T);function L(O){v.selection=O===1&&T===null?null:C(O),l.call(x),w.brush()}return A!==null&&T!==null?L:L(1)}):y.each(function(){var x=this,v=arguments,w=x.__brush,A=t.input(typeof _=="function"?_.apply(x,v):_,w.extent),T=f(x,v).beforestart();cm(x),w.selection=A===null?null:A,l.call(x),T.start(b).brush(b).end(b)})},c.clear=function(y,_){c.move(y,null,_)};function l(){var y=Wn(this),_=Pp(this).selection;_?(y.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?_[1][0]-a/2:_[0][0]-a/2}).attr("y",function(b){return b.type[0]==="s"?_[1][1]-a/2:_[0][1]-a/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?_[1][0]-_[0][0]+a:a}).attr("height",function(b){return b.type==="e"||b.type==="w"?_[1][1]-_[0][1]+a:a})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(y,_,b){var x=y.__brush.emitter;return x&&(!b||!x.clean)?x:new h(y,_,b)}function h(y,_,b){this.that=y,this.args=_,this.state=y.__brush,this.active=0,this.clean=b}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,_){return this.starting?(this.starting=!1,this.emit("start",y,_)):this.emit("brush",y),this},brush:function(y,_){return this.emit("brush",y,_),this},end:function(y,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,_)),this},emit:function(y,_,b){var x=Wn(this.that).datum();s.call(y,this.that,new fF(y,{sourceEvent:_,target:c,selection:t.output(this.state.selection),mode:b,dispatch:s}),x)}};function d(y){if(u&&!y.touches||!n.apply(this,arguments))return;var _=this,b=y.target.__data__.type,x=(r&&y.metaKey?b="overlay":b)==="selection"?e_:r&&y.altKey?po:ho,v=t===Bp?null:dF[b],w=t===vf?null:pF[b],A=Pp(_),T=A.extent,C=A.selection,L=T[0][0],O,k,N=T[0][1],B,q,E=T[1][0],j,F,U=T[1][1],$,X,K=0,J=0,ot,Pt=v&&w&&r&&y.shiftKey,dt,ct,tt=Array.from(y.touches||[y],Y=>{const xt=Y.identifier;return Y=Z0(Y,_),Y.point0=Y.slice(),Y.identifier=xt,Y});cm(_);var ut=f(_,arguments,!0).beforestart();if(b==="overlay"){C&&(ot=!0);const Y=[tt[0],tt[1]||tt[0]];A.selection=C=[[O=t===Bp?L:dn(Y[0][0],Y[1][0]),B=t===vf?N:dn(Y[0][1],Y[1][1])],[j=t===Bp?E:hn(Y[0][0],Y[1][0]),$=t===vf?U:hn(Y[0][1],Y[1][1])]],tt.length>1&&et(y)}else O=C[0][0],B=C[0][1],j=C[1][0],$=C[1][1];k=O,q=B,F=j,X=$;var M=Wn(_).attr("pointer-events","none"),W=M.selectAll(".overlay").attr("cursor",Wr[b]);if(y.touches)ut.moved=P,ut.ended=pt;else{var G=Wn(y.view).on("mousemove.brush",P,!0).on("mouseup.brush",pt,!0);r&&G.on("keydown.brush",bt,!0).on("keyup.brush",mt,!0),y9(y.view)}l.call(_),ut.start(y,x.name);function P(Y){for(const xt of Y.changedTouches||[Y])for(const ne of tt)ne.identifier===xt.identifier&&(ne.cur=Z0(xt,_));if(Pt&&!dt&&!ct&&tt.length===1){const xt=tt[0];n_(xt.cur[0]-xt[0])>n_(xt.cur[1]-xt[1])?ct=!0:dt=!0}for(const xt of tt)xt.cur&&(xt[0]=xt.cur[0],xt[1]=xt.cur[1]);ot=!0,Rp(Y),et(Y)}function et(Y){const xt=tt[0],ne=xt.point0;var ye;switch(K=xt[0]-ne[0],J=xt[1]-ne[1],x){case Lp:case e_:{v&&(K=hn(L-O,dn(E-j,K)),k=O+K,F=j+K),w&&(J=hn(N-B,dn(U-$,J)),q=B+J,X=$+J);break}case ho:{tt[1]?(v&&(k=hn(L,dn(E,tt[0][0])),F=hn(L,dn(E,tt[1][0])),v=1),w&&(q=hn(N,dn(U,tt[0][1])),X=hn(N,dn(U,tt[1][1])),w=1)):(v<0?(K=hn(L-O,dn(E-O,K)),k=O+K,F=j):v>0&&(K=hn(L-j,dn(E-j,K)),k=O,F=j+K),w<0?(J=hn(N-B,dn(U-B,J)),q=B+J,X=$):w>0&&(J=hn(N-$,dn(U-$,J)),q=B,X=$+J));break}case po:{v&&(k=hn(L,dn(E,O-K*v)),F=hn(L,dn(E,j+K*v))),w&&(q=hn(N,dn(U,B-J*w)),X=hn(N,dn(U,$+J*w)));break}}F<k&&(v*=-1,ye=O,O=j,j=ye,ye=k,k=F,F=ye,b in s_&&W.attr("cursor",Wr[b=s_[b]])),X<q&&(w*=-1,ye=B,B=$,$=ye,ye=q,q=X,X=ye,b in a_&&W.attr("cursor",Wr[b=a_[b]])),A.selection&&(C=A.selection),dt&&(k=C[0][0],F=C[1][0]),ct&&(q=C[0][1],X=C[1][1]),(C[0][0]!==k||C[0][1]!==q||C[1][0]!==F||C[1][1]!==X)&&(A.selection=[[k,q],[F,X]],l.call(_),ut.brush(Y,x.name))}function pt(Y){if(hF(Y),Y.touches){if(Y.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else b9(Y.view,ot),G.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),W.attr("cursor",Wr.overlay),A.selection&&(C=A.selection),bF(C)&&(A.selection=null,l.call(_)),ut.end(Y,x.name)}function bt(Y){switch(Y.keyCode){case 16:{Pt=v&&w;break}case 18:{x===ho&&(v&&(j=F-K*v,O=k+K*v),w&&($=X-J*w,B=q+J*w),x=po,et(Y));break}case 32:{(x===ho||x===po)&&(v<0?j=F-K:v>0&&(O=k-K),w<0?$=X-J:w>0&&(B=q-J),x=Lp,W.attr("cursor",Wr.selection),et(Y));break}default:return}Rp(Y)}function mt(Y){switch(Y.keyCode){case 16:{Pt&&(dt=ct=Pt=!1,et(Y));break}case 18:{x===po&&(v<0?j=F:v>0&&(O=k),w<0?$=X:w>0&&(B=q),x=ho,et(Y));break}case 32:{x===Lp&&(Y.altKey?(v&&(j=F-K*v,O=k+K*v),w&&($=X-J*w,B=q+J*w),x=po):(v<0?j=F:v>0&&(O=k),w<0?$=X:w>0&&(B=q),x=ho),W.attr("cursor",Wr[b]),et(Y));break}default:return}Rp(Y)}}function p(y){f(this,arguments).moved(y)}function m(y){f(this,arguments).ended(y)}function g(){var y=this.__brush||{selection:null};return y.extent=r_(e.apply(this,arguments)),y.dim=t,y}return c.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Dp(r_(y)),c):e},c.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Dp(!!y),c):n},c.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Dp(!!y),c):i},c.handleSize=function(y){return arguments.length?(a=+y,c):a},c.keyModifiers=function(y){return arguments.length?(r=!!y,c):r},c.on=function(){var y=s.on.apply(s,arguments);return y===s?c:y},c}const lm=Math.PI,fm=2*lm,wa=1e-6,wF=fm-wa;function cS(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function xF(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cS;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class lS{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cS:xF(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,c=i-e,l=r-n,f=a-e,h=u-n,d=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>wa)if(!(Math.abs(h*c-l*f)>wa)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,m=r-u,g=c*c+l*l,y=p*p+m*m,_=Math.sqrt(g),b=Math.sqrt(d),x=s*Math.tan((lm-Math.acos((g+d-y)/(2*_*b)))/2),v=x/b,w=x/_;Math.abs(v-1)>wa&&this._append`L${e+v*f},${n+v*h}`,this._append`A${s},${s},0,0,${+(h*p>f*m)},${this._x1=e+w*c},${this._y1=n+w*l}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),c=i*Math.sin(r),l=e+u,f=n+c,h=1^a,d=a?r-s:s-r;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>wa||Math.abs(this._y1-f)>wa)&&this._append`L${l},${f}`,i&&(d<0&&(d=d%fm+fm),d>wF?this._append`A${i},${i},0,1,${h},${e-u},${n-c}A${i},${i},0,1,${h},${this._x1=l},${this._y1=f}`:d>wa&&this._append`A${i},${i},0,${+(d>=lm)},${h},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Us(t=3){return new lS(+t)}var o_={},Up={},Vp=34,qu=10,$p=13;function fS(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function SF(t,e){var n=fS(t);return function(i,r){return e(n(i),r,t)}}function u_(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function Pn(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function EF(t){return t<0?"-"+Pn(-t,6):t>9999?"+"+Pn(t,6):Pn(t,4)}function AF(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":EF(t.getUTCFullYear())+"-"+Pn(t.getUTCMonth()+1,2)+"-"+Pn(t.getUTCDate(),2)+(r?"T"+Pn(e,2)+":"+Pn(n,2)+":"+Pn(i,2)+"."+Pn(r,3)+"Z":i?"T"+Pn(e,2)+":"+Pn(n,2)+":"+Pn(i,2)+"Z":n||e?"T"+Pn(e,2)+":"+Pn(n,2)+"Z":"")}function IF(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(h,d){var p,m,g=r(h,function(y,_){if(p)return p(y,_-1);m=y,p=d?SF(y,d):fS(y)});return g.columns=m||[],g}function r(h,d){var p=[],m=h.length,g=0,y=0,_,b=m<=0,x=!1;h.charCodeAt(m-1)===qu&&--m,h.charCodeAt(m-1)===$p&&--m;function v(){if(b)return Up;if(x)return x=!1,o_;var A,T=g,C;if(h.charCodeAt(T)===Vp){for(;g++<m&&h.charCodeAt(g)!==Vp||h.charCodeAt(++g)===Vp;);return(A=g)>=m?b=!0:(C=h.charCodeAt(g++))===qu?x=!0:C===$p&&(x=!0,h.charCodeAt(g)===qu&&++g),h.slice(T+1,A-1).replace(/""/g,'"')}for(;g<m;){if((C=h.charCodeAt(A=g++))===qu)x=!0;else if(C===$p)x=!0,h.charCodeAt(g)===qu&&++g;else if(C!==n)continue;return h.slice(T,A)}return b=!0,h.slice(T,m)}for(;(_=v())!==Up;){for(var w=[];_!==o_&&_!==Up;)w.push(_),_=v();d&&(w=d(w,y++))==null||p.push(w)}return p}function s(h,d){return h.map(function(p){return d.map(function(m){return f(p[m])}).join(t)})}function a(h,d){return d==null&&(d=u_(h)),[d.map(f).join(t)].concat(s(h,d)).join(`
`)}function u(h,d){return d==null&&(d=u_(h)),s(h,d).join(`
`)}function c(h){return h.map(l).join(`
`)}function l(h){return h.map(f).join(t)}function f(h){return h==null?"":h instanceof Date?AF(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:u,formatRows:c,formatRow:l,formatValue:f}}var TF=IF(","),kF=TF.parse;function CF(t){for(var e in t){var n=t[e].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))MF&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const MF=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function NF(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function OF(t,e){return fetch(t,e).then(NF)}function FF(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),OF(e,n).then(function(r){return t(r,i)})}}var DF=FF(kF);function RF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Xo(t){return t=Zf(Math.abs(t)),t?t[1]:NaN}function LF(t,e){return function(n,i){for(var r=n.length,s=[],a=0,u=t[0],c=0;r>0&&u>0&&(c+u+1>i&&(u=Math.max(1,i-c)),s.push(n.substring(r-=u,r+u)),!((c+=u+1)>i));)u=t[a=(a+1)%t.length];return s.reverse().join(e)}}function BF(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var PF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mc(t){if(!(e=PF.exec(t)))throw new Error("invalid format: "+t);var e;return new Hg({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mc.prototype=Hg.prototype;function Hg(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Hg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UF(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var hS;function VF(t,e){var n=Zf(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(hS=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Zf(t,Math.max(0,e+s-1))[0]}function c_(t,e){var n=Zf(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const l_={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:RF,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>c_(t*100,e),r:c_,s:VF,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function f_(t){return t}var h_=Array.prototype.map,d_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $F(t){var e=t.grouping===void 0||t.thousands===void 0?f_:LF(h_.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?f_:BF(h_.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Mc(h);var d=h.fill,p=h.align,m=h.sign,g=h.symbol,y=h.zero,_=h.width,b=h.comma,x=h.precision,v=h.trim,w=h.type;w==="n"?(b=!0,w="g"):l_[w]||(x===void 0&&(x=12),v=!0,w="g"),(y||d==="0"&&p==="=")&&(y=!0,d="0",p="=");var A=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",T=g==="$"?i:/[%p]/.test(w)?a:"",C=l_[w],L=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O(k){var N=A,B=T,q,E,j;if(w==="c")B=C(k)+B,k="";else{k=+k;var F=k<0||1/k<0;if(k=isNaN(k)?c:C(Math.abs(k),x),v&&(k=UF(k)),F&&+k==0&&m!=="+"&&(F=!1),N=(F?m==="("?m:u:m==="-"||m==="("?"":m)+N,B=(w==="s"?d_[8+hS/3]:"")+B+(F&&m==="("?")":""),L){for(q=-1,E=k.length;++q<E;)if(j=k.charCodeAt(q),48>j||j>57){B=(j===46?r+k.slice(q+1):k.slice(q))+B,k=k.slice(0,q);break}}}b&&!y&&(k=e(k,1/0));var U=N.length+k.length+B.length,$=U<_?new Array(_-U+1).join(d):"";switch(b&&y&&(k=e($+k,$.length?_-B.length:1/0),$=""),p){case"<":k=N+k+B+$;break;case"=":k=N+$+k+B;break;case"^":k=$.slice(0,U=$.length>>1)+N+k+B+$.slice(U);break;default:k=$+N+k+B;break}return s(k)}return O.toString=function(){return h+""},O}function f(h,d){var p=l((h=Mc(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(Xo(d)/3)))*3,g=Math.pow(10,-m),y=d_[8+m/3];return function(_){return p(g*_)+y}}return{format:l,formatPrefix:f}}var Ul,xu,dS;jF({thousands:",",grouping:[3],currency:["$",""]});function jF(t){return Ul=$F(t),xu=Ul.format,dS=Ul.formatPrefix,Ul}function zF(t){return Math.max(0,-Xo(Math.abs(t)))}function qF(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xo(e)/3)))*3-Xo(Math.abs(t)))}function WF(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xo(e)-Xo(t))+1}var Lt=1e-6,pS=1e-12,qt=Math.PI,Ue=qt/2,p_=qt/4,li=qt*2,Tn=180/qt,Le=qt/180,de=Math.abs,Su=Math.atan,ms=Math.atan2,jt=Math.cos,mS=Math.exp,th=Math.log,jp=Math.pow,Ft=Math.sin,Ci=Math.sign||function(t){return t>0?1:t<0?-1:0},Kn=Math.sqrt,Yg=Math.tan;function gS(t){return t>1?0:t<-1?qt:Math.acos(t)}function Li(t){return t>1?Ue:t<-1?-Ue:Math.asin(t)}function Mi(){}function eh(t,e){t&&g_.hasOwnProperty(t.type)&&g_[t.type](t,e)}var m_={Feature:function(t,e){eh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)eh(n[i].geometry,e)}},g_={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){hm(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)hm(n[i],e,0)},Polygon:function(t,e){y_(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)y_(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)eh(n[i],e)}};function hm(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function y_(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)hm(t[n],e,1);e.polygonEnd()}function vo(t,e){t&&m_.hasOwnProperty(t.type)?m_[t.type](t,e):eh(t,e)}function dm(t){return[ms(t[1],t[0]),Li(t[2])]}function Jo(t){var e=t[0],n=t[1],i=jt(n);return[i*jt(e),i*Ft(e),Ft(n)]}function Vl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nh(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zp(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $l(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function pm(t){var e=Kn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function mm(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function gm(t,e){return de(t)>qt&&(t-=Math.round(t/li)*li),[t,e]}gm.invert=gm;function yS(t,e,n){return(t%=li)?e||n?mm(__(t),v_(e,n)):__(t):e||n?v_(e,n):gm}function b_(t){return function(e,n){return e+=t,de(e)>qt&&(e-=Math.round(e/li)*li),[e,n]}}function __(t){var e=b_(t);return e.invert=b_(-t),e}function v_(t,e){var n=jt(t),i=Ft(t),r=jt(e),s=Ft(e);function a(u,c){var l=jt(c),f=jt(u)*l,h=Ft(u)*l,d=Ft(c),p=d*n+f*i;return[ms(h*r-p*s,f*n-d*i),Li(p*r+h*s)]}return a.invert=function(u,c){var l=jt(c),f=jt(u)*l,h=Ft(u)*l,d=Ft(c),p=d*r-h*s;return[ms(h*r+d*s,f*n+p*i),Li(p*n-f*i)]},a}function HF(t){t=yS(t[0]*Le,t[1]*Le,t.length>2?t[2]*Le:0);function e(n){return n=t(n[0]*Le,n[1]*Le),n[0]*=Tn,n[1]*=Tn,n}return e.invert=function(n){return n=t.invert(n[0]*Le,n[1]*Le),n[0]*=Tn,n[1]*=Tn,n},e}function YF(t,e,n,i,r,s){if(n){var a=jt(e),u=Ft(e),c=i*n;r==null?(r=e+i*li,s=e-c/2):(r=w_(a,r),s=w_(a,s),(i>0?r<s:r>s)&&(r+=i*li));for(var l,f=r;i>0?f>s:f<s;f-=c)l=dm([a,-u*jt(f),-u*Ft(f)]),t.point(l[0],l[1])}}function w_(t,e){e=Jo(e),e[0]-=t,pm(e);var n=gS(-e[1]);return((-e[2]<0?-n:n)+li-Lt)%li}function bS(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Mi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function wf(t,e){return de(t[0]-e[0])<Lt&&de(t[1]-e[1])<Lt}function jl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function _S(t,e,n,i,r){var s=[],a=[],u,c;if(t.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],_=m[g],b;if(wf(y,_)){if(!y[2]&&!_[2]){for(r.lineStart(),u=0;u<g;++u)r.point((y=m[u])[0],y[1]);r.lineEnd();return}_[0]+=2*Lt}s.push(b=new jl(y,m,null,!0)),a.push(b.o=new jl(y,null,b,!1)),s.push(b=new jl(_,m,null,!1)),a.push(b.o=new jl(_,null,b,!0))}}),!!s.length){for(a.sort(e),x_(s),x_(a),u=0,c=a.length;u<c;++u)a[u].e=n=!n;for(var l=s[0],f,h;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;f=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(u=0,c=f.length;u<c;++u)r.point((h=f[u])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(f=d.p.z,u=f.length-1;u>=0;--u)r.point((h=f[u])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,f=d.z,p=!p}while(!d.v);r.lineEnd()}}}function x_(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function qp(t){return de(t[0])<=qt?t[0]:Ci(t[0])*((de(t[0])+qt)%li-qt)}function GF(t,e){var n=qp(e),i=e[1],r=Ft(i),s=[Ft(n),-jt(n),0],a=0,u=0,c=new ja;r===1?i=Ue+Lt:r===-1&&(i=-Ue-Lt);for(var l=0,f=t.length;l<f;++l)if(d=(h=t[l]).length)for(var h,d,p=h[d-1],m=qp(p),g=p[1]/2+p_,y=Ft(g),_=jt(g),b=0;b<d;++b,m=v,y=A,_=T,p=x){var x=h[b],v=qp(x),w=x[1]/2+p_,A=Ft(w),T=jt(w),C=v-m,L=C>=0?1:-1,O=L*C,k=O>qt,N=y*A;if(c.add(ms(N*L*Ft(O),_*T+N*jt(O))),a+=k?C+L*li:C,k^m>=n^v>=n){var B=nh(Jo(p),Jo(x));pm(B);var q=nh(s,B);pm(q);var E=(k^C>=0?-1:1)*Li(q[2]);(i>E||i===E&&(B[0]||B[1]))&&(u+=k^C>=0?1:-1)}}return(a<-Lt||a<Lt&&c<-pS)^u&1}function vS(t,e,n,i){return function(r){var s=e(r),a=bS(),u=e(a),c=!1,l,f,h,d={point:p,lineStart:g,lineEnd:y,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=x,f=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=g,d.lineEnd=y,f=kx(f);var v=GF(l,i);f.length?(c||(r.polygonStart(),c=!0),_S(f,XF,v,n,r)):v&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),f=l=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(v,w){t(v,w)&&r.point(v,w)}function m(v,w){s.point(v,w)}function g(){d.point=m,s.lineStart()}function y(){d.point=p,s.lineEnd()}function _(v,w){h.push([v,w]),u.point(v,w)}function b(){u.lineStart(),h=[]}function x(){_(h[0][0],h[0][1]),u.lineEnd();var v=u.clean(),w=a.result(),A,T=w.length,C,L,O;if(h.pop(),l.push(h),h=null,!!T){if(v&1){if(L=w[0],(C=L.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),A=0;A<C;++A)r.point((O=L[A])[0],O[1]);r.lineEnd()}return}T>1&&v&2&&w.push(w.pop().concat(w.shift())),f.push(w.filter(KF))}}return d}}function KF(t){return t.length>1}function XF(t,e){return((t=t.x)[0]<0?t[1]-Ue-Lt:Ue-t[1])-((e=e.x)[0]<0?e[1]-Ue-Lt:Ue-e[1])}const S_=vS(function(){return!0},JF,ZF,[-qt,-Ue]);function JF(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,a){var u=s>0?qt:-qt,c=de(s-e);de(c-qt)<Lt?(t.point(e,n=(n+a)/2>0?Ue:-Ue),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(s,n),r=0):i!==u&&c>=qt&&(de(e-i)<Lt&&(e-=i*Lt),de(s-u)<Lt&&(s-=u*Lt),n=QF(e,n,s,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(u,n),r=0),t.point(e=s,n=a),i=u},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function QF(t,e,n,i){var r,s,a=Ft(t-n);return de(a)>Lt?Su((Ft(e)*(s=jt(i))*Ft(n)-Ft(i)*(r=jt(e))*Ft(t))/(r*s*a)):(e+i)/2}function ZF(t,e,n,i){var r;if(t==null)r=n*Ue,i.point(-qt,r),i.point(0,r),i.point(qt,r),i.point(qt,0),i.point(qt,-r),i.point(0,-r),i.point(-qt,-r),i.point(-qt,0),i.point(-qt,r);else if(de(t[0]-e[0])>Lt){var s=t[0]<e[0]?qt:-qt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function tD(t){var e=jt(t),n=6*Le,i=e>0,r=de(e)>Lt;function s(f,h,d,p){YF(p,t,n,d,f,h)}function a(f,h){return jt(f)*jt(h)>e}function u(f){var h,d,p,m,g;return{lineStart:function(){m=p=!1,g=1},point:function(y,_){var b=[y,_],x,v=a(y,_),w=i?v?0:l(y,_):v?l(y+(y<0?qt:-qt),_):0;if(!h&&(m=p=v)&&f.lineStart(),v!==p&&(x=c(h,b),(!x||wf(h,x)||wf(b,x))&&(b[2]=1)),v!==p)g=0,v?(f.lineStart(),x=c(b,h),f.point(x[0],x[1])):(x=c(h,b),f.point(x[0],x[1],2),f.lineEnd()),h=x;else if(r&&h&&i^v){var A;!(w&d)&&(A=c(b,h,!0))&&(g=0,i?(f.lineStart(),f.point(A[0][0],A[0][1]),f.point(A[1][0],A[1][1]),f.lineEnd()):(f.point(A[1][0],A[1][1]),f.lineEnd(),f.lineStart(),f.point(A[0][0],A[0][1],3)))}v&&(!h||!wf(h,b))&&f.point(b[0],b[1]),h=b,p=v,d=w},lineEnd:function(){p&&f.lineEnd(),h=null},clean:function(){return g|(m&&p)<<1}}}function c(f,h,d){var p=Jo(f),m=Jo(h),g=[1,0,0],y=nh(p,m),_=Vl(y,y),b=y[0],x=_-b*b;if(!x)return!d&&f;var v=e*_/x,w=-e*b/x,A=nh(g,y),T=$l(g,v),C=$l(y,w);zp(T,C);var L=A,O=Vl(T,L),k=Vl(L,L),N=O*O-k*(Vl(T,T)-1);if(!(N<0)){var B=Kn(N),q=$l(L,(-O-B)/k);if(zp(q,T),q=dm(q),!d)return q;var E=f[0],j=h[0],F=f[1],U=h[1],$;j<E&&($=E,E=j,j=$);var X=j-E,K=de(X-qt)<Lt,J=K||X<Lt;if(!K&&U<F&&($=F,F=U,U=$),J?K?F+U>0^q[1]<(de(q[0]-E)<Lt?F:U):F<=q[1]&&q[1]<=U:X>qt^(E<=q[0]&&q[0]<=j)){var ot=$l(L,(-O+B)/k);return zp(ot,T),[q,dm(ot)]}}}function l(f,h){var d=i?t:qt-t,p=0;return f<-d?p|=1:f>d&&(p|=2),h<-d?p|=4:h>d&&(p|=8),p}return vS(a,u,s,i?[0,-t]:[-qt,t-qt])}function eD(t,e,n,i,r,s){var a=t[0],u=t[1],c=e[0],l=e[1],f=0,h=1,d=c-a,p=l-u,m;if(m=n-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=r-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=i-u,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>f&&(f=m)}if(m=s-u,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<h&&(h=m)}return f>0&&(t[0]=a+f*d,t[1]=u+f*p),h<1&&(e[0]=a+h*d,e[1]=u+h*p),!0}}}}}var ic=1e9,zl=-ic;function wS(t,e,n,i){function r(l,f){return t<=l&&l<=n&&e<=f&&f<=i}function s(l,f,h,d){var p=0,m=0;if(l==null||(p=a(l,h))!==(m=a(f,h))||c(l,f)<0^h>0)do d.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+h+4)%4)!==m);else d.point(f[0],f[1])}function a(l,f){return de(l[0]-t)<Lt?f>0?0:3:de(l[0]-n)<Lt?f>0?2:1:de(l[1]-e)<Lt?f>0?1:0:f>0?3:2}function u(l,f){return c(l.x,f.x)}function c(l,f){var h=a(l,1),d=a(f,1);return h!==d?h-d:h===0?f[1]-l[1]:h===1?l[0]-f[0]:h===2?l[1]-f[1]:f[0]-l[0]}return function(l){var f=l,h=bS(),d,p,m,g,y,_,b,x,v,w,A,T={point:C,lineStart:N,lineEnd:B,polygonStart:O,polygonEnd:k};function C(E,j){r(E,j)&&f.point(E,j)}function L(){for(var E=0,j=0,F=p.length;j<F;++j)for(var U=p[j],$=1,X=U.length,K=U[0],J,ot,Pt=K[0],dt=K[1];$<X;++$)J=Pt,ot=dt,K=U[$],Pt=K[0],dt=K[1],ot<=i?dt>i&&(Pt-J)*(i-ot)>(dt-ot)*(t-J)&&++E:dt<=i&&(Pt-J)*(i-ot)<(dt-ot)*(t-J)&&--E;return E}function O(){f=h,d=[],p=[],A=!0}function k(){var E=L(),j=A&&E,F=(d=kx(d)).length;(j||F)&&(l.polygonStart(),j&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),F&&_S(d,u,E,s,l),l.polygonEnd()),f=l,d=p=m=null}function N(){T.point=q,p&&p.push(m=[]),w=!0,v=!1,b=x=NaN}function B(){d&&(q(g,y),_&&v&&h.rejoin(),d.push(h.result())),T.point=C,v&&f.lineEnd()}function q(E,j){var F=r(E,j);if(p&&m.push([E,j]),w)g=E,y=j,_=F,w=!1,F&&(f.lineStart(),f.point(E,j));else if(F&&v)f.point(E,j);else{var U=[b=Math.max(zl,Math.min(ic,b)),x=Math.max(zl,Math.min(ic,x))],$=[E=Math.max(zl,Math.min(ic,E)),j=Math.max(zl,Math.min(ic,j))];eD(U,$,t,e,n,i)?(v||(f.lineStart(),f.point(U[0],U[1])),f.point($[0],$[1]),F||f.lineEnd(),A=!1):F&&(f.lineStart(),f.point(E,j),A=!1)}b=E,x=j,v=F}return T}}const ym=t=>t;var Wp=new ja,bm=new ja,xS,SS,_m,vm,Bs={point:Mi,lineStart:Mi,lineEnd:Mi,polygonStart:function(){Bs.lineStart=nD,Bs.lineEnd=rD},polygonEnd:function(){Bs.lineStart=Bs.lineEnd=Bs.point=Mi,Wp.add(de(bm)),bm=new ja},result:function(){var t=Wp/2;return Wp=new ja,t}};function nD(){Bs.point=iD}function iD(t,e){Bs.point=ES,xS=_m=t,SS=vm=e}function ES(t,e){bm.add(vm*t-_m*e),_m=t,vm=e}function rD(){ES(xS,SS)}const E_=Bs;var Qo=1/0,ih=Qo,Nc=-Qo,rh=Nc,sD={point:aD,lineStart:Mi,lineEnd:Mi,polygonStart:Mi,polygonEnd:Mi,result:function(){var t=[[Qo,ih],[Nc,rh]];return Nc=rh=-(ih=Qo=1/0),t}};function aD(t,e){t<Qo&&(Qo=t),t>Nc&&(Nc=t),e<ih&&(ih=e),e>rh&&(rh=e)}const sh=sD;var wm=0,xm=0,rc=0,ah=0,oh=0,ko=0,Sm=0,Em=0,sc=0,AS,IS,gr,yr,Yi={point:Ga,lineStart:A_,lineEnd:I_,polygonStart:function(){Yi.lineStart=cD,Yi.lineEnd=lD},polygonEnd:function(){Yi.point=Ga,Yi.lineStart=A_,Yi.lineEnd=I_},result:function(){var t=sc?[Sm/sc,Em/sc]:ko?[ah/ko,oh/ko]:rc?[wm/rc,xm/rc]:[NaN,NaN];return wm=xm=rc=ah=oh=ko=Sm=Em=sc=0,t}};function Ga(t,e){wm+=t,xm+=e,++rc}function A_(){Yi.point=oD}function oD(t,e){Yi.point=uD,Ga(gr=t,yr=e)}function uD(t,e){var n=t-gr,i=e-yr,r=Kn(n*n+i*i);ah+=r*(gr+t)/2,oh+=r*(yr+e)/2,ko+=r,Ga(gr=t,yr=e)}function I_(){Yi.point=Ga}function cD(){Yi.point=fD}function lD(){TS(AS,IS)}function fD(t,e){Yi.point=TS,Ga(AS=gr=t,IS=yr=e)}function TS(t,e){var n=t-gr,i=e-yr,r=Kn(n*n+i*i);ah+=r*(gr+t)/2,oh+=r*(yr+e)/2,ko+=r,r=yr*t-gr*e,Sm+=r*(gr+t),Em+=r*(yr+e),sc+=r*3,Ga(gr=t,yr=e)}const T_=Yi;function kS(t){this._context=t}kS.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,li);break}}},result:Mi};var Am=new ja,Hp,CS,MS,ac,oc,uh={point:Mi,lineStart:function(){uh.point=hD},lineEnd:function(){Hp&&NS(CS,MS),uh.point=Mi},polygonStart:function(){Hp=!0},polygonEnd:function(){Hp=null},result:function(){var t=+Am;return Am=new ja,t}};function hD(t,e){uh.point=NS,CS=ac=t,MS=oc=e}function NS(t,e){ac-=t,oc-=e,Am.add(Kn(ac*ac+oc*oc)),ac=t,oc=e}const k_=uh;let C_,ch,M_,N_;class O_{constructor(e){this._append=e==null?OS:dD(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==M_||this._append!==ch){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,M_=i,ch=this._append,N_=this._,this._=r}this._+=N_;break}}}result(){const e=this._;return this._="",e.length?e:null}}function OS(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dD(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return OS;if(e!==C_){const n=10**e;C_=e,ch=function(r){let s=1;this._+=r[0];for(const a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return ch}function sl(t,e){let n=3,i=4.5,r,s;function a(u){return u&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),vo(u,r(s))),s.result()}return a.area=function(u){return vo(u,r(E_)),E_.result()},a.measure=function(u){return vo(u,r(k_)),k_.result()},a.bounds=function(u){return vo(u,r(sh)),sh.result()},a.centroid=function(u){return vo(u,r(T_)),T_.result()},a.projection=function(u){return arguments.length?(r=u==null?(t=null,ym):(t=u).stream,a):t},a.context=function(u){return arguments.length?(s=u==null?(e=null,new O_(n)):new kS(e=u),typeof i!="function"&&s.pointRadius(i),a):e},a.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(s.pointRadius(+u),+u),a):i},a.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const c=Math.floor(u);if(!(c>=0))throw new RangeError(`invalid digits: ${u}`);n=c}return e===null&&(s=new O_(n)),a},a.projection(t).digits(n).context(e)}function lh(t){return{stream:pd(t)}}function pd(t){return function(e){var n=new Im;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Im(){}Im.prototype={constructor:Im,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Gg(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),vo(n,t.stream(sh)),e(sh.result()),i!=null&&t.clipExtent(i),t}function Kg(t,e,n){return Gg(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),u=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,c=+e[0][1]+(s-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([u,c])},n)}function FS(t,e,n){return Kg(t,[[0,0],e],n)}function DS(t,e,n){return Gg(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,u=-s*i[0][1];t.scale(150*s).translate([a,u])},n)}function RS(t,e,n){return Gg(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],u=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([a,u])},n)}var F_=16,pD=jt(30*Le);function D_(t,e){return+e?gD(t,e):mD(t)}function mD(t){return pd({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function gD(t,e){function n(i,r,s,a,u,c,l,f,h,d,p,m,g,y){var _=l-i,b=f-r,x=_*_+b*b;if(x>4*e&&g--){var v=a+d,w=u+p,A=c+m,T=Kn(v*v+w*w+A*A),C=Li(A/=T),L=de(de(A)-1)<Lt||de(s-h)<Lt?(s+h)/2:ms(w,v),O=t(L,C),k=O[0],N=O[1],B=k-i,q=N-r,E=b*B-_*q;(E*E/x>e||de((_*B+b*q)/x-.5)>.3||a*d+u*p+c*m<pD)&&(n(i,r,s,a,u,c,k,N,L,v/=T,w/=T,A,g,y),y.point(k,N),n(k,N,L,v,w,A,l,f,h,d,p,m,g,y))}}return function(i){var r,s,a,u,c,l,f,h,d,p,m,g,y={point:_,lineStart:b,lineEnd:v,polygonStart:function(){i.polygonStart(),y.lineStart=w},polygonEnd:function(){i.polygonEnd(),y.lineStart=b}};function _(C,L){C=t(C,L),i.point(C[0],C[1])}function b(){h=NaN,y.point=x,i.lineStart()}function x(C,L){var O=Jo([C,L]),k=t(C,L);n(h,d,f,p,m,g,h=k[0],d=k[1],f=C,p=O[0],m=O[1],g=O[2],F_,i),i.point(h,d)}function v(){y.point=_,i.lineEnd()}function w(){b(),y.point=A,y.lineEnd=T}function A(C,L){x(r=C,L),s=h,a=d,u=p,c=m,l=g,y.point=x}function T(){n(h,d,f,p,m,g,s,a,r,u,c,l,F_,i),y.lineEnd=v,v()}return y}}var yD=pd({point:function(t,e){this.stream.point(t*Le,e*Le)}});function bD(t){return pd({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function _D(t,e,n,i,r){function s(a,u){return a*=i,u*=r,[e+t*a,n-t*u]}return s.invert=function(a,u){return[(a-e)/t*i,(n-u)/t*r]},s}function R_(t,e,n,i,r,s){if(!s)return _D(t,e,n,i,r);var a=jt(s),u=Ft(s),c=a*t,l=u*t,f=a/t,h=u/t,d=(u*n-a*e)/t,p=(u*e+a*n)/t;function m(g,y){return g*=i,y*=r,[c*g-l*y+e,n-l*g-c*y]}return m.invert=function(g,y){return[i*(f*g-h*y+d),r*(p-h*g-f*y)]},m}function la(t){return LS(function(){return t})()}function LS(t){var e,n=150,i=480,r=250,s=0,a=0,u=0,c=0,l=0,f,h=0,d=1,p=1,m=null,g=S_,y=null,_,b,x,v=ym,w=.5,A,T,C,L,O;function k(E){return C(E[0]*Le,E[1]*Le)}function N(E){return E=C.invert(E[0],E[1]),E&&[E[0]*Tn,E[1]*Tn]}k.stream=function(E){return L&&O===E?L:L=yD(bD(f)(g(A(v(O=E)))))},k.preclip=function(E){return arguments.length?(g=E,m=void 0,q()):g},k.postclip=function(E){return arguments.length?(v=E,y=_=b=x=null,q()):v},k.clipAngle=function(E){return arguments.length?(g=+E?tD(m=E*Le):(m=null,S_),q()):m*Tn},k.clipExtent=function(E){return arguments.length?(v=E==null?(y=_=b=x=null,ym):wS(y=+E[0][0],_=+E[0][1],b=+E[1][0],x=+E[1][1]),q()):y==null?null:[[y,_],[b,x]]},k.scale=function(E){return arguments.length?(n=+E,B()):n},k.translate=function(E){return arguments.length?(i=+E[0],r=+E[1],B()):[i,r]},k.center=function(E){return arguments.length?(s=E[0]%360*Le,a=E[1]%360*Le,B()):[s*Tn,a*Tn]},k.rotate=function(E){return arguments.length?(u=E[0]%360*Le,c=E[1]%360*Le,l=E.length>2?E[2]%360*Le:0,B()):[u*Tn,c*Tn,l*Tn]},k.angle=function(E){return arguments.length?(h=E%360*Le,B()):h*Tn},k.reflectX=function(E){return arguments.length?(d=E?-1:1,B()):d<0},k.reflectY=function(E){return arguments.length?(p=E?-1:1,B()):p<0},k.precision=function(E){return arguments.length?(A=D_(T,w=E*E),q()):Kn(w)},k.fitExtent=function(E,j){return Kg(k,E,j)},k.fitSize=function(E,j){return FS(k,E,j)},k.fitWidth=function(E,j){return DS(k,E,j)},k.fitHeight=function(E,j){return RS(k,E,j)};function B(){var E=R_(n,0,0,d,p,h).apply(null,e(s,a)),j=R_(n,i-E[0],r-E[1],d,p,h);return f=yS(u,c,l),T=mm(e,j),C=mm(f,T),A=D_(T,w),q()}function q(){return L=O=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&N,B()}}function Xg(t){var e=0,n=qt/3,i=LS(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*Le,n=s[1]*Le):[e*Tn,n*Tn]},r}function vD(t){var e=jt(t);function n(i,r){return[i*e,Ft(r)/e]}return n.invert=function(i,r){return[i/e,Li(r*e)]},n}function wD(t,e){var n=Ft(t),i=(n+Ft(e))/2;if(de(i)<Lt)return vD(t);var r=1+n*(2*i-n),s=Kn(r)/i;function a(u,c){var l=Kn(r-2*i*Ft(c))/i;return[l*Ft(u*=i),s-l*jt(u)]}return a.invert=function(u,c){var l=s-c,f=ms(u,de(l))*Ci(l);return l*i<0&&(f-=qt*Ci(u)*Ci(l)),[f/i,Li((r-(u*u+l*l)*i*i)/(2*i))]},a}function fh(){return Xg(wD).scale(155.424).center([0,33.6442])}function BS(){return fh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xD(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function SD(){var t,e,n=BS(),i,r=fh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=fh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,c,l={point:function(d,p){c=[d,p]}};function f(d){var p=d[0],m=d[1];return c=null,i.point(p,m),c||(s.point(p,m),c)||(u.point(p,m),c)}f.invert=function(d){var p=n.scale(),m=n.translate(),g=(d[0]-m[0])/p,y=(d[1]-m[1])/p;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?r:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(d)},f.stream=function(d){return t&&e===d?t:t=xD([n.stream(e=d),r.stream(d),a.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),r.precision(d),a.precision(d),h()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),r.scale(d*.35),a.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),m=+d[0],g=+d[1];return i=n.translate(d).clipExtent([[m-.455*p,g-.238*p],[m+.455*p,g+.238*p]]).stream(l),s=r.translate([m-.307*p,g+.201*p]).clipExtent([[m-.425*p+Lt,g+.12*p+Lt],[m-.214*p-Lt,g+.234*p-Lt]]).stream(l),u=a.translate([m-.205*p,g+.212*p]).clipExtent([[m-.214*p+Lt,g+.166*p+Lt],[m-.115*p-Lt,g+.234*p-Lt]]).stream(l),h()},f.fitExtent=function(d,p){return Kg(f,d,p)},f.fitSize=function(d,p){return FS(f,d,p)},f.fitWidth=function(d,p){return DS(f,d,p)},f.fitHeight=function(d,p){return RS(f,d,p)};function h(){return t=e=null,f}return f.scale(1070)}function PS(t){return function(e,n){var i=jt(e),r=jt(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Ft(e),s*Ft(n)]}}function al(t){return function(e,n){var i=Kn(e*e+n*n),r=t(i),s=Ft(r),a=jt(r);return[ms(e*s,i*a),Li(i&&n*s/i)]}}var US=PS(function(t){return Kn(2/(1+t))});US.invert=al(function(t){return 2*Li(t/2)});function ED(){return la(US).scale(124.75).clipAngle(180-.001)}var VS=PS(function(t){return(t=gS(t))&&t/Ft(t)});VS.invert=al(function(t){return t});function AD(){return la(VS).scale(79.4188).clipAngle(180-.001)}function md(t,e){return[t,th(Yg((Ue+e)/2))]}md.invert=function(t,e){return[t,2*Su(mS(e))-Ue]};function ID(){return $S(md).scale(961/li)}function $S(t){var e=la(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,a=null,u,c,l;e.scale=function(h){return arguments.length?(i(h),f()):i()},e.translate=function(h){return arguments.length?(r(h),f()):r()},e.center=function(h){return arguments.length?(n(h),f()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=u=c=l=null:(a=+h[0][0],u=+h[0][1],c=+h[1][0],l=+h[1][1]),f()):a==null?null:[[a,u],[c,l]]};function f(){var h=qt*i(),d=e(HF(e.rotate()).invert([0,0]));return s(a==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:t===md?[[Math.max(d[0]-h,a),u],[Math.min(d[0]+h,c),l]]:[[a,Math.max(d[1]-h,u)],[c,Math.min(d[1]+h,l)]])}return f()}function ql(t){return Yg((Ue+t)/2)}function TD(t,e){var n=jt(t),i=t===e?Ft(t):th(n/jt(e))/th(ql(e)/ql(t)),r=n*jp(ql(t),i)/i;if(!i)return md;function s(a,u){r>0?u<-Ue+Lt&&(u=-Ue+Lt):u>Ue-Lt&&(u=Ue-Lt);var c=r/jp(ql(u),i);return[c*Ft(i*a),r-c*jt(i*a)]}return s.invert=function(a,u){var c=r-u,l=Ci(i)*Kn(a*a+c*c),f=ms(a,de(c))*Ci(c);return c*i<0&&(f-=qt*Ci(a)*Ci(c)),[f/i,2*Su(jp(r/l,1/i))-Ue]},s}function kD(){return Xg(TD).scale(109.5).parallels([30,30])}function hh(t,e){return[t,e]}hh.invert=hh;function CD(){return la(hh).scale(152.63)}function MD(t,e){var n=jt(t),i=t===e?Ft(t):(n-jt(e))/(e-t),r=n/i+t;if(de(i)<Lt)return hh;function s(a,u){var c=r-u,l=i*a;return[c*Ft(l),r-c*jt(l)]}return s.invert=function(a,u){var c=r-u,l=ms(a,de(c))*Ci(c);return c*i<0&&(l-=qt*Ci(a)*Ci(c)),[l/i,r-Ci(i)*Kn(a*a+c*c)]},s}function ND(){return Xg(MD).scale(131.154).center([0,13.9389])}var dc=1.340264,pc=-.081106,mc=893e-6,gc=.003796,dh=Kn(3)/2,OD=12;function jS(t,e){var n=Li(dh*Ft(e)),i=n*n,r=i*i*i;return[t*jt(n)/(dh*(dc+3*pc*i+r*(7*mc+9*gc*i))),n*(dc+pc*i+r*(mc+gc*i))]}jS.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,a,u,c;s<OD&&(u=n*(dc+pc*i+r*(mc+gc*i))-e,c=dc+3*pc*i+r*(7*mc+9*gc*i),n-=a=u/c,i=n*n,r=i*i*i,!(de(a)<pS));++s);return[dh*t*(dc+3*pc*i+r*(7*mc+9*gc*i))/jt(n),Li(Ft(n)/dh)]};function FD(){return la(jS).scale(177.158)}function zS(t,e){var n=jt(e),i=jt(t)*n;return[n*Ft(t)/i,Ft(e)/i]}zS.invert=al(Su);function DD(){return la(zS).scale(144.049).clipAngle(60)}function qS(t,e){return[jt(e)*Ft(t),Ft(e)]}qS.invert=al(Li);function RD(){return la(qS).scale(249.5).clipAngle(90+Lt)}function WS(t,e){var n=jt(e),i=1+jt(t)*n;return[n*Ft(t)/i,Ft(e)/i]}WS.invert=al(function(t){return 2*Su(t)});function LD(){return la(WS).scale(250).clipAngle(142)}function HS(t,e){return[th(Yg((Ue+e)/2)),-t]}HS.invert=function(t,e){return[-e,2*Su(mS(t))-Ue]};function BD(){var t=$S(HS),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function gd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Tm=Symbol("implicit");function Jg(){var t=new za,e=[],n=[],i=Tm;function r(s){let a=t.get(s);if(a===void 0){if(i!==Tm)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new za;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Jg(e,n).unknown(i)},$r.apply(r,arguments),r}function yd(){var t=Jg().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,u=!1,c=0,l=0,f=.5;delete t.unknown;function h(){var d=e().length,p=r<i,m=p?r:i,g=p?i:r;s=(g-m)/Math.max(1,d-c+l*2),u&&(s=Math.floor(s)),m+=(g-m-s*(d-c))*f,a=s*(1-c),u&&(m=Math.round(m),a=Math.round(a));var y=X0(d).map(function(_){return m+s*_});return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([i,r]=d,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(d){return[i,r]=d,i=+i,r=+r,u=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(d){return arguments.length?(u=!!d,h()):u},t.padding=function(d){return arguments.length?(c=Math.min(1,l=+d),h()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),h()):c},t.paddingOuter=function(d){return arguments.length?(l=+d,h()):l},t.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),h()):f},t.copy=function(){return yd(e(),[i,r]).round(u).paddingInner(c).paddingOuter(l).align(f)},$r.apply(h(),arguments)}function YS(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return YS(e())},t}function PD(){return YS(yd.apply(null,arguments).paddingInner(1))}function UD(t){return function(){return t}}function km(t){return+t}var L_=[0,1];function Ni(t){return t}function Cm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:UD(isNaN(e)?NaN:.5)}function VD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function $D(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Cm(r,i),s=n(a,s)):(i=Cm(i,r),s=n(s,a)),function(u){return s(i(u))}}function jD(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Cm(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(u){var c=kg(t,u,1,i)-1;return s[c](r[c](u))}}function ol(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bd(){var t=L_,e=L_,n=wu,i,r,s,a=Ni,u,c,l;function f(){var d=Math.min(t.length,e.length);return a!==Ni&&(a=VD(t[0],t[d-1])),u=d>2?jD:$D,c=l=null,h}function h(d){return d==null||isNaN(d=+d)?s:(c||(c=u(t.map(i),e,n)))(i(a(d)))}return h.invert=function(d){return a(r((l||(l=u(e,t.map(i),pn)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,km),f()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),f()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=Vg,f()},h.clamp=function(d){return arguments.length?(a=d?!0:Ni,f()):a!==Ni},h.interpolate=function(d){return arguments.length?(n=d,f()):n},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,p){return i=d,r=p,f()}}function GS(){return bd()(Ni,Ni)}function zD(t,e,n,i){var r=G0(t,e,n),s;switch(i=Mc(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=qF(r,a))&&(i.precision=s),dS(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=WF(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=zF(r))&&(i.precision=s-(i.type==="%")*2);break}}return xu(i)}function ul(t){var e=t.domain;return t.ticks=function(n){var i=e();return jf(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return zD(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],u=i[s],c,l,f=10;for(u<a&&(l=a,a=u,u=l,l=r,r=s,s=l);f-- >0;){if(l=Y0(a,u,n),l===c)return i[r]=a,i[s]=u,e(i);if(l>0)a=Math.floor(a/l)*l,u=Math.ceil(u/l)*l;else if(l<0)a=Math.ceil(a*l)/l,u=Math.floor(u*l)/l;else break;c=l}return t},t}function Qg(){var t=GS();return t.copy=function(){return ol(t,Qg())},$r.apply(t,arguments),ul(t)}function KS(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,km),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return KS(t).unknown(e)},t=arguments.length?Array.from(t,km):[0,1],ul(n)}function XS(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function B_(t){return Math.log(t)}function P_(t){return Math.exp(t)}function qD(t){return-Math.log(-t)}function WD(t){return-Math.exp(-t)}function HD(t){return isFinite(t)?+("1e"+t):t<0?0:t}function YD(t){return t===10?HD:t===Math.E?Math.exp:e=>Math.pow(t,e)}function GD(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function U_(t){return(e,n)=>-t(-e,n)}function JS(t){const e=t(B_,P_),n=e.domain;let i=10,r,s;function a(){return r=GD(i),s=YD(i),n()[0]<0?(r=U_(r),s=U_(s),t(qD,WD)):t(B_,P_),e}return e.base=function(u){return arguments.length?(i=+u,a()):i},e.domain=function(u){return arguments.length?(n(u),a()):n()},e.ticks=u=>{const c=n();let l=c[0],f=c[c.length-1];const h=f<l;h&&([l,f]=[f,l]);let d=r(l),p=r(f),m,g;const y=u==null?10:+u;let _=[];if(!(i%1)&&p-d<y){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(m=1;m<i;++m)if(g=d<0?m/s(-d):m*s(d),!(g<l)){if(g>f)break;_.push(g)}}else for(;d<=p;++d)for(m=i-1;m>=1;--m)if(g=d>0?m/s(-d):m*s(d),!(g<l)){if(g>f)break;_.push(g)}_.length*2<y&&(_=jf(l,f,y))}else _=jf(d,p,Math.min(p-d,y)).map(s);return h?_.reverse():_},e.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Mc(c)).precision==null&&(c.trim=!0),c=xu(c)),u===1/0)return c;const l=Math.max(1,i*u/e.ticks().length);return f=>{let h=f/s(Math.round(r(f)));return h*i<i-.5&&(h*=i),h<=l?c(f):""}},e.nice=()=>n(XS(n(),{floor:u=>s(Math.floor(r(u))),ceil:u=>s(Math.ceil(r(u)))})),e}function QS(){const t=JS(bd()).domain([1,10]);return t.copy=()=>ol(t,QS()).base(t.base()),$r.apply(t,arguments),t}function V_(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $_(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ZS(t){var e=1,n=t(V_(e),$_(e));return n.constant=function(i){return arguments.length?t(V_(e=+i),$_(e)):e},ul(n)}function t3(){var t=ZS(bd());return t.copy=function(){return ol(t,t3()).constant(t.constant())},$r.apply(t,arguments)}function j_(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function KD(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function XD(t){return t<0?-t*t:t*t}function e3(t){var e=t(Ni,Ni),n=1;function i(){return n===1?t(Ni,Ni):n===.5?t(KD,XD):t(j_(n),j_(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ul(e)}function n3(){var t=e3(bd());return t.copy=function(){return ol(t,n3()).exponent(t.exponent())},$r.apply(t,arguments),t}function i3(){var t=[],e=[],n=[],i;function r(){var a=0,u=Math.max(1,e.length);for(n=new Array(u-1);++a<u;)n[a-1]=SN(t,a/u);return s}function s(a){return a==null||isNaN(a=+a)?i:e[kg(n,a)]}return s.invertExtent=function(a){var u=e.indexOf(a);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let u of a)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Gn),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return i3().domain(t).range(e).unknown(i)},$r.apply(s,arguments)}function r3(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[kg(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return r3().domain(t).range(e).unknown(n)},$r.apply(r,arguments)}const Yp=new Date,Gp=new Date;function Ze(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),u=r.ceil(s);return s-a<u-s?a:u},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,u)=>{const c=[];if(s=r.ceil(s),u=u==null?1:Math.floor(u),!(s<a)||!(u>0))return c;let l;do c.push(l=new Date(+s)),e(s,u),t(s);while(l<s&&s<a);return c},r.filter=s=>Ze(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;e(a,-1),!s(a););else for(;--u>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(Yp.setTime(+s),Gp.setTime(+a),t(Yp),t(Gp),Math.floor(n(Yp,Gp))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const ph=Ze(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ph.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ze(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ph);ph.range;const as=1e3,Oi=as*60,os=Oi*60,gs=os*24,Zg=gs*7,z_=gs*30,Kp=gs*365,us=Ze(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*as)},(t,e)=>(e-t)/as,t=>t.getUTCSeconds());us.range;const _d=Ze(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getMinutes());_d.range;const vd=Ze(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getUTCMinutes());vd.range;const wd=Ze(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as-t.getMinutes()*Oi)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getHours());wd.range;const xd=Ze(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getUTCHours());xd.range;const Eu=Ze(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oi)/gs,t=>t.getDate()-1);Eu.range;const Sd=Ze(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gs,t=>t.getUTCDate()-1);Sd.range;const ty=Ze(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gs,t=>Math.floor(t/gs));ty.range;function no(t){return Ze(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Oi)/Zg)}const Zo=no(0),Oc=no(1),s3=no(2),a3=no(3),Ka=no(4),o3=no(5),u3=no(6);Zo.range;Oc.range;s3.range;a3.range;Ka.range;o3.range;u3.range;function io(t){return Ze(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Zg)}const tu=io(0),Fc=io(1),c3=io(2),l3=io(3),Xa=io(4),f3=io(5),h3=io(6);tu.range;Fc.range;c3.range;l3.range;Xa.range;f3.range;h3.range;const Ed=Ze(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ed.range;const Ad=Ze(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ad.range;const Qi=Ze(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Qi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ze(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Qi.range;const Zi=Ze(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ze(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Zi.range;function d3(t,e,n,i,r,s){const a=[[us,1,as],[us,5,5*as],[us,15,15*as],[us,30,30*as],[s,1,Oi],[s,5,5*Oi],[s,15,15*Oi],[s,30,30*Oi],[r,1,os],[r,3,3*os],[r,6,6*os],[r,12,12*os],[i,1,gs],[i,2,2*gs],[n,1,Zg],[e,1,z_],[e,3,3*z_],[t,1,Kp]];function u(l,f,h){const d=f<l;d&&([l,f]=[f,l]);const p=h&&typeof h.range=="function"?h:c(l,f,h),m=p?p.range(l,+f+1):[];return d?m.reverse():m}function c(l,f,h){const d=Math.abs(f-l)/h,p=Tg(([,,y])=>y).right(a,d);if(p===a.length)return t.every(G0(l/Kp,f/Kp,h));if(p===0)return ph.every(Math.max(G0(l,f,h),1));const[m,g]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return m.every(g)}return[u,c]}const[JD,QD]=d3(Zi,Ad,tu,ty,xd,vd),[ZD,tR]=d3(Qi,Ed,Zo,Eu,wd,_d);function Xp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Jp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wu(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function eR(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,l=Hu(r),f=Yu(r),h=Hu(s),d=Yu(s),p=Hu(a),m=Yu(a),g=Hu(u),y=Yu(u),_=Hu(c),b=Yu(c),x={a:F,A:U,b:$,B:X,c:null,d:K_,e:K_,f:ER,g:DR,G:LR,H:wR,I:xR,j:SR,L:p3,m:AR,M:IR,p:K,q:J,Q:Q_,s:Z_,S:TR,u:kR,U:CR,V:MR,w:NR,W:OR,x:null,X:null,y:FR,Y:RR,Z:BR,"%":J_},v={a:ot,A:Pt,b:dt,B:ct,c:null,d:X_,e:X_,f:$R,g:JR,G:ZR,H:PR,I:UR,j:VR,L:g3,m:jR,M:zR,p:tt,q:ut,Q:Q_,s:Z_,S:qR,u:WR,U:HR,V:YR,w:GR,W:KR,x:null,X:null,y:XR,Y:QR,Z:tL,"%":J_},w={a:O,A:k,b:N,B,c:q,d:Y_,e:Y_,f:yR,g:H_,G:W_,H:G_,I:G_,j:dR,L:gR,m:hR,M:pR,p:L,q:fR,Q:_R,s:vR,S:mR,u:aR,U:oR,V:uR,w:sR,W:cR,x:E,X:j,y:H_,Y:W_,Z:lR,"%":bR};x.x=A(n,x),x.X=A(i,x),x.c=A(e,x),v.x=A(n,v),v.X=A(i,v),v.c=A(e,v);function A(M,W){return function(G){var P=[],et=-1,pt=0,bt=M.length,mt,Y,xt;for(G instanceof Date||(G=new Date(+G));++et<bt;)M.charCodeAt(et)===37&&(P.push(M.slice(pt,et)),(Y=q_[mt=M.charAt(++et)])!=null?mt=M.charAt(++et):Y=mt==="e"?" ":"0",(xt=W[mt])&&(mt=xt(G,Y)),P.push(mt),pt=et+1);return P.push(M.slice(pt,et)),P.join("")}}function T(M,W){return function(G){var P=Wu(1900,void 0,1),et=C(P,M,G+="",0),pt,bt;if(et!=G.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(W&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(pt=Jp(Wu(P.y,0,1)),bt=pt.getUTCDay(),pt=bt>4||bt===0?Fc.ceil(pt):Fc(pt),pt=Sd.offset(pt,(P.V-1)*7),P.y=pt.getUTCFullYear(),P.m=pt.getUTCMonth(),P.d=pt.getUTCDate()+(P.w+6)%7):(pt=Xp(Wu(P.y,0,1)),bt=pt.getDay(),pt=bt>4||bt===0?Oc.ceil(pt):Oc(pt),pt=Eu.offset(pt,(P.V-1)*7),P.y=pt.getFullYear(),P.m=pt.getMonth(),P.d=pt.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),bt="Z"in P?Jp(Wu(P.y,0,1)).getUTCDay():Xp(Wu(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(bt+5)%7:P.w+P.U*7-(bt+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,Jp(P)):Xp(P)}}function C(M,W,G,P){for(var et=0,pt=W.length,bt=G.length,mt,Y;et<pt;){if(P>=bt)return-1;if(mt=W.charCodeAt(et++),mt===37){if(mt=W.charAt(et++),Y=w[mt in q_?W.charAt(et++):mt],!Y||(P=Y(M,G,P))<0)return-1}else if(mt!=G.charCodeAt(P++))return-1}return P}function L(M,W,G){var P=l.exec(W.slice(G));return P?(M.p=f.get(P[0].toLowerCase()),G+P[0].length):-1}function O(M,W,G){var P=p.exec(W.slice(G));return P?(M.w=m.get(P[0].toLowerCase()),G+P[0].length):-1}function k(M,W,G){var P=h.exec(W.slice(G));return P?(M.w=d.get(P[0].toLowerCase()),G+P[0].length):-1}function N(M,W,G){var P=_.exec(W.slice(G));return P?(M.m=b.get(P[0].toLowerCase()),G+P[0].length):-1}function B(M,W,G){var P=g.exec(W.slice(G));return P?(M.m=y.get(P[0].toLowerCase()),G+P[0].length):-1}function q(M,W,G){return C(M,e,W,G)}function E(M,W,G){return C(M,n,W,G)}function j(M,W,G){return C(M,i,W,G)}function F(M){return a[M.getDay()]}function U(M){return s[M.getDay()]}function $(M){return c[M.getMonth()]}function X(M){return u[M.getMonth()]}function K(M){return r[+(M.getHours()>=12)]}function J(M){return 1+~~(M.getMonth()/3)}function ot(M){return a[M.getUTCDay()]}function Pt(M){return s[M.getUTCDay()]}function dt(M){return c[M.getUTCMonth()]}function ct(M){return u[M.getUTCMonth()]}function tt(M){return r[+(M.getUTCHours()>=12)]}function ut(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var W=A(M+="",x);return W.toString=function(){return M},W},parse:function(M){var W=T(M+="",!1);return W.toString=function(){return M},W},utcFormat:function(M){var W=A(M+="",v);return W.toString=function(){return M},W},utcParse:function(M){var W=T(M+="",!0);return W.toString=function(){return M},W}}}var q_={"-":"",_:" ",0:"0"},on=/^\s*\d+/,nR=/^%/,iR=/[\\^$*+?|[\]().{}]/g;function ue(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function rR(t){return t.replace(iR,"\\$&")}function Hu(t){return new RegExp("^(?:"+t.map(rR).join("|")+")","i")}function Yu(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function sR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function aR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function oR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function uR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function cR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function W_(t,e,n){var i=on.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function H_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function lR(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function fR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function hR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Y_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function dR(t,e,n){var i=on.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function G_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function pR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function mR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function gR(t,e,n){var i=on.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function yR(t,e,n){var i=on.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function bR(t,e,n){var i=nR.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function _R(t,e,n){var i=on.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function vR(t,e,n){var i=on.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function K_(t,e){return ue(t.getDate(),e,2)}function wR(t,e){return ue(t.getHours(),e,2)}function xR(t,e){return ue(t.getHours()%12||12,e,2)}function SR(t,e){return ue(1+Eu.count(Qi(t),t),e,3)}function p3(t,e){return ue(t.getMilliseconds(),e,3)}function ER(t,e){return p3(t,e)+"000"}function AR(t,e){return ue(t.getMonth()+1,e,2)}function IR(t,e){return ue(t.getMinutes(),e,2)}function TR(t,e){return ue(t.getSeconds(),e,2)}function kR(t){var e=t.getDay();return e===0?7:e}function CR(t,e){return ue(Zo.count(Qi(t)-1,t),e,2)}function m3(t){var e=t.getDay();return e>=4||e===0?Ka(t):Ka.ceil(t)}function MR(t,e){return t=m3(t),ue(Ka.count(Qi(t),t)+(Qi(t).getDay()===4),e,2)}function NR(t){return t.getDay()}function OR(t,e){return ue(Oc.count(Qi(t)-1,t),e,2)}function FR(t,e){return ue(t.getFullYear()%100,e,2)}function DR(t,e){return t=m3(t),ue(t.getFullYear()%100,e,2)}function RR(t,e){return ue(t.getFullYear()%1e4,e,4)}function LR(t,e){var n=t.getDay();return t=n>=4||n===0?Ka(t):Ka.ceil(t),ue(t.getFullYear()%1e4,e,4)}function BR(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ue(e/60|0,"0",2)+ue(e%60,"0",2)}function X_(t,e){return ue(t.getUTCDate(),e,2)}function PR(t,e){return ue(t.getUTCHours(),e,2)}function UR(t,e){return ue(t.getUTCHours()%12||12,e,2)}function VR(t,e){return ue(1+Sd.count(Zi(t),t),e,3)}function g3(t,e){return ue(t.getUTCMilliseconds(),e,3)}function $R(t,e){return g3(t,e)+"000"}function jR(t,e){return ue(t.getUTCMonth()+1,e,2)}function zR(t,e){return ue(t.getUTCMinutes(),e,2)}function qR(t,e){return ue(t.getUTCSeconds(),e,2)}function WR(t){var e=t.getUTCDay();return e===0?7:e}function HR(t,e){return ue(tu.count(Zi(t)-1,t),e,2)}function y3(t){var e=t.getUTCDay();return e>=4||e===0?Xa(t):Xa.ceil(t)}function YR(t,e){return t=y3(t),ue(Xa.count(Zi(t),t)+(Zi(t).getUTCDay()===4),e,2)}function GR(t){return t.getUTCDay()}function KR(t,e){return ue(Fc.count(Zi(t)-1,t),e,2)}function XR(t,e){return ue(t.getUTCFullYear()%100,e,2)}function JR(t,e){return t=y3(t),ue(t.getUTCFullYear()%100,e,2)}function QR(t,e){return ue(t.getUTCFullYear()%1e4,e,4)}function ZR(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Xa(t):Xa.ceil(t),ue(t.getUTCFullYear()%1e4,e,4)}function tL(){return"+0000"}function J_(){return"%"}function Q_(t){return+t}function Z_(t){return Math.floor(+t/1e3)}var mo,ey,Dc;eL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eL(t){return mo=eR(t),ey=mo.format,mo.parse,Dc=mo.utcFormat,mo.utcParse,mo}function nL(t){return new Date(t)}function iL(t){return t instanceof Date?+t:+new Date(+t)}function ny(t,e,n,i,r,s,a,u,c,l){var f=GS(),h=f.invert,d=f.domain,p=l(".%L"),m=l(":%S"),g=l("%I:%M"),y=l("%I %p"),_=l("%a %d"),b=l("%b %d"),x=l("%B"),v=l("%Y");function w(A){return(c(A)<A?p:u(A)<A?m:a(A)<A?g:s(A)<A?y:i(A)<A?r(A)<A?_:b:n(A)<A?x:v)(A)}return f.invert=function(A){return new Date(h(A))},f.domain=function(A){return arguments.length?d(Array.from(A,iL)):d().map(nL)},f.ticks=function(A){var T=d();return t(T[0],T[T.length-1],A??10)},f.tickFormat=function(A,T){return T==null?w:l(T)},f.nice=function(A){var T=d();return(!A||typeof A.range!="function")&&(A=e(T[0],T[T.length-1],A??10)),A?d(XS(T,A)):f},f.copy=function(){return ol(f,ny(t,e,n,i,r,s,a,u,c,l))},f}function rL(){return $r.apply(ny(ZD,tR,Qi,Ed,Zo,Eu,wd,_d,us,ey).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sL(){return $r.apply(ny(JD,QD,Zi,Ad,tu,Sd,xd,vd,us,Dc).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Id(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Td(){var t=0,e=.5,n=1,i=1,r,s,a,u,c,l=Ni,f,h=!1,d;function p(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-s)*(i*g<i*s?u:c),l(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,r=f(t=+t),s=f(e=+e),a=f(n=+n),u=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(l=g,p):l};function m(g){return function(y){var _,b,x;return arguments.length?([_,b,x]=y,l=jg(g,[_,b,x]),p):[l(0),l(.5),l(1)]}}return p.range=m(wu),p.rangeRound=m(Vg),p.unknown=function(g){return arguments.length?(d=g,p):d},function(g){return f=g,r=g(t),s=g(e),a=g(n),u=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,p}}function b3(){var t=ul(Td()(Ni));return t.copy=function(){return Id(t,b3())},gd.apply(t,arguments)}function _3(){var t=JS(Td()).domain([.1,1,10]);return t.copy=function(){return Id(t,_3()).base(t.base())},gd.apply(t,arguments)}function v3(){var t=ZS(Td());return t.copy=function(){return Id(t,v3()).constant(t.constant())},gd.apply(t,arguments)}function w3(){var t=e3(Td());return t.copy=function(){return Id(t,w3()).exponent(t.exponent())},gd.apply(t,arguments)}function Bt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const x3=Bt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),aL=Bt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),oL=Bt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),uL=Bt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),cL=Bt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lL=Bt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),fL=Bt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),hL=Bt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),dL=Bt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),pL=Bt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),xe=t=>B9(t[t.length-1]);var S3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Bt);const E3=xe(S3);var A3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Bt);const I3=xe(A3);var T3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Bt);const k3=xe(T3);var C3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Bt);const M3=xe(C3);var Mm=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Bt);const mh=xe(Mm);var N3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Bt);const O3=xe(N3);var Nm=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Bt);const gh=xe(Nm);var F3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Bt);const D3=xe(F3);var R3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Bt);const L3=xe(R3);var B3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Bt);const P3=xe(B3);var U3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Bt);const V3=xe(U3);var $3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Bt);const j3=xe($3);var z3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Bt);const q3=xe(z3);var W3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Bt);const H3=xe(W3);var Y3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Bt);const G3=xe(Y3);var K3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Bt);const X3=xe(K3);var J3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Bt);const Q3=xe(J3);var Z3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Bt);const t6=xe(Z3);var e6=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Bt);const n6=xe(e6);var i6=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Bt);const r6=xe(i6);var s6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Bt);const a6=xe(s6);var o6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Bt);const u6=xe(o6);var c6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Bt);const l6=xe(c6);var f6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Bt);const h6=xe(f6);var d6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Bt);const p6=xe(d6);var m6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Bt);const g6=xe(m6);var y6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Bt);const b6=xe(y6);function _6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const v6=$g(Fr(300,.5,0),Fr(-240,.5,1));var w6=$g(Fr(-100,.75,.35),Fr(80,1.5,.8)),x6=$g(Fr(260,.75,.35),Fr(80,1.5,.8)),Wl=Fr();function S6(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Wl.h=360*t-100,Wl.s=1.5-1.5*e,Wl.l=.8-.9*e,Wl+""}var Hl=Xs(),mL=Math.PI/3,gL=Math.PI*2/3;function E6(t){var e;return t=(.5-t)*Math.PI,Hl.r=255*(e=Math.sin(t))*e,Hl.g=255*(e=Math.sin(t+mL))*e,Hl.b=255*(e=Math.sin(t+gL))*e,Hl+""}function A6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function kd(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const I6=kd(Bt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var T6=kd(Bt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),k6=kd(Bt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),C6=kd(Bt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function go(t){return function(){return t}}const M6=Math.cos,iy=Math.min,yh=Math.sin,tn=Math.sqrt,tv=1e-12,bh=Math.PI,Cd=2*bh;function yL(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new lS(e)}function bL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function N6(t){this._context=t}N6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Md(t){return new N6(t)}function _L(t){return t[0]}function vL(t){return t[1]}function wL(t,e){var n=go(!0),i=null,r=Md,s=null,a=yL(u);t=typeof t=="function"?t:t===void 0?_L:go(t),e=typeof e=="function"?e:e===void 0?vL:go(e);function u(c){var l,f=(c=bL(c)).length,h,d=!1,p;for(i==null&&(s=r(p=a())),l=0;l<=f;++l)!(l<f&&n(h=c[l],l,c))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,l,c),+e(h,l,c));if(p)return s=null,p+""||null}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:go(+c),u):t},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:go(+c),u):e},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:go(!!c),u):n},u.curve=function(c){return arguments.length?(r=c,i!=null&&(s=r(i)),u):r},u.context=function(c){return arguments.length?(c==null?i=s=null:s=r(i=c),u):i},u}class O6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xL(t){return new O6(t,!0)}function SL(t){return new O6(t,!1)}const EL=tn(3),F6={draw(t,e){const n=tn(e+iy(e/28,.75))*.59436,i=n/2,r=i*EL;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Rc={draw(t,e){const n=tn(e/bh);t.moveTo(n,0),t.arc(0,0,n,0,Cd)}},D6={draw(t,e){const n=tn(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},R6=tn(1/3),AL=R6*2,L6={draw(t,e){const n=tn(e/AL),i=n*R6;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},B6={draw(t,e){const n=tn(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},P6={draw(t,e){const n=tn(e-iy(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},U6={draw(t,e){const n=tn(e),i=-n/2;t.rect(i,i,n,n)}},V6={draw(t,e){const n=tn(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},IL=.8908130915292852,$6=yh(bh/10)/yh(7*bh/10),TL=yh(Cd/10)*$6,kL=-M6(Cd/10)*$6,j6={draw(t,e){const n=tn(e*IL),i=TL*n,r=kL*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=Cd*s/5,u=M6(a),c=yh(a);t.lineTo(c*n,-u*n),t.lineTo(u*i-c*r,c*i+u*r)}t.closePath()}},Qp=tn(3),z6={draw(t,e){const n=-tn(e/(Qp*3));t.moveTo(0,n*2),t.lineTo(-Qp*n,-n),t.lineTo(Qp*n,-n),t.closePath()}},CL=tn(3),q6={draw(t,e){const n=tn(e)*.6824,i=n/2,r=n*CL/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},bi=-.5,_i=tn(3)/2,Om=1/tn(12),ML=(Om/2+1)*3,W6={draw(t,e){const n=tn(e/ML),i=n/2,r=n*Om,s=i,a=n*Om+n,u=-s,c=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(u,c),t.lineTo(bi*i-_i*r,_i*i+bi*r),t.lineTo(bi*s-_i*a,_i*s+bi*a),t.lineTo(bi*u-_i*c,_i*u+bi*c),t.lineTo(bi*i+_i*r,bi*r-_i*i),t.lineTo(bi*s+_i*a,bi*a-_i*s),t.lineTo(bi*u+_i*c,bi*c-_i*u),t.closePath()}},H6={draw(t,e){const n=tn(e-iy(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},NL=[Rc,D6,L6,U6,j6,z6,W6],OL=[Rc,P6,H6,q6,F6,V6,B6];function Js(){}function _h(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Nd(t){this._context=t}Nd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_h(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function FL(t){return new Nd(t)}function Y6(t){this._context=t}Y6.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DL(t){return new Y6(t)}function G6(t){this._context=t}G6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:_h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function RL(t){return new G6(t)}function K6(t,e){this._basis=new Nd(t),this._beta=e}K6.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],s=t[n]-i,a=e[n]-r,u=-1,c;++u<=n;)c=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+c*s),this._beta*e[u]+(1-this._beta)*(r+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const LL=function t(e){function n(i){return e===1?new Nd(i):new K6(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function vh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ry(t,e){this._context=t,this._k=(1-e)/6}ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vh(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const BL=function t(e){function n(i){return new ry(i,e)}return n.tension=function(i){return t(+i)},n}(0);function sy(t,e){this._context=t,this._k=(1-e)/6}sy.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const PL=function t(e){function n(i){return new sy(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ay(t,e){this._context=t,this._k=(1-e)/6}ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const UL=function t(e){function n(i){return new ay(i,e)}return n.tension=function(i){return t(+i)},n}(0);function oy(t,e,n){var i=t._x1,r=t._y1,s=t._x2,a=t._y2;if(t._l01_a>tv){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>tv){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(i,r,s,a,t._x2,t._y2)}function X6(t,e){this._context=t,this._alpha=e}X6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:oy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const VL=function t(e){function n(i){return e?new X6(i,e):new ry(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function J6(t,e){this._context=t,this._alpha=e}J6.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:oy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const $L=function t(e){function n(i){return e?new J6(i,e):new sy(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Q6(t,e){this._context=t,this._alpha=e}Q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const jL=function t(e){function n(i){return e?new Q6(i,e):new ay(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Z6(t){this._context=t}Z6.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function zL(t){return new Z6(t)}function ev(t){return t<0?-1:1}function nv(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),u=(s*r+a*i)/(i+r);return(ev(s)+ev(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(u))||0}function iv(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Zp(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,u=(s-i)/3;t._context.bezierCurveTo(i+u,r+u*e,s-u,a-u*n,s,a)}function wh(t){this._context=t}wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zp(this,this._t0,iv(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Zp(this,iv(this,n=nv(this,t,e)),n);break;default:Zp(this,this._t0,n=nv(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function tE(t){this._context=new eE(t)}(tE.prototype=Object.create(wh.prototype)).point=function(t,e){wh.prototype.point.call(this,e,t)};function eE(t){this._context=t}eE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function qL(t){return new wh(t)}function WL(t){return new tE(t)}function nE(t){this._context=t}nE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=rv(t),r=rv(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function rv(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function HL(t){return new nE(t)}function Od(t,e){this._context=t,this._t=e}Od.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function YL(t){return new Od(t,.5)}function GL(t){return new Od(t,0)}function KL(t){return new Od(t,1)}function uc(t,e,n){this.k=t,this.x=e,this.y=n}uc.prototype={constructor:uc,scale:function(t){return t===1?this:new uc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new uc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};uc.prototype;function Qs(t){return t!=null&&!Number.isNaN(t)}function Ja(t,e){return+Qs(e)-+Qs(t)||Gn(t,e)}function Fm(t,e){return+Qs(e)-+Qs(t)||nl(t,e)}function uy(t){return t!=null&&`${t}`!=""}function iE(t){return isFinite(t)?t:NaN}function cl(t){return t>0&&isFinite(t)?t:NaN}function Fd(t){return t<0&&isFinite(t)?t:NaN}function XL(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${JL(t.getUTCFullYear())}-${Zr(t.getUTCMonth()+1,2)}-${Zr(t.getUTCDate(),2)}${n||i||r||s?`T${Zr(n,2)}:${Zr(i,2)}${r||s?`:${Zr(r,2)}${s?`.${Zr(s,3)}`:""}`:""}Z`:""}`}function JL(t){return t<0?`-${Zr(-t,6)}`:t>9999?`+${Zr(t,6)}`:Zr(t,4)}function Zr(t,e){return`${t}`.padStart(e,"0")}const QL=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function rE(t,e){return QL.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const ZL=new Map([["second",us],["minute",_d],["hour",wd],["day",Eu],["week",Zo],["month",Ed],["year",Qi],["monday",Oc],["tuesday",s3],["wednesday",a3],["thursday",Ka],["friday",o3],["saturday",u3],["sunday",Zo]]),tB=new Map([["second",us],["minute",vd],["hour",xd],["day",ty],["week",tu],["month",Ad],["year",Zi],["monday",Fc],["tuesday",c3],["wednesday",l3],["thursday",Xa],["friday",f3],["saturday",h3],["sunday",tu]]);function sE(t,e){let n=`${t}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let i=1;const r=/^(?:(\d+)\s+)/.exec(n);switch(r&&(n=n.slice(r[0].length),i=+r[1]),n){case"quarter":n="month",i*=3;break;case"half":n="month",i*=6;break}let s=e.get(n);if(!s)throw new Error(`unknown interval: ${t}`);if(!(i>1))return s;if(!s.every)throw new Error(`non-periodic interval: ${n}`);return s.every(i)}function eB(t){return sE(t,ZL)}function nB(t){return sE(t,tB)}function iB(t){if(!t)return!1;const e=t.floor(new Date(Date.UTC(2e3,11,31)));return Zi(e)>=e}function rB(t){if(!t)return!1;const e=t.floor(new Date(2e3,11,31));return Qi(e)>=e}const Lc=Object.getPrototypeOf(Uint8Array),sB=Object.prototype.toString;function Fi(t,e,n){const i=typeof e;return i==="string"?sv(t,aE(e),n):i==="function"?sv(t,e,n):i==="number"||e instanceof Date||i==="boolean"?an(t,Au(e),n):typeof(e==null?void 0:e.transform)=="function"?av(e.transform(t),n):av(e,n)}function sv(t,e,n){return an(t,(n==null?void 0:n.prototype)instanceof Lc?aB(e):e,n)}function av(t,e){return e===void 0?Dr(t):t instanceof e?t:e.prototype instanceof Lc&&!(t instanceof Lc)?e.from(t,cy):e.from(t)}function aB(t){return(e,n)=>cy(t(e,n))}const xf=[null],aE=t=>e=>e[t],oE={transform:fa},di={transform:t=>t},oB=()=>1,uB=()=>!0,mn=t=>t==null?t:`${t}`,Ae=t=>t==null?t:+t,uE=t=>t?t[0]:void 0,cB=t=>t?t[1]:void 0,Au=t=>()=>t;function lB(t){const e=+`${t}`.slice(1)/100;return(n,i)=>zf(n,e,i)}function Vs(t){return t instanceof Lc?t:an(t,cy,Float64Array)}function cy(t){return t==null?NaN:Number(t)}function fB(t){return an(t,hB)}function hB(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?rE(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Qa(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Bd(t)?[void 0,t]:[t,void 0]}function yn(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Dd(t,e,n){if(t!=null)return Ss(t,e,n)}function Ss(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Dr(t){return t==null||t instanceof Array||t instanceof Lc?t:Array.from(t)}function an(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Dm(t,e=Array){return t instanceof e?t.slice():e.from(t)}function cE({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function dB({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function pB(t){return cE(t)||dB(t)||t.interval!==void 0}function ll(t){return(t==null?void 0:t.toString)===sB}function xh(t){return ll(t)&&(t.type!==void 0||t.domain!==void 0)}function Rd(t){return ll(t)&&typeof t.transform!="function"}function eu(t){return Rd(t)&&t.value===void 0&&t.channel===void 0}function mB(t,e,n,i=di){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function fl(t,e){return t===void 0&&e===void 0?[uE,cB]:[t,e]}function lE({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Qa(e)),t===void 0&&([t]=Qa(n)),t}function fa(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function fE(t,e){return an(e,n=>t[n])}function Ia(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Rm(t){let e;return[{transform:()=>e,label:hl(t)},n=>e=n]}function gB(t){return t==null?[t]:Rm(t)}function hl(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function yB(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return tr(i)||tr(r)?an(i,(s,a)=>new Date((+i[a]+ +r[a])/2)):an(i,(s,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function bB(t,e){const n=hE(e==null?void 0:e.interval,e==null?void 0:e.type);return n?an(t,n):t}function hE(t,e){const n=ly(t,e);return n&&(i=>Qs(i)?n.floor(i):i)}function ly(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>X0(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>X0(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof t=="string")return(e==="time"?eB:nB)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function dl(t,e){if(t=ly(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function _B(t,e){if(t=dl(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function Ld(t){return t===void 0||Rd(t)?t:{value:t}}function vB(t){return t==null?null:{transform:e=>Fi(e,t,Float64Array),label:hl(t)}}function ha(t){return t&&typeof t[Symbol.iterator]=="function"}function dE(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function ov(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function tr(t){for(const e of t)if(e!=null)return e instanceof Date}function wB(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&rE(e)}function xB(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function SB(t){for(const e of t)if(e!=null)return typeof e=="number"}function t0(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}function Bd(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),t==="none"||t==="currentcolor"||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||Ks(t)!==null)}function EB(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Hn(t){return t==null||Bc(t)}function Bc(t){return/^\s*none\s*$/i.test(t)}function AB(t){return/^\s*round\s*$/i.test(t)}function pE(t,e){return Dd(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Pd(t="middle"){return pE(t,"frameAnchor")}function Pc(t){if(t==null)return;const e=t[0],n=t[t.length-1];return nl(e,n)}function IB(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const s=i[r];n===t?n={...n,[r]:s}:n[r]=s}return n}function TB(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function mE(t){return ha(t)?TB(t):t}const Ar=Symbol("position"),Es=Symbol("color"),Ud=Symbol("radius"),Vd=Symbol("length"),$d=Symbol("opacity"),jd=Symbol("symbol"),De=new Map([["x",Ar],["y",Ar],["fx",Ar],["fy",Ar],["r",Ud],["color",Es],["opacity",$d],["symbol",jd],["length",Vd]]),kB=Math.sqrt(3),CB=2/kB,MB={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*CB,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},fy=new Map([["asterisk",F6],["circle",Rc],["cross",D6],["diamond",L6],["diamond2",B6],["hexagon",MB],["plus",P6],["square",U6],["square2",V6],["star",j6],["times",H6],["triangle",z6],["triangle2",q6],["wye",W6]]);function hy(t){return t&&typeof t.draw=="function"}function NB(t){return hy(t)?!0:typeof t!="string"?!1:fy.has(t.toLowerCase())}function dy(t){if(t==null||hy(t))return t;const e=fy.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function OB(t){if(t==null||hy(t))return[void 0,t];if(typeof t=="string"){const e=fy.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function py({filter:t,sort:e,reverse:n,transform:i,initializer:r,...s}={},a){if(i===void 0&&(t!=null&&(i=gE(t)),e!=null&&!eu(e)&&(i=e0(i,my(e))),n&&(i=e0(i,yE))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(e===null||eu(e))&&{sort:e},transform:e0(i,a)}}function pl({filter:t,sort:e,reverse:n,initializer:i,...r}={},s){return i===void 0&&(t!=null&&(i=gE(t)),e!=null&&!eu(e)&&(i=n0(i,my(e))),n&&(i=n0(i,yE))),{...r,...(e===null||eu(e))&&{sort:e},initializer:n0(i,s)}}function e0(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Dr(n),i,r)}}function n0(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...s){let a,u,c,l,f,h;return{data:u=n,facets:c=i,channels:a}=t.call(this,n,i,r,...s),{data:f=u,facets:h=c,channels:l}=e.call(this,u,c,{...r,...a},...s),{data:f,facets:h,channels:{...a,...l}}}}function FB(t,e){return(t.initializer!=null?pl:py)(t,e)}function gE(t){return(e,n)=>{const i=Fi(e,t);return{data:e,facets:n.map(r=>r.filter(s=>i[s]))}}}function yE(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function DB(t,{sort:e,...n}={}){return{...(Rd(t)&&t.channel!==void 0?pl:FB)(n,my(t)),sort:eu(e)?e:null}}function my(t){return(typeof t=="function"&&t.length!==1?RB:LB)(t)}function RB(t){return(e,n)=>{const i=(r,s)=>t(e[r],e[s]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function LB(t){let e,n;({channel:e,value:t,order:n}={...Ld(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Fm:Ja),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ja;break;case"descending":n=Fm;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,a)=>{let u;if(e===void 0)u=Fi(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(u=a[e],!u)return{};u=u.value}const c=(l,f)=>n(u[l],u[f]);return{data:r,facets:s.map(l=>l.slice().sort(c))}}}function BB(t,e,n=PB){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ll(t))return UB(t);if(typeof t=="function")return VB(t);if(/^p\d{2}$/i.test(t))return Kr(lB(t));switch(`${t}`.toLowerCase()){case"first":return jB;case"last":return zB;case"identity":return $B;case"count":return cv;case"distinct":return qB;case"sum":return e==null?cv:WB;case"proportion":return lv(e,"data");case"proportion-facet":return lv(e,"facet");case"deviation":return Kr(mN);case"min":return Kr(Or);case"min-index":return Kr(xN);case"max":return Kr(Ri);case"max-index":return Kr(wN);case"mean":return uv(EN);case"median":return uv(K0);case"variance":return Kr(wx);case"mode":return Kr(IN)}return n(t)}function PB(t){throw new Error(`invalid reduce: ${t}`)}function UB(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function VB(t){return{reduceIndex(e,n,i){return t(fE(n,e),i)}}}function Kr(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function uv(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return tr(n)?new Date(i):i}}}const $B={reduceIndex(t,e){return fE(e,t)}},jB={reduceIndex(t,e){return e[t[0]]}},zB={reduceIndex(t,e){return e[t[t.length-1]]}},cv={label:"Frequency",reduceIndex(t){return t.length}},qB={label:"Distinct",reduceIndex(t,e){const n=new Cg;for(const i of t)n.add(e[i]);return n.size}},WB=Kr(qa);function lv(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>qa(n,s=>i[s])/r}}function Uc(t,{scale:e,type:n,value:i,filter:r,hint:s},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),bE(a,{scale:e,type:n,value:Fi(t,i),label:hl(i),filter:r,hint:s})}function HB(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Uc(e,i,n)]))}function YB(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:s}])=>{const a=r==null?null:e[r];return[i,a==null?s:an(s,a)]}));return n.channels=t,n}function bE(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&t0(i,Bd)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&t0(i,EB)?null:"opacity";break;case"symbol":n!==!0&&t0(i,NB)?(e.scale=null,e.value=an(i,dy)):e.scale="symbol";break;default:e.scale=De.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!De.has(n))throw new Error(`unknown scale: ${n}`);return e}function GB(t,e,n,i,r){const{order:s,reverse:a,reduce:u=!0,limit:c}=r;for(const l in r){if(!De.has(l))continue;let{value:f,order:h=s,reverse:d=a,reduce:p=u,limit:m=c}=Ld(r[l]);const g=f==null?void 0:f.startsWith("-");if(g&&(f=f.slice(1)),h=h===void 0?g!==(f==="width"||f==="height")?vE:_E:JB(h),p==null||p===!1)continue;const y=l==="fx"||l==="fy"?XB(e,i[l]):KB(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);const _=y.value,[b=0,x=1/0]=ha(m)?m:m<0?[m]:[0,m];if(f==null)y.domain=()=>{let v=Array.from(new Cg(_));return d&&(v=v.reverse()),(b!==0||x!==1/0)&&(v=v.slice(b,x)),v};else{const v=f==="data"?t:f==="height"?fv(n,"y1","y2"):f==="width"?fv(n,"x1","x2"):Lm(n,f,f==="y"?"y2":f==="x"?"x2":void 0),w=BB(p===!0?"max":p,v);y.domain=()=>{let A=gN(fa(_),T=>w.reduceIndex(T,v),T=>_[T]);return h&&A.sort(h),d&&A.reverse(),(b!==0||x!==1/0)&&(A=A.slice(b,x)),A.map(uE)}}}}function KB(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function XB(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let s=0;s<n.length;++s){const a=i[n[s][0]];for(const u of t[s])r[u]=a}return e}function fv(t,e,n){const i=Lm(t,e),r=Lm(t,n);return an(r,(s,a)=>Math.abs(s-i[a]),Float64Array)}function Lm(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function JB(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return _E;case"descending":return vE}throw new Error(`invalid order: ${t}`)}function _E([t,e],[n,i]){return Ja(e,i)||Ja(t,n)}function vE([t,e],[n,i]){return Fm(e,i)||Ja(t,n)}function QB(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function gy(t={}){const{document:e=typeof window<"u"?window.document:void 0}=t;return{document:e}}function en(t,{document:e}){return Wn(cd(t).call(e.documentElement))}let Bm=0;function ZB(){const t=Bm;return Bm=0,t}function Ro(t){console.warn(t),++Bm}const wE=Math.PI,Hr=2*wE,i0=.618;function tP({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:s=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let u,c,l="frame";if(ll(t)){let w;if({type:t,domain:c,inset:w,insetTop:n=w!==void 0?w:n,insetRight:i=w!==void 0?w:i,insetBottom:r=w!==void 0?w:r,insetLeft:s=w!==void 0?w:s,clip:l=l,...u}=t,t==null)return}typeof t!="function"&&({type:t}=xE(t));const{width:f,height:h,marginLeft:d,marginRight:p,marginTop:m,marginBottom:g}=a,y=f-d-p-s-i,_=h-m-g-n-r;if(t=t==null?void 0:t({width:y,height:_,clip:l,...u}),t==null)return;l=eP(l,d,m,f-p,h-g);let b=d+s,x=m+n,v;if(c!=null){const[[w,A],[T,C]]=sl(t).bounds(c),L=Math.min(y/(T-w),_/(C-A));L>0?(b-=(L*(w+T)-y)/2,x-=(L*(A+C)-_)/2,v=lh({point(O,k){this.stream.point(O*L+b,k*L+x)}})):Ro("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&x===0?SE():lh({point(w,A){this.stream.point(w+b,A+x)}})),{stream:w=>t.stream(v.stream(l(w)))}}function xE(t){switch(`${t}`.toLowerCase()){case"albers-usa":return ji(SD,.7463,.4673);case"albers":return Yl(BS,.7463,.4673);case"azimuthal-equal-area":return ji(ED,4,4);case"azimuthal-equidistant":return ji(AD,Hr,Hr);case"conic-conformal":return Yl(kD,Hr,Hr);case"conic-equal-area":return Yl(fh,6.1702,2.9781);case"conic-equidistant":return Yl(ND,7.312,3.6282);case"equal-earth":return ji(FD,5.4133,2.6347);case"equirectangular":return ji(CD,Hr,wE);case"gnomonic":return ji(DD,3.4641,3.4641);case"identity":return{type:SE};case"reflect-y":return{type:nP};case"mercator":return ji(ID,Hr,Hr);case"orthographic":return ji(RD,2,2);case"stereographic":return ji(LD,2,2);case"transverse-mercator":return ji(BD,Hr,Hr);default:throw new Error(`unknown projection type: ${t}`)}}function eP(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return s=>s;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return wS(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function ji(t,e,n){return{type:({width:i,height:r,rotate:s,precision:a=.15,clip:u})=>{var l,f,h;const c=t();return a!=null&&((l=c.precision)==null||l.call(c,a)),s!=null&&((f=c.rotate)==null||f.call(c,s)),typeof u=="number"&&((h=c.clipAngle)==null||h.call(c,u)),c.scale(Math.min(i/e,r/n)),c.translate([i/2,r/2]),c},aspectRatio:n/e}}function Yl(t,e,n){const{type:i,aspectRatio:r}=ji(t,e,n);return{type:s=>{const{parallels:a,domain:u,width:c,height:l}=s,f=i(s);return a!=null&&(f.parallels(a),u===void 0&&f.fitSize([c,l],{type:"Sphere"})),f},aspectRatio:r}}const SE=Au({stream:t=>t}),nP=Au(lh({point(t,e){this.stream.point(t,-e)}}));function iP(t,e,n,i){const r=n[t],s=n[e],a=r.length,u=n[t]=new Float64Array(a).fill(NaN),c=n[e]=new Float64Array(a).fill(NaN);let l;const f=i.stream({point(h,d){u[l]=h,c[l]=d}});for(l=0;l<a;++l)f.point(r[l],s[l])}function rP(t,e){if(typeof(t==null?void 0:t.stream)=="function")return i0;if(ll(t)&&(t=t.type),t==null)return sP(e)?i0:void 0;if(typeof t!="function"){const{aspectRatio:n}=xE(t);if(n)return n}return i0}function sP(t){for(const e of t)if(e.channels.geometry)return!0;return!1}const EE=new Map([["accent",aL],["category10",x3],["dark2",oL],["paired",uL],["pastel1",cL],["pastel2",lL],["set1",fL],["set2",hL],["set3",dL],["tableau10",pL]]);function aP(t){return t!=null&&EE.has(`${t}`.toLowerCase())}const hv=new Map([...EE,["brbg",Yr(S3,E3)],["prgn",Yr(A3,I3)],["piyg",Yr(T3,k3)],["puor",Yr(C3,M3)],["rdbu",Yr(Mm,mh)],["rdgy",Yr(N3,O3)],["rdylbu",Yr(Nm,gh)],["rdylgn",Yr(F3,D3)],["spectral",Yr(R3,L3)],["burd",dv(Mm,mh)],["buylrd",dv(Nm,gh)],["blues",rn(o6,u6)],["greens",rn(c6,l6)],["greys",rn(f6,h6)],["oranges",rn(y6,b6)],["purples",rn(d6,p6)],["reds",rn(m6,g6)],["turbo",Gr(A6)],["viridis",Gr(I6)],["magma",Gr(T6)],["inferno",Gr(k6)],["plasma",Gr(C6)],["cividis",Gr(_6)],["cubehelix",Gr(v6)],["warm",Gr(w6)],["cool",Gr(x6)],["bugn",rn(B3,P3)],["bupu",rn(U3,V3)],["gnbu",rn($3,j3)],["orrd",rn(z3,q3)],["pubu",rn(Y3,G3)],["pubugn",rn(W3,H3)],["purd",rn(K3,X3)],["rdpu",rn(J3,Q3)],["ylgn",rn(e6,n6)],["ylgnbu",rn(Z3,t6)],["ylorbr",rn(i6,r6)],["ylorrd",rn(s6,a6)],["rainbow",pv(S6)],["sinebow",pv(E6)]]);function rn(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ji(e,n):t[n])}function Yr(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ji(e,n):t[n])}function dv(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ji(i=>e(1-i),n):t[n].slice().reverse())}function Gr(t){return({length:e})=>Ji(t,Math.max(2,Math.floor(e)))}function pv(t){return({length:e})=>Ji(t,Math.floor(e)+1).slice(0,-1)}function AE(t){const e=`${t}`.toLowerCase();if(!hv.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return hv.get(e)}function zd(t,e){const n=AE(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function oP(t,e="greys"){const n=new Set,[i,r]=zd(e,2);for(const s of t)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const mv=new Map([["brbg",E3],["prgn",I3],["piyg",k3],["puor",M3],["rdbu",mh],["rdgy",O3],["rdylbu",gh],["rdylgn",D3],["spectral",L3],["burd",t=>mh(1-t)],["buylrd",t=>gh(1-t)],["blues",u6],["greens",l6],["greys",h6],["purples",p6],["reds",g6],["oranges",b6],["turbo",A6],["viridis",I6],["magma",T6],["inferno",k6],["plasma",C6],["cividis",_6],["cubehelix",v6],["warm",w6],["cool",x6],["bugn",P3],["bupu",V3],["gnbu",j3],["orrd",q3],["pubugn",H3],["pubu",G3],["purd",X3],["rdpu",Q3],["ylgnbu",t6],["ylgn",n6],["ylorbr",r6],["ylorrd",a6],["rainbow",S6],["sinebow",E6]]);function yy(t){const e=`${t}`.toLowerCase();if(!mv.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return mv.get(e)}const uP=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function cP(t){return t!=null&&uP.has(`${t}`.toLowerCase())}const IE=t=>e=>t(1-e),r0=[0,1],gv=new Map([["number",pn],["rgb",Ha],["hsl",X9],["hcl",Z9],["lab",J9]]);function TE(t){const e=`${t}`.toLowerCase();if(!gv.has(e))throw new Error(`unknown interpolator: ${e}`);return gv.get(e)}function ml(t,e,n,{type:i,nice:r,clamp:s,zero:a,domain:u=CE(t,n),unknown:c,round:l,scheme:f,interval:h,range:d=De.get(t)===Ud?vP(n,u):De.get(t)===Vd?wP(n,u):De.get(t)===$d?r0:void 0,interpolate:p=De.get(t)===Es?f==null&&d!==void 0?Ha:yy(f!==void 0?f:i==="cyclical"?"rainbow":"turbo"):l?Vg:pn,reverse:m}){if(h=dl(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),m=!!m,typeof p!="function"&&(p=TE(p)),p.length===1?(m&&(p=IE(p),m=!1),d===void 0&&(d=Float64Array.from(u,(g,y)=>y/(u.length-1)),d.length===2&&(d=r0)),e.interpolate((d===r0?Au:_y)(p))):e.interpolate(p),a){const[g,y]=Wo(u);(g>0||y<0)&&(u=Dm(u),Pc(u)!==Math.sign(g)?u[u.length-1]=0:u[0]=0)}return m&&(u=qf(u)),e.domain(u).unknown(c),r&&(e.nice(lP(r,i)),u=e.domain()),d!==void 0&&e.range(d),s&&e.clamp(s),{type:i,domain:u,range:d,scale:e,interpolate:p,interval:h}}function lP(t,e){return t===!0?void 0:typeof t=="number"?t:_B(t,e)}function fP(t,e,n){return ml(t,Qg(),e,n)}function hP(t,e,n){return kE(t,e,{...n,exponent:.5})}function kE(t,e,{exponent:n=1,...i}){return ml(t,n3().exponent(n),e,{...i,type:"pow"})}function dP(t,e,{base:n=10,domain:i=xP(e),...r}){return ml(t,QS().base(n),e,{...r,domain:i})}function pP(t,e,{constant:n=1,...i}){return ml(t,t3().constant(n),e,i)}function mP(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:a=SP(e),unknown:u,interpolate:c,reverse:l}){return n===void 0&&(n=c!==void 0?Ji(c,r):De.get(t)===Es?zd(s,r):void 0),a.length>0&&(a=i3(a,n===void 0?{length:r}:n).quantiles()),by(t,e,{domain:a,range:n,reverse:l,unknown:u})}function gP(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=CE(t,e),unknown:a,interpolate:u,reverse:c}){const[l,f]=Wo(s);let h;return n===void 0?(h=jf(l,f,i),h[0]<=l&&h.splice(0,1),h[h.length-1]>=f&&h.pop(),i=h.length+1,n=u!==void 0?Ji(u,i):De.get(t)===Es?zd(r,i):void 0):(h=Ji(pn(l,f),i+1).slice(1,-1),l instanceof Date&&(h=h.map(d=>new Date(d)))),Pc(Dr(s))<0&&h.reverse(),by(t,e,{domain:h,range:n,reverse:c,unknown:a})}function by(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:a=s!==void 0?Ji(s,n.length+1):De.get(t)===Es?zd(r,n.length+1):void 0,reverse:u}){n=Dr(n);const c=Pc(n);if(!isNaN(c)&&!yP(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return u&&(a=qf(a)),{type:"threshold",scale:r3(c<0?qf(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function yP(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const s=nl(r,r=t[n]);if(s!==0&&s!==e)return!1}return!0}function bP(){return{type:"identity",scale:KS()}}function Vc(t,e=iE){return t.length?[Or(t,({value:n})=>n===void 0?n:Or(n,e)),Ri(t,({value:n})=>n===void 0?n:Ri(n,e))]:[0,1]}function CE(t,e){const n=De.get(t);return(n===Ud||n===$d||n===Vd?_P:Vc)(e)}function _P(t){return[0,t.length?Ri(t,({value:e})=>e===void 0?e:Ri(e,iE)):1]}function vP(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=zf(t,.5,({value:a})=>a===void 0?NaN:zf(a,.25,cl)),r=e.map(a=>3*Math.sqrt(a/i)),s=30/Ri(r);return s<1?r.map(a=>a*s):r}function wP(t,e){const n=K0(t,({value:s})=>s===void 0?NaN:K0(s,Math.abs)),i=e.map(s=>12*s/n),r=60/Ri(i);return r<1?i.map(s=>s*r):i}function xP(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Vc(t,cl);if(n<0)return Vc(t,Fd)}return[1,10]}function SP(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function _y(t){return(e,n)=>i=>t(e+i*(n-e))}function qd(t,e,n,i,{type:r,nice:s,clamp:a,domain:u=Vc(i),unknown:c,pivot:l=0,scheme:f,range:h,symmetric:d=!0,interpolate:p=De.get(t)===Es?f==null&&h!==void 0?Ha:yy(f!==void 0?f:"rdbu"):pn,reverse:m}){l=+l;let[g,y]=u;if(nl(g,y)<0&&([g,y]=[y,g],m=!m),g=Math.min(g,l),y=Math.max(y,l),typeof p!="function"&&(p=TE(p)),h!==void 0&&(p=p.length===1?_y(p)(...h):jg(p,h)),m&&(p=IE(p)),d){const _=n.apply(l),b=_-n.apply(g),x=n.apply(y)-_;b<x?g=n.invert(_-x):b>x&&(y=n.invert(_+b))}return e.domain([g,l,y]).unknown(c).interpolator(p),a&&e.clamp(a),s&&e.nice(s),{type:r,domain:[g,y],pivot:l,interpolate:p,scale:e}}function EP(t,e,n){return qd(t,b3(),kP,e,n)}function AP(t,e,n){return ME(t,e,{...n,exponent:.5})}function ME(t,e,{exponent:n=1,...i}){return qd(t,w3().exponent(n=+n),NP(n),e,{...i,type:"diverging-pow"})}function IP(t,e,{base:n=10,pivot:i=1,domain:r=Vc(e,i<0?Fd:cl),...s}){return qd(t,_3().base(n=+n),CP,e,{domain:r,pivot:i,...s})}function TP(t,e,{constant:n=1,...i}){return qd(t,v3().constant(n=+n),OP(n),e,i)}const kP={apply(t){return t},invert(t){return t}},CP={apply:Math.log,invert:Math.exp},MP={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function NP(t){return t===.5?MP:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function OP(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function NE(t,e,n,i){return ml(t,e,n,i)}function FP(t,e,n){return NE(t,rL(),e,n)}function DP(t,e,n){return NE(t,sL(),e,n)}const gl=Symbol("ordinal");function OE(t,e,n,{type:i,interval:r,domain:s,range:a,reverse:u,hint:c}){return r=dl(r,i),s===void 0&&(s=DE(n,r,t)),(i==="categorical"||i===gl)&&(i="ordinal"),u&&(s=qf(s)),e.domain(s),a!==void 0&&(typeof a=="function"&&(a=a(s)),e.range(a)),{type:i,domain:s,range:a,scale:e,hint:c,interval:r}}function RP(t,e,{type:n,interval:i,domain:r,range:s,scheme:a,unknown:u,...c}){i=dl(i,n),r===void 0&&(r=DE(e,i,t));let l;if(De.get(t)===jd)l=PP(e),s=s===void 0?UP(l):an(s,dy);else if(De.get(t)===Es&&(s===void 0&&(n==="ordinal"||n===gl)&&(s=oP(r,a),s!==void 0&&(a=void 0)),a===void 0&&s===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(s!==void 0){const f=yy(a),h=s[0],d=s[1]-s[0];s=({length:p})=>Ji(m=>f(h+d*m),p)}else s=AE(a);if(u===Tm)throw new Error(`implicit unknown on ${t} scale is not supported`);return OE(t,Jg().unknown(u),e,{...c,type:n,domain:r,range:s,hint:l})}function LP(t,e,{align:n=.5,padding:i=.5,...r}){return FE(PD().align(n).padding(i),e,r,t)}function BP(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=t==="fx"||t==="fy"?0:i,...a}){return FE(yd().align(n).paddingInner(r).paddingOuter(s),e,a,t)}function FE(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=OE(i,t,e,n),t.round=r,t}function DE(t,e,n){const i=new Cg;for(const{value:r,domain:s}of t){if(s!==void 0)return s();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,s]=Wo(i).map(e.floor,e);return e.range(r,e.offset(s))}if(i.size>1e4&&De.get(n)===Ar)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return H0(i,Ja)}function yv(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function PP(t){return{fill:yv(t,"fill"),stroke:yv(t,"stroke")}}function UP(t){return Hn(t.fill)?OL:NL}function Pm(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:a=n,round:u,nice:c,clamp:l,zero:f,align:h,padding:d,projection:p,facet:{label:m=e}={},...g}={}){const y={};for(const[_,b]of t){const x=g[_],v=PE(_,b,{round:De.get(_)===Ar?u:void 0,nice:c,clamp:l,zero:f,align:h,padding:d,projection:p,...x});if(v){let{label:w=_==="fx"||_==="fy"?m:e,percent:A,transform:T,inset:C,insetTop:L=C!==void 0?C:_==="y"?i:0,insetRight:O=C!==void 0?C:_==="x"?r:0,insetBottom:k=C!==void 0?C:_==="y"?s:0,insetLeft:N=C!==void 0?C:_==="x"?a:0}=x||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");v.percent=!!A,v.label=w===void 0?$P(b,v):w,v.transform=T,_==="x"||_==="fx"?(v.insetLeft=+N,v.insetRight=+O):(_==="y"||_==="fy")&&(v.insetTop=+L,v.insetBottom=+k),y[_]=v}}return y}function bv(t){return Object.fromEntries(Object.entries(t).filter(([,{scale:e}])=>e).map(([e,{scale:n,type:i,interval:r,label:s}])=>(n.type=i,r!=null&&(n.interval=r),s!=null&&(n.label=s),[e,n])))}function VP(t,e){const{x:n,y:i,fx:r,fy:s}=t,a=r||s?vy(e):e;r&&_v(r,a),s&&vv(s,a);const u=r||s?RE(t,e):e;n&&_v(n,u),i&&vv(i,u)}function $P(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!ro(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function vy(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:a,facet:{marginTop:u,marginRight:c,marginBottom:l,marginLeft:f}}=t;return{marginTop:Math.max(e,u),marginRight:Math.max(n,c),marginBottom:Math.max(i,l),marginLeft:Math.max(r,f),width:s,height:a}}function RE({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:u,height:c}=vy(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:t?t.scale.bandwidth()+a+r:u,height:e?e.scale.bandwidth()+i+s:c,facet:{width:u,height:c}}}function _v(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:s=0,marginRight:a=0}=e,u=s+n,c=r-a-i;t.range=[u,Math.max(u,c)],ro(t)||(t.range=BE(t)),t.scale.range(t.range)}LE(t)}function vv(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:s=0,marginBottom:a=0}=e,u=s+n,c=r-a-i;t.range=[Math.max(u,c),u],ro(t)?t.range.reverse():t.range=BE(t),t.scale.range(t.range)}LE(t)}function LE(t){t.round===void 0&&WP(t)&&jP(t)<=30&&t.scale.round(!0)}function jP({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,u=Math.abs(i-n)/Math.max(1,a+s*2);return(u-Math.floor(u))*a}function BE(t){const e=t.scale.domain().length+VE(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,s)=>n+s/(e-1)*(i-n))}function zP(t,e,n){return PE(t,n===void 0?void 0:[{hint:n}],{...e})}function PE(t,e=[],n={}){const i=qP(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&ro({type:i})){const r=e.map(({value:s})=>s).filter(s=>s!==void 0);r.some(tr)?Ro(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${yo(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`):r.some(wB)?Ro(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${yo(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`):r.some(xB)&&Ro(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${yo(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Gl(e,n,Vs);break;case"identity":switch(De.get(t)){case Ar:n=Gl(e,n,Vs);break;case jd:n=Gl(e,n,HP);break}break;case"utc":case"time":n=Gl(e,n,fB);break}switch(i){case"diverging":return EP(t,e,n);case"diverging-sqrt":return AP(t,e,n);case"diverging-pow":return ME(t,e,n);case"diverging-log":return IP(t,e,n);case"diverging-symlog":return TP(t,e,n);case"categorical":case"ordinal":case gl:return RP(t,e,n);case"cyclical":case"sequential":case"linear":return fP(t,e,n);case"sqrt":return hP(t,e,n);case"threshold":return by(t,e,n);case"quantile":return mP(t,e,n);case"quantize":return gP(t,e,n);case"pow":return kE(t,e,n);case"log":return dP(t,e,n);case"symlog":return pP(t,e,n);case"utc":return DP(t,e,n);case"time":return FP(t,e,n);case"point":return LP(t,e,n);case"band":return BP(t,e,n);case"identity":return De.get(t)===Ar?bP():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function yo(t){return typeof t=="symbol"?t.description:t}const wv={toString:()=>"projection"};function qP(t,e,{type:n,domain:i,range:r,scheme:s,pivot:a,projection:u}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&u!=null&&(n=wv);for(const{type:l}of e)if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}if(n===wv)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:l})=>l!==void 0))return;const c=De.get(t);if(c===Ud)return"sqrt";if(c===$d||c===Vd)return"linear";if(c===jd)return"ordinal";if((i||r||[]).length>2)return s0(c);if(i!==void 0){if(ov(i))return s0(c);if(tr(i))return"utc"}else{const l=e.map(({value:f})=>f).filter(f=>f!==void 0);if(l.some(ov))return s0(c);if(l.some(tr))return"utc"}if(c===Es){if(a!=null||cP(s))return"diverging";if(aP(s))return"categorical"}return"linear"}function s0(t){switch(t){case Ar:return"point";case Es:return gl;default:return"ordinal"}}function UE({type:t}){return t==="time"||t==="utc"}function ro({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===gl}function VE({type:t}){return t==="threshold"}function WP({type:t}){return t==="point"||t==="band"}function $s(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Gl(t,{domain:e,...n},i){for(const r of t)r.value!==void 0&&(r.value=i(r.value));return{domain:e===void 0?e:i(e),...n}}function HP(t){return an(t,dy)}function Um(t={}){let e;for(const n in t)if(De.has(n)&&xh(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=$E(zP(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function YP(t){return e=>{if(!De.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return e in t?$E(t[e]):void 0}}function $E({scale:t,type:e,domain:n,range:i,interpolate:r,interval:s,transform:a,percent:u,pivot:c}){if(e==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const l=t.unknown?t.unknown():void 0;return{type:e,domain:Dm(n),...i!==void 0&&{range:Dm(i)},...a!==void 0&&{transform:a},...u&&{percent:u},...l!==void 0&&{unknown:l},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:f=>t(f),...t.invert&&{invert:f=>t.invert(f)}}}function GP(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,e=t(...i)),e)}const KP=GP(t=>new Intl.NumberFormat(t));function XP(t="en-US"){const e=KP(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function jE(t){return XL(t,"Invalid Date")}function JP(t="en-US"){const e=XP(t);return n=>(n instanceof Date?jE:typeof n=="number"?e:mn)(n)}const cs=JP(),oi=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let QP=0;function xv(){return`plot-clip-${++QP}`}function ZP(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:a,fill:u,fillOpacity:c,stroke:l,strokeWidth:f,strokeOpacity:h,strokeLinejoin:d,strokeLinecap:p,strokeMiterlimit:m,strokeDasharray:g,strokeDashoffset:y,opacity:_,mixBlendMode:b,imageFilter:x,paintOrder:v,pointerEvents:w,shapeRendering:A},{ariaLabel:T,fill:C="currentColor",fillOpacity:L,stroke:O="none",strokeOpacity:k,strokeWidth:N,strokeLinecap:B,strokeLinejoin:q,strokeMiterlimit:E,paintOrder:j}){C===null&&(u=null,c=null),O===null&&(l=null,h=null),Hn(C)?!Hn(O)&&!Hn(u)&&(O="none"):Hn(O)&&!Hn(l)&&(C="none");const[F,U]=Qa(u,C),[$,X]=yn(c,L),[K,J]=Qa(l,O),[ot,Pt]=yn(h,k),[dt,ct]=yn(_);Bc(J)||(f===void 0&&(f=N),p===void 0&&(p=B),d===void 0&&(d=q),m===void 0&&!AB(d)&&(m=E),!Bc(U)&&v===void 0&&(v=j));const[tt,ut]=yn(f);return C!==null&&(t.fill=Ye(U,"currentColor"),t.fillOpacity=Gu(X,1)),O!==null&&(t.stroke=Ye(J,"none"),t.strokeWidth=Gu(ut,1),t.strokeOpacity=Gu(Pt,1),t.strokeLinejoin=Ye(d,"miter"),t.strokeLinecap=Ye(p,"butt"),t.strokeMiterlimit=Gu(m,4),t.strokeDasharray=Ye(g,"none"),t.strokeDashoffset=Ye(y,"0")),t.target=mn(a),t.ariaLabel=mn(T),t.ariaDescription=mn(r),t.ariaHidden=mn(s),t.opacity=Gu(ct,1),t.mixBlendMode=Ye(b,"normal"),t.imageFilter=Ye(x,"none"),t.paintOrder=Ye(v,"normal"),t.pointerEvents=Ye(w,"auto"),t.shapeRendering=Ye(A,"auto"),{title:{value:e,optional:!0},href:{value:n,optional:!0},ariaLabel:{value:i,optional:!0},fill:{value:F,scale:"auto",optional:!0},fillOpacity:{value:$,scale:"auto",optional:!0},stroke:{value:K,scale:"auto",optional:!0},strokeOpacity:{value:ot,scale:"auto",optional:!0},strokeWidth:{value:tt,optional:!0},opacity:{value:dt,scale:"auto",optional:!0}}}function tU(t,e){e&&t.filter(n=>uy(e[n])).append("title").call(nU,e)}function eU(t,e){e&&t.filter(([n])=>uy(e[n])).append("title").call(iU,e)}function nU(t,e){e&&t.text(n=>cs(e[n]))}function iU(t,e){e&&t.text(([n])=>cs(e[n]))}function jr(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:u,strokeOpacity:c,strokeWidth:l,opacity:f,href:h}){i&&St(t,"aria-label",d=>i[d]),s&&St(t,"fill",d=>s[d]),a&&St(t,"fill-opacity",d=>a[d]),u&&St(t,"stroke",d=>u[d]),c&&St(t,"stroke-opacity",d=>c[d]),l&&St(t,"stroke-width",d=>l[d]),f&&St(t,"opacity",d=>f[d]),h&&zE(t,d=>h[d],e),n||tU(t,r)}function rU(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:u,strokeOpacity:c,strokeWidth:l,opacity:f,href:h}){i&&St(t,"aria-label",([d])=>i[d]),s&&St(t,"fill",([d])=>s[d]),a&&St(t,"fill-opacity",([d])=>a[d]),u&&St(t,"stroke",([d])=>u[d]),c&&St(t,"stroke-opacity",([d])=>c[d]),l&&St(t,"stroke-width",([d])=>l[d]),f&&St(t,"opacity",([d])=>f[d]),h&&zE(t,([d])=>h[d],e),n||eU(t,r)}function sU({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:a,opacity:u,href:c},{tip:l}){return[t,l?void 0:e,n,i,r,s,a,u,c].filter(f=>f!==void 0)}function aU(t,e,n){const i=Mg(t,r=>e[r]);return n===void 0&&i.size>t.length>>1&&Ro("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*oU(t,e,n,i){const{z:r}=n,{z:s}=i,a=sU(i,n),u=[...e,...a];for(const c of s?aU(t,s,r):[t]){let l,f;t:for(const h of c){for(const d of u)if(!Qs(d[h])){f&&f.push(-1);continue t}if(l===void 0){f&&(yield f),l=a.map(d=>Ia(d[h])),f=[h];continue}f.push(h);for(let d=0;d<a.length;++d)if(Ia(a[d][h])!==l[d]){yield f,l=a.map(m=>Ia(m[h])),f=[h];continue t}}f&&(yield f)}}function uU(t){return t===!0?t="frame":t===!1&&(t=null),Dd(t,"clip",["frame","sphere"])}function cU(t,e,n,i){let r;switch(e.clip){case"frame":{const{width:s,height:a,marginLeft:u,marginRight:c,marginTop:l,marginBottom:f}=n,h=xv();r=`url(#${h})`,t=en("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",u).attr("y",l).attr("width",s-c-u).attr("height",a-l-f)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:s}=i;if(!s)throw new Error('the "sphere" clip option requires a projection');const a=xv();r=`url(#${a})`,t.append("clipPath").attr("id",a).append("path").attr("d",sl(s)({type:"Sphere"}));break}}St(t,"aria-label",e.ariaLabel),St(t,"aria-description",e.ariaDescription),St(t,"aria-hidden",e.ariaHidden),St(t,"clip-path",r)}function Pi(t,e,n,i){cU(t,e,n,i),St(t,"fill",e.fill),St(t,"fill-opacity",e.fillOpacity),St(t,"stroke",e.stroke),St(t,"stroke-width",e.strokeWidth),St(t,"stroke-opacity",e.strokeOpacity),St(t,"stroke-linejoin",e.strokeLinejoin),St(t,"stroke-linecap",e.strokeLinecap),St(t,"stroke-miterlimit",e.strokeMiterlimit),St(t,"stroke-dasharray",e.strokeDasharray),St(t,"stroke-dashoffset",e.strokeDashoffset),St(t,"shape-rendering",e.shapeRendering),St(t,"filter",e.imageFilter),St(t,"paint-order",e.paintOrder),St(t,"pointer-events",e.pointerEvents)}function Ui(t,e){lU(t,"mix-blend-mode",e.mixBlendMode),St(t,"opacity",e.opacity)}function zE(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const s=this.ownerDocument.createElementNS(Ho.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Ho.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function St(t,e,n){n!=null&&t.attr(e,n)}function lU(t,e,n){n!=null&&t.style(e,n)}function Vi(t,e,{x:n,y:i},r=oi,s=oi){r+=e.dx,s+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&t.attr("transform",`translate(${r},${s})`)}function Ye(t,e){if((t=mn(t))!==e)return t}function Gu(t,e){if((t=Ae(t))!==e)return t}const fU=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function wy(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!fU.test(t))throw new Error(`invalid class name: ${t}`);return t}function xy(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function yl({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-s:(i+n-s)/2]}function hU(t,e,n={}){let i=.5-oi,r=.5+oi,s=.5+oi,a=.5-oi;for(const{marginTop:g,marginRight:y,marginBottom:_,marginLeft:b}of e)g>i&&(i=g),y>r&&(r=y),_>s&&(s=_),b>a&&(a=b);let{margin:u,marginTop:c=u!==void 0?u:i,marginRight:l=u!==void 0?u:r,marginBottom:f=u!==void 0?u:s,marginLeft:h=u!==void 0?u:a}=n;c=+c,l=+l,f=+f,h=+h;let{width:d=640,height:p=dU(t,e,n,{width:d,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:a})+Math.max(0,c-i+f-s)}=n;d=+d,p=+p;const m={width:d,height:p,marginTop:c,marginRight:l,marginBottom:f,marginLeft:h};if(t.fx||t.fy){let{margin:g,marginTop:y=g!==void 0?g:c,marginRight:_=g!==void 0?g:l,marginBottom:b=g!==void 0?g:f,marginLeft:x=g!==void 0?g:h}=n.facet??{};y=+y,_=+_,b=+b,x=+x,m.facet={marginTop:y,marginRight:_,marginBottom:b,marginLeft:x}}return m}function dU({x:t,y:e,fy:n,fx:i},r,{projection:s,aspectRatio:a},{width:u,marginTopDefault:c,marginRightDefault:l,marginBottomDefault:f,marginLeftDefault:h}){const d=n?n.scale.domain().length:1,p=rP(s,r);if(p){const g=i?i.scale.domain().length:1,y=(1.1*d-.1)/(1.1*g-.1)*p,_=Math.max(.1,Math.min(10,y));return Math.round((u-h-l)*_+c+f)}const m=e?ro(e)?e.scale.domain().length:Math.max(7,17/d):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const g=Sv("y",e)/(Sv("x",t)*a),y=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,b=y*(u-h-l)-t.insetLeft-t.insetRight;return(g*b+e.insetTop+e.insetBottom)/_+c+f}return!!(e||n)*Math.max(1,Math.min(60,m*d))*20+!!i*30+60}function Sv(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const u=e.scale.exponent();r=c=>Math.pow(c,u);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,a]=Wo(i);return Math.abs(r(a)-r(s))}function pU(t,e){const{fx:n,fy:i}=Pm(t,e),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?dN(r,s).map(([a,u],c)=>({x:a,y:u,i:c})):r?r.map((a,u)=>({x:a,i:u})):s?s.map((a,u)=>({y:a,i:u})):void 0}function mU(t,{x:e,y:n}){return e&&(e=Vm(e)),n&&(n=Vm(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Sy(t,{fx:e,fy:n}){const i=fa(t),r=e==null?void 0:e.value,s=n==null?void 0:n.value;return e&&n?hc(i,a=>(a.fx=r[a[0]],a.fy=s[a[0]],a),a=>r[a],a=>s[a]):e?hc(i,a=>(a.fx=r[a[0]],a),a=>r[a]):hc(i,a=>(a.fy=s[a[0]],a),a=>s[a])}function gU(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:s})=>`translate(${t(r)-i},${e(s)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function yU(t){const e=[],n=new Uint32Array(qa(t,i=>i.length));for(const i of t){let r=0;for(const s of t)i!==s&&(n.set(s,r),r+=s.length);e.push(n.slice(0,r))}return e}const bU=new Map([["top",a0],["right",c0],["bottom",o0],["left",u0],["top-left",Kl(a0,u0)],["top-right",Kl(a0,c0)],["bottom-left",Kl(o0,u0)],["bottom-right",Kl(o0,c0)],["top-empty",wU],["right-empty",EU],["bottom-empty",xU],["left-empty",SU],["empty",AU]]);function _U(t){if(t==null)return null;const e=bU.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Ev=new WeakMap;function Vm(t){let e=Ev.get(t);return e||Ev.set(t,e=new za(an(t,(n,i)=>[n,i]))),e}function da(t,e){return Vm(t).get(e)}function vU(t,e,n){return e=Ia(e),n=Ia(n),t.find(i=>Object.is(Ia(i.x),e)&&Object.is(Ia(i.y),n))}function Wd(t,e,n){var i;return(i=vU(t,e,n))==null?void 0:i.empty}function a0(t,{y:e},{y:n}){return e?da(e,n)===0:!0}function o0(t,{y:e},{y:n}){return e?da(e,n)===e.length-1:!0}function u0(t,{x:e},{x:n}){return e?da(e,n)===0:!0}function c0(t,{x:e},{x:n}){return e?da(e,n)===e.length-1:!0}function wU(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,i);if(s>0)return Wd(t,n,e[s-1])}function xU(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,i);if(s<e.length-1)return Wd(t,n,e[s+1])}function SU(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,n);if(s>0)return Wd(t,e[s-1],i)}function EU(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,n);if(s<e.length-1)return Wd(t,e[s+1],i)}function AU(t,e,{empty:n}){return n}function Kl(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function l0(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:s})=>{var a;return((a=i.get(r))==null?void 0:a.get(s))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class Fn{constructor(e,n={},i={},r){const{facet:s="auto",facetAnchor:a,fx:u,fy:c,sort:l,dx:f=0,dy:h=0,margin:d=0,marginTop:p=d,marginRight:m=d,marginBottom:g=d,marginLeft:y=d,clip:_,channels:b,tip:x,render:v}=i;if(this.data=e,this.sort=eu(l)?l:null,this.initializer=pl(i).initializer,this.transform=this.initializer?i.transform:py(i).transform,s===null||s===!1?this.facet=null:(this.facet=Ss(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=e===xf&&typeof u=="string"?[u]:u,this.fy=e===xf&&typeof c=="string"?[c]:c),this.facetAnchor=_U(a),n=mE(n),b!==void 0&&(n={...IU(b),...n}),r!==void 0&&(n={...ZP(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([w,A])=>{if(Rd(A.value)){const{value:T,scale:C=A.scale}=A.value;A={...A,scale:C,value:T}}if(e===xf&&typeof A.value=="string"){const{value:T}=A;A={...A,value:[T]}}return[w,A]}).filter(([w,{value:A,optional:T}])=>{if(A!=null)return!0;if(T)return!1;throw new Error(`missing channel value: ${w}`)})),this.dx=+f,this.dy=+h,this.marginTop=+p,this.marginRight=+m,this.marginBottom=+g,this.marginLeft=+y,this.clip=uU(_),this.tip=TU(x),this.facet==="super"){if(u||c)throw new Error("super-faceting cannot use fx or fy");for(const w in this.channels){const{scale:A}=n[w];if(!(A!=="x"&&A!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=WE(v,this.render))}initialize(e,n,i){let r=Dr(this.data);e===void 0&&r!=null&&(e=[fa(r)]);const s=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Dr(r)),e!==void 0&&(e.original=s);const a=HB(this.channels,r);return this.sort!=null&&GB(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:s=Qs}=n[r];if(s!==null){const a=i[r];e=e.filter(u=>s(a[u]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in e&&e[s].scale==="y"&&iP(r,s,n,i.projection)}}scale(e,n,i){const r=YB(e,n);return i.projection&&this.project(e,r,i),r}}function qE(...t){return t.plot=Fn.prototype.plot,t}function WE(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,s,a,u){return t.call(this,n,i,r,s,a,(c,l,f,h,d)=>e.call(this,c,l,f,h,d,u))}}function IU(t){return Object.fromEntries(Object.entries(mE(t)).map(([e,n])=>(n=Ld(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function TU(t){return t===!0?"xy":t===!1?null:Dd(t,"tip",["x","y","xy"])}function Ey(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:t}const Av=new WeakMap;function Ay(t,e,{x:n,y:i,px:r,py:s,maxRadius:a=40,channels:u,render:c,...l}={}){return a=+a,r!=null&&(n??(n=null),u={...u,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),u={...u,py:{value:s,scale:"y"}}),{x:n,y:i,channels:u,...l,render:WE(function(f,h,d,p,m,g){const y=m.ownerSVGElement,{data:_}=m.getMarkState(this);let b=Av.get(y);b||Av.set(y,b={sticky:!1,roots:[],renders:[]});let x=b.renders.push(J)-1;const{x:v,y:w,fx:A,fy:T}=h;let C=A?A(f.fx)-p.marginLeft:0,L=T?T(f.fy)-p.marginTop:0;v!=null&&v.bandwidth&&(C+=v.bandwidth()/2),w!=null&&w.bandwidth&&(L+=w.bandwidth()/2);const O=f.fi!=null;let k;if(O){let ct=b.facetStates;ct||(b.facetStates=ct=new Map),k=ct.get(this),k||ct.set(this,k=new Map)}const[N,B]=yl(this,p),{px:q,py:E}=d,j=q?ct=>q[ct]:HE(d,N),F=E?ct=>E[ct]:YE(d,B);let U,$,X;function K(ct,tt){if(O)if(X&&(X=cancelAnimationFrame(X)),ct==null)k.delete(f.fi);else{k.set(f.fi,tt),X=requestAnimationFrame(()=>{X=null;for(const ut of k.values())if(ut<tt){ct=null;break}J(ct)});return}J(ct)}function J(ct){if(U===ct)return;U=ct;const tt=U==null?[]:[U];O&&(tt.fx=f.fx,tt.fy=f.fy,tt.fi=f.fi);const ut=g(tt,h,d,p,m);if($){if(O){const M=$.parentNode,W=$.getAttribute("transform"),G=ut.getAttribute("transform");W?ut.setAttribute("transform",W):ut.removeAttribute("transform"),G?M.setAttribute("transform",G):M.removeAttribute("transform"),ut.removeAttribute("aria-label"),ut.removeAttribute("aria-description"),ut.removeAttribute("aria-hidden")}$.replaceWith(ut)}return b.roots[x]=$=ut,m.dispatchValue(U==null?null:_[U]),ut}function ot(ct){if(b.sticky||ct.pointerType==="mouse"&&ct.buttons===1)return;let[tt,ut]=Z0(ct);tt-=C,ut-=L;let M=null,W=a*a;for(const G of f){const P=t*(j(G)-tt),et=e*(F(G)-ut),pt=P*P+et*et;pt<=W&&(M=G,W=pt)}K(M,W)}function Pt(ct){ct.pointerType==="mouse"&&U!=null&&(b.sticky&&b.roots.some(tt=>tt==null?void 0:tt.contains(ct.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(tt=>tt(null))):b.sticky=!0,ct.stopImmediatePropagation()))}function dt(ct){ct.pointerType==="mouse"&&(b.sticky||K(null))}return y.addEventListener("pointerenter",ot),y.addEventListener("pointermove",ot),y.addEventListener("pointerdown",Pt),y.addEventListener("pointerleave",dt),J(null)},c)}}function kU(t){return Ay(1,1,t)}function CU(t){return Ay(1,.01,t)}function MU(t){return Ay(.01,1,t)}function HE({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function YE({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function GE(t){return ro(t)&&t.interval===void 0?void 0:"tabular-nums"}function NU(t,e){return t===void 0?tr(e)?jE:mn:typeof t=="function"?t:(typeof t=="string"?tr(e)?Dc:xu:Au)(t)}function OU(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:a=18,marginRight:u=0,marginBottom:c=16+i,marginLeft:l=0,style:f,ticks:h=(r-l-u)/64,tickFormat:d,fontVariant:p=GE(t),round:m=!0,opacity:g,className:y}=e;const _=gy(e);y=wy(y),g=yn(g)[1],d===null&&(d=()=>null);const b=en("svg",_).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(N=>N.append("style").text(`.${y}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${y}-ramp text {
  white-space: pre;
}`)).call(xy,f);let x=N=>N.selectAll(".tick line").attr("y1",a+c-s),v;const w=m?(N,B)=>N.rangeRound(B):(N,B)=>N.range(B),{type:A,domain:T,range:C,interpolate:L,scale:O,pivot:k}=t;if(L){const N=C===void 0?L:jg(L.length===1?_y(L):L,C);v=w(O.copy(),Ji(pn(l,r-u),Math.min(T.length+(k!==void 0),C===void 0?1/0:C.length)));const B=256,q=_.document.createElement("canvas");q.width=B,q.height=1;const E=q.getContext("2d");for(let j=0,F=B-1;j<B;++j)E.fillStyle=N(j/F),E.fillRect(j,0,1,1);b.append("image").attr("opacity",g).attr("x",l).attr("y",a).attr("width",r-l-u).attr("height",s-a-c).attr("preserveAspectRatio","none").attr("xlink:href",q.toDataURL())}else if(A==="threshold"){const N=T,B=d===void 0?q=>q:typeof d=="string"?xu(d):d;v=w(Qg().domain([-1,C.length-1]),[l,r-u]),b.append("g").attr("fill-opacity",g).selectAll().data(C).enter().append("rect").attr("x",(q,E)=>v(E-1)).attr("y",a).attr("width",(q,E)=>v(E)-v(E-1)).attr("height",s-a-c).attr("fill",q=>q),h=an(N,(q,E)=>E),d=q=>B(N[q],q)}else v=w(yd().domain(T),[l,r-u]),b.append("g").attr("fill-opacity",g).selectAll().data(T).enter().append("rect").attr("x",v).attr("y",a).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-a-c).attr("fill",O),x=()=>{};return b.append("g").attr("transform",`translate(0,${s-c})`).call(DN(v).ticks(Array.isArray(h)?null:h,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ye(p,"normal")).call(x).call(N=>N.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}function Iv(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function FU(t,{opacity:e,...n}={}){if(!ro(t)&&!VE(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return KE(t,n,(i,r,s,a)=>i.append("svg").attr("width",s).attr("height",a).attr("fill",r.scale).attr("fill-opacity",yn(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function DU(t,{fill:e=(l=>(l=t.hint)==null?void 0:l.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(f=>(f=t.hint)==null?void 0:f.stroke)()!==void 0?t.hint.stroke:Hn(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:a=4.5,...u}={},c){const[h,d]=Qa(e),[p,m]=Qa(i),g=Iv(c,h),y=Iv(c,p),_=a*a*Math.PI;return n=yn(n)[1],r=yn(r)[1],s=yn(s)[1],KE(t,u,(b,x,v,w)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",w).attr("fill",h==="color"?A=>g.scale(A):d).attr("fill-opacity",n).attr("stroke",p==="color"?A=>y.scale(A):m).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",A=>{const T=Us();return t.scale(A).draw(T,_),T}))}function KE(t,e={},n){let{columns:i,tickFormat:r,fontVariant:s=GE(t),swatchSize:a=15,swatchWidth:u=a,swatchHeight:c=a,marginLeft:l=0,className:f,style:h,width:d}=e;const p=gy(e);f=wy(f),r=NU(r,t.domain);const m=en("div",p).attr("class",`${f}-swatches ${f}-swatches-${i!=null?"columns":"wrap"}`);let g;return i!=null?(g=`.${f}-swatches-columns .${f}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${f}-swatches-columns .${f}-swatch::before {
  flex-shrink: 0;
}
.${f}-swatches-columns .${f}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,t,u,c).call(y=>y.append("div").attr("class",`${f}-swatch-label`).attr("title",r).text(r))):(g=`.${f}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${f}-swatches-wrap .${f}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(t.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,t,u,c).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),m.call(y=>y.insert("style","*").text(`.${f}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${f}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",l?`${+l}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ye(s,"normal")).call(xy,h).node()}const $m=new Map([["symbol",DU],["color",JE],["opacity",LU]]);function RU(t,e,n={}){return(i,r)=>{if(!$m.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return $m.get(i)(t[i],XE(e,n[i],r),s=>t[s])}}function XE({className:t,...e},{label:n,ticks:i,tickFormat:r}={},s){return IB(s,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function JE(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return FU(t,n);case"ramp":return OU(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function LU({type:t,interpolate:e,...n},{legend:i=!0,color:r=Xs(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return JE({type:t,...n,interpolate:BU(r)},{legend:i,...s})}function BU(t){const{r:e,g:n,b:i}=Xs(t)||Xs(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function PU(t,e,n){const i=[];for(const[r,s]of $m){const a=n[r];if(a!=null&&a.legend&&r in t){const u=s(t[r],XE(e,t[r],a),c=>t[c]);u!=null&&i.push(u)}}return i}const QE=Math.PI/180;function Hd(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=f0(n),t.markerMid=f0(i),t.markerEnd=f0(r)}function f0(t){if(t==null||t===!1)return null;if(t===!0)return kv;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Tv("auto");case"arrow-reverse":return Tv("auto-start-reverse");case"dot":return UU;case"circle":case"circle-fill":return kv;case"circle-stroke":return VU}throw new Error(`invalid marker: ${t}`)}function Tv(t){return(e,n)=>en("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function UU(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function kv(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function VU(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let $U=0;function Iy(t,e,{stroke:n},i){return ZE(t,e,n&&(r=>n[r]),i)}function jU(t,e,{stroke:n},i){return ZE(t,e,n&&(([r])=>n[r]),i)}function ZE(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},s=()=>r,a){const u=new Map;function c(l){return function(f){const h=s(f);let d=u.get(l);d||u.set(l,d=new Map);let p=d.get(h);if(!p){const m=this.parentNode.insertBefore(l(h,a),this),g=`plot-marker-${++$U}`;m.setAttribute("id",g),d.set(h,p=`url(#${g})`)}return p}}e&&t.attr("marker-start",c(e)),n&&t.attr("marker-mid",c(n)),i&&t.attr("marker-end",c(i))}function Ty({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=tA(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function ky({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=tA(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function tA(t,e,n){return t===void 0&&e===void 0&&n===void 0?oi?[1,0]:[.5,.5]:[e,n]}function eA(t,{interval:e}){return t={...Ld(t)},t.interval=ly(t.interval===void 0?e:t.interval),t}function Yd(t,e,n,i){const{[t]:r,[`${t}1`]:s,[`${t}2`]:a}=n,{value:u,interval:c}=eA(r,n);if(u==null||c==null&&!i)return n;const l=hl(r);if(c==null){let p;const m={transform:g=>p||(p=Fi(g,u)),label:l};return{...n,[t]:void 0,[`${t}1`]:s===void 0?m:s,[`${t}2`]:a===void 0?m:a}}let f,h;function d(p){return h!==void 0&&p===f?h:h=an(Fi(f=p,u),m=>c.floor(m))}return e({...n,[t]:void 0,[`${t}1`]:s===void 0?{transform:d,label:l}:s,[`${t}2`]:a===void 0?{transform:p=>d(p).map(m=>c.offset(m)),label:l}:a})}function nA(t,e,n){const{[t]:i}=n,{value:r,interval:s}=eA(i,n);return r==null||s==null?n:e({...n,[t]:{label:hl(i),transform:a=>{const u=an(Fi(a,r),l=>s.floor(l)),c=u.map(l=>s.offset(l));return u.map(tr(u)?(l,f)=>l==null||isNaN(l=+l)||(f=c[f],f==null)||isNaN(f=+f)?void 0:new Date((l+f)/2):(l,f)=>l==null||(f=c[f],f==null)?NaN:(+l+ +f)/2)}}})}function zU(t={}){return Yd("x",Ty,t,!0)}function iA(t={}){return Yd("y",ky,t,!0)}function qU(t={}){return Yd("x",Ty,t)}function WU(t={}){return Yd("y",ky,t)}function HU(t={}){return nA("x",Ty,t)}function YU(t={}){return nA("y",ky,t)}const rA={ariaLabel:"rule",fill:null,stroke:"currentColor"};class GU extends Fn{constructor(e,n={}){const{x:i,y1:r,y2:s,inset:a=0,insetTop:u=a,insetBottom:c=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},Ey(n,"x"),rA),this.insetTop=Ae(u),this.insetBottom=Ae(c),Hd(this,n)}render(e,n,i,r,s){const{x:a,y:u}=n,{x:c,y1:l,y2:f}=i,{width:h,height:d,marginTop:p,marginRight:m,marginLeft:g,marginBottom:y}=r,{insetTop:_,insetBottom:b}=this;return en("svg:g",s).call(Pi,this,r).call(Vi,this,{x:c&&a},oi,0).call(x=>x.selectAll().data(e).enter().append("line").call(Ui,this).attr("x1",c?v=>c[v]:(g+h-m)/2).attr("x2",c?v=>c[v]:(g+h-m)/2).attr("y1",l&&!$s(u)?v=>l[v]+_:p+_).attr("y2",f&&!$s(u)?u.bandwidth?v=>f[v]+u.bandwidth()-b:v=>f[v]-b:d-y-b).call(jr,this,i).call(Iy,this,i,s)).node()}}class KU extends Fn{constructor(e,n={}){const{x1:i,x2:r,y:s,inset:a=0,insetRight:u=a,insetLeft:c=a}=n;super(e,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Ey(n,"y"),rA),this.insetRight=Ae(u),this.insetLeft=Ae(c),Hd(this,n)}render(e,n,i,r,s){const{x:a,y:u}=n,{y:c,x1:l,x2:f}=i,{width:h,height:d,marginTop:p,marginRight:m,marginLeft:g,marginBottom:y}=r,{insetLeft:_,insetRight:b}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{y:c&&u},0,oi).call(x=>x.selectAll().data(e).enter().append("line").call(Ui,this).attr("x1",l&&!$s(a)?v=>l[v]+_:g+_).attr("x2",f&&!$s(a)?a.bandwidth?v=>f[v]+a.bandwidth()-b:v=>f[v]-b:h-m-b).attr("y1",c?v=>c[v]:(p+d-y)/2).attr("y2",c?v=>c[v]:(p+d-y)/2).call(jr,this,i).call(Iy,this,i,s)).node()}}function Cy(t,e){let{x:n=di,y:i,y1:r,y2:s,...a}=WU(e);return[r,s]=sA(i,r,s),new GU(t,{...a,x:n,y1:r,y2:s})}function My(t,e){let{y:n=di,x:i,x1:r,x2:s,...a}=qU(e);return[r,s]=sA(i,r,s),new KU(t,{...a,y:n,x1:r,x2:s})}function sA(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Ny(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let s=0;s<n;++s)r+=e[s](i)+t[s+1];return r}}const XU={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},aA="­";class Oy extends Fn{constructor(e,n={}){const{x:i,y:r,text:s=ha(e)&&dE(e)?di:oE,frameAnchor:a,textAnchor:u=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:c=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:l=1,lineWidth:f=1/0,textOverflow:h,monospace:d,fontFamily:p=d?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:g,fontVariant:y,fontWeight:_,rotate:b}=n,[x,v]=yn(b,0),[w,A]=nV(m);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:w,optional:!0},rotate:{value:vB(x),optional:!0},text:{value:s,filter:uy,optional:!0}},n,XU),this.rotate=v,this.textAnchor=Ye(u,"middle"),this.lineAnchor=Ss(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+f,this.textOverflow=oA(h),this.monospace=!!d,this.fontFamily=mn(p),this.fontSize=A,this.fontStyle=mn(g),this.fontVariant=mn(y),this.fontWeight=mn(_),this.frameAnchor=Pd(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=cA(this),this.clipLine=lA(this)}render(e,n,i,r,s){const{x:a,y:u}=n,{x:c,y:l,rotate:f,text:h,title:d,fontSize:p}=i,{rotate:m}=this,[g,y]=yl(this,r);return en("svg:g",s).call(Pi,this,r,s).call(uA,this,h,r).call(Vi,this,{x:c&&a,y:l&&u}).call(_=>_.selectAll().data(e).enter().append("text").call(Ui,this).call(JU,this,h,d).attr("transform",Ny`translate(${c?b=>c[b]:g},${l?b=>l[b]:y})${f?b=>` rotate(${f[b]})`:m?` rotate(${m})`:""}`).call(St,"font-size",p&&(b=>p[b])).call(jr,this,i)).node()}}function oA(t){return t==null?null:Ss(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function JU(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:a,splitLines:u,clipLine:c}=e;t.each(function(l){const f=u(cs(n[l])??"").map(c),h=f.length,d=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let p=0;for(let m=0;m<h;++m){if(++p,!f[m])continue;const g=this.ownerDocument.createElementNS(Ho.svg,"tspan");g.setAttribute("x",0),m===p-1?g.setAttribute("y",`${(d+m)*s}em`):g.setAttribute("dy",`${p*s}em`),g.textContent=f[m],this.appendChild(g),p=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=f[0];if(a&&!i&&f[0]!==n[l]){const p=this.ownerDocument.createElementNS(Ho.svg,"title");p.textContent=n[l],this.appendChild(p)}})}function bl(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new Oy(t,{...i,x:e,y:n})}function QU(t,{x:e=di,...n}={}){return new Oy(t,YU({...n,x:e}))}function ZU(t,{y:e=di,...n}={}){return new Oy(t,HU({...n,y:e}))}function uA(t,e,n){St(t,"text-anchor",e.textAnchor),St(t,"font-family",e.fontFamily),St(t,"font-size",e.fontSize),St(t,"font-style",e.fontStyle),St(t,"font-variant",e.fontVariant===void 0?tV(n):e.fontVariant),St(t,"font-weight",e.fontWeight)}function tV(t){return t&&(SB(t)||tr(t))?"tabular-nums":void 0}const eV=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function nV(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),eV.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function iV(t,e,n){const i=[];let r,s=0;for(const[a,u,c]of rV(t)){if(r===void 0&&(r=a),s>r&&n(t,r,u)>e&&(i.push(t.slice(r,s)+(t[s-1]===aA?"-":"")),r=a),c){i.push(t.slice(r,u)),r=void 0;continue}s=u}return i}function*rV(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case aA:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Cv={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Fy(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=Iu(t,r))i+=Cv[t[r]]??(hA(t,r)?120:Cv.e);return i}function Dy(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=Iu(t,r))i+=hA(t,r)?200:100;return i}function cA({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return s=>s.split(/\r\n?|\n/g);const i=t?Dy:Fy,r=e*100;return s=>iV(s,r,i)}function lA({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return s=>s;const i=t?Dy:Fy,r=e*100;switch(n){case"clip-start":return s=>Nv(s,r,i,"");case"clip-end":return s=>Mv(s,r,i,"");case"ellipsis-start":return s=>Nv(s,r,i,Lo);case"ellipsis-middle":return s=>sV(s,r,i,Lo);case"ellipsis-end":return s=>Mv(s,r,i,Lo)}}const Lo="…";function nu(t,e,n,i){const r=[];let s=0;for(let a=0,u=0,c=t.length;a<c;a=u){u=Iu(t,a);const l=n(t,a,u);if(s+l>e){for(s+=i;s>e&&a>0;)u=a,a=r.pop(),s-=n(t,a,u);return[a,e-s]}s+=l,r.push(a)}return[-1,0]}function Mv(t,e,n,i){t=t.trim();const r=n(i),[s]=nu(t,e,n,r);return s<0?t:t.slice(0,s).trimEnd()+i}function sV(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i)/2,[a,u]=nu(t,e/2,n,s),[c]=nu(t,r-e/2-u+s,n,-s);return c<0?i:t.slice(0,a).trimEnd()+i+t.slice(Iu(t,c)).trimStart()}function Nv(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i),[a]=nu(t,r-e+s,n,-s);return a<0?i:i+t.slice(Iu(t,a)).trimStart()}const jm=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Ov=/\p{Extended_Pictographic}/uy;function Iu(t,e){return e+=aV(t,e)?2:1,uV(t,e)&&(e=jm.lastIndex),oV(t,e)?Iu(t,e+1):e}function fA(t,e){return t.charCodeAt(e)<128}function aV(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function oV(t,e){return t.charCodeAt(e)===8205}function uV(t,e){return fA(t,e)?!1:(jm.lastIndex=e,jm.test(t))}function hA(t,e){return fA(t,e)?!1:(Ov.lastIndex=e,Ov.test(t))}const cV={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},dA=3.5,lV=dA*5,pA={draw(t,e,n){const i=e*n/lV;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},fV={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},hV=new Map([["arrow",pA],["spike",fV]]);function dV(t){return t&&typeof t.draw=="function"}function pV(t){if(dV(t))return t;const e=hV.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let mA=class extends Fn{constructor(e,n={}){const{x:i,y:r,r:s=dA,length:a,rotate:u,shape:c=pA,anchor:l="middle",frameAnchor:f}=n,[h,d]=yn(a,12),[p,m]=yn(u,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,cV),this.r=+s,this.length=d,this.rotate=m,this.shape=pV(c),this.anchor=Ss(l,"anchor",["start","middle","end"]),this.frameAnchor=Pd(f)}render(e,n,i,r,s){const{x:a,y:u}=n,{x:c,y:l,length:f,rotate:h}=i,{length:d,rotate:p,anchor:m,shape:g,r:y}=this,[_,b]=yl(this,r);return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:c&&a,y:l&&u}).call(x=>x.selectAll().data(e).enter().append("path").call(Ui,this).attr("transform",Ny`translate(${c?v=>c[v]:_},${l?v=>l[v]:b})${h?v=>` rotate(${h[v]})`:p?` rotate(${p})`:""}${m==="start"?"":m==="end"?f?v=>` translate(0,${f[v]})`:` translate(0,${d})`:f?v=>` translate(0,${f[v]/2})`:` translate(0,${d/2})`}`).attr("d",f?v=>{const w=Us();return g.draw(w,f[v],y),w}:(()=>{const v=Us();return g.draw(v,d,y),v})()).call(jr,this,i)).node()}};function mV(t,e={}){const{x:n=di,...i}=e;return new mA(t,{...i,x:n})}function gV(t,e={}){const{y:n=di,...i}=e;return new mA(t,{...i,y:n})}function pa(t,e){return arguments.length<2&&!ha(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Gd({anchor:t}={},e){return t===void 0?e[0]:Ss(t,"anchor",e)}function gA(t){return Gd(t,["left","right"])}function yA(t){return Gd(t,["right","left"])}function bA(t){return Gd(t,["bottom","top"])}function _A(t){return Gd(t,["top","bottom"])}function Tu(){const[t,e]=pa(...arguments);return vA("y",gA(e),t,e)}function yV(){const[t,e]=pa(...arguments);return vA("fy",yA(e),t,e)}function so(){const[t,e]=pa(...arguments);return wA("x",bA(e),t,e)}function bV(){const[t,e]=pa(...arguments);return wA("fx",_A(e),t,e)}function vA(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:u=1,fill:c=i,fillOpacity:l=r,textAnchor:f,textStroke:h,textStrokeOpacity:d,textStrokeWidth:p,tickSize:m=t==="y"?6:0,tickPadding:g,tickRotate:y,x:_,margin:b,marginTop:x=b===void 0?20:b,marginRight:v=b===void 0?e==="right"?40:0:b,marginBottom:w=b===void 0?20:b,marginLeft:A=b===void 0?e==="left"?40:0:b,label:T,labelAnchor:C,labelArrow:L,labelOffset:O,...k}){return m=Ae(m),g=Ae(g),y=Ae(y),C!==void 0&&(C=Ss(C,"labelAnchor",["center","top","bottom"])),L=CA(L),qE(m&&!Hn(s)?_V(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:u,tickSize:m,tickPadding:g,tickRotate:y,x:_,...k}):null,Hn(c)?null:wV(t,e,n,{fill:c,fillOpacity:l,stroke:h,strokeOpacity:d,strokeWidth:p,textAnchor:f,tickSize:m,tickPadding:g,tickRotate:y,x:_,marginTop:x,marginRight:v,marginBottom:w,marginLeft:A,...k}),!Hn(c)&&T!==null?bl([],AA({fill:c,fillOpacity:l,...k},function(N,B,q,E,j){const F=E[t],{marginTop:U,marginRight:$,marginBottom:X,marginLeft:K}=t==="y"&&j.inset||j,J=C??(F.bandwidth?"center":"top"),ot=O??(e==="right"?$:K)-3;return J==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=J,this.frameAnchor=`${J}-${e}`,this.rotate=0),this.dy=J==="top"?3-U:J==="bottom"?X-3:0,this.dx=e==="right"?ot:-ot,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[kA(t,F,{anchor:e,label:T,labelAnchor:J,labelArrow:L})]}}}})):null)}function wA(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:u=1,fill:c=i,fillOpacity:l=r,textAnchor:f,textStroke:h,textStrokeOpacity:d,textStrokeWidth:p,tickSize:m=t==="x"?6:0,tickPadding:g,tickRotate:y,y:_,margin:b,marginTop:x=b===void 0?e==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:w=b===void 0?e==="bottom"?30:0:b,marginLeft:A=b===void 0?20:b,label:T,labelAnchor:C,labelArrow:L,labelOffset:O,...k}){return m=Ae(m),g=Ae(g),y=Ae(y),C!==void 0&&(C=Ss(C,"labelAnchor",["center","left","right"])),L=CA(L),qE(m&&!Hn(s)?vV(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:u,tickSize:m,tickPadding:g,tickRotate:y,y:_,...k}):null,Hn(c)?null:xV(t,e,n,{fill:c,fillOpacity:l,stroke:h,strokeOpacity:d,strokeWidth:p,textAnchor:f,tickSize:m,tickPadding:g,tickRotate:y,y:_,marginTop:x,marginRight:v,marginBottom:w,marginLeft:A,...k}),!Hn(c)&&T!==null?bl([],AA({fill:c,fillOpacity:l,...k},function(N,B,q,E,j){const F=E[t],{marginTop:U,marginRight:$,marginBottom:X,marginLeft:K}=t==="x"&&j.inset||j,J=C??(F.bandwidth?"center":"right"),ot=O??(e==="top"?U:X)-3;return J==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${J}`,this.textAnchor=J==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-ot:ot,this.dx=J==="right"?$-3:J==="left"?3-K:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[kA(t,F,{anchor:e,label:T,labelAnchor:J,labelArrow:L})]}}}})):null)}function _V(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:u=e,tickSize:c,inset:l=0,insetLeft:f=l,insetRight:h=l,dx:d=0,y:p=t==="y"?void 0:null,...m}){return ku(gV,t,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:a,frameAnchor:u,y:p,...m,dx:e==="left"?+d-oi+ +f:+d+oi-h,anchor:"start",length:c,shape:e==="left"?CV:MV})}function vV(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:u=e,tickSize:c,inset:l=0,insetTop:f=l,insetBottom:h=l,dy:d=0,x:p=t==="x"?void 0:null,...m}){return ku(mV,t,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:a,frameAnchor:u,x:p,...m,dy:e==="bottom"?+d-oi-h:+d+oi+ +f,anchor:"start",length:c,shape:e==="bottom"?TV:kV})}function wV(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:u=Math.max(3,9-s)+(Math.abs(a)>60?4*Math.cos(a*QE):0),tickFormat:c,text:l=typeof c=="function"?c:void 0,textAnchor:f=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:h=a>60?"top":a<-60?"bottom":"middle",fontVariant:d,inset:p=0,insetLeft:m=p,insetRight:g=p,dx:y=0,y:_=t==="y"?void 0:null,...b}){return ku(ZU,t,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:f,lineAnchor:h,fontVariant:d,rotate:a,y:_,...b,dx:e==="left"?+y-s-u+ +m:+y+ +s+ +u-g},function(x,v,w){d===void 0&&(this.fontVariant=TA(x)),l===void 0&&(w.text=IA(x,v,c))})}function xV(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:u=Math.max(3,9-s)+(Math.abs(a)>=10?4*Math.cos(a*QE):0),tickFormat:c,text:l=typeof c=="function"?c:void 0,textAnchor:f=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:h=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:d,inset:p=0,insetTop:m=p,insetBottom:g=p,dy:y=0,x:_=t==="x"?void 0:null,...b}){return ku(QU,t,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:f,lineAnchor:h,fontVariant:d,rotate:a,x:_,...b,dy:e==="bottom"?+y+ +s+ +u-g:+y-s-u+ +m},function(x,v,w){d===void 0&&(this.fontVariant=TA(x)),l===void 0&&(w.text=IA(x,v,c))})}function SV(){const[t,e]=pa(...arguments);return xA("y",gA(e),t,e)}function EV(){const[t,e]=pa(...arguments);return xA("fy",yA(e),t,e)}function AV(){const[t,e]=pa(...arguments);return SA("x",bA(e),t,e)}function IV(){const[t,e]=pa(...arguments);return SA("fx",_A(e),t,e)}function xA(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:s=e==="left"?r:null,x2:a=e==="right"?r:null,...u}){return ku(My,t,`${t}-grid`,n,{y:i,x1:s,x2:a,...EA(u)})}function SA(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:s=e==="top"?r:null,y2:a=e==="bottom"?r:null,...u}){return ku(Cy,t,`${t}-grid`,n,{x:i,y1:s,y2:a,...EA(u)})}function EA({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function AA({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:u,shapeRendering:c},l){return[,t]=Qa(t),[,e]=yn(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:u,shapeRendering:c,initializer:l}}function ku(t,e,n,i,r,s){let a;const u=t(i,pl(r,function(c,l,f,h,d,p){const m=c==null&&(e==="fx"||e==="fy"),{[e]:g}=h;if(!g)throw new Error(`missing scale: ${e}`);let{ticks:y,tickSpacing:_,interval:b}=r;if(UE(g)&&typeof y=="string"&&(b=y,y=void 0),c==null){if(ha(y))c=Dr(y);else if(g.ticks)if(y!==void 0)c=g.ticks(y);else if(b=dl(b===void 0?g.interval:b,g.type),b!==void 0){const[v,w]=Wo(g.domain());c=b.range(v,b.offset(b.floor(w)))}else{const[v,w]=Wo(g.range());y=(w-v)/(_===void 0?e==="x"?80:35:_),c=g.ticks(y)}else c=g.domain();e==="y"||e==="x"?l=[fa(c)]:a[e]={scale:e,value:di}}s==null||s.call(this,g,y,a);const x=Object.fromEntries(Object.entries(a).map(([v,w])=>[v,{...w,value:Fi(c,w.value)}]));return m&&(l=p.filterFacets(c,x)),{data:c,facets:l,channels:x}}));return i==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=n,u}function IA(t,e,n){return{value:zm(t,e,n)}}function zm(t,e,n){return t.tickFormat?t.tickFormat(ha(e)?null:e,n):n===void 0?iB(t.interval)?Dc("%Y"):rB(t.interval)?ey("%Y"):cs:typeof n=="string"?(tr(t.domain())?Dc:xu)(n):Au(n)}const TV={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},kV={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},CV={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},MV={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function TA(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function NV(t){return Math.sign(Pc(t.domain()))*Math.sign(Pc(t.range()))}function kA(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&OV(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const a=NV(e);a&&(s=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function CA(t="auto"){return Hn(t)?!1:typeof t=="boolean"?t:Ss(t,"labelArrow",["auto","up","right","down","left"])}function OV(t){return UE(t)||t.interval!=null}const FV={ariaLabel:"frame",fill:"none",stroke:"currentColor"},DV={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class RV extends Fn{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:a=i,insetLeft:u=i,rx:c,ry:l}=e;super(xf,void 0,e,n==null?FV:DV),this.anchor=Dd(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ae(r),this.insetRight=Ae(s),this.insetBottom=Ae(a),this.insetLeft=Ae(u),this.rx=Ae(c),this.ry=Ae(l)}render(e,n,i,r,s){const{marginTop:a,marginRight:u,marginBottom:c,marginLeft:l,width:f,height:h}=r,{anchor:d,insetTop:p,insetRight:m,insetBottom:g,insetLeft:y,rx:_,ry:b}=this,x=l+y,v=f-u-m,w=a+p,A=h-c-g;return en(d?"svg:line":"svg:rect",s).datum(0).call(Pi,this,r,s).call(Ui,this).call(jr,this,i).call(Vi,this,{}).call(d==="left"?T=>T.attr("x1",x).attr("x2",x).attr("y1",w).attr("y2",A):d==="right"?T=>T.attr("x1",v).attr("x2",v).attr("y1",w).attr("y2",A):d==="top"?T=>T.attr("x1",x).attr("x2",v).attr("y1",w).attr("y2",w):d==="bottom"?T=>T.attr("x1",x).attr("x2",v).attr("y1",A).attr("y2",A):T=>T.attr("x",x).attr("y",w).attr("width",v-x).attr("height",A-w).attr("rx",_).attr("ry",b)).node()}}function LV(t){return new RV(t)}const h0={ariaLabel:"tip",fill:"white",stroke:"currentColor"},BV=new Set(["geometry","href","src","ariaLabel"]);class PV extends Fn{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ha(e)&&dE(e)&&(n={...n,title:di});const{x:i,y:r,x1:s,x2:a,y1:u,y2:c,anchor:l,monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:g,lineHeight:y=1,lineWidth:_=20,frameAnchor:b,textAnchor:x="start",textOverflow:v,textPadding:w=8,pointerSize:A=12,pathFilter:T="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:s!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:u!=null&&c!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:a==null},y1:{value:u,scale:"y",optional:c==null},x2:{value:a,scale:"x",optional:s==null},y2:{value:c,scale:"y",optional:u==null}},n,h0),this.anchor=pE(l,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Pd(b),this.textAnchor=Ye(x,"middle"),this.textPadding=+w,this.pointerSize=+A,this.pathFilter=mn(T),this.lineHeight=+y,this.lineWidth=+_,this.textOverflow=oA(v),this.monospace=!!f,this.fontFamily=mn(h),this.fontSize=Ae(d),this.fontStyle=mn(p),this.fontVariant=mn(m),this.fontWeight=mn(g);for(const C in h0)C in this.channels&&(this[C]=h0[C]);this.splitLines=cA(this),this.clipLine=lA(this)}render(e,n,i,r,s){const a=this,{x:u,y:c,fx:l,fy:f}=n,{ownerSVGElement:h,document:d}=s,{anchor:p,monospace:m,lineHeight:g,lineWidth:y}=this,{textPadding:_,pointerSize:b,pathFilter:x}=this,{marginTop:v,marginLeft:w}=r,A=zV(i),{x1:T,y1:C,x2:L,y2:O,x:k=T??L,y:N=C??O}=i,B=l?l(e.fx)-w:0,q=f?f(e.fy)-v:0,[E,j]=yl(this,r),F=HE(i,E),U=YE(i,j),$=m?Dy:Fy,X=$(Lo),K=l&&zm(l),J=f&&zm(f);function*ot(tt,ut){if("title"in tt){const M=tt.title.value[ut];for(const W of a.splitLines(cs(M)))yield{name:"",value:a.clipLine(W)};return}for(const M in tt){if(M==="x1"&&"x2"in tt||M==="y1"&&"y2"in tt)continue;const W=tt[M],G=W.value[ut];if(!(!Qs(G)&&W.scale==null))if(M==="x2"&&"x1"in tt)yield{name:d0(n,W,"x"),value:Fv(tt.x1,W,ut)};else if(M==="y2"&&"y1"in tt)yield{name:d0(n,W,"y"),value:Fv(tt.y1,W,ut)};else{const P=W.scale,et={name:d0(n,W,M),value:cs(G)};(P==="color"||P==="opacity")&&(et[P]=i[M][ut]),yield et}}e.fi!=null&&l&&(yield{name:String(l.label??"fx"),value:K(e.fx)}),e.fi!=null&&f&&(yield{name:String(f.label??"fy"),value:J(e.fy)})}const Pt=en("svg:g",s).call(Pi,this,r,s).call(uA,this).call(Vi,this,{x:k&&u,y:N&&c}).call(tt=>tt.selectAll().data(e).enter().append("g").attr("transform",ut=>`translate(${Math.round(F(ut))},${Math.round(U(ut))})`).call(Ui,this).call(ut=>ut.append("path").attr("filter",x)).call(ut=>ut.append("text").each(function(M){const W=Wn(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const G=new Set;for(const P of ot(A,M)){const et=P.name;et&&G.has(et)||(G.add(et),dt(W,P))}})));function dt(tt,{name:ut,value:M,color:W,opacity:G}){const P=W!=null||G!=null;let et,pt=y*100;const[bt]=nu(ut,pt,$,X);if(bt>=0)ut=ut.slice(0,bt).trimEnd()+Lo,et=M.trim(),M="";else{(ut||!M&&!P)&&(M=" "+M);const[Y]=nu(M,pt-$(ut),$,X);Y>=0&&(M=M.slice(0,Y).trimEnd()+Lo,et=M.trim())}const mt=tt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");ut&&mt.append("tspan").attr("font-weight","bold").text(ut),M&&mt.append(()=>d.createTextNode(M)),P&&mt.append("tspan").text(" ■").attr("fill",W).attr("fill-opacity",G).style("user-select","none"),et&&mt.append("title").text(et)}function ct(){const{width:tt,height:ut}=r.facet??r;Pt.selectChildren().each(function(M){let{x:W,width:G,height:P}=this.getBBox();G=Math.round(G),P=Math.round(P);let et=p;if(et===void 0){et=a.previousAnchor;const mt=F(M)+B,Y=U(M)+q,xt=mt+G+_*2<tt,ne=mt-G-_*2>0,ye=Y+P+b+_*2+7<ut,pe=Y-P-b-_*2>0,Rn=(/-left$/.test(et)?xt||!ne:xt&&!ne)?"left":"right",$e=(/^top-/.test(et)?ye||!pe:ye&&!pe)?"top":"bottom";et=a.previousAnchor=`${$e}-${Rn}`}const pt=this.firstChild,bt=this.lastChild;if(pt.setAttribute("d",jV(et,b,_,G,P)),W)for(const mt of bt.childNodes)mt.setAttribute("x",-W);bt.setAttribute("y",`${+VV(et,bt.childNodes.length,g).toFixed(6)}em`),bt.setAttribute("transform",`translate(${$V(et,b,_,G,P)})`)})}return h.isConnected?Promise.resolve().then(ct):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ct),Pt.node()}}function UV(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new PV(t,{...i,x:e,y:n})}function VV(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function $V(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function jV(t,e,n,i,r){const s=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-s/2},${-a/2}h${s}v${a}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${a}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${a}h${-s}v${-a}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${a}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-s}v${a}h${s}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-a}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-a}h${-s}v${a}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-a}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${s}v${a}h${-s}v${e/2-a/2}z`}}function zV({channels:t}){const e={};for(const n in t){if(BV.has(n))continue;const i=QB(t,n);i&&(e[n]=i)}return e}function Fv(t,e,n){var i;return(i=e.hint)!=null&&i.length?`${cs(e.value[n]-t.value[n])}`:`${cs(t.value[n])}–${cs(e.value[n])}`}function d0(t,e,n){var i;return String(((i=t[e.scale])==null?void 0:i.label)??(e==null?void 0:e.label)??n)}function Ry(t={}){var j;const{facet:e,style:n,caption:i,ariaLabel:r,ariaDescription:s}=t,a=wy(t.className),u=t.marks===void 0?[]:Dv(t.marks);u.push(...XV(u));const c=GV(e,t),l=new Map;for(const F of u){const U=Rv(F,c,t);U&&l.set(F,U)}const f=new Map;c&&Ku(f,[c]),Ku(f,l);const h=Dv(JV(u,f,t));for(const F of h){const U=Rv(F,c,t);U&&l.set(F,U)}u.unshift(...h);let d=pU(f,t);if(d!==void 0){const F=c?l0(d,c):void 0;for(const $ of u){if($.facet===null||$.facet==="super")continue;const X=l.get($);X!==void 0&&(X.facetsIndex=$.fx!=null||$.fy!=null?l0(d,X):F)}const U=new Set;for(const{facetsIndex:$}of l.values())$==null||$.forEach((X,K)=>{(X==null?void 0:X.length)>0&&U.add(K)});d.forEach(0<U.size&&U.size<d.length?($,X)=>$.empty=!U.has(X):$=>$.empty=!1);for(const $ of u)if($.facet==="exclude"){const X=l.get($);X!==void 0&&(X.facetsIndex=yU(X.facetsIndex))}}for(const F of De.keys())xh(t[F])&&F!=="fx"&&F!=="fy"&&f.set(F,[]);const p=new Map;for(const F of u){if(p.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:$}=l.get(F)??{},{data:X,facets:K,channels:J}=F.initialize(U,$,t);Ly(J,t),p.set(F,{data:X,facets:K,channels:J})}const m=Pm(Ku(f,p),t),g=bv(m),y=hU(m,u,t);VP(m,y);const{fx:_,fy:b}=g,x=_||b?RE(m,y):y,v=_||b?r$(g,y):y,w=gy(t),A=w.document,T=cd("svg").call(A.documentElement);let C=T;w.ownerSVGElement=T,w.className=a,w.projection=tP(t,x),w.filterFacets=(F,U)=>l0(d,{channels:U,groups:Sy(F,U)}),w.getMarkState=F=>{const U=p.get(F),$=l.get(F);return{...U,channels:{...U.channels,...$==null?void 0:$.channels}}},w.dispatchValue=F=>{C.value!==F&&(C.value=F,C.dispatchEvent(new Event("input",{bubbles:!0})))};const L=new Set;for(const[F,U]of p)if(F.initializer!=null){const $=F.facet==="super"?v:x,X=F.initializer(U.data,U.facets,U.channels,g,$,w);if(X.data!==void 0&&(U.data=X.data),X.facets!==void 0&&(U.facets=X.facets),X.channels!==void 0){const{fx:K,fy:J,...ot}=X.channels;YV(ot),Object.assign(U.channels,ot);for(const Pt of Object.values(ot)){const{scale:dt}=Pt;dt!=null&&De.get(dt)!==Ar&&(MA(Pt,t),L.add(dt))}(K!=null||J!=null)&&l.set(F,!0)}}if(L.size){const F=new Map;Ku(F,p,X=>L.has(X)),Ku(f,p,X=>L.has(X));const U=i$(Pm(F,t),m),$=bv(U);Object.assign(m,U),Object.assign(g,$)}let O,k;d!==void 0&&(O={x:_==null?void 0:_.domain(),y:b==null?void 0:b.domain()},d=mU(d,O),k=gU(_,b,y));for(const[F,U]of p)U.values=F.scale(U.channels,g,w);const{width:N,height:B}=y;Wn(T).attr("class",a).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",B).attr("viewBox",`0 0 ${N} ${B}`).attr("aria-label",r).attr("aria-description",s).call(F=>F.append("style").text(`.${a} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${a} text,
.${a} tspan {
  white-space: pre;
}`)).call(xy,n);for(const F of u){const{channels:U,values:$,facets:X}=p.get(F);if(d===void 0||F.facet==="super"){let K=null;if(X&&(K=X[0],K=F.filter(K,U,$),K.length===0))continue;const J=F.render(K,g,$,v,w);if(J==null)continue;T.appendChild(J)}else{let K;for(const J of d){if(!(((j=F.facetAnchor)==null?void 0:j.call(F,d,O,J))??!J.empty))continue;let ot=null;if(X){const dt=l.has(F);if(ot=X[dt?J.i:0],ot=F.filter(ot,U,$),ot.length===0)continue;dt&&(ot.fx=J.x,ot.fy=J.y,ot.fi=J.i)}const Pt=F.render(ot,g,$,x,w);if(Pt!=null){(K??(K=Wn(T).append("g"))).append(()=>Pt).datum(J);for(const dt of["aria-label","aria-description","aria-hidden","transform"])Pt.hasAttribute(dt)&&(K.attr(dt,Pt.getAttribute(dt)),Pt.removeAttribute(dt))}}K==null||K.selectChildren().attr("transform",k)}}const q=PU(m,w,t);if(i!=null||q.length>0){C=A.createElement("figure"),C.style.maxWidth="initial";for(const F of q)C.appendChild(F);if(C.appendChild(T),i!=null){const F=A.createElement("figcaption");F.appendChild(i!=null&&i.ownerDocument?i:A.createTextNode(i)),C.appendChild(F)}}C.scale=YP(m),C.legend=RU(m,w,t);const E=ZB();return E>0&&Wn(T).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${E.toLocaleString("en-US")} warning${E===1?"":"s"}. Please check the console.`),C}function qV({marks:t=[],...e}={}){return Ry({...e,marks:[...t,this]})}Fn.prototype.plot=qV;function Dv(t){return t.flat(1/0).filter(e=>e!=null).map(WV)}function WV(t){return typeof t.render=="function"?t:new HV(t)}class HV extends Fn{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Ly(t,e){for(const n in t)MA(t[n],e);return t}function MA(t,e){const{scale:n}=t;if(n==null)return;const{type:i,percent:r,interval:s,transform:a=r?u=>u*100:hE(s,i)}=e[n]??{};a!=null&&(t.value=an(t.value,a))}function YV(t){for(const e in t)bE(e,t[e])}function Ku(t,e,n=uB){for(const{channels:i}of e.values())for(const r in i){const s=i[r],{scale:a}=s;if(a!=null&&n(a)){const u=t.get(a);u!==void 0?u.push(s):t.set(a,[s])}}return t}function GV(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Dr(t.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Uc(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Uc(r,{value:i,scale:"fy"})),Ly(s,e);const a=Sy(r,s);return{channels:s,groups:a,data:t.data}}function Rv(t,e,n){var c;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const l=Dr(t.data??i??r);if(l===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(l===null)return;const f={};return i!=null&&(f.fx=Uc(l,{value:i,scale:"fx"})),r!=null&&(f.fy=Uc(l,{value:r,scale:"fy"})),Ly(f,n),{channels:f,groups:Sy(l,f)}}if(e===void 0)return;const{channels:s,groups:a,data:u}=e;if(t.facet!=="auto"||t.data===u)return{channels:s,groups:a};u.length>0&&(a.size>1||a.size===1&&s.fx&&s.fy&&[...a][0][1].size>1)&&((c=Dr(t.data))==null?void 0:c.length)===u.length&&Ro(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function KV(t,e={}){return pl({...e,x:null,y:null},(n,i,r,s,a,u)=>u.getMarkState(t))}function XV(t){const e=[];for(const n of t){const i=n.tip;if(i){const r=i==="x"?CU:i==="y"?MU:kU;e.push(UV(n.data,r(KV(n))))}}return e}function JV(t,e,n){let{projection:i,x:r={},y:s={},fx:a={},fy:u={},axis:c,grid:l,facet:f={},facet:{axis:h=c,grid:d}=f,x:{axis:p=c,grid:m=p===null?null:l}=r,y:{axis:g=c,grid:y=g===null?null:l}=s,fx:{axis:_=h,grid:b=_===null?null:d}=a,fy:{axis:x=h,grid:v=x===null?null:d}=u}=n;(i||!xh(r)&&!Lv("x",t))&&(p=m=null),(i||!xh(s)&&!Lv("y",t))&&(g=y=null),e.has("fx")||(_=b=null),e.has("fy")||(x=v=null),p===void 0&&(p=!Ql(t,"x")),g===void 0&&(g=!Ql(t,"y")),_===void 0&&(_=!Ql(t,"fx")),x===void 0&&(x=!Ql(t,"fy")),p===!0&&(p="bottom"),g===!0&&(g="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),x===!0&&(x=g==="right"||g===null?"left":"right");const w=[];return Jl(w,v,EV,u),Xl(w,x,yV,"right","left",f,u),Jl(w,b,IV,a),Xl(w,_,bV,"top","bottom",f,a),Jl(w,y,SV,s),Xl(w,g,Tu,"left","right",n,s),Jl(w,m,AV,r),Xl(w,p,so,"bottom","top",n,r),w}function Xl(t,e,n,i,r,s,a){if(!e)return;const u=QV(e);a=ZV(u?i:e,s,a);const{line:c}=a;(n===Tu||n===so)&&c&&!Bc(c)&&t.push(LV(t$(a))),t.push(n(a)),u&&t.push(n({...a,anchor:r,label:null}))}function Jl(t,e,n,i){!e||Bc(e)||t.push(n(e$(e,i)))}function QV(t){return/^\s*both\s*$/i.test(t)}function ZV(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:u,tickRotate:c,fontVariant:l,ariaLabel:f,ariaDescription:h,label:d=e.label,labelAnchor:p,labelArrow:m=e.labelArrow,labelOffset:g}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:u,tickRotate:c,fontVariant:l,ariaLabel:f,ariaDescription:h,label:d,labelAnchor:p,labelArrow:m,labelOffset:g}}function t$(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function e$(t,{stroke:e=Bd(t)?t:void 0,ticks:n=n$(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function n$(t){switch(typeof t){case"number":return!0;case"string":return!Bd(t)}return ha(t)||typeof(t==null?void 0:t.range)=="function"}function Ql(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Lv(t,e){for(const n of e)for(const i in n.channels)if(n.channels[i].scale===t)return!0;return!1}function i$(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function r$({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:u,height:c}=vy(n),l=t&&Bv(t),f=e&&Bv(e);return{marginTop:e?f[0]:i,marginRight:t?u-l[1]:r,marginBottom:e?c-f[1]:s,marginLeft:t?l[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:c}}function Bv(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const s$=new Map([["basis",FL],["basis-closed",DL],["basis-open",RL],["bundle",LL],["bump-x",xL],["bump-y",SL],["cardinal",BL],["cardinal-closed",PL],["cardinal-open",UL],["catmull-rom",VL],["catmull-rom-closed",$L],["catmull-rom-open",jL],["linear",Md],["linear-closed",zL],["monotone-x",qL],["monotone-y",WL],["natural",HL],["step",YL],["step-after",KL],["step-before",GL]]);function a$(t=Md,e){if(typeof t=="function")return t;const n=s$.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function NA(t=iu,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?iu:a$(t,e)}function iu(t){return Md(t)}function o$(t={}){return cE(t)?t:{...t,x:di}}function u$(t={},e={}){arguments.length===1&&([t,e]=l$(t));const{y1:n,y:i=n,x:r,...s}=e,[a,u,c,l]=h$(i,r,"y","x",t,s);return{...a,y1:n,y:u,x1:c,x2:l,x:yB(c,l)}}function c$({x:t,x1:e,x2:n,...i}={}){return i=Ey(i,"y"),e===void 0&&n===void 0?u$({x:t,...i}):([e,n]=mB(t,e,n),{...i,x1:e,x2:n})}function l$(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const f$={length:!0};function h$(t,e=oB,n,i,{offset:r,order:s,reverse:a},u){const c=lE(u),[l,f]=gB(t),[h,d]=Rm(e),[p,m]=Rm(e);return h.hint=p.hint=f$,r=d$(r),s=g$(s,r,i),[py(u,(g,y,_)=>{const b=t==null?void 0:f(bB(Fi(g,t),_==null?void 0:_[n])),x=Fi(g,e,Float64Array),v=Fi(g,c),w=s&&s(g,b,x,v),A=g.length,T=d(new Float64Array(A)),C=m(new Float64Array(A)),L=[];for(const O of y){const k=b?Array.from(Mg(O,N=>b[N]).values()):[O];w&&x$(k,w);for(const N of k){let B=0,q=0;a&&N.reverse();for(const E of N){const j=x[E];j<0?B=C[E]=(T[E]=B)+j:j>0?q=C[E]=(T[E]=q)+j:C[E]=T[E]=q}}L.push(k)}return r&&r(L,T,C,v),{data:g,facets:y}}),l,h,p]}function d$(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return p$;case"center":case"silhouette":return m$;case"wiggle":return FA}throw new Error(`unknown offset: ${t}`)}}function OA(t,e){let n=0,i=0;for(const r of t){const s=e[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function p$(t,e,n){for(const i of t)for(const r of i){const[s,a]=OA(r,n);for(const u of r){const c=1/(a-s||1);e[u]=c*(e[u]-s),n[u]=c*(n[u]-s)}}}function m$(t,e,n){for(const i of t){for(const r of i){const[s,a]=OA(r,n);for(const u of r){const c=(a+s)/2;e[u]-=c,n[u]-=c}}DA(i,e,n)}RA(t,e,n)}function FA(t,e,n,i){for(const r of t){const s=new za;let a=0;for(const u of r){let c=-1;const l=u.map(p=>Math.abs(n[p]-e[p])),f=u.map(p=>{c=i?i[p]:++c;const m=n[p]-e[p],g=s.has(c)?m-s.get(c):0;return s.set(c,m),g}),h=[0,...pN(f)];for(const p of u)e[p]+=a,n[p]+=a;const d=qa(l);d&&(a-=qa(l,(p,m)=>(f[m]/2+h[m])*p)/d)}DA(r,e,n)}RA(t,e,n)}function DA(t,e,n){const i=Or(t,r=>Or(r,s=>e[s]));for(const r of t)for(const s of r)e[s]-=i,n[s]-=i}function RA(t,e,n){const i=t.length;if(i===1)return;const r=t.map(u=>u.flat()),s=r.map(u=>(Or(u,c=>e[c])+Ri(u,c=>n[c]))/2),a=Or(s);for(let u=0;u<i;u++){const c=a-s[u];for(const l of r[u])e[l]+=c,n[l]+=c}}function g$(t,e,n){if(t===void 0&&e===FA)return Pv;if(t!=null){if(typeof t=="string"){switch(t.toLowerCase()){case"value":case n:return y$;case"z":return b$;case"sum":return _$;case"appearance":return v$;case"inside-out":return Pv}return Uv(aE(t))}if(typeof t=="function")return Uv(t);if(Array.isArray(t))return w$(t);throw new Error(`invalid order: ${t}`)}}function y$(t,e,n){return n}function b$(t,e,n,i){return i}function _$(t,e,n,i){return Kd(i,Og(fa(t),r=>qa(r,s=>n[s]),r=>i[r]))}function v$(t,e,n,i){return Kd(i,Og(fa(t),r=>e[Tx(r,s=>n[s])],r=>i[r]))}function Pv(t,e,n,i){const r=fa(t),s=Og(r,f=>e[Tx(f,h=>n[h])],f=>i[f]),a=hc(r,f=>qa(f,h=>n[h]),f=>i[f]),u=[],c=[];let l=0;for(const f of s)l<0?(l+=a.get(f),u.push(f)):(l-=a.get(f),c.push(f));return Kd(i,c.reverse().concat(u))}function Uv(t){return e=>Fi(e,t)}function w$(t){return(e,n,i,r)=>Kd(r,t)}function Kd(t,e){if(!t)throw new Error("missing channel: z");return e=new za(e.map((n,i)=>[n,i])),t.map(n=>e.get(n))}function x$(t,e){for(const n of t)n.sort((i,r)=>Ja(e[i],e[r]))}const S$={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class E$ extends Fn{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:a,curve:u,tension:c}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,S$),this.curve=NA(u,c),Hd(this,n)}project(e,n,i){this.curve!==iu&&super.project(e,n,i)}render(e,n,i,r,s){const{x1:a,y1:u,x2:c=a,y2:l=u}=i,{curve:f}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ui,this).attr("d",f===iu&&s.projection?A$(s.projection,a,u,c,l):d=>{const p=Us(),m=f(p);return m.lineStart(),m.point(a[d],u[d]),m.point(c[d],l[d]),m.lineEnd(),p}).call(jr,this,i).call(Iy,this,i,s)).node()}}function A$(t,e,n,i,r){const s=sl(t);return e=Vs(e),n=Vs(n),i=Vs(i),r=Vs(r),a=>s({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Sh(t,{x:e,x1:n,x2:i,y:r,y1:s,y2:a,...u}={}){return[n,i]=Vv(e,n,i),[s,a]=Vv(r,s,a),new E$(t,{...u,x1:n,x2:i,y1:s,y2:a})}function Vv(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class I$ extends Fn{constructor(e,n,i={},r){super(e,n,i,r);const{inset:s=0,insetTop:a=s,insetRight:u=s,insetBottom:c=s,insetLeft:l=s,rx:f,ry:h}=i;this.insetTop=Ae(a),this.insetRight=Ae(u),this.insetBottom=Ae(c),this.insetLeft=Ae(l),this.rx=Ye(f,"auto"),this.ry=Ye(h,"auto")}render(e,n,i,r,s){const{rx:a,ry:u}=this;return en("svg:g",s).call(Pi,this,r,s).call(this._transform,this,n).call(c=>c.selectAll().data(e).enter().append("rect").call(Ui,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(St,"rx",a).call(St,"ry",u).call(jr,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:a,insetRight:u}=this,c=n&&e?e.bandwidth():s-i-r;return Math.max(0,c-a-u)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:a,insetBottom:u}=this,c=n&&e?e.bandwidth():s-i-r;return Math.max(0,c-a-u)}}const T$={ariaLabel:"cell"};class k$ extends I${constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,T$)}_transform(e,n){e.call(Vi,n,{},0,0)}}function C$(t,{x:e,y:n,...i}={}){return[e,n]=fl(e,n),new k$(t,{...i,x:e,y:n})}const M$={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function LA(t){return t.sort===void 0&&t.reverse===void 0?DB({channel:"-r"},t):t}class N$ extends Fn{constructor(e,n={}){const{x:i,y:r,r:s,rotate:a,symbol:u=Rc,frameAnchor:c}=n,[l,f]=yn(a,0),[h,d]=OB(u),[p,m]=yn(s,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:cl,optional:!0},rotate:{value:l,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},LA(n),M$),this.r=m,this.rotate=f,this.symbol=d,this.frameAnchor=Pd(c);const{channels:g}=this,{symbol:y}=g;if(y){const{fill:_,stroke:b}=g;y.hint={fill:_?_.value===y.value?"color":"currentColor":this.fill,stroke:b?b.value===y.value?"color":"currentColor":this.stroke}}}render(e,n,i,r,s){const{x:a,y:u}=n,{x:c,y:l,r:f,rotate:h,symbol:d}=i,{r:p,rotate:m,symbol:g}=this,[y,_]=yl(this,r),b=g===Rc,x=f?void 0:p*p*Math.PI;return Fd(p)&&(e=[]),en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:c&&a,y:l&&u}).call(v=>v.selectAll().data(e).enter().append(b?"circle":"path").call(Ui,this).call(b?w=>{w.attr("cx",c?A=>c[A]:y).attr("cy",l?A=>l[A]:_).attr("r",f?A=>f[A]:p)}:w=>{w.attr("transform",Ny`translate(${c?A=>c[A]:y},${l?A=>l[A]:_})${h?A=>` rotate(${h[A]})`:m?` rotate(${m})`:""}`).attr("d",f&&d?A=>{const T=Us();return d[A].draw(T,f[A]*f[A]*Math.PI),T}:f?A=>{const T=Us();return g.draw(T,f[A]*f[A]*Math.PI),T}:d?A=>{const T=Us();return d[A].draw(T,x),T}:(()=>{const A=Us();return g.draw(A,x),A})())}).call(jr,this,i)).node()}}function O$(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new N$(t,{...i,x:e,y:n})}function F$(t,e){return O$(t,{...e,symbol:"circle"})}const D$={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let R$=class extends Fn{constructor(e,n={}){const{x:i,y:r,z:s,curve:a,tension:u}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:lE(n),optional:!0}},n,D$),this.z=s,this.curve=NA(a,u),Hd(this,n)}filter(e){return e}project(e,n,i){this.curve!==iu&&super.project(e,n,i)}render(e,n,i,r,s){const{x:a,y:u}=i,{curve:c}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(l=>l.selectAll().data(oU(e,[a,u],this,i)).enter().append("path").call(Ui,this).call(rU,this,i).call(jU,this,i,s).attr("d",c===iu&&s.projection?L$(s.projection,a,u):wL().curve(c).defined(f=>f>=0).x(f=>a[f]).y(f=>u[f]))).node()}};function L$(t,e,n){const i=sl(t);return e=Vs(e),n=Vs(n),r=>{let s=[];const a=[s];for(const u of r)u===-1?(s=[],a.push(s)):s.push([e[u],n[u]]);return i({type:"MultiLineString",coordinates:a})}}function B$(t,{x:e,y:n,...i}={}){return[e,n]=fl(e,n),new R$(t,{...i,x:e,y:n})}const P$={ariaLabel:"rect"};class BA extends Fn{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:a,inset:u=0,insetTop:c=u,insetRight:l=u,insetBottom:f=u,insetLeft:h=u,rx:d,ry:p}=n;super(e,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,P$),this.insetTop=Ae(c),this.insetRight=Ae(l),this.insetBottom=Ae(f),this.insetLeft=Ae(h),this.rx=Ye(d,"auto"),this.ry=Ye(p,"auto")}render(e,n,i,r,s){const{x:a,y:u}=n,{x1:c,y1:l,x2:f,y2:h}=i,{marginTop:d,marginRight:p,marginBottom:m,marginLeft:g,width:y,height:_}=r,{projection:b}=s,{insetTop:x,insetRight:v,insetBottom:w,insetLeft:A,rx:T,ry:C}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:c&&f&&a,y:l&&h&&u},0,0).call(L=>L.selectAll().data(e).enter().append("rect").call(Ui,this).attr("x",c&&f&&(b||!$s(a))?O=>Math.min(c[O],f[O])+A:g+A).attr("y",l&&h&&(b||!$s(u))?O=>Math.min(l[O],h[O])+x:d+x).attr("width",c&&f&&(b||!$s(a))?O=>Math.max(0,Math.abs(f[O]-c[O])-A-v):y-p-g-v-A).attr("height",l&&h&&(b||!$s(u))?O=>Math.max(0,Math.abs(l[O]-h[O])-x-w):_-d-m-x-w).call(St,"rx",T).call(St,"ry",C).call(jr,this,i)).node()}}function U$(t,e){return new BA(t,zU(iA(e)))}function Xd(t,e={}){return pB(e)||(e={...e,y:oE,x2:di,interval:1}),new BA(t,c$(iA(o$(e))))}const V$={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class $$ extends Fn{constructor(e,n={}){const[i,r]=yn(n.r,3);super(e,{geometry:{value:n.geometry},r:{value:i,scale:"r",filter:cl,optional:!0}},LA(n),V$),this.r=r}render(e,n,i,r,s){const{geometry:a,r:u}=i,c=sl(s.projection??j$(n)),{r:l}=this;return Fd(l)?e=[]:l!==void 0&&c.pointRadius(l),en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(f=>{f.selectAll().data(e).enter().append("path").call(Ui,this).attr("d",u?h=>c.pointRadius(u[h])(a[h]):h=>c(a[h])).call(jr,this,i)}).node()}}function j$({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),lh({point(n,i){this.stream.point(t(n),e(i))}})}function z$(t,{geometry:e=di,...n}={}){switch(t==null?void 0:t.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t];break}return new $$(t,{geometry:e,...n})}function q$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oZ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}function W$(t,e={}){if(!t||t.length===0)return[];let n=ui(t[0]),i=e.include?e.include:n;i=Ac(e.include||n,e.exclude||[]);let r=Ac(n,i);return console.log(i,r),J2(s=>i.map(a=>{let u=ax(r,s);return u[e.key||"key"]=a,u[e.value||"value"]=s[a],u}),t)}let H$=Mn(null);const Y$=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));let G$=0;class K${constructor(){this.listeners={}}on(e,n){let i=G$++;return this.listeners[e]=this.listeners[e]||{},this.listeners[e][i]=n,()=>{delete this.listeners[e][i]}}emit(e,...n){(ri(this.listeners[e])??[]).forEach(r=>{r(...n)})}}Lf(void 0);class sr extends K${constructor(){super(),this.registeredViews=[],this.on("data",(e,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(zt(i))return;let a=s5(...r)(e);i instanceof Function?i(a,...n):i.render(a,...n)})})}snapshot(){}restoreSnapshot(e){}async init(){}registerView(e,n){console.log("Backend.registerView",e,n),n=T5([n??Df]),this.registeredViews.push({view:e,postprocessFuncs:n})}addPostprocessing(e,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==e&&r.push(n)})}async execute(e,n){return zt(e)&&(e=[]),we(Array,e)||(e=[e]),this._execute(e,n)}async _execute(e,n){}}class X$ extends sr{constructor(e){super(),this.data=e.data||[]}async _execute(e,...n){this.emit("data",this.data,...n)}}class J$ extends sr{constructor(e){super(),this.data=null,this.promise=null,this.promise=DF(e.url,CF)}async _execute(e,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function vt(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(f){try{l(i.next(f))}catch(h){a(h)}}function c(f){try{l(i.throw(f))}catch(h){a(h)}}function l(f){f.done?s(f.value):r(f.value).then(u,c)}l((i=i.apply(t,e||[])).next())})}function $v(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(t){return this instanceof Rt?(this.v=t,this):new Rt(t)}function Ir(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(d){i[d]&&(r[d]=function(p){return new Promise(function(m,g){s.push([d,p,m,g])>1||u(d,p)})})}function u(d,p){try{c(i[d](p))}catch(m){h(s[0][3],m)}}function c(d){d.value instanceof Rt?Promise.resolve(d.value.v).then(l,f):h(s[0][2],d)}function l(d){u("next",d)}function f(d){u("throw",d)}function h(d,p){d(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Sf(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=t[r]?function(a){return(n=!n)?{value:Rt(t[r](a)),done:!1}:s?s(a):a}:s}}function Pa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $v=="function"?$v(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(u,c){a=t[s](a),r(u,c,a.done,a.value)})}}function r(s,a,u,c){Promise.resolve(c).then(function(l){s({value:l,done:u})},a)}}const Q$=new TextDecoder("utf-8"),qm=t=>Q$.decode(t),Z$=new TextEncoder,Jd=t=>Z$.encode(t),[uZ,PA]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[ao,cZ]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[oo,lZ]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),tj=t=>typeof t=="number",UA=t=>typeof t=="boolean",Ge=t=>typeof t=="function",Xn=t=>t!=null&&Object(t)===t,Za=t=>Xn(t)&&Ge(t.then),_l=t=>Xn(t)&&Ge(t[Symbol.iterator]),Cu=t=>Xn(t)&&Ge(t[Symbol.asyncIterator]),Wm=t=>Xn(t)&&Xn(t.schema),VA=t=>Xn(t)&&"done"in t&&"value"in t,$A=t=>Xn(t)&&Ge(t.stat)&&tj(t.fd),jA=t=>Xn(t)&&By(t.body),Qd=t=>"_getDOMStream"in t&&"_getNodeStream"in t,ej=t=>Xn(t)&&Ge(t.abort)&&Ge(t.getWriter)&&!Qd(t),By=t=>Xn(t)&&Ge(t.cancel)&&Ge(t.getReader)&&!Qd(t),nj=t=>Xn(t)&&Ge(t.end)&&Ge(t.write)&&UA(t.writable)&&!Qd(t),zA=t=>Xn(t)&&Ge(t.read)&&Ge(t.pipe)&&UA(t.readable)&&!Qd(t),ij=t=>Xn(t)&&Ge(t.clear)&&Ge(t.bytes)&&Ge(t.position)&&Ge(t.setPosition)&&Ge(t.capacity)&&Ge(t.getBufferIdentifier)&&Ge(t.createLong),Py=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function rj(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,u,c=0,l=0,f=t.length;++c<f;){if(a=e[l],u=t[c],!a||!u||a.buffer!==u.buffer||u.byteOffset<a.byteOffset){u&&(e[++l]=u);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=u,n+r<i||i+s<n){u&&(e[++l]=u);continue}e[l]=new Uint8Array(a.buffer,n,i-n+s)}return e}function Eh(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function Rr(t,e){const n=rj(t),i=n.reduce((f,h)=>f+h.byteLength,0);let r,s,a,u=0,c=-1;const l=Math.min(e||Number.POSITIVE_INFINITY,i);for(const f=n.length;++c<f;){if(r=n[c],s=r.subarray(0,Math.min(r.length,l-u)),l<=u+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?Eh(a,s,u):a=s;break}Eh(a||(a=new Uint8Array(l)),s,u),u+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function ve(t,e){let n=VA(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Jd(n)),n instanceof ArrayBuffer?new t(n):n instanceof Py?new t(n):ij(n)?ve(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Xu=t=>ve(Int32Array,t),se=t=>ve(Uint8Array,t),Hm=t=>(t.next(),t);function*sj(t,e){const n=function*(r){yield r},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Py?n(e):_l(e)?e:n(e);return yield*Hm(function*(r){let s=null;do s=r.next(yield ve(t,s));while(!s.done)}(i[Symbol.iterator]())),new t}const aj=t=>sj(Uint8Array,t);function qA(t,e){return Ir(this,arguments,function*(){if(Za(e))return yield Rt(yield Rt(yield*Sf(Pa(qA(t,yield Rt(e))))));const i=function(a){return Ir(this,arguments,function*(){yield yield Rt(yield Rt(a))})},r=function(a){return Ir(this,arguments,function*(){yield Rt(yield*Sf(Pa(Hm(function*(u){let c=null;do c=u.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Py?i(e):_l(e)?r(e):Cu(e)?e:i(e);return yield Rt(yield*Sf(Pa(Hm(function(a){return Ir(this,arguments,function*(){let u=null;do u=yield Rt(a.next(yield yield Rt(ve(t,u))));while(!u.done)})}(s[Symbol.asyncIterator]()))))),yield Rt(new t)})}const oj=t=>qA(Uint8Array,t);function Uy(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function uj(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const Ai={fromIterable(t){return Zl(cj(t))},fromAsyncIterable(t){return Zl(lj(t))},fromDOMStream(t){return Zl(fj(t))},fromNodeStream(t){return Zl(dj(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Zl=t=>(t.next(),t);function*cj(t){let e,n=!1,i=[],r,s,a,u=0;function c(){return s==="peek"?Rr(i,a)[0]:([r,i,u]=Rr(i,a),r)}({cmd:s,size:a}=yield null);const l=aj(t)[Symbol.iterator]();try{do if({done:e,value:r}=Number.isNaN(a-u)?l.next():l.next(a-u),!e&&r.byteLength>0&&(i.push(r),u+=r.byteLength),e||a<=u)do({cmd:s,size:a}=yield c());while(a<u);while(!e)}catch(f){(n=!0)&&typeof l.throw=="function"&&l.throw(f)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function lj(t){return Ir(this,arguments,function*(){let n,i=!1,r=[],s,a,u,c=0;function l(){return a==="peek"?Rr(r,u)[0]:([s,r,c]=Rr(r,u),s)}({cmd:a,size:u}=yield yield Rt(null));const f=oj(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(u-c)?yield Rt(f.next()):yield Rt(f.next(u-c)),!n&&s.byteLength>0&&(r.push(s),c+=s.byteLength),n||u<=c)do({cmd:a,size:u}=yield yield Rt(l()));while(u<c);while(!n)}catch(h){(i=!0)&&typeof f.throw=="function"&&(yield Rt(f.throw(h)))}finally{i===!1&&typeof f.return=="function"&&(yield Rt(f.return(new Uint8Array(0))))}return yield Rt(null)})}function fj(t){return Ir(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,u,c=0;function l(){return a==="peek"?Rr(r,u)[0]:([s,r,c]=Rr(r,u),s)}({cmd:a,size:u}=yield yield Rt(null));const f=new hj(t);try{do if({done:n,value:s}=Number.isNaN(u-c)?yield Rt(f.read()):yield Rt(f.read(u-c)),!n&&s.byteLength>0&&(r.push(se(s)),c+=s.byteLength),n||u<=c)do({cmd:a,size:u}=yield yield Rt(l()));while(u<c);while(!n)}catch(h){(i=!0)&&(yield Rt(f.cancel(h)))}finally{i===!1?yield Rt(f.cancel()):t.locked&&f.releaseLock()}return yield Rt(null)})}class hj{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return vt(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return vt(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=se(n)),n})}}const p0=(t,e)=>{const n=r=>i([e,r]);let i;return[e,n,new Promise(r=>(i=r)&&t.once(e,n))]};function dj(t){return Ir(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,u,c=0,l=[],f;function h(){return a==="peek"?Rr(l,u)[0]:([f,l,c]=Rr(l,u),f)}if({cmd:a,size:u}=yield yield Rt(null),t.isTTY)return yield yield Rt(new Uint8Array(0)),yield Rt(null);try{n[0]=p0(t,"end"),n[1]=p0(t,"error");do{if(n[2]=p0(t,"readable"),[i,s]=yield Rt(Promise.race(n.map(p=>p[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(u-c)?(f=se(t.read(u-c)),f.byteLength<u-c&&(f=se(t.read()))):f=se(t.read()),f.byteLength>0&&(l.push(f),c+=f.byteLength)),r||u<=c)do({cmd:a,size:u}=yield yield Rt(h()));while(u<c)}while(!r)}finally{yield Rt(d(n,i==="error"?s:null))}return yield Rt(null);function d(p,m){return f=l=null,new Promise((g,y)=>{for(const[_,b]of p)t.off(_,b);try{const _=t.destroy;_&&_.call(t,m),m=void 0}catch(_){m=_||m}finally{m!=null?y(m):g()}})}})}var ai;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(ai||(ai={}));var fi;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(fi||(fi={}));var ln;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(ln||(ln={}));var er;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(er||(er={}));var Xt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Xt||(Xt={}));var Lr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Lr||(Lr={}));var le;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(le||(le={}));var I;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(I||(I={}));var Jr;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Jr||(Jr={}));const pj=void 0;function zs(t){if(t===null)return"null";if(t===pj)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof ao||t instanceof oo?`[${[...t].map(e=>zs(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const mj=Symbol.for("isArrowBigNum");function ar(t,...e){return e.length===0?Object.setPrototypeOf(ve(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}ar.prototype[mj]=!0;ar.prototype.toJSON=function(){return`"${Ua(this)}"`};ar.prototype.valueOf=function(){return WA(this)};ar.prototype.toString=function(){return Ua(this)};ar.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return WA(this);case"string":return Ua(this);case"default":return Ym(this)}return Ua(this)};function Bo(...t){return ar.apply(this,t)}function Po(...t){return ar.apply(this,t)}function $c(...t){return ar.apply(this,t)}Object.setPrototypeOf(Bo.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Po.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf($c.prototype,Object.create(Uint32Array.prototype));Object.assign(Bo.prototype,ar.prototype,{constructor:Bo,signed:!0,TypedArray:Int32Array,BigIntArray:ao});Object.assign(Po.prototype,ar.prototype,{constructor:Po,signed:!1,TypedArray:Uint32Array,BigIntArray:oo});Object.assign($c.prototype,ar.prototype,{constructor:$c,signed:!0,TypedArray:Uint32Array,BigIntArray:oo});function WA(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new oo(e,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let u=BigInt(a?1:0),c=BigInt(0);if(a){for(const l of s)u+=~l*(BigInt(1)<<BigInt(32)*c++);u*=BigInt(-1)}else for(const l of s)u+=l*(BigInt(1)<<BigInt(32)*c++);return u}let Ua,Ym;PA?(Ym=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:m0(t),Ua=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:m0(t)):(Ua=m0,Ym=Ua);function m0(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}class Vy{static new(e,n){switch(n){case!0:return new Bo(e);case!1:return new Po(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case ao:return new Bo(e)}return e.byteLength===16?new $c(e):new Po(e)}static signed(e){return new Bo(e)}static unsigned(e){return new Po(e)}static decimal(e){return new $c(e)}constructor(e,n){return Vy.new(e,n)}}var HA,YA,GA,KA,XA,JA,QA,ZA,tI,eI,nI,iI,rI,sI,aI,oI,uI,cI,lI;class wt{static isNull(e){return(e==null?void 0:e.typeId)===I.Null}static isInt(e){return(e==null?void 0:e.typeId)===I.Int}static isFloat(e){return(e==null?void 0:e.typeId)===I.Float}static isBinary(e){return(e==null?void 0:e.typeId)===I.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===I.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===I.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===I.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===I.Date}static isTime(e){return(e==null?void 0:e.typeId)===I.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===I.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===I.Interval}static isList(e){return(e==null?void 0:e.typeId)===I.List}static isStruct(e){return(e==null?void 0:e.typeId)===I.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===I.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===I.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===I.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===I.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===I.Dictionary}static isDenseUnion(e){return wt.isUnion(e)&&e.mode===fi.Dense}static isSparseUnion(e){return wt.isUnion(e)&&e.mode===fi.Sparse}get typeId(){return I.NONE}}HA=Symbol.toStringTag;wt[HA]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(wt.prototype);let ys=class extends wt{toString(){return"Null"}get typeId(){return I.Null}};YA=Symbol.toStringTag;ys[YA]=(t=>t[Symbol.toStringTag]="Null")(ys.prototype);class Nn extends wt{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return I.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?ao:oo}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}GA=Symbol.toStringTag;Nn[GA]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Nn.prototype);class $y extends Nn{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class jy extends Nn{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Zs extends Nn{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let zy=class extends Nn{constructor(){super(!0,64)}get ArrayType(){return ao}};class qy extends Nn{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Wy extends Nn{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Hy extends Nn{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let Yy=class extends Nn{constructor(){super(!1,64)}get ArrayType(){return oo}};Object.defineProperty($y.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(jy.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Zs.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(zy.prototype,"ArrayType",{value:ao});Object.defineProperty(qy.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Wy.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Hy.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Yy.prototype,"ArrayType",{value:oo});class ta extends wt{constructor(e){super(),this.precision=e}get typeId(){return I.Float}get ArrayType(){switch(this.precision){case ln.HALF:return Uint16Array;case ln.SINGLE:return Float32Array;case ln.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}KA=Symbol.toStringTag;ta[KA]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(ta.prototype);class fI extends ta{constructor(){super(ln.HALF)}}class Gy extends ta{constructor(){super(ln.SINGLE)}}class Ky extends ta{constructor(){super(ln.DOUBLE)}}Object.defineProperty(fI.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Gy.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Ky.prototype,"ArrayType",{value:Float64Array});let jc=class extends wt{constructor(){super()}get typeId(){return I.Binary}toString(){return"Binary"}};XA=Symbol.toStringTag;jc[XA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(jc.prototype);let ru=class extends wt{constructor(){super()}get typeId(){return I.Utf8}toString(){return"Utf8"}};JA=Symbol.toStringTag;ru[JA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(ru.prototype);let zc=class extends wt{constructor(){super()}get typeId(){return I.Bool}toString(){return"Bool"}};QA=Symbol.toStringTag;zc[QA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(zc.prototype);let Ah=class extends wt{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return I.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};ZA=Symbol.toStringTag;Ah[ZA]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Ah.prototype);class su extends wt{constructor(e){super(),this.unit=e}get typeId(){return I.Date}toString(){return`Date${(this.unit+1)*32}<${er[this.unit]}>`}}tI=Symbol.toStringTag;su[tI]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(su.prototype);class gj extends su{constructor(){super(er.DAY)}}class yj extends su{constructor(){super(er.MILLISECOND)}}class bs extends wt{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return I.Time}toString(){return`Time${this.bitWidth}<${Xt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return ao}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}eI=Symbol.toStringTag;bs[eI]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(bs.prototype);class bj extends bs{constructor(){super(Xt.SECOND,32)}}class _j extends bs{constructor(){super(Xt.MILLISECOND,32)}}class vj extends bs{constructor(){super(Xt.MICROSECOND,64)}}class wj extends bs{constructor(){super(Xt.NANOSECOND,64)}}class Ih extends wt{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return I.Timestamp}toString(){return`Timestamp<${Xt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}nI=Symbol.toStringTag;Ih[nI]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Ih.prototype);class au extends wt{constructor(e){super(),this.unit=e}get typeId(){return I.Interval}toString(){return`Interval<${Lr[this.unit]}>`}}iI=Symbol.toStringTag;au[iI]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(au.prototype);class xj extends au{constructor(){super(Lr.DAY_TIME)}}class Sj extends au{constructor(){super(Lr.YEAR_MONTH)}}let ou=class extends wt{constructor(e){super(),this.children=[e]}get typeId(){return I.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};rI=Symbol.toStringTag;ou[rI]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(ou.prototype);class cn extends wt{constructor(e){super(),this.children=e}get typeId(){return I.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}sI=Symbol.toStringTag;cn[sI]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(cn.prototype);class qc extends wt{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return I.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}aI=Symbol.toStringTag;qc[aI]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(qc.prototype);let Th=class extends wt{constructor(e){super(),this.byteWidth=e}get typeId(){return I.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};oI=Symbol.toStringTag;Th[oI]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Th.prototype);let uu=class extends wt{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return I.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};uI=Symbol.toStringTag;uu[uI]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(uu.prototype);class Wc extends wt{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return I.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}cI=Symbol.toStringTag;Wc[cI]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Wc.prototype);const Ej=(t=>()=>++t)(-1);let ea=class extends wt{constructor(e,n,i,r){super(),this.indices=n,this.dictionary=e,this.isOrdered=r||!1,this.id=i==null?Ej():typeof i=="number"?i:i.low}get typeId(){return I.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};lI=Symbol.toStringTag;ea[lI]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(ea.prototype);function mr(t){const e=t;switch(t.typeId){case I.Decimal:return t.bitWidth/32;case I.Timestamp:return 2;case I.Date:return 1+e.unit;case I.Interval:return 1+e.unit;case I.FixedSizeList:return e.listSize;case I.FixedSizeBinary:return e.byteWidth;default:return 1}}class Yt{visitMany(e,...n){return e.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return Aj(this,e,n)}getVisitFnByTypeId(e,n=!0){return wo(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function Aj(t,e,n=!0){return typeof e=="number"?wo(t,e,n):typeof e=="string"&&e in I?wo(t,I[e],n):e&&e instanceof wt?wo(t,jv(e),n):e!=null&&e.type&&e.type instanceof wt?wo(t,jv(e.type),n):wo(t,I.NONE,n)}function wo(t,e,n=!0){let i=null;switch(e){case I.Null:i=t.visitNull;break;case I.Bool:i=t.visitBool;break;case I.Int:i=t.visitInt;break;case I.Int8:i=t.visitInt8||t.visitInt;break;case I.Int16:i=t.visitInt16||t.visitInt;break;case I.Int32:i=t.visitInt32||t.visitInt;break;case I.Int64:i=t.visitInt64||t.visitInt;break;case I.Uint8:i=t.visitUint8||t.visitInt;break;case I.Uint16:i=t.visitUint16||t.visitInt;break;case I.Uint32:i=t.visitUint32||t.visitInt;break;case I.Uint64:i=t.visitUint64||t.visitInt;break;case I.Float:i=t.visitFloat;break;case I.Float16:i=t.visitFloat16||t.visitFloat;break;case I.Float32:i=t.visitFloat32||t.visitFloat;break;case I.Float64:i=t.visitFloat64||t.visitFloat;break;case I.Utf8:i=t.visitUtf8;break;case I.Binary:i=t.visitBinary;break;case I.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case I.Date:i=t.visitDate;break;case I.DateDay:i=t.visitDateDay||t.visitDate;break;case I.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case I.Timestamp:i=t.visitTimestamp;break;case I.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case I.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case I.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case I.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case I.Time:i=t.visitTime;break;case I.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case I.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case I.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case I.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case I.Decimal:i=t.visitDecimal;break;case I.List:i=t.visitList;break;case I.Struct:i=t.visitStruct;break;case I.Union:i=t.visitUnion;break;case I.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case I.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case I.Dictionary:i=t.visitDictionary;break;case I.Interval:i=t.visitInterval;break;case I.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case I.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case I.FixedSizeList:i=t.visitFixedSizeList;break;case I.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${I[e]}'`)}function jv(t){switch(t.typeId){case I.Null:return I.Null;case I.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?I.Int8:I.Uint8;case 16:return n?I.Int16:I.Uint16;case 32:return n?I.Int32:I.Uint32;case 64:return n?I.Int64:I.Uint64}return I.Int}case I.Float:switch(t.precision){case ln.HALF:return I.Float16;case ln.SINGLE:return I.Float32;case ln.DOUBLE:return I.Float64}return I.Float;case I.Binary:return I.Binary;case I.Utf8:return I.Utf8;case I.Bool:return I.Bool;case I.Decimal:return I.Decimal;case I.Time:switch(t.unit){case Xt.SECOND:return I.TimeSecond;case Xt.MILLISECOND:return I.TimeMillisecond;case Xt.MICROSECOND:return I.TimeMicrosecond;case Xt.NANOSECOND:return I.TimeNanosecond}return I.Time;case I.Timestamp:switch(t.unit){case Xt.SECOND:return I.TimestampSecond;case Xt.MILLISECOND:return I.TimestampMillisecond;case Xt.MICROSECOND:return I.TimestampMicrosecond;case Xt.NANOSECOND:return I.TimestampNanosecond}return I.Timestamp;case I.Date:switch(t.unit){case er.DAY:return I.DateDay;case er.MILLISECOND:return I.DateMillisecond}return I.Date;case I.Interval:switch(t.unit){case Lr.DAY_TIME:return I.IntervalDayTime;case Lr.YEAR_MONTH:return I.IntervalYearMonth}return I.Interval;case I.Map:return I.Map;case I.List:return I.List;case I.Struct:return I.Struct;case I.Union:switch(t.mode){case fi.Dense:return I.DenseUnion;case fi.Sparse:return I.SparseUnion}return I.Union;case I.FixedSizeBinary:return I.FixedSizeBinary;case I.FixedSizeList:return I.FixedSizeList;case I.Dictionary:return I.Dictionary}throw new Error(`Unrecognized type '${I[t.typeId]}'`)}Yt.prototype.visitInt8=null;Yt.prototype.visitInt16=null;Yt.prototype.visitInt32=null;Yt.prototype.visitInt64=null;Yt.prototype.visitUint8=null;Yt.prototype.visitUint16=null;Yt.prototype.visitUint32=null;Yt.prototype.visitUint64=null;Yt.prototype.visitFloat16=null;Yt.prototype.visitFloat32=null;Yt.prototype.visitFloat64=null;Yt.prototype.visitDateDay=null;Yt.prototype.visitDateMillisecond=null;Yt.prototype.visitTimestampSecond=null;Yt.prototype.visitTimestampMillisecond=null;Yt.prototype.visitTimestampMicrosecond=null;Yt.prototype.visitTimestampNanosecond=null;Yt.prototype.visitTimeSecond=null;Yt.prototype.visitTimeMillisecond=null;Yt.prototype.visitTimeMicrosecond=null;Yt.prototype.visitTimeNanosecond=null;Yt.prototype.visitDenseUnion=null;Yt.prototype.visitSparseUnion=null;Yt.prototype.visitIntervalDayTime=null;Yt.prototype.visitIntervalYearMonth=null;const hI=new Float64Array(1),bo=new Uint32Array(hI.buffer);function dI(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function pI(t){if(t!==t)return 32256;hI[0]=t;const e=(bo[1]&2147483648)>>16&65535;let n=bo[1]&2146435072,i=0;return n>=1089470464?bo[0]>0?n=31744:(n=(n&2080374784)>>16,i=(bo[1]&1048575)>>10):n<=1056964608?(i=1048576+(bo[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(bo[1]&1048575)+512>>10),e|n|i&65535}class Ct extends Yt{}function Dt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const Ij=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},Xy=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},Tj=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},kj=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},mI=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},Cj=({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},As=({values:t},e,n)=>{t[e]=n},Jy=({values:t},e,n)=>{t[e]=n},gI=({values:t},e,n)=>{t[e]=pI(n)},Mj=(t,e,n)=>{switch(t.type.precision){case ln.HALF:return gI(t,e,n);case ln.SINGLE:case ln.DOUBLE:return Jy(t,e,n)}},Qy=({values:t},e,n)=>{Ij(t,e,n.valueOf())},Zy=({values:t},e,n)=>{Xy(t,e*2,n.valueOf())},yI=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Nj=({values:t,valueOffsets:e},n,i)=>mI(t,e,n,i),Oj=({values:t,valueOffsets:e},n,i)=>{mI(t,e,n,Jd(i))},bI=(t,e,n)=>{t.type.unit===er.DAY?Qy(t,e,n):Zy(t,e,n)},t1=({values:t},e,n)=>Xy(t,e*2,n/1e3),e1=({values:t},e,n)=>Xy(t,e*2,n),n1=({values:t},e,n)=>Tj(t,e*2,n),i1=({values:t},e,n)=>kj(t,e*2,n),_I=(t,e,n)=>{switch(t.type.unit){case Xt.SECOND:return t1(t,e,n);case Xt.MILLISECOND:return e1(t,e,n);case Xt.MICROSECOND:return n1(t,e,n);case Xt.NANOSECOND:return i1(t,e,n)}},r1=({values:t},e,n)=>{t[e]=n},s1=({values:t},e,n)=>{t[e]=n},a1=({values:t},e,n)=>{t[e]=n},o1=({values:t},e,n)=>{t[e]=n},vI=(t,e,n)=>{switch(t.type.unit){case Xt.SECOND:return r1(t,e,n);case Xt.MILLISECOND:return s1(t,e,n);case Xt.MICROSECOND:return a1(t,e,n);case Xt.NANOSECOND:return o1(t,e,n)}},wI=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},Fj=(t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=Bi.getVisitFn(i);if(Array.isArray(n))for(let a=-1,u=r[e],c=r[e+1];u<c;)s(i,u++,n[++a]);else for(let a=-1,u=r[e],c=r[e+1];u<c;)s(i,u++,n.get(++a))},Dj=(t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=Bi.getVisitFn(i);let{[e]:a,[e+1]:u}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const l of c)if(s(i,a,l),++a>=u)break},Rj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]),Lj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)),Bj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(r.name)),Pj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]),Uj=(t,e,n)=>{const i=t.type.children.map(s=>Bi.getVisitFn(s.type)),r=n instanceof Map?Bj(e,n):n instanceof Zt?Lj(e,n):Array.isArray(n)?Rj(e,n):Pj(e,n);t.type.children.forEach((s,a)=>r(i[a],t.children[a],s,a))},Vj=(t,e,n)=>{t.type.mode===fi.Dense?xI(t,e,n):SI(t,e,n)},xI=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Bi.visit(r,t.valueOffsets[e],n)},SI=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Bi.visit(r,e,n)},$j=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},EI=(t,e,n)=>{t.type.unit===Lr.DAY_TIME?u1(t,e,n):c1(t,e,n)},u1=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},c1=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},jj=(t,e,n)=>{const{stride:i}=t,r=t.children[0],s=Bi.getVisitFn(r);if(Array.isArray(n))for(let a=-1,u=e*i;++a<i;)s(r,u+a,n[a]);else for(let a=-1,u=e*i;++a<i;)s(r,u+a,n.get(a))};Ct.prototype.visitBool=Dt(Cj);Ct.prototype.visitInt=Dt(As);Ct.prototype.visitInt8=Dt(As);Ct.prototype.visitInt16=Dt(As);Ct.prototype.visitInt32=Dt(As);Ct.prototype.visitInt64=Dt(As);Ct.prototype.visitUint8=Dt(As);Ct.prototype.visitUint16=Dt(As);Ct.prototype.visitUint32=Dt(As);Ct.prototype.visitUint64=Dt(As);Ct.prototype.visitFloat=Dt(Mj);Ct.prototype.visitFloat16=Dt(gI);Ct.prototype.visitFloat32=Dt(Jy);Ct.prototype.visitFloat64=Dt(Jy);Ct.prototype.visitUtf8=Dt(Oj);Ct.prototype.visitBinary=Dt(Nj);Ct.prototype.visitFixedSizeBinary=Dt(yI);Ct.prototype.visitDate=Dt(bI);Ct.prototype.visitDateDay=Dt(Qy);Ct.prototype.visitDateMillisecond=Dt(Zy);Ct.prototype.visitTimestamp=Dt(_I);Ct.prototype.visitTimestampSecond=Dt(t1);Ct.prototype.visitTimestampMillisecond=Dt(e1);Ct.prototype.visitTimestampMicrosecond=Dt(n1);Ct.prototype.visitTimestampNanosecond=Dt(i1);Ct.prototype.visitTime=Dt(vI);Ct.prototype.visitTimeSecond=Dt(r1);Ct.prototype.visitTimeMillisecond=Dt(s1);Ct.prototype.visitTimeMicrosecond=Dt(a1);Ct.prototype.visitTimeNanosecond=Dt(o1);Ct.prototype.visitDecimal=Dt(wI);Ct.prototype.visitList=Dt(Fj);Ct.prototype.visitStruct=Dt(Uj);Ct.prototype.visitUnion=Dt(Vj);Ct.prototype.visitDenseUnion=Dt(xI);Ct.prototype.visitSparseUnion=Dt(SI);Ct.prototype.visitDictionary=Dt($j);Ct.prototype.visitInterval=Dt(EI);Ct.prototype.visitIntervalDayTime=Dt(u1);Ct.prototype.visitIntervalYearMonth=Dt(c1);Ct.prototype.visitFixedSizeList=Dt(jj);Ct.prototype.visitMap=Dt(Dj);const Bi=new Ct,Wi=Symbol.for("parent"),Uo=Symbol.for("rowIndex");class l1{constructor(e,n){return this[Wi]=e,this[Uo]=n,new Proxy(this,new qj)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Uo],n=this[Wi],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=Jn.visit(n.children[s],e);return r}toString(){return`{${[...this].map(([e,n])=>`${zs(e)}: ${zs(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new zj(this[Wi],this[Uo])}}class zj{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Jn.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(l1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Uo]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class qj{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Wi].type.children.map(n=>n.name)}has(e,n){return e[Wi].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[Wi].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[Wi].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=Jn.visit(e[Wi].children[i],e[Uo]);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[Wi].type.children.findIndex(s=>s.name===n);return r!==-1?(Bi.visit(e[Wi].children[r],e[Uo],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class At extends Yt{}function Mt(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Wj=(t,e)=>864e5*t[e],f1=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Hj=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,Yj=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,AI=t=>new Date(t),Gj=(t,e)=>AI(Wj(t,e)),Kj=(t,e)=>AI(f1(t,e)),Xj=(t,e)=>null,II=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},Jj=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},TI=({values:t},e)=>Gj(t,e),kI=({values:t},e)=>Kj(t,e*2),ma=({stride:t,values:e},n)=>e[t*n],Qj=({stride:t,values:e},n)=>dI(e[t*n]),CI=({values:t},e)=>t[e],Zj=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),tz=({values:t,valueOffsets:e},n)=>II(t,e,n),ez=({values:t,valueOffsets:e},n)=>{const i=II(t,e,n);return i!==null?qm(i):null},nz=({values:t},e)=>t[e],iz=({type:t,values:e},n)=>t.precision!==ln.HALF?e[n]:dI(e[n]),rz=(t,e)=>t.type.unit===er.DAY?TI(t,e):kI(t,e),MI=({values:t},e)=>1e3*f1(t,e*2),NI=({values:t},e)=>f1(t,e*2),OI=({values:t},e)=>Hj(t,e*2),FI=({values:t},e)=>Yj(t,e*2),sz=(t,e)=>{switch(t.type.unit){case Xt.SECOND:return MI(t,e);case Xt.MILLISECOND:return NI(t,e);case Xt.MICROSECOND:return OI(t,e);case Xt.NANOSECOND:return FI(t,e)}},DI=({values:t},e)=>t[e],RI=({values:t},e)=>t[e],LI=({values:t},e)=>t[e],BI=({values:t},e)=>t[e],az=(t,e)=>{switch(t.type.unit){case Xt.SECOND:return DI(t,e);case Xt.MILLISECOND:return RI(t,e);case Xt.MICROSECOND:return LI(t,e);case Xt.NANOSECOND:return BI(t,e)}},oz=({values:t,stride:e},n)=>Vy.decimal(t.subarray(e*n,e*(n+1))),uz=(t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,c=r[0].slice(s,a-s);return new Zt([c])},cz=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new Zd(a.slice(r,s-r))},lz=(t,e)=>new l1(t,e),fz=(t,e)=>t.type.mode===fi.Dense?PI(t,e):UI(t,e),PI=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Jn.visit(i,t.valueOffsets[e])},UI=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Jn.visit(i,e)},hz=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},dz=(t,e)=>t.type.unit===Lr.DAY_TIME?VI(t,e):$I(t,e),VI=({values:t},e)=>t.subarray(2*e,2*(e+1)),$I=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},pz=(t,e)=>{const{stride:n,children:i}=t,s=i[0].slice(e*n,n);return new Zt([s])};At.prototype.visitNull=Mt(Xj);At.prototype.visitBool=Mt(Jj);At.prototype.visitInt=Mt(nz);At.prototype.visitInt8=Mt(ma);At.prototype.visitInt16=Mt(ma);At.prototype.visitInt32=Mt(ma);At.prototype.visitInt64=Mt(CI);At.prototype.visitUint8=Mt(ma);At.prototype.visitUint16=Mt(ma);At.prototype.visitUint32=Mt(ma);At.prototype.visitUint64=Mt(CI);At.prototype.visitFloat=Mt(iz);At.prototype.visitFloat16=Mt(Qj);At.prototype.visitFloat32=Mt(ma);At.prototype.visitFloat64=Mt(ma);At.prototype.visitUtf8=Mt(ez);At.prototype.visitBinary=Mt(tz);At.prototype.visitFixedSizeBinary=Mt(Zj);At.prototype.visitDate=Mt(rz);At.prototype.visitDateDay=Mt(TI);At.prototype.visitDateMillisecond=Mt(kI);At.prototype.visitTimestamp=Mt(sz);At.prototype.visitTimestampSecond=Mt(MI);At.prototype.visitTimestampMillisecond=Mt(NI);At.prototype.visitTimestampMicrosecond=Mt(OI);At.prototype.visitTimestampNanosecond=Mt(FI);At.prototype.visitTime=Mt(az);At.prototype.visitTimeSecond=Mt(DI);At.prototype.visitTimeMillisecond=Mt(RI);At.prototype.visitTimeMicrosecond=Mt(LI);At.prototype.visitTimeNanosecond=Mt(BI);At.prototype.visitDecimal=Mt(oz);At.prototype.visitList=Mt(uz);At.prototype.visitStruct=Mt(lz);At.prototype.visitUnion=Mt(fz);At.prototype.visitDenseUnion=Mt(PI);At.prototype.visitSparseUnion=Mt(UI);At.prototype.visitDictionary=Mt(hz);At.prototype.visitInterval=Mt(dz);At.prototype.visitIntervalDayTime=Mt(VI);At.prototype.visitIntervalYearMonth=Mt($I);At.prototype.visitFixedSizeList=Mt(pz);At.prototype.visitMap=Mt(cz);const Jn=new At,Gi=Symbol.for("keys"),Vo=Symbol.for("vals");class Zd{constructor(e){return this[Gi]=new Zt([e.children[0]]).memoize(),this[Vo]=e.children[1],new Proxy(this,new gz)}[Symbol.iterator](){return new mz(this[Gi],this[Vo])}get size(){return this[Gi].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Gi],n=this[Vo],i={};for(let r=-1,s=e.length;++r<s;)i[e.get(r)]=Jn.visit(n,r);return i}toString(){return`{${[...this].map(([e,n])=>`${zs(e)}: ${zs(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class mz{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Jn.visit(this.vals,e)]})}}class gz{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Gi].toArray().map(String)}has(e,n){return e[Gi].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Gi].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[Gi].indexOf(n);if(i!==-1){const r=Jn.visit(Reflect.get(e,Vo),i);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[Gi].indexOf(n);return r!==-1?(Bi.visit(Reflect.get(e,Vo),r,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(Zd.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Gi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vo]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let zv;function jI(t,e,n,i){const{length:r=0}=t;let s=typeof e!="number"?0:e,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(zv=s,s=a,a=zv),a>r&&(a=r),i?i(t,s,a):[s,a]}const qv=t=>t!==t;function Mu(t){if(typeof t!=="object"||t===null)return qv(t)?qv:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?uj(t,n):!1:t instanceof Map?bz(t):Array.isArray(t)?yz(t):t instanceof Zt?_z(t):vz(t,!0)}function yz(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Mu(t[n]);return tp(e)}function bz(t){let e=-1;const n=[];for(const i of t.values())n[++e]=Mu(i);return tp(n)}function _z(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Mu(t.get(n));return tp(e)}function vz(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Mu(t[n[r]]);return tp(i,n)}function tp(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return wz(t,n);case Map:return Wv(t,n,n.keys());case Zd:case l1:case Object:case void 0:return Wv(t,n,e||Object.keys(n))}return n instanceof Zt?xz(t,n):!1}}function wz(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function xz(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function Wv(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const u=t.length;let c=s.next(),l=i.next(),f=r.next();for(;a<u&&!l.done&&!f.done&&!c.done&&!(l.value!==f.value||!t[a](c.value));++a,l=i.next(),f=r.next(),c=s.next());return a===u&&l.done&&f.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function zI(t,e,n,i){return(n&1<<i)!==0}function Sz(t,e,n,i){return(n&1<<i)>>i}function h1(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8===0?n.subarray(t>>3):kh(new d1(n,t,e,null,zI)).subarray(0,i)),r}return n}function kh(t){const e=[];let n=0,i=0,r=0;for(const a of t)a&&(r|=1<<i),++i===8&&(e[n++]=r,r=i=0);(n===0||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class d1{constructor(e,n,i,r,s){this.bytes=e,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Gm(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const a of new d1(t,e,n-e,t,Sz))s+=a;return s}const i=n>>3<<3,r=e+(e%8===0?0:8-e%8);return Gm(t,e,r)+Gm(t,i,n)+Ez(t,r>>3,i-r>>3)}function Ez(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=n===void 0?t.byteLength:r+n;for(;a-r>=4;)i+=g0(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=g0(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=g0(s.getUint8(r)),r+=1;return i}function g0(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Az=-1;class ge{constructor(e,n,i,r,s,a=[],u){this.type=e,this.children=a,this.dictionary=u,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof ge?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=mr(e),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((a,u)=>a+u.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=Az&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-Gm(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+e>>3,a=(r+e)%8,u=i[s]>>a&1;return n?u===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):u===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new ge(e,n,i,r,s,a,this.dictionary)}slice(e,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,u=r===16?i:1,c=this._sliceBuffers(e,n,i,r);return this.clone(this.type,this.offset+e,n,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,u*e,u*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===I.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(h1(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jr.VALIDITY]=r,this.clone(this.type,0,e,i+(e-n),s)}_sliceBuffers(e,n,i,r){let s;const{buffers:a}=this;return(s=a[Jr.TYPE])&&(a[Jr.TYPE]=s.subarray(e,e+n)),(s=a[Jr.OFFSET])&&(a[Jr.OFFSET]=s.subarray(e,e+n+1))||(s=a[Jr.DATA])&&(a[Jr.DATA]=r===6?s:s.subarray(i*e,i*(e+n))),a}_sliceChildren(e,n,i){return e.map(r=>r.slice(n,i))}}ge.prototype.children=Object.freeze([]);class yc extends Yt{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=e;return new ge(n,i,r,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length>>3,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.data),s=se(e.nullBitmap),a=Xu(e.valueOffsets),{["length"]:u=a.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ge(n,i,u,c,[a,r,s])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.data),s=se(e.nullBitmap),a=Xu(e.valueOffsets),{["length"]:u=a.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ge(n,i,u,c,[a,r,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:r}=e,s=se(e.nullBitmap),a=Xu(e.valueOffsets),{["length"]:u=a.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ge(n,i,u,c,[a,void 0,s],[r])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=se(e.nullBitmap),{length:a=r.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,void 0,s],r)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=se(e.nullBitmap),a=ve(n.ArrayType,e.typeIds),{["length"]:u=a.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;if(wt.isSparseUnion(n))return new ge(n,i,u,c,[void 0,void 0,s,a],r);const l=Xu(e.valueOffsets);return new ge(n,i,u,c,[l,void 0,s,a],r)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.indices.ArrayType,e.data),{["dictionary"]:a=new Zt([new yc().visit({type:n.dictionary})])}=e,{["length"]:u=s.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ge(n,i,u,c,[void 0,s,r],[],a)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,r=se(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,s,r])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new yc().visit({type:n.valueType})}=e,s=se(e.nullBitmap),{["length"]:a=r.length/mr(n),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ge(n,i,a,u,[void 0,void 0,s],[r])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new yc().visit({type:n.childType})}=e,s=se(e.nullBitmap),a=Xu(e.valueOffsets),{["length"]:u=a.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ge(n,i,u,c,[a,void 0,s],[r])}}function Ht(t){return new yc().visit(t)}class Hv{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function qI(t){return t.reduce((e,n)=>e+n.nullCount,0)}function WI(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function HI(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const u=t[s],c=e[s],{length:l}=u;if(c>=i)break;if(n>=c+l)continue;if(c>=n&&c+l<=i){r.push(u);continue}const f=Math.max(0,n-c),h=Math.min(i-c,l);r.push(u.slice(f,h-f))}return r.length===0&&r.push(t[0].slice(0,0)),r}function p1(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc((a-r)*.5),n<e[s]?a=s:r=s}while(r<a)}function m1(t,e){return t.getValid(e)}function $o(t){function e(n,i,r){return t(n[i],r)}return function(n){const i=this.data;return p1(i,this._offsets,n,e)}}function YI(t){let e;function n(i,r,s){return t(i[r],s,e)}return function(i,r){const s=this.data;e=r;const a=p1(s,this._offsets,i,n);return e=void 0,a}}function GI(t){let e;function n(i,r,s){let a=s,u=0,c=0;for(let l=r-1,f=i.length;++l<f;){const h=i[l];if(~(u=t(h,e,a)))return c+u;a=0,c+=h.length}return-1}return function(i,r){e=i;const s=this.data,a=typeof r!="number"?n(s,0,0):p1(s,this._offsets,r,n);return e=void 0,a}}class It extends Yt{}function Iz(t,e){return e===null&&t.length>0?0:-1}function Tz(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new d1(n,t.offset+(e||0),t.length,n,zI)){if(!r)return i;++i}return-1}function Vt(t,e,n){if(e===void 0)return-1;if(e===null)return Tz(t,n);const i=Jn.getVisitFn(t),r=Mu(e);for(let s=(n||0)-1,a=t.length;++s<a;)if(r(i(t,s)))return s;return-1}function KI(t,e,n){const i=Jn.getVisitFn(t),r=Mu(e);for(let s=(n||0)-1,a=t.length;++s<a;)if(r(i(t,s)))return s;return-1}It.prototype.visitNull=Iz;It.prototype.visitBool=Vt;It.prototype.visitInt=Vt;It.prototype.visitInt8=Vt;It.prototype.visitInt16=Vt;It.prototype.visitInt32=Vt;It.prototype.visitInt64=Vt;It.prototype.visitUint8=Vt;It.prototype.visitUint16=Vt;It.prototype.visitUint32=Vt;It.prototype.visitUint64=Vt;It.prototype.visitFloat=Vt;It.prototype.visitFloat16=Vt;It.prototype.visitFloat32=Vt;It.prototype.visitFloat64=Vt;It.prototype.visitUtf8=Vt;It.prototype.visitBinary=Vt;It.prototype.visitFixedSizeBinary=Vt;It.prototype.visitDate=Vt;It.prototype.visitDateDay=Vt;It.prototype.visitDateMillisecond=Vt;It.prototype.visitTimestamp=Vt;It.prototype.visitTimestampSecond=Vt;It.prototype.visitTimestampMillisecond=Vt;It.prototype.visitTimestampMicrosecond=Vt;It.prototype.visitTimestampNanosecond=Vt;It.prototype.visitTime=Vt;It.prototype.visitTimeSecond=Vt;It.prototype.visitTimeMillisecond=Vt;It.prototype.visitTimeMicrosecond=Vt;It.prototype.visitTimeNanosecond=Vt;It.prototype.visitDecimal=Vt;It.prototype.visitList=Vt;It.prototype.visitStruct=Vt;It.prototype.visitUnion=Vt;It.prototype.visitDenseUnion=KI;It.prototype.visitSparseUnion=KI;It.prototype.visitDictionary=Vt;It.prototype.visitInterval=Vt;It.prototype.visitIntervalDayTime=Vt;It.prototype.visitIntervalYearMonth=Vt;It.prototype.visitFixedSizeList=Vt;It.prototype.visitMap=Vt;const Ch=new It;class Tt extends Yt{}function Nt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===I.Timestamp||e instanceof Nn&&e.bitWidth!==64||e instanceof bs&&e.bitWidth!==64||e instanceof ta&&e.precision!==ln.HALF))return new Hv(t.data.length,i=>{const r=t.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Hv(t.data.length,i=>{const s=t.data[i].length,a=t.slice(n,n+s);return n+=s,new kz(a)})}class kz{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const g1=new Tt,Cz=(t,e)=>t+e;class ga extends Yt{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===Xt.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,r)=>i+Br.visit(r,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,r)=>i+Br.visit(r,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const Mz=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Nz=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Oz=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,u=Br.getVisitFn(r.type),c=r.slice(s,a-s);let l=8;for(let f=-1,h=a-s;++f<h;)l+=u(c,f);return l},Fz=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=Br.getVisitFn(i.type);let a=0;for(let u=-1,c=r.length;++u<c;)a+=s(r,u);return a},Dz=(t,e)=>t.type.mode===fi.Dense?XI(t,e):JI(t,e),XI=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+Br.visit(e[s],i[r])},JI=({children:t},e)=>4+Br.visitMany(t,t.map(()=>e)).reduce(Cz,0);ga.prototype.visitUtf8=Mz;ga.prototype.visitBinary=Nz;ga.prototype.visitList=Oz;ga.prototype.visitFixedSizeList=Fz;ga.prototype.visitUnion=Dz;ga.prototype.visitDenseUnion=XI;ga.prototype.visitSparseUnion=JI;const Br=new ga;var QI;const ZI={},t4={};class Zt{constructor(e){var n,i,r;const s=e[0]instanceof Zt?e.flatMap(u=>u.data):e;if(s.length===0||s.some(u=>!(u instanceof ge)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:u,set:c,indexOf:l,byteLength:f}=ZI[a.typeId],h=s[0];this.isValid=d=>m1(h,d),this.get=d=>u(h,d),this.set=(d,p)=>c(h,d,p),this.indexOf=d=>l(h,d),this.getByteLength=d=>f(h,d),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,t4[a.typeId]),this._offsets=WI(s);break}this.data=s,this.type=a,this.stride=mr(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=qI(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${I[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return g1.visit(this)}concat(...e){return new Zt(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Zt(jI(this,e,n,({data:i,_offsets:r},s,a)=>HI(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:r,ArrayType:s}=this;switch(e.typeId){case I.Int:case I.Float:case I.Decimal:case I.Time:case I.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:u,length:c})=>(a.array.set(u.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Zt(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return wt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(wt.isDictionary(this.type)){const e=new Mh(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Zt(n)}return new Mh(this)}unmemoize(){if(wt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Zt(n)}return this}}QI=Symbol.toStringTag;Zt[QI]=(t=>{t.type=wt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(I).map(n=>I[n]).filter(n=>typeof n=="number"&&n!==I.NONE);for(const n of e){const i=Jn.getVisitFnByTypeId(n),r=Bi.getVisitFnByTypeId(n),s=Ch.getVisitFnByTypeId(n),a=Br.getVisitFnByTypeId(n);ZI[n]={get:i,set:r,indexOf:s,byteLength:a},t4[n]=Object.create(t,{isValid:{value:$o(m1)},get:{value:$o(Jn.getVisitFnByTypeId(n))},set:{value:YI(Bi.getVisitFnByTypeId(n))},indexOf:{value:GI(Ch.getVisitFnByTypeId(n))},getByteLength:{value:$o(Br.getVisitFnByTypeId(n))}})}return"Vector"})(Zt.prototype);class Mh extends Zt{constructor(e){super(e.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const u=s[a];if(u!==void 0)return u;const c=n.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,u){i.call(this,a,u),s[a]=u}}),Object.defineProperty(this,"slice",{value:(a,u)=>new Mh(r.call(this,a,u))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Zt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Rz(t){if(!t||t.length<=0)return function(r){return!0};let e="";const n=t.filter(i=>i===i);return n.length>0&&(e=`
    switch (x) {${n.map(i=>`
        case ${Lz(i)}:`).join("")}
            return false;
    }`),t.length!==n.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function Lz(t){return typeof t!="bigint"?zs(t):PA?`${zs(t)}n`:`"${zs(t)}"`}const y0=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e,Bz=(t,e=0)=>t.length>=e?t.subarray(0,e):Eh(new t.constructor(e),t,0);class ep{constructor(e,n=1){this.buffer=e,this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e.constructor,this._resize(this.length=Math.ceil(e.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,n){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?y0(i*1,this.BYTES_PER_ELEMENT):y0(i*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=y0(e*this.stride,this.BYTES_PER_ELEMENT);const n=Bz(this.buffer,e);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(e){return this.buffer=Eh(new this.ArrayType(e),this.buffer)}}ep.prototype.offset=0;class vl extends ep{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,n){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=n,this}}class e4 extends vl{constructor(e=new Uint8Array(0)){super(e,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,n){const{buffer:i}=this.reserve(e-this.length+1),r=e>>3,s=e%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class n4 extends vl{constructor(e=new Int32Array(1)){super(e,1)}append(e){return this.set(this.length-1,e)}set(e,n){const i=this.length-1,r=this.reserve(e-i+1).buffer;return i<e++&&r.fill(r[i],i,e),r[e]=r[e-1]+n,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,0),super.flush(e+1)}}let ti=class{constructor({type:e,nullValues:n}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=mr(e),this._nulls=new e4,n&&n.length>0&&(this._isValid=Rz(n))}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}toVector(){return new Zt([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),a.reduce((u,c)=>u+c.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,n){return this.setValid(e,this.isValid(n))&&this.setValue(e,n),this}setValue(e,n){this._setValue(this,e,n)}setValid(e,n){return this.length=this._nulls.set(e,+n).length,n}addChild(e,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,n,i,r;const{type:s,length:a,nullCount:u,_typeIds:c,_offsets:l,_values:f,_nulls:h}=this;(n=c==null?void 0:c.flush(a))?r=l==null?void 0:l.flush(a):(r=l==null?void 0:l.flush(a))?e=f==null?void 0:f.flush(l.last()):e=f==null?void 0:f.flush(a),u>0&&(i=h==null?void 0:h.flush(a));const d=this.children.map(p=>p.flush());return this.clear(),Ht({type:s,length:a,nullCount:u,children:d,child:d[0],data:e,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,n,i,r;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};ti.prototype.length=1;ti.prototype.stride=1;ti.prototype.children=null;ti.prototype.finished=!1;ti.prototype.nullValues=null;ti.prototype._isValid=()=>!0;class ya extends ti{constructor(e){super(e),this._values=new vl(new this.ArrayType(0),this.stride)}setValue(e,n){const i=this._values;return i.reserve(e-i.length+1),super.setValue(e,n)}}class np extends ti{constructor(e){super(e),this._pendingLength=0,this._offsets=new n4}setValue(e,n){const i=this._pending||(this._pending=new Map),r=i.get(e);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof Zd?n[Gi].length:n.length,i.set(e,n)}setValid(e,n){return super.setValid(e,n)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,n),this}}class Km{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,r){return e.prep(8,24),e.writeInt64(r),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}const b0=2,br=4,ns=4,Se=4,Ds=new Int32Array(2),Yv=new Float32Array(Ds.buffer),Gv=new Float64Array(Ds.buffer),tf=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let ls=class Xm{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?Xm.ZERO:new Xm(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};ls.ZERO=new ls(0,0);var Jm;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Jm||(Jm={}));let cu=class i4{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new i4(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new ls(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new ls(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return Ds[0]=this.readInt32(e),Yv[0]}readFloat64(e){return Ds[tf?0:1]=this.readInt32(e),Ds[tf?1:0]=this.readInt32(e+4),Gv[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){Yv[0]=n,this.writeInt32(e,Ds[0])}writeFloat64(e,n){Gv[0]=n,this.writeInt32(e,Ds[tf?0:1]),this.writeInt32(e+4,Ds[tf?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+br+ns)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<ns;n++)e+=String.fromCharCode(this.readInt8(this.position_+br+n));return e}__offset(e,n){const i=e-this.readInt32(e);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const i=this.readInt32(e);let r="",s=0;if(e+=br,n===Jm.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;s<i;){let a;const u=this.readUint8(e+s++);if(u<192)a=u;else{const c=this.readUint8(e+s++);if(u<224)a=(u&31)<<6|c&63;else{const l=this.readUint8(e+s++);if(u<240)a=(u&15)<<12|(c&63)<<6|l&63;else{const f=this.readUint8(e+s++);a=(u&7)<<18|(c&63)<<12|(l&63)<<6|f&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&1024-1)+56320))}return r}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+br}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ns)throw new Error("FlatBuffers: file identifier must be length "+ns);for(let n=0;n<ns;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+br+n))return!1;return!0}createLong(e,n){return ls.create(e,n)}createScalarList(e,n){const i=[];for(let r=0;r<n;++r)e(r)!==null&&i.push(e(r));return i}createObjList(e,n){const i=[];for(let r=0;r<n;++r){const s=e(r);s!==null&&i.push(s.unpack())}return i}},r4=class s4{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=cu.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<i+e+n;){const r=this.bb.capacity();this.bb=s4.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,i){n!=i&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=cu.allocate(i);return r.setPosition(i-n),r.bytes().set(e.bytes(),i-n),r}addOffset(e){this.prep(br,0),this.writeInt32(this.offset()-e+br)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*b0;this.addInt16(s);let a=0;const u=this.space;t:for(n=0;n<this.vtables.length;n++){const c=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(c)){for(let l=b0;l<s;l+=b0)if(this.bb.readInt16(u+l)!=this.bb.readInt16(c+l))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,a-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,i){const r=i?Se:0;if(n){const s=n;if(this.prep(this.minalign,br+ns+r),s.length!=ns)throw new Error("FlatBuffers: file identifier must be length "+ns);for(let a=ns-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,br+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,i){this.notNested(),this.vector_num_elems=n,this.prep(br,e*n),this.prep(i,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let i=0;for(;i<e.length;){let r;const s=e.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=e.charCodeAt(i++);r=(s<<10)+a+(65536-56623104-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(e,n){return ls.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let i=0;i<e.length;++i){const r=e[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class Ke{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Ke).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Se),(n||new Ke).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Ke.startKeyValue(e),Ke.addKey(e,n),Ke.addValue(e,i),Ke.endKeyValue(e)}}var lu;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(lu||(lu={}));var fu;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(fu||(fu={}));var Nh;(function(t){t[t.DenseArray=0]="DenseArray"})(Nh||(Nh={}));class ii{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Se),(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return ii.startInt(e),ii.addBitWidth(e,n),ii.addIsSigned(e,i),ii.endInt(e)}}class is{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new is).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Se),(n||new is).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new ii).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Nh.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,Nh.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Ta{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Ta).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Se),(n||new Ta).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Ta.startBinary(e),Ta.endBinary(e)}}class ka{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Se),(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return ka.startBool(e),ka.endBool(e)}}var Oh;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Oh||(Oh={}));let Ef=class xo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new xo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Se),(n||new xo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Oh.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Oh.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return xo.startDate(e),xo.addUnit(e,n),xo.endDate(e)}};class $n{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new $n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Se),(n||new $n).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,r){return $n.startDecimal(e),$n.addPrecision(e,n),$n.addScale(e,i),$n.addBitWidth(e,r),$n.endDecimal(e)}}var hu;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(hu||(hu={}));class _r{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Se),(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return _r.startFixedSizeBinary(e),_r.addByteWidth(e,n),_r.endFixedSizeBinary(e)}}class vr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Se),(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return vr.startFixedSizeList(e),vr.addListSize(e,n),vr.endFixedSizeList(e)}}var Fh;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Fh||(Fh={}));class wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Se),(n||new wr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Fh.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Fh.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return wr.startFloatingPoint(e),wr.addPrecision(e,n),wr.endFloatingPoint(e)}}var Dh;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Dh||(Dh={}));class xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Se),(n||new xr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Dh.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Dh.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return xr.startInterval(e),xr.addUnit(e,n),xr.endInterval(e)}}class Ca{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Ca).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Se),(n||new Ca).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Ca.startList(e),Ca.endList(e)}}let Af=class So{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new So).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Se),(n||new So).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return So.startMap(e),So.addKeysSorted(e,n),So.endMap(e)}};class Ma{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Se),(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Ma.startNull(e),Ma.endNull(e)}}class Na{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Se),(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Na.startStruct_(e),Na.endStruct_(e)}}class Ii{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Ii).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Se),(n||new Ii).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hu.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,hu.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Ii.startTime(e),Ii.addUnit(e,n),Ii.addBitWidth(e,i),Ii.endTime(e)}}class Ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Se),(n||new Ti).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hu.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,hu.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return Ti.startTimestamp(e),Ti.addUnit(e,n),Ti.addTimezone(e,i),Ti.endTimestamp(e)}}var Rh;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Rh||(Rh={}));class zn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new zn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Se),(n||new zn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Rh.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Rh.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return zn.startUnion(e),zn.addMode(e,n),zn.addTypeIds(e,i),zn.endUnion(e)}}class Oa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Oa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Se),(n||new Oa).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Oa.startUtf8(e),Oa.endUtf8(e)}}var Fe;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(Fe||(Fe={}));let xi=class If{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new If).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Se),(n||new If).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Fe.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new is).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new If).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Fe.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},fr=class Xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Se),(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fu.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,fu.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,r,s){return Xr.startSchema(e),Xr.addEndianness(e,n),Xr.addFields(e,i),Xr.addCustomMetadata(e,r),Xr.addFeatures(e,s),Xr.endSchema(e)}};class ni{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Se),(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lu.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new fr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Km).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Km).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,lu.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class fe{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=Qm(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(r=>n.has(r.name));return new fe(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new fe(n,this.metadata)}assign(...e){const n=e[0]instanceof fe?e[0]:Array.isArray(e[0])?new fe(e[0]):new fe(e),i=[...this.fields],r=ef(ef(new Map,this.metadata),n.metadata),s=n.fields.filter(u=>{const c=i.findIndex(l=>l.name===u.name);return~c?(i[c]=u.clone({metadata:ef(ef(new Map,i[c].metadata),u.metadata)}))&&!1:!0}),a=Qm(s,new Map);return new fe([...i,...s],r,new Map([...this.dictionaries,...a]))}}fe.prototype.fields=null;fe.prototype.metadata=null;fe.prototype.dictionaries=null;class oe{constructor(e,n,i=!1,r){this.name=e,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...e){let[n,i,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new oe(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,r,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],oe.new(n,i,r,s)}}oe.prototype.type=null;oe.prototype.name=null;oe.prototype.nullable=null;oe.prototype.metadata=null;function ef(t,e){return new Map([...t||new Map,...e||new Map])}function Qm(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const s=t[n].type;if(wt.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Qm(s.children,e)}return e}var Kv=ls,Pz=r4,Uz=cu;class Hc{constructor(e,n=ai.V4,i,r){this.schema=e,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(e){e=new Uz(se(e));const n=ni.getRootAsFooter(e),i=fe.decode(n.schema());return new Vz(i,n)}static encode(e){const n=new Pz,i=fe.encode(n,e.schema);ni.startRecordBatchesVector(n,e.numRecordBatches);for(const a of[...e.recordBatches()].slice().reverse())na.encode(n,a);const r=n.endVector();ni.startDictionariesVector(n,e.numDictionaries);for(const a of[...e.dictionaryBatches()].slice().reverse())na.encode(n,a);const s=n.endVector();return ni.startFooter(n),ni.addSchema(n,i),ni.addVersion(n,ai.V4),ni.addRecordBatches(n,r),ni.addDictionaries(n,s),ni.finishFooterBuffer(n,ni.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Vz extends Hc{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return na.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return na.decode(n)}return null}}class na{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new na(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,r=new Kv(n.offset,0),s=new Kv(n.bodyLength,0);return Km.createBlock(e,r,i,s)}}const Re=Object.freeze({done:!0,value:void 0});class Xv{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class y1{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class $z extends y1{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return vt(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Re);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Ai.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Ai.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return vt(this,void 0,void 0,function*(){return yield this.abort(e),Re})}return(e){return vt(this,void 0,void 0,function*(){return yield this.close(),Re})}read(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Re)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Tf extends $z{write(e){if((e=se(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?qm(this.toUint8Array(!0)):this.toUint8Array(!1).then(qm)}toUint8Array(e=!1){return e?Rr(this._values)[0]:(()=>vt(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=Pa(this),u;u=yield a.next(),!u.done;){const c=u.value;r.push(c),s+=c.byteLength}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return Rr(r,s)[0]}))()}}class Lh{constructor(e){e&&(this.source=new jz(Ai.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class du{constructor(e){e instanceof du?this.source=e.source:e instanceof Tf?this.source=new va(Ai.fromAsyncIterable(e)):zA(e)?this.source=new va(Ai.fromNodeStream(e)):By(e)?this.source=new va(Ai.fromDOMStream(e)):jA(e)?this.source=new va(Ai.fromDOMStream(e.body)):_l(e)?this.source=new va(Ai.fromIterable(e)):Za(e)?this.source=new va(Ai.fromAsyncIterable(e)):Cu(e)&&(this.source=new va(Ai.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class jz{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Re)}return(e){return Object.create(this.source.return&&this.source.return(e)||Re)}}class va{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return vt(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return vt(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return vt(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return vt(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class Jv extends Lh{constructor(e,n){super(),this.position=0,this.buffer=se(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),n.subarray(r,this.position)):null}readAt(e,n){const i=this.buffer,r=Math.min(this.size,e+n);return i?i.subarray(e,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Bh extends du{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>vt(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return vt(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return vt(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return vt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=r,a=0,u=0;const c=Math.min(i,s+Math.min(i-s,e)),l=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=u)<c&&(a+=u)<l.byteLength;)({bytesRead:u}=yield n.read(l,a,l.byteLength-a,s));return l}return null})}readAt(e,n){return vt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&e+n<r){const s=Math.min(r,e+n),a=new Uint8Array(s-e);return(yield i.read(a,0,n,e)).buffer}return new Uint8Array(n)})}close(){return vt(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return vt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return vt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const zz=65536;function Co(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const pu=8,b1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class a4{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?zz:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Co(this.buffer[1])} ${Co(this.buffer[0])}`}}class he extends a4{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return he.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return he.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,r=new he(n);for(let s=0;s<i;){const a=pu<i-s?pu:i-s,u=new he(new Uint32Array([Number.parseInt(e.slice(s,s+a),10),0])),c=new he(new Uint32Array([b1[a],0]));r.times(c),r.plus(u),s+=a}return r}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)he.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new he(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new he(new Uint32Array(e.buffer)).plus(n)}}class Vn extends a4{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return Vn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Vn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),r=e.length,s=new Vn(n);for(let a=i?1:0;a<r;){const u=pu<r-a?pu:r-a,c=new Vn(new Uint32Array([Number.parseInt(e.slice(a,a+u),10),0])),l=new Vn(new Uint32Array([b1[u],0]));s.times(l),s.plus(c),a+=u}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)Vn.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new Vn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Vn(new Uint32Array(e.buffer)).plus(n)}}class hr{constructor(e){this.buffer=e}high(){return new Vn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Vn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new he(new Uint32Array([this.buffer[3],0])),i=new he(new Uint32Array([this.buffer[2],0])),r=new he(new Uint32Array([this.buffer[1],0])),s=new he(new Uint32Array([this.buffer[0],0])),a=new he(new Uint32Array([e.buffer[3],0])),u=new he(new Uint32Array([e.buffer[2],0])),c=new he(new Uint32Array([e.buffer[1],0])),l=new he(new Uint32Array([e.buffer[0],0]));let f=he.multiply(s,l);this.buffer[0]=f.low();const h=new he(new Uint32Array([f.high(),0]));return f=he.multiply(r,l),h.plus(f),f=he.multiply(s,c),h.plus(f),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(f)?1:0,this.buffer[2]=h.high(),new he(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(he.multiply(i,l)).plus(he.multiply(r,c)).plus(he.multiply(s,u)),this.buffer[3]+=he.multiply(n,l).plus(he.multiply(i,c)).plus(he.multiply(r,u)).plus(he.multiply(s,a)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Co(this.buffer[3])} ${Co(this.buffer[2])} ${Co(this.buffer[1])} ${Co(this.buffer[0])}`}static multiply(e,n){return new hr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new hr(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return hr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return hr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),r=e.length,s=new hr(n);for(let a=i?1:0;a<r;){const u=pu<r-a?pu:r-a,c=new hr(new Uint32Array([Number.parseInt(e.slice(a,a+u),10),0,0,0])),l=new hr(new Uint32Array([b1[u],0,0,0]));s.times(l),s.plus(c),a+=u}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,r=e.length;++i<r;)hr.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class o4 extends Yt{constructor(e,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(e){return super.visit(e instanceof oe?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ht({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===fi.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ht({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class qz extends o4{constructor(e,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):kh(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return wt.isTimestamp(e)||(wt.isInt(e)||wt.isTime(e))&&e.bitWidth===64||wt.isDate(e)&&e.unit===er.MILLISECOND?ve(Uint8Array,Vn.convertArray(i[n])):wt.isDecimal(e)?ve(Uint8Array,hr.convertArray(i[n])):wt.isBinary(e)||wt.isFixedSizeBinary(e)?Wz(i[n]):wt.isBool(e)?kh(i[n]):wt.isUtf8(e)?Jd(i[n].join("")):ve(Uint8Array,ve(e.ArrayType,i[n].map(r=>+r)))}}function Wz(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class u4 extends np{constructor(e){super(e),this._values=new ep(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,se(n))}_flushPending(e,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,u]of e)if(u===void 0)i.set(a,0);else{const c=u.length;r.set(u,s),i.set(a,c),s+=c}}}class Hz extends ti{constructor(e){super(e),this._values=new e4}setValue(e,n){this._values.set(e,+n)}}class ip extends ya{}ip.prototype._setValue=bI;class c4 extends ip{}c4.prototype._setValue=Qy;class l4 extends ip{}l4.prototype._setValue=Zy;class f4 extends ya{}f4.prototype._setValue=wI;class Yz extends ti{constructor({type:e,nullValues:n,dictionaryHashFunction:i}){super({type:new ea(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Ph({type:this.type.indices,nullValues:n}),this.dictionary=Ph({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,n){const i=this.indices;return n=i.setValid(e,n),this.length=i.length,n}setValue(e,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(e,s)}flush(){const e=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(e);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return typeof e=="string"?e:`${e}`}}class h4 extends ya{}h4.prototype._setValue=yI;class Gz extends ti{setValue(e,n){const[i]=this.children,r=e*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(e,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(e);return this.type=new uu(this.type.listSize,new oe(n,e.type,!0)),i}}class rp extends ya{setValue(e,n){this._values.set(e,n)}}class Kz extends rp{setValue(e,n){super.setValue(e,pI(n))}}class Xz extends rp{}class Jz extends rp{}class sp extends ya{}sp.prototype._setValue=EI;class d4 extends sp{}d4.prototype._setValue=u1;class p4 extends sp{}p4.prototype._setValue=c1;class Is extends ya{setValue(e,n){this._values.set(e,n)}}class Qz extends Is{}class Zz extends Is{}class tq extends Is{}class eq extends Is{}class nq extends Is{}class iq extends Is{}class rq extends Is{}class sq extends Is{}class aq extends np{constructor(e){super(e),this._offsets=new n4}addChild(e,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new ou(new oe(n,e.type,!0)),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[r,s]of e)if(typeof s>"u")n.set(r,0);else{const a=s.length,u=n.set(r,a).buffer[r];for(let c=-1;++c<a;)i.set(u+c,s[c])}}}class oq extends np{set(e,n){return super.set(e,n)}setValue(e,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(e);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(e,i)}addChild(e,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new Wc(new oe(n,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[r,s]of e)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:u}=n.set(r,s.size).buffer;for(const c of s.entries())if(i.set(a,c),++a>=u)break}}}class uq extends ti{setValue(e,n){}setValid(e,n){return this.length=Math.max(e+1,this.length),n}}class cq extends ti{setValue(e,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(e,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(e,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(e,n[s.name]))}}setValid(e,n){return super.setValid(e,n)||this.children.forEach(i=>i.setValid(e,n)),n}addChild(e,n=`${this.numChildren}`){const i=this.children.push(e);return this.type=new cn([...this.type.children,new oe(n,e.type,!0)]),i}}class Nu extends ya{}Nu.prototype._setValue=_I;class m4 extends Nu{}m4.prototype._setValue=t1;class g4 extends Nu{}g4.prototype._setValue=e1;class y4 extends Nu{}y4.prototype._setValue=n1;class b4 extends Nu{}b4.prototype._setValue=i1;class Ou extends ya{}Ou.prototype._setValue=vI;class _4 extends Ou{}_4.prototype._setValue=r1;class v4 extends Ou{}v4.prototype._setValue=s1;class w4 extends Ou{}w4.prototype._setValue=a1;class x4 extends Ou{}x4.prototype._setValue=o1;class _1 extends ti{constructor(e){super(e),this._typeIds=new vl(new Int8Array(0),1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,n){return this.set(this.length,e,n)}set(e,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,e)),this.setValid(e,this.isValid(n))&&this.setValue(e,n,i),this}setValue(e,n,i){this._typeIds.set(e,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(e,n)}addChild(e,n=`${this.children.length}`){const i=this.children.push(e),{type:{children:r,mode:s,typeIds:a}}=this,u=[...r,new oe(n,e.type)];return this.type=new qc(s,[...a,i],u),i}_valueToChildTypeId(e,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class lq extends _1{}class fq extends _1{constructor(e){super(e),this._offsets=new vl(new Int32Array(0))}setValue(e,n,i){const r=this._typeIds.set(e,i).buffer[e],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(e,s.length).buffer[e];s==null||s.set(a,n)}}class S4 extends np{constructor(e){super(e),this._values=new ep(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,Jd(n))}_flushPending(e,n){}}S4.prototype._flushPending=u4.prototype._flushPending;class hq extends Yt{visitNull(){return uq}visitBool(){return Hz}visitInt(){return Is}visitInt8(){return Qz}visitInt16(){return Zz}visitInt32(){return tq}visitInt64(){return eq}visitUint8(){return nq}visitUint16(){return iq}visitUint32(){return rq}visitUint64(){return sq}visitFloat(){return rp}visitFloat16(){return Kz}visitFloat32(){return Xz}visitFloat64(){return Jz}visitUtf8(){return S4}visitBinary(){return u4}visitFixedSizeBinary(){return h4}visitDate(){return ip}visitDateDay(){return c4}visitDateMillisecond(){return l4}visitTimestamp(){return Nu}visitTimestampSecond(){return m4}visitTimestampMillisecond(){return g4}visitTimestampMicrosecond(){return y4}visitTimestampNanosecond(){return b4}visitTime(){return Ou}visitTimeSecond(){return _4}visitTimeMillisecond(){return v4}visitTimeMicrosecond(){return w4}visitTimeNanosecond(){return x4}visitDecimal(){return f4}visitList(){return aq}visitStruct(){return cq}visitUnion(){return _1}visitDenseUnion(){return fq}visitSparseUnion(){return lq}visitDictionary(){return Yz}visitInterval(){return sp}visitIntervalDayTime(){return d4}visitIntervalYearMonth(){return p4}visitFixedSizeList(){return Gz}visitMap(){return oq}}const dq=new hq;class kt extends Yt{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,r)=>this.compareFields(i,n[r]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function ei(t,e){return e instanceof t.constructor}function wl(t,e){return t===e||ei(t,e)}function Ts(t,e){return t===e||ei(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function ap(t,e){return t===e||ei(t,e)&&t.precision===e.precision}function pq(t,e){return t===e||ei(t,e)&&t.byteWidth===e.byteWidth}function v1(t,e){return t===e||ei(t,e)&&t.unit===e.unit}function xl(t,e){return t===e||ei(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Sl(t,e){return t===e||ei(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function mq(t,e){return t===e||ei(t,e)&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function gq(t,e){return t===e||ei(t,e)&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function w1(t,e){return t===e||ei(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&ia.compareManyFields(t.children,e.children)}function yq(t,e){return t===e||ei(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&ia.visit(t.indices,e.indices)&&ia.visit(t.dictionary,e.dictionary)}function x1(t,e){return t===e||ei(t,e)&&t.unit===e.unit}function bq(t,e){return t===e||ei(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function _q(t,e){return t===e||ei(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}kt.prototype.visitNull=wl;kt.prototype.visitBool=wl;kt.prototype.visitInt=Ts;kt.prototype.visitInt8=Ts;kt.prototype.visitInt16=Ts;kt.prototype.visitInt32=Ts;kt.prototype.visitInt64=Ts;kt.prototype.visitUint8=Ts;kt.prototype.visitUint16=Ts;kt.prototype.visitUint32=Ts;kt.prototype.visitUint64=Ts;kt.prototype.visitFloat=ap;kt.prototype.visitFloat16=ap;kt.prototype.visitFloat32=ap;kt.prototype.visitFloat64=ap;kt.prototype.visitUtf8=wl;kt.prototype.visitBinary=wl;kt.prototype.visitFixedSizeBinary=pq;kt.prototype.visitDate=v1;kt.prototype.visitDateDay=v1;kt.prototype.visitDateMillisecond=v1;kt.prototype.visitTimestamp=xl;kt.prototype.visitTimestampSecond=xl;kt.prototype.visitTimestampMillisecond=xl;kt.prototype.visitTimestampMicrosecond=xl;kt.prototype.visitTimestampNanosecond=xl;kt.prototype.visitTime=Sl;kt.prototype.visitTimeSecond=Sl;kt.prototype.visitTimeMillisecond=Sl;kt.prototype.visitTimeMicrosecond=Sl;kt.prototype.visitTimeNanosecond=Sl;kt.prototype.visitDecimal=wl;kt.prototype.visitList=mq;kt.prototype.visitStruct=gq;kt.prototype.visitUnion=w1;kt.prototype.visitDenseUnion=w1;kt.prototype.visitSparseUnion=w1;kt.prototype.visitDictionary=yq;kt.prototype.visitInterval=x1;kt.prototype.visitIntervalDayTime=x1;kt.prototype.visitIntervalYearMonth=x1;kt.prototype.visitFixedSizeList=bq;kt.prototype.visitMap=_q;const ia=new kt;function Zm(t,e){return ia.compareSchemas(t,e)}function Ph(t){const e=t.type,n=new(dq.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(a,u)=>i[u]||r:({name:a})=>i[a]||r;for(const[a,u]of e.children.entries()){const{type:c}=u,l=s(u,a);n.children.push(Ph(Object.assign(Object.assign({},l),{type:c})))}}return n}function _0(t,e){return vq(t,e.map(n=>n.data.concat()))}function vq(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,u=-1;const c=e.length;let l,f=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,u=-1;++u<c;)f[u]=l=e[u].shift(),a=Math.min(a,l?l.length:a);Number.isFinite(a)&&(f=wq(n,a,f,e,r),a>0&&(i[s++]=Ht({type:new cn(n),length:a,nullCount:0,children:f.slice()})))}return[t=t.assign(n),i.map(h=>new qn(t,h))]}function wq(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let u=-1,c=i.length;++u<c;){const l=n[u],f=l==null?void 0:l.length;if(f>=e)f===e?n[u]=l:(n[u]=l.slice(0,e),r.numBatches=Math.max(r.numBatches,i[u].unshift(l.slice(e,f-e))));else{const h=t[u];t[u]=h.clone({nullable:!0}),n[u]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Ht({type:h.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var E4;let _s=class xa{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new fe([]),this._offsets=[0],this;let r,s;e[0]instanceof fe&&(r=e.shift()),e[e.length-1]instanceof Uint32Array&&(s=e.pop());const a=c=>{if(c){if(c instanceof qn)return[c];if(c instanceof xa)return c.batches;if(c instanceof ge){if(c.type instanceof cn)return[new qn(new fe(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>a(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>a(l));if(typeof c=="object"){const l=Object.keys(c),f=l.map(p=>new Zt([c[p]])),h=new fe(l.map((p,m)=>new oe(String(p),f[m].type))),[,d]=_0(h,f);return d.length===0?[new qn(c)]:d}}}return[]},u=e.flatMap(c=>a(c));if(r=(i=r??((n=u[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new fe([]),!(r instanceof fe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of u){if(!(c instanceof qn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Zm(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=u,this._offsets=s??WI(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=qI(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?g1.visit(new Zt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:r})=>r));return new xa(n,i.map(r=>new qn(n,r)))}slice(e,n){const i=this.schema;[e,n]=jI({length:this.numRows},e,n);const r=HI(this.data,this._offsets,e,n);return new xa(i,r.map(s=>new qn(i,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],r=Ht({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Zt(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new Zt([Ht({type:new ys,length:this.numRows})]));const s=i.fields.slice(),a=s[e].clone({type:n.type}),u=this.schema.fields.map((c,l)=>this.getChildAt(l));[s[e],u[e]]=[a,n],[i,r]=_0(i,u)}return new xa(i,r)}select(e){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(r=>r.selectAt(e));return new xa(n,i)}assign(e){const n=this.schema.fields,[i,r]=e.schema.fields.reduce((u,c,l)=>{const[f,h]=u,d=n.findIndex(p=>p.name===c.name);return~d?h[d]=l:f.push(l),u},[[],[]]),s=this.schema.assign(e.schema),a=[...n.map((u,c)=>[c,r[c]]).map(([u,c])=>c===void 0?this.getChildAt(u):e.getChildAt(c)),...i.map(u=>e.getChildAt(u))].filter(Boolean);return new xa(..._0(s,a))}};E4=Symbol.toStringTag;_s[E4]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=$o(m1),t.get=$o(Jn.getVisitFn(I.Struct)),t.set=YI(Bi.getVisitFn(I.Struct)),t.indexOf=GI(Ch.getVisitFn(I.Struct)),t.getByteLength=$o(Br.getVisitFn(I.Struct)),"Table"))(_s.prototype);var A4;let qn=class cc{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof fe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ht({nullCount:0,type:new cn(this.schema.fields),children:this.schema.fields.map(n=>Ht({type:n.type,nullCount:0}))})]=e,!(this.data instanceof ge))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Qv(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:r,length:s}=Object.keys(n).reduce((c,l,f)=>(c.children[f]=n[l],c.length=Math.max(c.length,n[l].length),c.fields[f]=oe.new({name:l,type:n[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new fe(i),u=Ht({type:new cn(i),length:s,children:r,nullCount:0});[this.schema,this.data]=Qv(a,u.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=I4(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Jn.visit(this.data,e)}set(e,n){return Bi.visit(this.data,e,n)}indexOf(e,n){return Ch.visit(this.data,e,n)}getByteLength(e){return Br.visit(this.data,e)}[Symbol.iterator](){return g1.visit(new Zt([this.data]))}toArray(){return[...this]}concat(...e){return new _s(this.schema,[this,...e])}slice(e,n){const[i]=new Zt([this.data]).slice(e,n).data;return new cc(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Zt([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new Zt([Ht({type:new ys,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),u=s[e].clone({type:n.type});[s[e],a[e]]=[u,n.data[0]],i=new fe(s,new Map(this.schema.metadata)),r=Ht({type:new cn(s),children:a})}return new cc(i,r)}select(e){const n=this.schema.select(e),i=new cn(n.fields),r=[];for(const s of e){const a=this.schema.fields.findIndex(u=>u.name===s);~a&&(r[a]=this.data.children[a])}return new cc(n,Ht({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(s=>this.data.children[s]).filter(Boolean),r=Ht({type:new cn(n.fields),length:this.numRows,children:i});return new cc(n,r)}};A4=Symbol.toStringTag;qn[A4]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(qn.prototype);function Qv(t,e,n=e.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[u,c]of t.fields.entries()){const l=e[u];(!l||l.length!==n)&&(r[u]=c.clone({nullable:!0}),s[u]=(i=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Ht({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),Ht({type:new cn(r),length:n,children:s})]}function I4(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const a=t[i].type,u=e[i];if(wt.isDictionary(a)){if(!n.has(a.id))u.dictionary&&n.set(a.id,u.dictionary);else if(n.get(a.id)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&I4(a.children,u.children,n)}return n}class S1 extends qn{constructor(e){const n=e.fields.map(r=>Ht({type:r.type})),i=Ht({type:new cn(e.fields),nullCount:0,children:n});super(e,i)}}var Uh;(function(t){t[t.BUFFER=0]="BUFFER"})(Uh||(Uh={}));var Vh;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(Vh||(Vh={}));class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Rs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Se),(n||new Rs).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Vh.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Uh.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,Vh.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Uh.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return Rs.startBodyCompression(e),Rs.addCodec(e,n),Rs.addMethod(e,i),Rs.endBodyCompression(e)}}class T4{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}let k4=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}},Qr=class tg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new tg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Se),(n||new tg).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new k4).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new T4).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Rs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Eo=class eg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new eg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Se),(n||new eg).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Qr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var $h;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})($h||($h={}));let Cs=class lr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Se),(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lu.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):$h.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,lu.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,$h.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,r,s,a){return lr.startMessage(e),lr.addVersion(e,n),lr.addHeaderType(e,i),lr.addHeader(e,r),lr.addBodyLength(e,s),lr.addCustomMetadata(e,a),lr.endMessage(e)}};var xq=ls;class Sq extends Yt{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Ma.startNull(n),Ma.endNull(n)}visitInt(e,n){return ii.startInt(n),ii.addBitWidth(n,e.bitWidth),ii.addIsSigned(n,e.isSigned),ii.endInt(n)}visitFloat(e,n){return wr.startFloatingPoint(n),wr.addPrecision(n,e.precision),wr.endFloatingPoint(n)}visitBinary(e,n){return Ta.startBinary(n),Ta.endBinary(n)}visitBool(e,n){return ka.startBool(n),ka.endBool(n)}visitUtf8(e,n){return Oa.startUtf8(n),Oa.endUtf8(n)}visitDecimal(e,n){return $n.startDecimal(n),$n.addScale(n,e.scale),$n.addPrecision(n,e.precision),$n.addBitWidth(n,e.bitWidth),$n.endDecimal(n)}visitDate(e,n){return Ef.startDate(n),Ef.addUnit(n,e.unit),Ef.endDate(n)}visitTime(e,n){return Ii.startTime(n),Ii.addUnit(n,e.unit),Ii.addBitWidth(n,e.bitWidth),Ii.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return Ti.startTimestamp(n),Ti.addUnit(n,e.unit),i!==void 0&&Ti.addTimezone(n,i),Ti.endTimestamp(n)}visitInterval(e,n){return xr.startInterval(n),xr.addUnit(n,e.unit),xr.endInterval(n)}visitList(e,n){return Ca.startList(n),Ca.endList(n)}visitStruct(e,n){return Na.startStruct_(n),Na.endStruct_(n)}visitUnion(e,n){zn.startTypeIdsVector(n,e.typeIds.length);const i=zn.createTypeIdsVector(n,e.typeIds);return zn.startUnion(n),zn.addMode(n,e.mode),zn.addTypeIds(n,i),zn.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return is.startDictionaryEncoding(n),is.addId(n,new xq(e.id,0)),is.addIsOrdered(n,e.isOrdered),i!==void 0&&is.addIndexType(n,i),is.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return _r.startFixedSizeBinary(n),_r.addByteWidth(n,e.byteWidth),_r.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return vr.startFixedSizeList(n),vr.addListSize(n,e.listSize),vr.endFixedSizeList(n)}visitMap(e,n){return Af.startMap(n),Af.addKeysSorted(n,e.keysSorted),Af.endMap(n)}}const v0=new Sq;function Eq(t,e=new Map){return new fe(Iq(t,e),kf(t.customMetadata),e)}function C4(t){return new hi(t.count,M4(t.columns),N4(t.columns))}function Aq(t){return new Pr(C4(t.data),t.id,t.isDelta)}function Iq(t,e){return(t.fields||[]).filter(Boolean).map(n=>oe.fromJSON(n,e))}function Zv(t,e){return(t.children||[]).filter(Boolean).map(n=>oe.fromJSON(n,e))}function M4(t){return(t||[]).reduce((e,n)=>[...e,new uo(n.count,Tq(n.VALIDITY)),...M4(n.children)],[])}function N4(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const r=t[n];r.VALIDITY&&e.push(new Tr(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new Tr(e.length,r.TYPE.length)),r.OFFSET&&e.push(new Tr(e.length,r.OFFSET.length)),r.DATA&&e.push(new Tr(e.length,r.DATA.length)),e=N4(r.children,e)}return e}function Tq(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function kq(t,e){let n,i,r,s,a,u;return!e||!(s=t.dictionary)?(a=ew(t,Zv(t,e)),r=new oe(t.name,a,t.nullable,kf(t.customMetadata))):e.has(n=s.id)?(i=(i=s.indexType)?tw(i):new Zs,u=new ea(e.get(n),i,n,s.isOrdered),r=new oe(t.name,u,t.nullable,kf(t.customMetadata))):(i=(i=s.indexType)?tw(i):new Zs,e.set(n,a=ew(t,Zv(t,e))),u=new ea(a,i,n,s.isOrdered),r=new oe(t.name,u,t.nullable,kf(t.customMetadata))),r||null}function kf(t){return new Map(Object.entries(t||{}))}function tw(t){return new Nn(t.isSigned,t.bitWidth)}function ew(t,e){const n=t.type.name;switch(n){case"NONE":return new ys;case"null":return new ys;case"binary":return new jc;case"utf8":return new ru;case"bool":return new zc;case"list":return new ou((e||[])[0]);case"struct":return new cn(e||[]);case"struct_":return new cn(e||[])}switch(n){case"int":{const i=t.type;return new Nn(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new ta(ln[i.precision])}case"decimal":{const i=t.type;return new Ah(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new su(er[i.unit])}case"time":{const i=t.type;return new bs(Xt[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new Ih(Xt[i.unit],i.timezone)}case"interval":{const i=t.type;return new au(Lr[i.unit])}case"union":{const i=t.type;return new qc(fi[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new Th(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new uu(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new Wc((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var to=ls,Cq=r4,Mq=cu;class Cn{constructor(e,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new Cn(0,ai.V4,n);return i._createHeader=Nq(e,n),i}static decode(e){e=new Mq(se(e));const n=Cs.getRootAsMessage(e),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Cn(i,r,s);return a._createHeader=Oq(n,s),a}static encode(e){const n=new Cq;let i=-1;return e.isSchema()?i=fe.encode(n,e.header()):e.isRecordBatch()?i=hi.encode(n,e.header()):e.isDictionaryBatch()&&(i=Pr.encode(n,e.header())),Cs.startMessage(n),Cs.addVersion(n,ai.V4),Cs.addHeader(n,i),Cs.addHeaderType(n,e.headerType),Cs.addBodyLength(n,new to(e.bodyLength,0)),Cs.finishMessageBuffer(n,Cs.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof fe)return new Cn(0,ai.V4,le.Schema,e);if(e instanceof hi)return new Cn(n,ai.V4,le.RecordBatch,e);if(e instanceof Pr)return new Cn(n,ai.V4,le.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===le.Schema}isRecordBatch(){return this.headerType===le.RecordBatch}isDictionaryBatch(){return this.headerType===le.DictionaryBatch}}class hi{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Pr{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Tr{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class uo{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Nq(t,e){return()=>{switch(e){case le.Schema:return fe.fromJSON(t);case le.RecordBatch:return hi.fromJSON(t);case le.DictionaryBatch:return Pr.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${le[e]}, type: ${e} }`)}}function Oq(t,e){return()=>{switch(e){case le.Schema:return fe.decode(t.header(new fr));case le.RecordBatch:return hi.decode(t.header(new Qr),t.version());case le.DictionaryBatch:return Pr.decode(t.header(new Eo),t.version())}throw new Error(`Unrecognized Message type: { name: ${le[e]}, type: ${e} }`)}}oe.encode=zq;oe.decode=$q;oe.fromJSON=kq;fe.encode=jq;fe.decode=Fq;fe.fromJSON=Eq;hi.encode=qq;hi.decode=Dq;hi.fromJSON=C4;Pr.encode=Wq;Pr.decode=Rq;Pr.fromJSON=Aq;uo.encode=Hq;uo.decode=Bq;Tr.encode=Yq;Tr.decode=Lq;function Fq(t,e=new Map){const n=Vq(t,e);return new fe(n,Cf(t),e)}function Dq(t,e=ai.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new hi(t.length(),Pq(t),Uq(t,e))}function Rq(t,e=ai.V4){return new Pr(hi.decode(t.data(),e),t.id(),t.isDelta())}function Lq(t){return new Tr(t.offset(),t.length())}function Bq(t){return new uo(t.length(),t.nullCount())}function Pq(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=uo.decode(n));return e}function Uq(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<ai.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Tr.decode(i));return n}function Vq(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=oe.decode(i,e));return n}function nw(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=oe.decode(i,e));return n}function $q(t,e){let n,i,r,s,a,u;return!e||!(u=t.dictionary())?(r=rw(t,nw(t,e)),i=new oe(t.name(),r,t.nullable(),Cf(t))):e.has(n=u.id().low)?(s=(s=u.indexType())?iw(s):new Zs,a=new ea(e.get(n),s,n,u.isOrdered()),i=new oe(t.name(),a,t.nullable(),Cf(t))):(s=(s=u.indexType())?iw(s):new Zs,e.set(n,r=rw(t,nw(t,e))),a=new ea(r,s,n,u.isOrdered()),i=new oe(t.name(),a,t.nullable(),Cf(t))),i||null}function Cf(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&(i=n.key())!=null&&e.set(i,n.value());return e}function iw(t){return new Nn(t.isSigned(),t.bitWidth())}function rw(t,e){const n=t.typeType();switch(n){case Fe.NONE:return new ys;case Fe.Null:return new ys;case Fe.Binary:return new jc;case Fe.Utf8:return new ru;case Fe.Bool:return new zc;case Fe.List:return new ou((e||[])[0]);case Fe.Struct_:return new cn(e||[])}switch(n){case Fe.Int:{const i=t.type(new ii);return new Nn(i.isSigned(),i.bitWidth())}case Fe.FloatingPoint:{const i=t.type(new wr);return new ta(i.precision())}case Fe.Decimal:{const i=t.type(new $n);return new Ah(i.scale(),i.precision(),i.bitWidth())}case Fe.Date:{const i=t.type(new Ef);return new su(i.unit())}case Fe.Time:{const i=t.type(new Ii);return new bs(i.unit(),i.bitWidth())}case Fe.Timestamp:{const i=t.type(new Ti);return new Ih(i.unit(),i.timezone())}case Fe.Interval:{const i=t.type(new xr);return new au(i.unit())}case Fe.Union:{const i=t.type(new zn);return new qc(i.mode(),i.typeIdsArray()||[],e||[])}case Fe.FixedSizeBinary:{const i=t.type(new _r);return new Th(i.byteWidth())}case Fe.FixedSizeList:{const i=t.type(new vr);return new uu(i.listSize(),(e||[])[0])}case Fe.Map:{const i=t.type(new Af);return new Wc((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Fe[n]}" (${n})`)}function jq(t,e){const n=e.fields.map(s=>oe.encode(t,s));fr.startFieldsVector(t,n.length);const i=fr.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?fr.createCustomMetadataVector(t,[...e.metadata].map(([s,a])=>{const u=t.createString(`${s}`),c=t.createString(`${a}`);return Ke.startKeyValue(t),Ke.addKey(t,u),Ke.addValue(t,c),Ke.endKeyValue(t)})):-1;return fr.startSchema(t),fr.addFields(t,i),fr.addEndianness(t,Gq?fu.Little:fu.Big),r!==-1&&fr.addCustomMetadata(t,r),fr.endSchema(t)}function zq(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;wt.isDictionary(s)?(a=s.dictionary.typeId,r=v0.visit(s,t),i=v0.visit(s.dictionary,t)):i=v0.visit(s,t);const u=(s.children||[]).map(f=>oe.encode(t,f)),c=xi.createChildrenVector(t,u),l=e.metadata&&e.metadata.size>0?xi.createCustomMetadataVector(t,[...e.metadata].map(([f,h])=>{const d=t.createString(`${f}`),p=t.createString(`${h}`);return Ke.startKeyValue(t),Ke.addKey(t,d),Ke.addValue(t,p),Ke.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),xi.startField(t),xi.addType(t,i),xi.addTypeType(t,a),xi.addChildren(t,c),xi.addNullable(t,!!e.nullable),n!==-1&&xi.addName(t,n),r!==-1&&xi.addDictionary(t,r),l!==-1&&xi.addCustomMetadata(t,l),xi.endField(t)}function qq(t,e){const n=e.nodes||[],i=e.buffers||[];Qr.startNodesVector(t,n.length);for(const a of n.slice().reverse())uo.encode(t,a);const r=t.endVector();Qr.startBuffersVector(t,i.length);for(const a of i.slice().reverse())Tr.encode(t,a);const s=t.endVector();return Qr.startRecordBatch(t),Qr.addLength(t,new to(e.length,0)),Qr.addNodes(t,r),Qr.addBuffers(t,s),Qr.endRecordBatch(t)}function Wq(t,e){const n=hi.encode(t,e.data);return Eo.startDictionaryBatch(t),Eo.addId(t,new to(e.id,0)),Eo.addIsDelta(t,e.isDelta),Eo.addData(t,n),Eo.endDictionaryBatch(t)}function Hq(t,e){return k4.createFieldNode(t,new to(e.length,0),new to(e.nullCount,0))}function Yq(t,e){return T4.createBuffer(t,new to(e.offset,0),new to(e.length,0))}const Gq=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),E1=t=>`Expected ${le[t]} Message in stream, but was null or length 0.`,A1=t=>`Header pointer of flatbuffer-encoded ${le[t]} Message is null or length 0.`,O4=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,F4=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class D4{constructor(e){this.source=e instanceof Lh?e:new Lh(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Re:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(E1(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=se(this.source.read(e));if(n.byteLength<e)throw new Error(F4(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=le.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(A1(n));return r}readMetadataLength(){const e=this.source.read(op),n=e&&new cu(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return Re;if(n.byteLength<e)throw new Error(O4(e,n.byteLength));return{done:!1,value:Cn.decode(n)}}}class Kq{constructor(e,n){this.source=e instanceof du?e:$A(e)?new Bh(e,n):new du(e)}[Symbol.asyncIterator](){return this}next(){return vt(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Re:e})}throw(e){return vt(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return vt(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return vt(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(E1(e));return n.value})}readMessageBody(e){return vt(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=se(yield this.source.read(e));if(n.byteLength<e)throw new Error(F4(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return vt(this,void 0,void 0,function*(){const n=le.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(A1(n));return r})}readMetadataLength(){return vt(this,void 0,void 0,function*(){const e=yield this.source.read(op),n=e&&new cu(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return vt(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Re;if(n.byteLength<e)throw new Error(O4(e,n.byteLength));return{done:!1,value:Cn.decode(n)}})}}class Xq extends D4{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof Xv?e:new Xv(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Cn.fromJSON(e.schema,le.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Cn.fromJSON(n,le.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Cn.fromJSON(n,le.RecordBatch)}}return this._body=[],Re}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(E1(e));return n.value}readSchema(){const e=le.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(A1(e));return i}}const op=4,ng="ARROW1",Yc=new Uint8Array(ng.length);for(let t=0;t<ng.length;t+=1)Yc[t]=ng.codePointAt(t);function I1(t,e=0){for(let n=-1,i=Yc.length;++n<i;)if(Yc[n]!==t[e+n])return!1;return!0}const El=Yc.length,R4=El+op,Jq=El*2+op;class Di extends y1{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Za(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ai.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ai.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Di?e:Wm(e)?eW(e):$A(e)?rW(e):Za(e)?(()=>vt(this,void 0,void 0,function*(){return yield Di.from(yield e)}))():jA(e)||By(e)||zA(e)||Cu(e)?iW(new du(e)):nW(new Lh(e))}static readAll(e){return e instanceof Di?e.isSync()?sw(e):aw(e):Wm(e)||ArrayBuffer.isView(e)||_l(e)||VA(e)?sw(e):aw(e)}}class jh extends Di{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ir(this,arguments,function*(){yield Rt(yield*Sf(Pa(this[Symbol.iterator]())))})}}class zh extends Di{constructor(e){super(e),this._impl=e}readAll(){var e,n;return vt(this,void 0,void 0,function*(){const i=new Array;try{for(var r=Pa(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class L4 extends jh{constructor(e){super(e),this._impl=e}}class Qq extends zh{constructor(e){super(e),this._impl=e}}class B4{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),r=Ht({type:new cn(this.schema.fields),length:e.length,children:i});return new qn(this.schema,r)}_loadDictionaryBatch(e,n){const{id:i,isDelta:r}=e,{dictionaries:s,schema:a}=this,u=s.get(i);if(r||!u){const c=a.dictionaries.get(i),l=this._loadVectors(e.data,n,[c]);return(u&&r?u.concat(new Zt(l)):new Zt(l)).memoize()}return u.memoize()}_loadVectors(e,n,i){return new o4(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class qh extends B4{constructor(e,n){super(n),this._reader=Wm(e)?new Xq(this._handle=e):new D4(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=U4(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Re}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Re}next(){if(this.closed)return Re;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new S1(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Wh extends B4{constructor(e,n){super(n),this._reader=new Kq(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return vt(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return vt(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=U4(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return vt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Re})}return(e){return vt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Re})}next(){return vt(this,void 0,void 0,function*(){if(this.closed)return Re;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new S1(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return vt(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class P4 extends qh{constructor(e,n){super(e instanceof Jv?e:new Jv(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(le.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(le.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),u=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,u)}}}_readFooter(){const{_handle:e}=this,n=e.size-R4,i=e.readInt32(n),r=e.readAt(n-i,i);return Hc.decode(r)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class Zq extends Wh{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(e instanceof Bh?e:new Bh(e,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return vt(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return vt(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(le.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(e){var n;return vt(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(le.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),u=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,u)}}})}_readFooter(){return vt(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-R4,i=yield e.readInt32(n),r=yield e.readAt(n-i,i);return Hc.decode(r)})}_readNextMessageAndValidate(e){return vt(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class tW extends qh{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new qz(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function U4(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*sw(t){const e=Di.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function aw(t){return Ir(this,arguments,function*(){const n=yield Rt(Di.from(t));try{if(!(yield Rt(n.open({autoDestroy:!1}))).closed)do yield yield Rt(n);while(!(yield Rt(n.reset().open())).closed)}finally{yield Rt(n.cancel())}})}function eW(t){return new jh(new tW(t))}function nW(t){const e=t.peek(El+7&-8);return e&&e.byteLength>=4?I1(e)?new L4(new P4(t.read())):new jh(new qh(t)):new jh(new qh(function*(){}()))}function iW(t){return vt(this,void 0,void 0,function*(){const e=yield t.peek(El+7&-8);return e&&e.byteLength>=4?I1(e)?new L4(new P4(yield t.read())):new zh(new Wh(t)):new zh(new Wh(function(){return Ir(this,arguments,function*(){})}()))})}function rW(t){return vt(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Bh(t,e);return e>=Jq&&I1(yield n.readAt(0,El+7&-8))?new Qq(new Zq(n)):new zh(new Wh(n))})}class qe extends Yt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof qn?s.data.children:s.data),i=new qe;return i.visitMany(n(e)),i}visit(e){if(e instanceof Zt)return this.visitMany(e.data),this;const{type:n}=e;if(!wt.isDictionary(n)){const{length:i,nullCount:r}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");wt.isNull(n)||Xi.call(this,r<=0?new Uint8Array(0):h1(e.offset,i,e.nullBitmap)),this.nodes.push(new uo(i,r))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Xi(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Tr(this._byteLength,e)),this._byteLength+=e,this}function sW(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(Xi.call(this,i),e.mode===fi.Sparse)return ig.call(this,t);if(e.mode===fi.Dense){if(t.offset<=0)return Xi.call(this,r),ig.call(this,t);{const s=i.reduce((f,h)=>Math.max(f,h),i[0]),a=new Int32Array(s+1),u=new Int32Array(s+1).fill(-1),c=new Int32Array(n),l=Uy(-r[0],n,r);for(let f,h,d=-1;++d<n;)(h=u[f=i[d]])===-1&&(h=u[f]=l[f]),c[d]=l[d]-h,++a[f];Xi.call(this,c);for(let f,h=-1,d=e.children.length;++h<d;)if(f=t.children[h]){const p=e.typeIds[h],m=Math.min(n,a[p]);this.visit(f.slice(u[p],m))}}}return this}function aW(t){let e;return t.nullCount>=t.length?Xi.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Xi.call(this,h1(t.offset,t.length,e)):Xi.call(this,kh(t.values))}function ba(t){return Xi.call(this,t.values.subarray(0,t.length*t.stride))}function V4(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],s=i[e],a=Math.min(s-r,n.byteLength-r);return Xi.call(this,Uy(-i[0],e,i)),Xi.call(this,n.subarray(r,r+a)),this}function T1(t){const{length:e,valueOffsets:n}=t;return n&&Xi.call(this,Uy(n[0],e,n)),this.visit(t.children[0])}function ig(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}qe.prototype.visitBool=aW;qe.prototype.visitInt=ba;qe.prototype.visitFloat=ba;qe.prototype.visitUtf8=V4;qe.prototype.visitBinary=V4;qe.prototype.visitFixedSizeBinary=ba;qe.prototype.visitDate=ba;qe.prototype.visitTimestamp=ba;qe.prototype.visitTime=ba;qe.prototype.visitDecimal=ba;qe.prototype.visitList=T1;qe.prototype.visitStruct=ig;qe.prototype.visitUnion=sW;qe.prototype.visitInterval=ba;qe.prototype.visitFixedSizeList=T1;qe.prototype.visitMap=T1;class $4 extends y1{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Tf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Xn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Za(e)?e.then(n=>this.writeAll(n)):Cu(e)?N1(this,e):M1(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Tf?this._sink=e:(this._sink=new Tf,e&&ej(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&nj(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Zm(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof _s&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof qn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Zm(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof qn?e instanceof S1||this._writeRecordBatch(e):e instanceof _s?this.writeAll(e.batches):_l(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,r=Cn.encode(e),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,u=s+a+i&~i,c=u-s-a;return e.headerType===le.RecordBatch?this._recordBatchBlocks.push(new na(u,e.bodyLength,this._position)):e.headerType===le.DictionaryBatch&&this._dictionaryBlocks.push(new na(u,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(u-a)),s>0&&this._write(r),this._writePadding(c)}_write(e){if(this._started){const n=se(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Cn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Yc)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=qe.assemble(e),a=new hi(e.numRows,i,r),u=Cn.from(a,n);return this._writeDictionaries(e)._writeMessage(u)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,i=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:u}=qe.assemble(new Zt([e])),c=new hi(e.length,s,a),l=new Pr(c,n,i),f=Cn.from(l,r);return this._writeMessage(f)._writeBodyBuffers(u)}_writeBodyBuffers(e){let n,i,r;for(let s=-1,a=e.length;++s<a;)(n=e[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){for(let[n,i]of e.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class k1 extends $4{static writeAll(e,n){const i=new k1(n);return Za(e)?e.then(r=>i.writeAll(r)):Cu(e)?N1(i,e):M1(i,e)}}class C1 extends $4{static writeAll(e){const n=new C1;return Za(e)?e.then(i=>n.writeAll(i)):Cu(e)?N1(n,e):M1(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=Hc.encode(new Hc(e,ai.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function M1(t,e){let n=e;e instanceof _s&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function N1(t,e){var n,i,r,s;return vt(this,void 0,void 0,function*(){try{for(n=Pa(e);i=yield n.next(),!i.done;){const a=i.value;t.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return t.finish()})}function j4(t,e="stream"){return(e==="stream"?k1:C1).writeAll(t).toUint8Array(!0)}var oW=Object.create,z4=Object.defineProperty,uW=Object.getOwnPropertyDescriptor,cW=Object.getOwnPropertyNames,lW=Object.getPrototypeOf,fW=Object.prototype.hasOwnProperty,hW=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),dW=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of cW(e))!fW.call(t,r)&&r!==n&&z4(t,r,{get:()=>e[r],enumerable:!(i=uW(e,r))||i.enumerable});return t},pW=(t,e,n)=>(n=t!=null?oW(lW(t)):{},dW(e||!t||!t.__esModule?z4(n,"default",{value:t,enumerable:!0}):n,t)),mW=hW((t,e)=>{e.exports=Worker}),gW=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(gW||{}),yW=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(yW||{}),bW=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(bW||{}),_W=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(_W||{}),vW=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(vW||{}),wW=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},xW=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(xW||{}),SW=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=Di.from(e);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new _s(n)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let n=new q4(this._bindings,this._conn,e),i=await Di.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new EW(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=j4(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},q4=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},EW=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=Di.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new _s(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new q4(this.bindings,this.connectionId,e),i=await Di.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},AW=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(AW||{}),IW=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(IW||{}),Jt=class{constructor(e,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=n,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function Mf(t){switch(t.typeId){case I.Binary:return{sqlType:"binary"};case I.Bool:return{sqlType:"bool"};case I.Date:return{sqlType:"date"};case I.DateDay:return{sqlType:"date32[d]"};case I.DateMillisecond:return{sqlType:"date64[ms]"};case I.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case I.Float:return{sqlType:"float"};case I.Float16:return{sqlType:"float16"};case I.Float32:return{sqlType:"float32"};case I.Float64:return{sqlType:"float64"};case I.Int:return{sqlType:"int32"};case I.Int16:return{sqlType:"int16"};case I.Int32:return{sqlType:"int32"};case I.Int64:return{sqlType:"int64"};case I.Uint16:return{sqlType:"uint16"};case I.Uint32:return{sqlType:"uint32"};case I.Uint64:return{sqlType:"uint64"};case I.Uint8:return{sqlType:"uint8"};case I.IntervalDayTime:return{sqlType:"interval[dt]"};case I.IntervalYearMonth:return{sqlType:"interval[m]"};case I.List:return{sqlType:"list",valueType:Mf(t.valueType)};case I.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case I.Null:return{sqlType:"null"};case I.Utf8:return{sqlType:"utf8"};case I.Struct:return{sqlType:"struct",fields:t.children.map(e=>rg(e.name,e.type))};case I.Map:{let e=t;return{sqlType:"map",keyType:Mf(e.keyType),valueType:Mf(e.valueType)}}case I.Time:return{sqlType:"time[s]"};case I.TimeMicrosecond:return{sqlType:"time[us]"};case I.TimeMillisecond:return{sqlType:"time[ms]"};case I.TimeNanosecond:return{sqlType:"time[ns]"};case I.TimeSecond:return{sqlType:"time[s]"};case I.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case I.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case I.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case I.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case I.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error(`unsupported arrow type: ${t.toString()}`)}function rg(t,e){let n=Mf(e);return n.name=t,n}var TW=new TextEncoder,kW=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){let e=t.data;switch(e.type){case"LOG":{this._logger.log(e.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(e.data);return}}let n=this._pendingRequests.get(e.requestId);if(!n){console.warn(`unassociated response: [${e.requestId}, ${e.type.toString()}]`);return}if(this._pendingRequests.delete(e.requestId),e.type=="ERROR"){let i=new Error(e.data.message);i.name=e.data.name,i.stack=e.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(e.type=="OK"){n.promiseResolver(e.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],e.type=="OK"){n.promiseResolver(e.data);return}break;case"GLOB_FILE_INFOS":if(e.type=="FILE_INFOS"){n.promiseResolver(e.data);return}break;case"GET_VERSION":if(e.type=="VERSION_STRING"){n.promiseResolver(e.data);return}break;case"GET_FEATURE_FLAGS":if(e.type=="FEATURE_FLAGS"){n.promiseResolver(e.data);return}break;case"GET_TABLE_NAMES":if(e.type=="TABLE_NAMES"){n.promiseResolver(e.data);return}break;case"TOKENIZE":if(e.type=="SCRIPT_TOKENS"){n.promiseResolver(e.data);return}break;case"COPY_FILE_TO_BUFFER":if(e.type=="FILE_BUFFER"){n.promiseResolver(e.data);return}break;case"EXPORT_FILE_STATISTICS":if(e.type=="FILE_STATISTICS"){n.promiseResolver(e.data);return}break;case"CONNECT":if(e.type=="CONNECTION_INFO"){n.promiseResolver(e.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(e.type=="QUERY_RESULT"){n.promiseResolver(e.data);return}break;case"SEND_PREPARED":if(e.type=="QUERY_RESULT_HEADER"){n.promiseResolver(e.data);return}break;case"START_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"POLL_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],e.type=="SUCCESS"){n.promiseResolver(e.data);return}break;case"FETCH_QUERY_RESULTS":if(e.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(e.data);return}break;case"CREATE_PREPARED":if(e.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(e.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${e.type.toString()}`))}onError(t){console.error(t),console.error(`error in duckdb worker: ${t.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let t=new Jt("RESET",null);return await this.postTask(t)}async ping(){let t=new Jt("PING",null);await this.postTask(t)}async dropFile(t){let e=new Jt("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new Jt("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new Jt("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new Jt("INSTANTIATE",[t,e]);return await this.postTask(i)}async getVersion(){let t=new Jt("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new Jt("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new Jt("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new Jt("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new Jt("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new SW(this,t)}async disconnect(t){let e=new Jt("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let n=new Jt("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e){let n=new Jt("START_PENDING_QUERY",[t,e]);return await this.postTask(n)}async pollPendingQuery(t){let e=new Jt("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new Jt("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new Jt("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new Jt("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new Jt("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new Jt("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let i=new Jt("RUN_PREPARED",[t,e,n]);return await this.postTask(i)}async sendPrepared(t,e,n){let i=new Jt("SEND_PREPARED",[t,e,n]);return await this.postTask(i)}async globFiles(t){let e=new Jt("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=TW.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,i){e===void 0&&(e=t);let r=new Jt("REGISTER_FILE_URL",[t,e,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(t){let e=new Jt("REGISTER_FILE_BUFFER",[t,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(t,e){let n=new Jt("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,i){let r=new Jt("REGISTER_FILE_HANDLE",[t,e,n,i]);await this.postTask(r,[])}async collectFileStatistics(t,e){let n=new Jt("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new Jt("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new Jt("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new Jt("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let i=new Jt("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(i,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(rg(s,a))}n.columnsFlat=r,delete n.columns}let i=new Jt("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(i)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(rg(s,a))}n.columnsFlat=r,delete n.columns}let i=new Jt("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(i)}},CW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),MW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),NW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),OW=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),FW={name:"@duckdb/duckdb-wasm",version:"1.26.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},O1=FW.version.split(".");O1[0];O1[1];O1[2];var DW=()=>typeof navigator>"u",w0=null,x0=null,S0=null,E0=null,A0=null;async function RW(){return w0==null&&(w0=typeof BigInt64Array<"u"),x0==null&&(x0=await MW()),S0==null&&(S0=await OW()),E0==null&&(E0=await NW()),A0==null&&(A0=await CW()),{bigInt64Array:w0,crossOriginIsolated:DW()||globalThis.crossOriginIsolated||!1,wasmExceptions:x0,wasmSIMD:E0,wasmThreads:S0,wasmBulkMemory:A0}}async function LW(t){let e=await RW();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}pW(mW());function BW(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}BW();var PW=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(PW||{});const UW=""+new URL("../assets/duckdb-mvp.a4aa3c03.wasm",import.meta.url).href,VW=""+new URL("../assets/duckdb-browser-mvp.worker.91331f4b.js",import.meta.url).href,$W=""+new URL("../assets/duckdb-eh.13ec0755.wasm",import.meta.url).href,jW=""+new URL("../assets/duckdb-browser-eh.worker.80bdeff3.js",import.meta.url).href;class zW extends sr{constructor(e){super(),this.sources=[],this.db=null,this.conn=null,e.sources?this.sources.push.apply(this.sources,e.sources):e.name&&this.sources.push(e)}register(e){this.sources.push(e)}async query(e){return await this.conn.query(e)}async init(){const n=await LW({mvp:{mainModule:UW,mainWorker:VW},eh:{mainModule:$W,mainWorker:jW}}),i=new Worker(n.mainWorker),r=new wW;this.db=new kW(r,i),await this.db.instantiate(n.mainModule,n.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(e){let n=e.name;if(e.csv)await this.db.registerFileText(n,e.csv),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0});else if(e.url){let r=await(await fetch(e.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(n,s),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0})}else if(e.parquet){const i=`${ek}/${e.parquet}`;console.log("parquet_name and registration path:",e.parquet,i),await this.db.registerFileURL(e.parquet,i,4,!1);const r=`CREATE TABLE ${e.name} AS SELECT * FROM parquet_scan(${e.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(e,...n){for(const i of e){const r=i.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(u=>u.name),console.debug("duckdb.execute",r,a,...n),this.emit("data",a,...n),this.emit("debug",a),a}}}var Os=(t=>(t.LITERAL="literal",t.AST="ast",t.LIST="list",t.ANY="any",t.OPT="opt",t.FIXEDMULTI="fixedmulti",t.MULTI="multi",t))(Os||{});let ow=xg(t=>t.length>0);class qW{constructor(e){this.binding={},this.spec={},this.spec=e}update(e){return this.binding=ad(this.binding,e),this}snapshot(){return this.binding}restoreSnapshot(e){this.binding=e}toSQL(){return sg(this.binding,this.spec)}}function sg(t,e){let n=e.children??[],i=aC(sg,[t]),r=[],s;switch(e==null?void 0:e.type){case Os.LITERAL:return e.value;case Os.AST:return r=n.map(i),ow(r).join("");case Os.LIST:return r=n.map(i),ow(r).join(e.delim);case Os.ANY:if(s=t[e.id]??e.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case Os.OPT:return s=t[e.id]??e.default??0,P5(s,[1,"selected"])?i(n[0]):"";case Os.FIXEDMULTI:case Os.MULTI:let u=t[e.id]??e.default??[];return we(Array,u)||(u=[u]),u.map(c=>sg(c,n[0])).join(e.delim??"");default:return""}}class WW extends sr{constructor(e){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=e,this.dt=new qW(e.difftree),this.backend=we(String,e.backend)?mf(H$)[e.backend]:e.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}snapshot(){return this.dt.snapshot()}async _execute(e,n){let i=e[0]??{};const r=this.dt.update(i).toSQL();if(console.log("ClientDT.execute",r,i),this.emit("debug",r),this.backend)return this.backend.execute(r,n)}}class HW extends sr{constructor(e){super(),this.q=[],this.q=e.data??[]}async execute(e,n){this.emit("data",e??this.q,n)}}class YW extends sr{constructor(e){super();let n=e.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),N5(r)}}async _execute(e,...n){this.emit("data",ox(this.gen,10),...n)}}class W4 extends sr{constructor(e){super(),this.backend=e.backend,this.query=e.query,this.name=e.name,this.params=e.defaults??{}}snapshot(){return xc(this.params)}restoreSnapshot(e){this.params=e}prepareQuery(e,n){let i=e;return Un((r,s)=>{i=i.replaceAll(`var(${s})`,r)},n),i}async _execute(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.params=ad(this.params,r)});let n=this.prepareQuery(this.query,this.params),i=await this.backend._execute([{q:n}],this.name);return this.emit("data",i,this.name),i}}const ae=Array.isArray;function Qn(t){return t!=null?ae(t)?t:[t]:[]}function GW(t=0,e=1/0){return`${uw(t)} < row_number() && row_number() <= ${uw(e)}`}function uw(t){return t<0?`count() + ${t}`:t}class H4{constructor(e){e&&(this._params=e)}params(e){return arguments.length?(e&&(this._params={...this._params,...e}),this):this._params}reify(e){return this.__reify(this,e)}count(e){return this.__count(this,e)}derive(e,n){return this.__derive(this,e,n)}filter(e){return this.__filter(this,e)}slice(e,n){return this.filter(GW(e,n)).reify()}groupby(...e){return this.__groupby(this,e.flat())}orderby(...e){return this.__orderby(this,e.flat())}relocate(e,n){return this.__relocate(this,Qn(e),n)}rename(...e){return this.__rename(this,e.flat())}rollup(e){return this.__rollup(this,e)}sample(e,n){return this.__sample(this,e,n)}select(...e){return this.__select(this,e.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...e){return this.__dedupe(this,e.flat())}impute(e,n){return this.__impute(this,e,n)}fold(e,n){return this.__fold(this,e,n)}pivot(e,n,i){return this.__pivot(this,e,n,i)}spread(e,n){return this.__spread(this,e,n)}unroll(e,n){return this.__unroll(this,e,n)}lookup(e,n,...i){return this.__lookup(this,e,n,i.flat())}join(e,n,i,r){return this.__join(this,e,n,i,r)}join_left(e,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,e,n,i,s)}join_right(e,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,e,n,i,s)}join_full(e,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,e,n,i,s)}cross(e,n,i){return this.__cross(this,e,n,i)}semijoin(e,n){return this.__semijoin(this,e,n)}antijoin(e,n){return this.__antijoin(this,e,n)}concat(...e){return this.__concat(this,e.flat())}union(...e){return this.__union(this,e.flat())}intersect(...e){return this.__intersect(this,e.flat())}except(...e){return this.__except(this,e.flat())}}function Ut(t){throw Error(t)}function On(t){return typeof t=="number"}function Me(t){return typeof t=="function"}function up(t,e){const n=Array(t);if(Me(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}class KW extends H4{constructor(e,n,i,r,s,a,u){super(u),this._names=Object.freeze(e),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(e){Ut("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const e=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${e}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(e){return e?this._names.filter(e):this._names.slice()}columnName(e){return this._names[e]}columnIndex(e){return this._names.indexOf(e)}columnArray(e,n){return this.array(e,n)}array(e,n){Ut("Not implemented")}*values(e){const n=this.getter(e),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(e,n=0){Ut("Not implemented")}getter(e){Ut("Not implemented")}objects(e){Ut("Not implemented")}object(e){Ut("Not implemented")}[Symbol.iterator](){Ut("Not implemented")}print(e={}){On(e)?e={limit:e}:e.limit==null&&(e.limit=10);const n=this.objects({...e,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(e=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let u=s.next(0);u>=0;u=s.next(u+1))i[++a]=u;else for(let u=0;u<n;++u)i[++a]=u;if(e&&r){const u=this._order,c=this._data;i.sort((l,f)=>u(l,f,c))}return(e||!r)&&(this._index=i),i}partitions(e=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(e)];const{keys:n,size:i}=this._group,r=up(i,()=>[]),s=this._index,a=this.mask(),u=this.numRows();if(s&&this.isOrdered())for(let c=0,l;c<u;++c)l=s[c],r[n[l]].push(l);else if(a)for(let c=a.next(0);c>=0;c=a.next(c+1))r[n[c]].push(c);else for(let c=0;c<u;++c)r[n[c]].push(c);if(e&&!s&&this.isOrdered()){const c=this._order,l=this._data;for(let f=0;f<i;++f)r[f].sort((h,d)=>c(h,d,l))}return(e||!this.isOrdered())&&(this._partitions=r),r}scan(e,n,i=1/0,r=0){const s=this._mask,a=this._nrows,u=this._data;let c=r||0;if(c>a)return;const l=Math.min(a,c+i),f=()=>c=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),d=this._data;for(;c<l;++c)e(h[c],d,f)}else if(s){let h=l-c+1;for(c=s.nth(c);--h&&c>-1;c=s.next(c+1))e(c,u,f)}else for(;c<l;++c)e(c,u,f)}slice(e=0,n=1/0){if(this.isGrouped())return super.slice(e,n);const i=[],r=this.numRows();return e=Math.max(0,e+(e<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-e,e),this.reify(i)}reduce(e){return this.__reduce(this,e)}}let XW=class{constructor(e){this.data=e}get length(){return this.data.length}get(e){return this.data[e]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},JW=function(t){return t&&Me(t.get)?t:new XW(t)};function vs(t){return t instanceof Date}function _n(t){return t===Object(t)}function Hh(t){return t instanceof RegExp}function fn(t){return typeof t=="string"}function QW(t,e){const n=i=>Ut(`Illegal argument type: ${i||typeof t}`);return t instanceof Map?cw(t.entries(),e):vs(t)?n("Date"):Hh(t)?n("RegExp"):fn(t)?n():ae(t)?ZW(t,e):Me(t[Symbol.iterator])?tH(t,e):_n(t)?cw(Object.entries(t),e):n()}function cw(t,e=["key","value"]){const n=[],i=[];for(const[s,a]of t)n.push(s),i.push(a);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}function ZW(t,e){const n=t.length,i={},r=s=>i[s]=Array(n);if(n){e=e||Object.keys(t[0]);const s=e.map(r),a=s.length;for(let u=0;u<n;++u){const c=t[u];for(let l=0;l<a;++l)s[l][u]=c[e[l]]}}else e&&e.forEach(r);return i}function tH(t,e){const n={},i=a=>n[a]=[];let r,s;for(const a of t){r||(e=e||Object.keys(a),r=e.map(i),s=r.length);for(let u=0;u<s;++u)r[u].push(a[e[u]])}return!r&&e&&e.forEach(i),n}const{hasOwnProperty:eH}=Object.prototype;function nr(t,e){return eH.call(t,e)}function pi(t){return t?new lw({...t.data()},t.columnNames()):new lw}class lw{constructor(e,n){this.data=e||{},this.names=n||[]}add(e,n){return this.has(e)||this.names.push(e+""),this.data[e]=n}has(e){return nr(this.data,e)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(e){return this.groups=e,this}}const ee=void 0,nH=Object.getPrototypeOf(Int8Array);function Al(t){return t instanceof nH}function Fa(t){return ae(t)||Al(t)}function Ki(t){return t!=null&&t===t}const Ju=t=>Fa(t)||fn(t),iH={compact:t=>Fa(t)?t.filter(e=>Ki(e)):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>Ju(t)?t.includes(e,n):!1,indexof:(t,e)=>Ju(t)?t.indexOf(e):-1,join:(t,e)=>Fa(t)?t.join(e):ee,lastindexof:(t,e)=>Ju(t)?t.lastIndexOf(e):-1,length:t=>Ju(t)?t.length:0,pluck:(t,e)=>Fa(t)?t.map(n=>Ki(n)?n[e]:ee):ee,reverse:t=>Fa(t)?t.slice().reverse():fn(t)?t.split("").reverse().join(""):ee,slice:(t,e,n)=>Ju(t)?t.slice(e,n):ee};function rH(t,e,n,i,r){return t==null?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))}function Nf(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const cr=t=>(t<10?"0":"")+t,sH=t=>t<0?"-"+Nf(-t,6):t>9999?"+"+Nf(t,6):Nf(t,4);function Y4(t,e,n,i,r,s,a,u,c){const l=u?"Z":"";return sH(t)+"-"+cr(e+1)+"-"+cr(n)+(!c||a?"T"+cr(i)+":"+cr(r)+":"+cr(s)+"."+Nf(a,3)+l:s?"T"+cr(i)+":"+cr(r)+":"+cr(s)+l:r||i||!u?"T"+cr(i)+":"+cr(r)+l:"")}function G4(t,e){return isNaN(t)?"Invalid Date":Y4(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function cp(t,e){return isNaN(t)?"Invalid Date":Y4(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const aH=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function oH(t){return t.match(aH)}function uH(t,e=Date.parse){return oH(t)?e(t):t}const K4=6e4,X4=864e5,J4=6048e5,Be=new Date,Pe=new Date,Ve=t=>(Be.setTime(typeof t=="string"?uH(t):t),Be);function cH(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function lH(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function fH(t){Pe.setTime(+t),Pe.setHours(0,0,0,0),Be.setTime(+Pe),Be.setMonth(0),Be.setDate(1);const e=(Pe.getTimezoneOffset()-Be.getTimezoneOffset())*K4;return Math.floor(1+(Pe-Be-e)/X4)}function hH(t){Pe.setTime(+t),Pe.setUTCHours(0,0,0,0);const e=Date.UTC(Pe.getUTCFullYear(),0,1);return Math.floor(1+(Pe-e)/X4)}function dH(t,e){const n=e||0;Pe.setTime(+t),Pe.setDate(Pe.getDate()-(Pe.getDay()+7-n)%7),Pe.setHours(0,0,0,0),Be.setTime(+t),Be.setMonth(0),Be.setDate(1),Be.setDate(1-(Be.getDay()+7-n)%7),Be.setHours(0,0,0,0);const i=(Pe.getTimezoneOffset()-Be.getTimezoneOffset())*K4;return Math.floor((1+(Pe-Be)-i)/J4)}function pH(t,e){const n=e||0;return Pe.setTime(+t),Pe.setUTCDate(Pe.getUTCDate()-(Pe.getUTCDay()+7-n)%7),Pe.setUTCHours(0,0,0,0),Be.setTime(+t),Be.setUTCMonth(0),Be.setUTCDate(1),Be.setUTCDate(1-(Be.getUTCDay()+7-n)%7),Be.setUTCHours(0,0,0,0),Math.floor((1+(Pe-Be))/J4)}const mH={format_date:(t,e)=>G4(Ve(t),!e),format_utcdate:(t,e)=>cp(Ve(t),!e),timestamp:t=>+Ve(t),year:t=>Ve(t).getFullYear(),quarter:t=>Math.floor(Ve(t).getMonth()/3),month:t=>Ve(t).getMonth(),date:t=>Ve(t).getDate(),dayofweek:t=>Ve(t).getDay(),hours:t=>Ve(t).getHours(),minutes:t=>Ve(t).getMinutes(),seconds:t=>Ve(t).getSeconds(),milliseconds:t=>Ve(t).getMilliseconds(),utcyear:t=>Ve(t).getUTCFullYear(),utcquarter:t=>Math.floor(Ve(t).getUTCMonth()/3),utcmonth:t=>Ve(t).getUTCMonth(),utcdate:t=>Ve(t).getUTCDate(),utcdayofweek:t=>Ve(t).getUTCDay(),utchours:t=>Ve(t).getUTCHours(),utcminutes:t=>Ve(t).getUTCMinutes(),utcseconds:t=>Ve(t).getUTCSeconds(),utcmilliseconds:t=>Ve(t).getUTCMilliseconds(),datetime:cH,dayofyear:fH,week:dH,utcdatetime:lH,utcdayofyear:hH,utcweek:pH,now:Date.now};function F1(t,e){return t==null||e==null||t!==t||e!==e?!1:t===e?!0:vs(t)||vs(e)?+t==+e:Hh(t)&&Hh(e)?t+""==e+"":_n(t)&&_n(e)?gH(t,e):!1}function gH(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return fw(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length||(n.sort(),i.sort(),!fw(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!F1(t[a],e[a]))return!1}return!0}function fw(t,e,n=F1){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}const yH={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let bH=Math.random;function Fu(){return bH()}const _H={random:Fu,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function D1(t){return t instanceof Map}function vH(t){return t instanceof Set}function Of(t){return D1(t)||vH(t)}function I0(t){return Array.from(t)}const wH={has:(t,e)=>Of(t)?t.has(e):t!=null?nr(t,e):!1,keys:t=>D1(t)?I0(t.keys()):t!=null?Object.keys(t):[],values:t=>Of(t)?I0(t.values()):t!=null?Object.values(t):[],entries:t=>Of(t)?I0(t.entries()):t!=null?Object.entries(t):[],object:t=>t?Object.fromEntries(t):ee};function xH(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(nr(e,t))return e[t];return n!==void 0?n:t}function SH(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((e-t)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=t+s*n;return r}const EH={parse_date:t=>t==null?t:new Date(t),parse_float:t=>t==null?t:Number.parseFloat(t),parse_int:(t,e)=>t==null?t:Number.parseInt(t,e),endswith:(t,e,n)=>t==null?!1:String(t).endsWith(e,n),match:(t,e,n)=>{const i=t==null?t:String(t).match(e);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>t==null?t:String(t).normalize(e),padend:(t,e,n)=>t==null?t:String(t).padEnd(e,n),padstart:(t,e,n)=>t==null?t:String(t).padStart(e,n),upper:t=>t==null?t:String(t).toUpperCase(),lower:t=>t==null?t:String(t).toLowerCase(),repeat:(t,e)=>t==null?t:String(t).repeat(e),replace:(t,e,n)=>t==null?t:String(t).replace(e,String(n)),substring:(t,e,n)=>t==null?t:String(t).substring(e,n),split:(t,e,n)=>t==null?[]:String(t).split(e,n),startswith:(t,e,n)=>t==null?!1:String(t).startsWith(e,n),trim:t=>t==null?t:String(t).trim()},Mo={bin:rH,equal:F1,recode:xH,sequence:SH,...iH,...mH,...yH,..._H,...wH,...EH};function Gc(t){return typeof t=="bigint"}function Ur(t){return t===void 0?t+"":Gc(t)?t+"n":JSON.stringify(t)}function Ot(t,e=[],n=[]){return new AH(t,Qn(e),Qn(n))}let AH=class{constructor(e,n,i){this.name=e,this.fields=n,this.params=i}toString(){const e=[...this.fields.map(n=>`d[${Ur(n)}]`),...this.params.map(Ur)];return`d => op.${this.name}(${e})`}toObject(){return{expr:this.toString(),func:!0}}};const Q4=t=>Ot("any",t),Z4=()=>Ot("count"),t8=t=>Ot("array_agg",t),e8=t=>Ot("array_agg_distinct",t),n8=(t,e)=>Ot("map_agg",[t,e]),i8=(t,e)=>Ot("object_agg",[t,e]),r8=(t,e)=>Ot("entries_agg",[t,e]);({...Mo});function IH(t,e){t=Of(t)?t:new Set(t);let n=e,i=0;for(;t.has(n);)n=e+ ++i;return n}function TH(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan(f=>s[n[f]]=1);const a=s.reduce((f,h)=>f+h,0);if(a===r)return t;const u=Array(a);let c=0;for(let f=0;f<r;++f)s[f]&&(u[s[f]=c++]=i[f]);const l=new Uint32Array(n.length);return e.scan(f=>l[f]=s[n[f]]),{...t,keys:l,rows:u,size:c}}function kH(t,e,n,i){const{keys:r,rows:s,size:a}=t;let u=s,c=a,l=null;if(n){l=new Int32Array(a),e(m=>l[r[m]]=1);const p=l.reduce((m,g)=>m+g,0);if(p!==a){u=Array(p),c=0;for(let m=0;m<a;++m)l[m]&&(u[l[m]=c++]=s[m])}}let f=-1;const h=new Uint32Array(i);return e(c!==a?p=>h[++f]=l[r[p]]:p=>h[++f]=r[p]),{...t,keys:h,rows:u,size:c}}function CH(t,e,n,i){const r=i==="map"||i===!0?n8:i==="entries"?r8:i==="object"?i8:Ut('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=IH(t.columnNames(),"_");let u=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:t8(a)});for(let c=s.length;--c>=0;)u=u.groupby(s.slice(0,c)).rollup({[a]:r(s[c],a)});return u.get(a)}const MH="ArrayPattern",NH="ArrowFunctionExpression",OH="FunctionExpression",qs="Identifier",Du="Literal",s8="MemberExpression",FH="ObjectExpression",a8="ObjectPattern",o8="Property",Il="Column",DH="Constant",RH="Dictionary",LH="Function",BH="Parameter",u8="Op",Ee=(t,e)=>{const n=PH[t.type];return n?n(t,e):Ut(`Unsupported expression construct: ${t.type}`)},T0=(t,e)=>"("+Ee(t.left,e)+" "+t.operator+" "+Ee(t.right,e)+")",k0=(t,e)=>"("+dr(t.params,e)+")=>"+Ee(t.body,e),hw=(t,e)=>Ee(t.callee,e)+"("+dr(t.arguments,e)+")",dr=(t,e,n=",")=>t.map(i=>Ee(i,e)).join(n),c8=t=>t.computed?`[${Ur(t.name)}]`:`.${t.name}`,dw=(t,e,n)=>{const i=t.table||"";return`data${i}${c8(t)}.${n}(${e.index}${i})`},PH={Constant:t=>t.raw,Column:(t,e)=>dw(t,e,"get"),Dictionary:(t,e)=>dw(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${c8(t)}`,Op:(t,e)=>`op(${Ur(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+Ee(i[a],e)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=Ee(t.object,e),r=Ee(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:hw,NewExpression:(t,e)=>"new "+hw(t,e),ArrayExpression:(t,e)=>"["+dr(t.elements,e)+"]",AssignmentExpression:T0,BinaryExpression:T0,LogicalExpression:T0,UnaryExpression:(t,e)=>"("+t.operator+Ee(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+Ee(t.test,e)+"?"+Ee(t.consequent,e)+":"+Ee(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+dr(t.properties,e)+"})",Property:(t,e)=>{const n=Ee(t.key,e);return(t.computed?`[${n}]`:n)+":"+Ee(t.value,e)},ArrowFunctionExpression:k0,FunctionExpression:k0,FunctionDeclaration:k0,ArrayPattern:(t,e)=>"["+dr(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+dr(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+dr(t.declarations,e,","),VariableDeclarator:(t,e)=>Ee(t.id,e)+"="+Ee(t.init,e),SpreadElement:(t,e)=>"..."+Ee(t.argument,e),BlockStatement:(t,e)=>"{"+dr(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>Ee(t.expression,e),IfStatement:(t,e)=>"if ("+Ee(t.test,e)+")"+Ee(t.consequent,e)+(t.alternate?" else "+Ee(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+Ee(t.discriminant,e)+") {"+dr(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+Ee(t.test,e):"default")+": "+dr(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+Ee(t.argument,e),Program:(t,e)=>Ee(t.body[0],e)};function Yh(t,e={index:"row"}){return Ee(t,e)}function UH(t,e,n=15,i=!0,r=0,s){const u=Math.LN10;if(s==null){const c=Math.ceil(Math.log(n)/u),l=e-t||Math.abs(t)||1,f=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(l)/u)-c));Math.ceil(l/s)>n;)s*=10;const h=f.length;for(let d=0;d<h;++d){const p=s/f[d];p>=r&&l/p<=n&&(s=p)}}if(i){let c=Math.log(s);const l=c>=0?0:~~(-c/u)+1,f=Math.pow(10,-l-1);c=Math.floor(t/s+f)*s,t=t<c?c-s:c,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}function mu(t){const e=typeof t;return e==="string"?`"${t}"`:e!=="object"||!t?t:vs(t)?+t:ae(t)||Al(t)?`[${t.map(mu)}]`:Hh(t)?t+"":VH(t)}function VH(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${mu(t[i])}`;return e+="}",e}function Gh(t,e){const n=t.length;return n===1?(i,r)=>mu(t[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const u=t[a](i,r);if(e&&(u==null||u!==u))return null;s+=mu(u)}return s}}function $H(){const t=new Map;return{count(){return t.size},values(){return Array.from(t.values(),e=>e.v)},increment(e){const n=mu(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=mu(e),i=t.get(n);i.n===1?t.delete(n):--i.n},forEach(e){t.forEach(({v:n,n:i})=>e(n,i))}}}function ts(){}function jH(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}function We(t){return t.init=t.init||ts,t.add=t.add||ts,t.rem=t.rem||ts,t}function pw(t,e){return t.product_v=!1,t.product=e}const l8={count:{create:()=>We({value:t=>t.count}),param:[]},array_agg:{create:()=>We({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>We({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>We({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>We({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>We({add:(t,e)=>{t.any==null&&(t.any=e)},value:t=>t.valid?t.any:ee}),param:[1]},valid:{create:()=>We({value:t=>t.valid}),param:[1]},invalid:{create:()=>We({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=$H(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>We({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>We({value:t=>{let e=ee,n=0;return t.distinct.forEach((i,r)=>{r>n&&(n=r,e=i)}),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:ee,add:(t,e)=>Gc(e)?t.sum===0?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>pw(t,1),value:t=>t.valid?t.product_v?pw(t,jH(t.list.values())):t.product:void 0,add:(t,e)=>Gc(e)&&t.product===1?t.product=e:t.product*=e,rem:(t,e)=>e==0||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:ee,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>We({value:t=>t.valid?t.mean:ee}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):ee,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>We({value:t=>t.valid>1?t.dev/t.valid:ee}),param:[1],req:["variance"]},stdev:{create:()=>We({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):ee}),param:[1],req:["variance"]},stdevp:{create:()=>We({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):ee}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=ee,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===ee)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=ee,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===ee)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>We({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>We({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):ee,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>We({value:t=>t.valid>1?t.cov/t.valid:ee}),param:[2],req:["covariance"]},corr:{create:()=>We({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):ee}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>We({value:r=>UH(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}},mw={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},gw={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]},f8={row_number:{create(){return{init:ts,value:t=>t.index+1}},param:[]},rank:mw,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=mw.create();return{init:t,value:n=>(e(n)-1)/(n.size-1)}},param:[]},cume_dist:gw,ntile:{create(t){t=+t,t>0||Ut("ntile num must be greater than zero.");const{init:e,value:n}=gw.create();return{init:e,value:i=>Math.ceil(t*n(i))}},param:[0,1]},lag:{create(t,e=ee){return t=+t||1,{init:ts,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}},param:[1,2]},lead:{create(t,e=ee){return t=+t||1,{init:ts,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}},param:[1,2]},first_value:{create(){return{init:ts,value:(t,e)=>t.value(t.i0,e)}},param:[1]},last_value:{create(){return{init:ts,value:(t,e)=>t.value(t.i1-1,e)}},param:[1]},nth_value:{create(t){return t=+t,t>0||Ut("nth_value nth must be greater than zero."),{init:ts,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):ee}}},param:[1,1]},fill_down:{create(t=ee){let e;return{init:()=>e=t,value:(n,i)=>{const r=n.value(n.index,i);return Ki(r)?e=r:e}}},param:[1,1]},fill_up:{create(t=ee){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=zH(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function zH(t,e,n){for(const i=t.size;n<i;++n)if(Ki(t.value(n,e)))return n;return-1}function R1(t){return nr(l8,t)}function L1(t){return nr(f8,t)}function h8(t){return nr(Mo,t)||t==="row_object"}function d8(t){return R1(t)&&l8[t]}function p8(t){return L1(t)&&f8[t]}function Qu(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}const B1={escape:(t,e,n)=>Qu(t,e,n),expr:(t,e)=>Qu(`(row,data,op)=>${t}`,Mo,e),expr2:(t,e)=>Qu(`(row0,data0,row,data)=>${t}`,Mo,e),join:(t,e)=>Qu(`(row1,data1,row2,data2)=>${t}`,Mo,e),param:(t,e)=>Qu(t,Mo,e)},qH={"==":1,"!=":1,"===":1,"!==":1};function m8(t,e,n=0,i,r){if(t.type=Il,t.name=e,t.table=n,r&&i&&Me(i.keyFor)){const s=qH[r.operator]?r.left===t?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===t?1:0]:null;s&&s.type===Du&&WH(r,t,s,i.keyFor(s.value))}return t}function WH(t,e,n,i){return i<0?(t.type=Du,t.value=!1,t.raw="false"):(e.type=RH,n.value=i,n.raw=i+""),!0}function lp(t){return ae(t)?t:D1(t)?t.entries():t?Object.entries(t):[]}const g8="row_object";function y8(t,e){t.type=FH;const n=t.properties=[];for(const i of lp(e)){const[r,s]=ae(i)?i:[i,i];n.push({type:o8,key:{type:Du,raw:Ur(s)},value:m8({computed:!0},r)})}return t}function b8(t){return Yh(y8({},t))}function _8(t){return B1.expr(b8(t))}function P1(t,e=1){return(t*e+63&-64||64)/e}function ra(t,e,n=t.BYTES_PER_ELEMENT){return new t(P1(e,n))}function U1(t){return t instanceof ge?t:new ge(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}function HH(t){return new Zt([U1(t)])}const V1=new TextEncoder;function YH(t,e,n){const i=V1.encode(n);return t.set(i,e),i.length}function GH(t,e,n){return V1.encodeInto(n,t.subarray(e)).written}const KH=V1.encodeInto?GH:YH;function yw(t,e){const n=ra(t.ArrayType,e);return{set(i,r){n[r]=i},data:()=>({type:t,length:e,buffers:[null,n]})}}function XH(t,e){const n=ra(t.ArrayType,e/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function JH(t,e){const n=ra(t.ArrayType,e);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function QH(t,e){const n=ra(t.ArrayType,e<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function ZH(t){const e=Ph({type:t,nullValues:[null,void 0]});return{set(n,i){e.set(i,n)},data:()=>e.finish().flush()}}function tY(t,e,n){const i=ra(Int32Array,e+1),r=ra(Uint8Array,3*n);let s=0;return{set(a,u){s+=KH(r,s,a),i[u+1]=s},data:()=>{const a=P1(s),u=r.length>a?r.subarray(0,a):r;return{type:t,length:e,buffers:[i,u]}}}}function eY(t,e){const n=[],i=ra(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(u,c){const l=String(u);let f=r[l];f===void 0&&(a+=l.length,r[l]=f=++s,n.push(l)),i[c]=f},data:()=>({type:t,length:e,buffers:[null,i],dict:nY(t.dictionary,n,a)})}}function nY(t,e,n){const i=tY(t,e.length,n);return e.forEach(i.set),HH(i.data())}function iY(t,e){const n=ra(Uint8Array,e/8);let i=0;return{set(r,s){r==null?++i:(t.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=t.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function rY(t,e,n=!0){let i;switch(t.typeId){case I.Int:i=t.bitWidth<64?yw:null;break;case I.Float:i=t.precision>0?yw:null;break;case I.Dictionary:i=t.dictionary.typeId===I.Utf8&&t.indices.typeId===I.Int&&t.indices.bitWidth<64?eY:null;break;case I.Bool:i=XH;break;case I.Date:i=t.unit?QH:JH;break}return i==null?ZH(t):n?iY(i(t,e),e):i(t,e)}function sY(t,e){const n=t.length,i=P1(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),U1({type:e,length:n,buffers:[null,r]})}function v8(t,e,n,i,r=!0){const s=rY(i,t,r);return e(n,s.set),U1(s.data())}function $1(t){if(t instanceof wt||t==null)return t;switch(t){case I.Binary:return new jc;case I.Bool:return new zc;case I.DateDay:return new gj;case I.DateMillisecond:case I.Date:return new yj;case I.Dictionary:return new ea(new ru,new Zs);case I.Float16:return new fI;case I.Float32:return new Gy;case I.Float64:case I.Float:return new Ky;case I.Int8:return new $y;case I.Int16:return new jy;case I.Int32:case I.Int:return new Zs;case I.Int64:return new zy;case I.IntervalDayTime:return new xj;case I.Interval:case I.IntervalYearMonth:return new Sj;case I.Null:return new ys;case I.TimeMicrosecond:return new vj;case I.TimeMillisecond:case I.Time:return new _j;case I.TimeNanosecond:return new wj;case I.TimeSecond:return new bj;case I.Uint8:return new qy;case I.Uint16:return new Wy;case I.Uint32:return new Hy;case I.Uint64:return new Yy;case I.Utf8:return new ru;default:Ut(`Unsupported type code: ${Ur(t)}. Use a data type constructor instead?`)}}function aY(t){return t.getUTCHours()===0&&t.getUTCMinutes()===0&&t.getUTCSeconds()===0&&t.getUTCMilliseconds()===0}function w8(t,e){const n=ag();return t(e,n.add),n}function ag(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,e==null){++t.nulls;return}const n=typeof e;if(n==="string")++t.strings;else if(n==="number")++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if(n==="boolean")++t.bools;else if(n==="object")if(vs(e))++t.dates,aY(e)&&++t.utcdays;else if(Fa(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const i=t.array_prof||(t.array_prof=ag());e.forEach(i.add)}else{++t.structs;const i=t.struct_prof||(t.struct_prof={});for(const r in e)(i[r]||(i[r]=ag())).add(e[r])}else n==="bigint"&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e))},type(){return $1(oY(t))}};return t}function oY(t){const e=t.count-t.nulls;if(e===0)return I.Null;if(t.ints===e){const n=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?n>=2**31?I.Float64:n<128?I.Int8:n<32768?I.Int16:I.Int32:n>=2**32?I.Float64:n<256?I.Uint8:n<65536?I.Uint16:I.Uint32}else{if(t.nums===e)return I.Float64;if(t.bigints===e){const n=-t.min>t.max?-t.min-1n:t.max;return t.min<0?n<2**63?I.Int64:Ut(`BigInt exceeds 64 bits: ${n}`):t.max<2**64?I.Uint64:Ut(`BigInt exceeds 64 bits: ${t.max}`)}else{if(t.bools===e)return I.Bool;if(t.utcdays===e)return I.DateDay;if(t.dates===e)return I.DateMillisecond;if(t.arrays===e){const n=oe.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new uu(t.minlen,n):new ou(n)}else if(t.structs===e){const n=t.struct_prof;return new cn(Object.keys(n).map(i=>oe.new(i,n[i].type(),!0)))}else{if(t.strings>0)return I.Dictionary;Ut("Type inference failure")}}}}function uY(t,e,n,i,r,s=!0){if(r=$1(r),!r){const a=w8(i,e);s=a.nulls>0,r=a.type()}return v8(n,i,e,r,s)}function cY(t,e,n,i,r,s=!0){r=$1(r);const a=t.column(e),u=!(t.isFiltered()||t.isOrdered()),c=lY(a);if(c&&u&&bw(c.type,r))return c;const l=a.data;if(Al(l)){const f=fY(l);if(u&&f&&bw(f,r))return sY(l,f);r=r||f,s=!1}if(!r){const f=w8(i,a);s=f.nulls>0,r=f.type()}return v8(n,i,a,r,s)}function lY(t){return t instanceof Zt?t:t.vector instanceof Zt?t.vector:null}function fY(t){const n={Float32Array:Gy,Float64Array:Ky,Int8Array:$y,Int16Array:jy,Int32Array:Zs,Uint8Array:qy,Uint16Array:Wy,Uint32Array:Hy,BigInt64Array:zy,BigUint64Array:Yy}[t.constructor.name];return n?new n:null}function bw(t,e){return!t||!e?!0:t.compareTo(e)}function hY(t,e,n){const i=Math.min(t.length,n+e);return(r,s)=>{for(let a=n;a<i;++a)s(t[a][r],a)}}function dY(t,e,n){const i=n===0&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&Fa(r.data)?r.data.forEach(s):t.scan(u=>s(r.get(u),++a),!0,e,n)}}const pY=()=>Ut("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function mY(){try{return _s}catch{pY()}}function x8(t,e={}){const{types:n={}}=e,{dataFrom:i,names:r,nrows:s,scan:a}=gY(t,e),u={};r.forEach(l=>{const f=i(t,l,s,a,n[l]);f.length!==s&&Ut("Column length mismatch"),u[l]=f});const c=mY();return new c(u)}function gY(t,e){const{columns:n,limit:i=1/0,offset:r=0}=e,s=Me(n)?n(t):ae(n)?n:null;if(ae(t))return{dataFrom:uY,names:s||Object.keys(t[0]),nrows:Math.min(i,t.length-r),scan:hY(t,i,r)};if(yY(t))return{dataFrom:cY,names:s||t.columnNames(),nrows:Math.min(i,t.numRows()-r),scan:dY(t,i,r)};Ut("Unsupported input data type")}function yY(t){return t&&Me(t.reify)}function bY(t,e={}){const{format:n,...i}=e,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return j4(x8(t,i),n)}function _Y(t){return t.getUTCHours()===0&&t.getUTCMinutes()===0&&t.getUTCSeconds()===0&&t.getUTCMilliseconds()===0}function vY(t,e={}){let n=0,i=0,r=0,s=0,a=0,u=0;return t(c=>{if(++n,c==null){++i;return}const l=typeof c;if(l==="object"&&vs(c))++r,_Y(c)&&++s;else if(l==="number"&&(++a,c===c&&(c|0)!==c)){const f=c+"",h=f.indexOf(".");if(h>=0){const d=f.indexOf("e"),p=d>0?d:f.length;u=Math.max(u,p-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(u,e.maxdigits||6)}}}function fp(t,e){return Me(e)?e(t):e||t.columnNames()}function S8(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach(u=>{const c=vY(wY(t,u),n);a[u]=r[u]||c.align,s[u]=i[u]||c.format}),{align:a,format:s}}function wY(t,e){const n=t.column(e);return i=>t.scan(r=>i(n.get(r)))}function j1(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan(u=>{r.row(u);for(let c=0;c<a;++c){const l=e[c];r.cell(s[e[c]].get(u),l,c)}},!0,n,i)}function xY(t,e={}){const n=fp(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}
\r]`),a=l=>l==null?"":vs(l)?cp(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,u=n.map(a);let c="";return j1(t,n,e.limit||1/0,e.offset,{row(){c+=u.join(r)+`
`},cell(l,f,h){u[h]=a(i[f]?i[f](l):l)}}),c+u.join(r)}function E8(t,e={}){if(Me(e))return e(t)+"";const n=typeof t;if(n==="object"){if(vs(t))return e.utc?cp(t):G4(t);{const i=JSON.stringify(t,(s,a)=>Al(a)?Array.from(a):a),r=e.maxlen||30;return i.length>r?i.slice(0,28)+"…"+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=e.digits||0;let r;return t!==0&&((r=Math.abs(t))>=1e18||r<Math.pow(10,-i))?t.toExponential(i):t.toFixed(i)}else return t+""}function hp(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function SY(t,e={}){const n=fp(t,e.columns),{align:i,format:r}=S8(t,n,e),s=EY(e),a=e.null,u=g=>g==="c"?"center":g==="r"?"right":"left",c=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(g,y)=>c(E8(g,y)),f=a?(g,y)=>g==null?a(g):l(g,y):l;let h=-1,d=-1;const p=(g,y,_)=>{const b=_?u(i[y]):"",x=s[g]&&s[g](y,d,h)||"",v=(b?`text-align: ${b};`+(x?" ":""):"")+x;return`<${g}${v?` style="${v}"`:""}>`};let m=p("table")+p("thead")+p("tr",h)+n.map(g=>`${p("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+p("tbody");return j1(t,n,e.limit,e.offset,{row(g){h=g,m+=(++d?"</tr>":"")+p("tr")},cell(g,y){m+=p("td",y,1)+f(g,r[y])+"</td>"}}),m+"</tr></tbody></table>"}function EY(t){return hp(t.style,e=>Me(e)?e:()=>e)}function AY(t,e=!0,n=!1){return t===void 0||t?e:n}const IY=t=>vs(t)?cp(t,!0):t;function TY(t,e={}){const n=AY(e.schema),i=e.format||{},r=fp(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,u)=>{s+=(u?",":"")+JSON.stringify(a)+":[";const c=t.column(a),l=i[a]||IY;let f=-1;t.scan(h=>{const d=c.get(h);s+=(++f?",":"")+JSON.stringify(l(d))},!0,e.limit,e.offset),s+="]"}),s+"}"+(n?"}":"")}function kY(t,e={}){const n=fp(t,e.columns),{align:i,format:r}=S8(t,n,e),s=c=>c==="c"?":-:":c==="r"?"-:":":-",a=c=>c.replace(/\|/g,"\\|");let u="|"+n.map(a).join("|")+`|
|`+n.map(c=>s(i[c])).join("|")+"|";return j1(t,n,e.limit,e.offset,{row(){u+=`
|`},cell(c,l){u+=a(E8(c,r[l]))+"|"}}),u+`
`}function A8(t,e){for(const[n,i]of lp(e))t.set(n,i);return t}function CY(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ws(t,e,n=new Map){return e=On(e)?t.columnName(e):e,fn(e)?n.set(e,e):ae(e)?e.forEach(i=>ws(t,i,n)):Me(e)?ws(t,e(t),n):_n(e)?A8(n,e):Ut(`Invalid column selection: ${Ur(e)}`),n}function dp(t,e){return t.toObject=e,t}function I8(t){return ae(t)?t.map(I8):t&&t.toObject?t.toObject():t}function gu(){return dp(t=>t.columnNames(),()=>({all:[]}))}function T8(...t){return t=t.flat(),dp(e=>{const n=ws(e,t);return e.columnNames(i=>!n.has(i))},()=>({not:I8(t)}))}function MY(t,e){return dp(n=>{let i=On(t)?t:n.columnIndex(t),r=On(e)?e:n.columnIndex(e);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[t,e]}))}function NY(t){return fn(t)&&(t=RegExp(CY(t))),dp(e=>e.columnNames(n=>t.test(n)),()=>({matches:[t.source,t.flags]}))}function OY(t){return Al(t.data)?t.data.constructor:Array}class rs extends KW{static from(e,n){return new rs(QW(e,n),n)}static new(e,n){if(e instanceof rs)return e;const i={},r=[];for(const[s,a]of lp(e))i[s]=a,r.push(s);return new rs(i,n||r)}constructor(e,n,i,r,s,a){hp(e,JW,e),n=n||Object.keys(e);const u=n.length?e[n[0]].length:0;super(n,u,e,i,r,s,a)}create({data:e,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new rs(e||this._data,n||(e?null:this._names),a,r!==void 0?r:TH(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...e){const n=this.numRows(),i=this.reify(),r=pi(i).groupby(i.groups());return e.forEach(s=>{s=rs.new(s),s.numRows()!==n&&Ut("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(e){return this._data[e]}columnAt(e){return this._data[this._names[e]]}array(e,n=Array){const i=this.column(e),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(e,n=0){const i=this.column(e);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(e){const n=this.column(e),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):Ut(`Unrecognized column: ${e}`)}object(e=0){return _w(this)(e)}objects(e={}){const{grouped:n,limit:i,offset:r}=e,s=ws(this,e.columns||gu()),a=_8(s),u=[];if(this.scan((c,l)=>u.push(a(c,l)),!0,i,r),n&&this.isGrouped()){const c=[];return this.scan(l=>c.push(l),!0,i,r),CH(this,c,u,n)}return u}*[Symbol.iterator](){const e=_w(this),n=this.numRows();for(let i=0;i<n;++i)yield e(i)}reify(e){const n=e?e.length:this.numRows(),i=this._names;let r,s;if(!e&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=e?c=>e.forEach(c):c=>this.scan(c,!0),u=i.length;r={};for(let c=0;c<u;++c){const l=i[c],f=this.column(l),h=r[l]=new(OY(f))(n);let d=-1;a(p=>h[++d]=f.get(p))}this.isGrouped()&&(s=kH(this.groups(),a,!!e,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...e){return e.flat().reduce((n,i)=>i(n),this)}toArrow(e){return x8(this,e)}toArrowBuffer(e){return bY(this,e)}toCSV(e){return xY(this,e)}toHTML(e){return SY(this,e)}toJSON(e){return TY(this,e)}toMarkdown(e){return kY(this,e)}}function _w(t){let e=t._builder;if(!e){const n=_8(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=s=>n(r[s],i)}else e=r=>n(r,i);t._builder=e}return e}class FY{constructor(e){this._outputs=e}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Qt(t,e,n,i){const r=n[t.type]||n.Default;if(r&&r(t,e,i)===!1)return;const s=DY[t.type];s&&s(t,e,n)}const nf=(t,e,n)=>{Qt(t.argument,e,n,t)},C0=(t,e,n)=>{Qt(t.left,e,n,t),Qt(t.right,e,n,t)},vw=(t,e,n)=>{Qt(t.test,e,n,t),Qt(t.consequent,e,n,t),t.alternate&&Qt(t.alternate,e,n,t)},M0=(t,e,n)=>{pr(t.params,e,n,t),Qt(t.body,e,n,t)},ww=(t,e,n)=>{Qt(t.callee,e,n,t),pr(t.arguments,e,n,t)},pr=(t,e,n,i)=>{t.forEach(r=>Qt(r,e,n,i))},DY={TemplateLiteral:(t,e,n)=>{pr(t.expressions,e,n,t),pr(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{Qt(t.object,e,n,t),Qt(t.property,e,n,t)},CallExpression:ww,NewExpression:ww,ArrayExpression:(t,e,n)=>{pr(t.elements,e,n,t)},AssignmentExpression:C0,AwaitExpression:nf,BinaryExpression:C0,LogicalExpression:C0,UnaryExpression:nf,UpdateExpression:nf,ConditionalExpression:vw,ObjectExpression:(t,e,n)=>{pr(t.properties,e,n,t)},Property:(t,e,n)=>{Qt(t.key,e,n,t),Qt(t.value,e,n,t)},ArrowFunctionExpression:M0,FunctionExpression:M0,FunctionDeclaration:M0,VariableDeclaration:(t,e,n)=>{pr(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{Qt(t.id,e,n,t),Qt(t.init,e,n,t)},SpreadElement:(t,e,n)=>{Qt(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{pr(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{Qt(t.expression,e,n,t)},IfStatement:vw,ForStatement:(t,e,n)=>{Qt(t.init,e,n,t),Qt(t.test,e,n,t),Qt(t.update,e,n,t),Qt(t.body,e,n,t)},WhileStatement:(t,e,n)=>{Qt(t.test,e,n,t),Qt(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{Qt(t.body,e,n,t),Qt(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{Qt(t.discriminant,e,n,t),pr(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&Qt(t.test,e,n,t),pr(t.consequent,e,n,t)},ReturnStatement:nf,Program:(t,e,n)=>{Qt(t.body[0],e,n,t)}};function k8(t){delete t.start,delete t.end,delete t.optional}function xw(t){k8(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function RY(t){return Qt(t,null,{Column:xw,Constant:xw,Default:k8}),t}function Xe(t,e){return e&&e.type===t}function LY(t){return Xe(OH,t)||Xe(NH,t)}function BY(t){return Me(t)?t:()=>t}const PY="Escaped functions are not valid as rollup or pivot values.";function UY(t,e,n){t.aggronly&&Ut(PY);const i="(row,data)=>fn("+b8(t.table.columnNames())+",$)";return{escape:B1.escape(i,BY(e.expr),n)}}var VY=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],C8=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],$Y="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",M8="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",N0={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},O0="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",jY={5:O0,"5module":O0+" export import",6:O0+" const class extends export import super"},zY=/^in(stanceof)?$/,qY=new RegExp("["+M8+"]"),WY=new RegExp("["+M8+$Y+"]");function og(t,e){for(var n=65536,i=0;i<e.length;i+=2){if(n+=e[i],n>t)return!1;if(n+=e[i+1],n>=t)return!0}return!1}function xs(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&qY.test(String.fromCharCode(t)):e===!1?!1:og(t,C8)}function yu(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&WY.test(String.fromCharCode(t)):e===!1?!1:og(t,C8)||og(t,VY)}var te=function(e,n){n===void 0&&(n={}),this.label=e,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function vi(t,e){return new te(t,{beforeExpr:!0,binop:e})}var wi={beforeExpr:!0},Bn={startsExpr:!0},z1={};function Kt(t,e){return e===void 0&&(e={}),e.keyword=t,z1[t]=new te(t,e)}var S={num:new te("num",Bn),regexp:new te("regexp",Bn),string:new te("string",Bn),name:new te("name",Bn),privateId:new te("privateId",Bn),eof:new te("eof"),bracketL:new te("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new te("]"),braceL:new te("{",{beforeExpr:!0,startsExpr:!0}),braceR:new te("}"),parenL:new te("(",{beforeExpr:!0,startsExpr:!0}),parenR:new te(")"),comma:new te(",",wi),semi:new te(";",wi),colon:new te(":",wi),dot:new te("."),question:new te("?",wi),questionDot:new te("?."),arrow:new te("=>",wi),template:new te("template"),invalidTemplate:new te("invalidTemplate"),ellipsis:new te("...",wi),backQuote:new te("`",Bn),dollarBraceL:new te("${",{beforeExpr:!0,startsExpr:!0}),eq:new te("=",{beforeExpr:!0,isAssign:!0}),assign:new te("_=",{beforeExpr:!0,isAssign:!0}),incDec:new te("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new te("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:vi("||",1),logicalAND:vi("&&",2),bitwiseOR:vi("|",3),bitwiseXOR:vi("^",4),bitwiseAND:vi("&",5),equality:vi("==/!=/===/!==",6),relational:vi("</>/<=/>=",7),bitShift:vi("<</>>/>>>",8),plusMin:new te("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:vi("%",10),star:vi("*",10),slash:vi("/",10),starstar:new te("**",{beforeExpr:!0}),coalesce:vi("??",1),_break:Kt("break"),_case:Kt("case",wi),_catch:Kt("catch"),_continue:Kt("continue"),_debugger:Kt("debugger"),_default:Kt("default",wi),_do:Kt("do",{isLoop:!0,beforeExpr:!0}),_else:Kt("else",wi),_finally:Kt("finally"),_for:Kt("for",{isLoop:!0}),_function:Kt("function",Bn),_if:Kt("if"),_return:Kt("return",wi),_switch:Kt("switch"),_throw:Kt("throw",wi),_try:Kt("try"),_var:Kt("var"),_const:Kt("const"),_while:Kt("while",{isLoop:!0}),_with:Kt("with"),_new:Kt("new",{beforeExpr:!0,startsExpr:!0}),_this:Kt("this",Bn),_super:Kt("super",Bn),_class:Kt("class",Bn),_extends:Kt("extends",wi),_export:Kt("export"),_import:Kt("import",Bn),_null:Kt("null",Bn),_true:Kt("true",Bn),_false:Kt("false",Bn),_in:Kt("in",{beforeExpr:!0,binop:7}),_instanceof:Kt("instanceof",{beforeExpr:!0,binop:7}),_typeof:Kt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Kt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Kt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$i=/\r\n?|\n|\u2028|\u2029/,HY=new RegExp($i.source,"g");function Ru(t){return t===10||t===13||t===8232||t===8233}function N8(t,e,n){n===void 0&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(Ru(r))return i<n-1&&r===13&&t.charCodeAt(i+1)===10?i+2:i+1}return-1}var O8=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ki=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,F8=Object.prototype,YY=F8.hasOwnProperty,GY=F8.toString,Tl=Object.hasOwn||function(t,e){return YY.call(t,e)},Sw=Array.isArray||function(t){return GY.call(t)==="[object Array]"};function Da(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function sa(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var KY=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Kc=function(e,n){this.line=e,this.column=n};Kc.prototype.offset=function(e){return new Kc(this.line,this.column+e)};var pp=function(e,n,i){this.start=n,this.end=i,e.sourceFile!==null&&(this.source=e.sourceFile)};function D8(t,e){for(var n=1,i=0;;){var r=N8(t,i,e);if(r<0)return new Kc(n,e-i);++n,i=r}}var ug={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ew=!1;function XY(t){var e={};for(var n in ug)e[n]=t&&Tl(t,n)?t[n]:ug[n];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!Ew&&typeof console=="object"&&console.warn&&(Ew=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),Sw(e.onToken)){var i=e.onToken;e.onToken=function(r){return i.push(r)}}return Sw(e.onComment)&&(e.onComment=JY(e,e.onComment)),e}function JY(t,e){return function(n,i,r,s,a,u){var c={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(c.loc=new pp(this,a,u)),t.ranges&&(c.range=[r,s]),e.push(c)}}var Xc=1,Lu=2,q1=4,R8=8,L8=16,B8=32,W1=64,P8=128,kl=256,H1=Xc|Lu|kl;function Y1(t,e){return Lu|(t?q1:0)|(e?R8:0)}var Kh=0,G1=1,fs=2,U8=3,V8=4,$8=5,Qe=function(e,n,i){this.options=e=XY(e),this.sourceFile=e.sourceFile,this.keywords=Da(jY[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var r="";e.allowReserved!==!0&&(r=N0[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(r+=" await")),this.reservedWords=Da(r);var s=(r?r+" ":"")+N0.strict;this.reservedWordsStrict=Da(s),this.reservedWordsStrictBind=Da(s+" "+N0.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($i).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Xc),this.regexpState=null,this.privateNameStack=[]},zr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Qe.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};zr.inFunction.get=function(){return(this.currentVarScope().flags&Lu)>0};zr.inGenerator.get=function(){return(this.currentVarScope().flags&R8)>0&&!this.currentVarScope().inClassFieldInit};zr.inAsync.get=function(){return(this.currentVarScope().flags&q1)>0&&!this.currentVarScope().inClassFieldInit};zr.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&kl)return!1;if(e.flags&Lu)return(e.flags&q1)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zr.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&W1)>0||n||this.options.allowSuperOutsideMethod};zr.allowDirectSuper.get=function(){return(this.currentThisScope().flags&P8)>0};zr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zr.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&(Lu|kl))>0||n};zr.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&kl)>0};Qe.extend=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var i=this,r=0;r<e.length;r++)i=e[r](i);return i};Qe.parse=function(e,n){return new this(n,e).parse()};Qe.parseExpressionAt=function(e,n,i){var r=new this(i,e,n);return r.nextToken(),r.parseExpression()};Qe.tokenizer=function(e,n){return new this(n,e)};Object.defineProperties(Qe.prototype,zr);var Dn=Qe.prototype,QY=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Dn.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){ki.lastIndex=t,t+=ki.exec(this.input)[0].length;var e=QY.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){ki.lastIndex=t+e[0].length;var n=ki.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||$i.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}t+=e[0].length,ki.lastIndex=t,t+=ki.exec(this.input)[0].length,this.input[t]===";"&&t++}};Dn.eat=function(t){return this.type===t?(this.next(),!0):!1};Dn.isContextual=function(t){return this.type===S.name&&this.value===t&&!this.containsEsc};Dn.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Dn.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Dn.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||$i.test(this.input.slice(this.lastTokEnd,this.start))};Dn.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Dn.semicolon=function(){!this.eat(S.semi)&&!this.insertSemicolon()&&this.unexpected()};Dn.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Dn.expect=function(t){this.eat(t)||this.unexpected()};Dn.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var mp=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Dn.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}};Dn.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Dn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Dn.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var yt=Qe.prototype;yt.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==S.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var K1={kind:"loop"},ZY={kind:"switch"};yt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ki.lastIndex=this.pos;var e=ki.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(t)return!1;if(i===123||i>55295&&i<56320)return!0;if(xs(i,!0)){for(var r=n+1;yu(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!zY.test(s))return!0}return!1};yt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ki.lastIndex=this.pos;var t=ki.exec(this.input),e=this.pos+t[0].length,n;return!$i.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(yu(n=this.input.charCodeAt(e+8))||n>55295&&n<56320))};yt.parseStatement=function(t,e,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(t)&&(i=S._var,s="let"),i){case S._break:case S._continue:return this.parseBreakContinueStatement(r,i.keyword);case S._debugger:return this.parseDebuggerStatement(r);case S._do:return this.parseDoStatement(r);case S._for:return this.parseForStatement(r);case S._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!t);case S._class:return t&&this.unexpected(),this.parseClass(r,!0);case S._if:return this.parseIfStatement(r);case S._return:return this.parseReturnStatement(r);case S._switch:return this.parseSwitchStatement(r);case S._throw:return this.parseThrowStatement(r);case S._try:return this.parseTryStatement(r);case S._const:case S._var:return s=s||this.value,t&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case S._while:return this.parseWhileStatement(r);case S._with:return this.parseWithStatement(r);case S.braceL:return this.parseBlock(!0,r);case S.semi:return this.parseEmptyStatement(r);case S._export:case S._import:if(this.options.ecmaVersion>10&&i===S._import){ki.lastIndex=this.pos;var a=ki.exec(this.input),u=this.pos+a[0].length,c=this.input.charCodeAt(u);if(c===40||c===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===S._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!t);var l=this.value,f=this.parseExpression();return i===S.name&&f.type==="Identifier"&&this.eat(S.colon)?this.parseLabeledStatement(r,l,f,t):this.parseExpressionStatement(r,f)}};yt.parseBreakContinueStatement=function(t,e){var n=e==="break";this.next(),this.eat(S.semi)||this.insertSemicolon()?t.label=null:this.type!==S.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((t.label==null||r.name===t.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||t.label&&n))break}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")};yt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};yt.parseDoStatement=function(t){return this.next(),this.labels.push(K1),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};yt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(K1),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===S._var||this.type===S._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===S._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,u=new mp,c=this.parseExpression(e>-1?"await":!0,u);return this.type===S._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===S._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,u),this.checkLValPattern(c),this.parseForIn(t,c)):(this.checkExpressionErrors(u,!0),e>-1&&this.unexpected(e),this.parseFor(t,c))};yt.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,bc|(n?0:cg),!1,e)};yt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};yt.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};yt.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(S.braceL),this.labels.push(ZY),this.enterScope(0);for(var e,n=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var i=this.type===S._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(S.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};yt.parseThrowStatement=function(t){return this.next(),$i.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var tG=[];yt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===S._catch){var e=this.startNode();if(this.next(),this.eat(S.parenL)){e.param=this.parseBindingAtom();var n=e.param.type==="Identifier";this.enterScope(n?B8:0),this.checkLValPattern(e.param,n?V8:fs),this.expect(S.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(S._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};yt.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")};yt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(K1),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};yt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};yt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};yt.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var u=this.type.isLoop?"loop":this.type===S._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var l=this.labels[c];if(l.statementStart===t.start)l.statementStart=this.start,l.kind=u;else break}return this.labels.push({name:e,kind:u,statementStart:this.start}),t.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")};yt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};yt.parseBlock=function(t,e,n){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(S.braceL),t&&this.enterScope(0);this.type!==S.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};yt.parseFor=function(t,e){return t.init=e,this.expect(S.semi),t.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),t.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};yt.parseForIn=function(t,e){var n=this.type===S._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")};yt.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(S.eq)?i.init=this.parseMaybeAssign(e):n==="const"&&!(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(e&&(this.type===S._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(S.comma))break}return t};yt.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?G1:fs,!1)};var bc=1,cg=2,j8=4;yt.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===S.star&&e&cg&&this.unexpected(),t.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&bc&&(t.id=e&j8&&this.type!==S.name?null:this.parseIdent(),t.id&&!(e&cg)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?G1:fs:U8));var s=this.yieldPos,a=this.awaitPos,u=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Y1(t.async,t.generator)),e&bc||(t.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=u,this.finishNode(t,e&bc?"FunctionDeclaration":"FunctionExpression")};yt.parseFunctionParams=function(t){this.expect(S.parenL),t.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};yt.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(S.braceL);this.type!==S.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&eG(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};yt.parseClassElement=function(t){if(this.eat(S.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",u=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(S.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===S.star?u=!0:i="static"}if(n.static=u,!i&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===S.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(e>=9||!s)&&this.eat(S.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===S.parenL||a!=="method"||r||s){var l=!n.static&&Xh(n,"constructor"),f=l&&t;l&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":a,this.parseClassMethod(n,r,s,f)}else this.parseClassField(n);return n};yt.isClassElementNameStart=function(){return this.type===S.name||this.type===S.privateId||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword};yt.parseClassElementName=function(t){this.type===S.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};yt.parseClassMethod=function(t,e,n,i){var r=t.key;t.kind==="constructor"?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&Xh(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return t.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),t.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),t.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};yt.parseClassField=function(t){if(Xh(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&Xh(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(S.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};yt.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(kl|W1);this.type!==S.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};yt.parseClassId=function(t,e){this.type===S.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,fs,!1)):(e===!0&&this.unexpected(),t.id=null)};yt.parseClassSuper=function(t){t.superClass=this.eat(S._extends)?this.parseExprSubscripts(null,!1):null};yt.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};yt.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,n=t.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];Tl(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function eG(t,e){var n=e.key.name,i=t[n],r="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(r=(e.static?"s":"i")+e.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(t[n]="true",!1):i?!0:(t[n]=r,!1)}function Xh(t,e){var n=t.computed,i=t.key;return!n&&(i.type==="Identifier"&&i.name===e||i.type==="Literal"&&i.value===e)}yt.parseExport=function(t,e){if(this.next(),this.eat(S.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==S.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(S._default)){this.checkExport(e,"default",this.lastTokStart);var n;if(this.type===S._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,bc|j8,!1,n)}else if(this.type===S._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var u=a[s];this.checkUnreserved(u.local),this.checkLocalExport(u.local),u.local.type==="Literal"&&this.raise(u.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};yt.checkExport=function(t,e,n){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),Tl(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)};yt.checkPatternExport=function(t,e){var n=e.type;if(n==="Identifier")this.checkExport(t,e,e.start);else if(n==="ObjectPattern")for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if(n==="ArrayPattern")for(var a=0,u=e.elements;a<u.length;a+=1){var c=u[a];c&&this.checkPatternExport(t,c)}else n==="Property"?this.checkPatternExport(t,e.value):n==="AssignmentPattern"?this.checkPatternExport(t,e.left):n==="RestElement"?this.checkPatternExport(t,e.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(t,e.expression)};yt.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}};yt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};yt.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(n)n=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e};yt.parseImport=function(t){return this.next(),this.type===S.string?(t.specifiers=tG,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};yt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===S.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,fs),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(S.comma))return t}if(this.type===S.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,fs),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(S.braceL);!this.eat(S.braceR);){if(e)e=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,fs),t.push(this.finishNode(r,"ImportSpecifier"))}return t};yt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===S.string){var t=this.parseLiteral(this.value);return KY.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};yt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};yt.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var or=Qe.prototype;or.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t};or.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];this.options.ecmaVersion===6&&e&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return t};or.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};or.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==S.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};or.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()};or.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(S.comma),e&&this.type===S.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===S.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};or.parseBindingListItem=function(t){return t};or.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};or.checkLValSimple=function(t,e,n){e===void 0&&(e=Kh);var i=e!==Kh;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(e===fs&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(Tl(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==$8&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}};or.checkLValPattern=function(t,e,n){switch(e===void 0&&(e=Kh),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,u=t.elements;a<u.length;a+=1){var c=u[a];c&&this.checkLValInnerPattern(c,e,n)}break;default:this.checkLValSimple(t,e,n)}};or.checkLValInnerPattern=function(t,e,n){switch(e===void 0&&(e=Kh),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var zi=function(e,n,i,r,s){this.token=e,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},Ne={b_stat:new zi("{",!1),b_expr:new zi("{",!0),b_tmpl:new zi("${",!1),p_stat:new zi("(",!1),p_expr:new zi("(",!0),q_tmpl:new zi("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new zi("function",!1),f_expr:new zi("function",!0),f_expr_gen:new zi("function",!0,!1,null,!0),f_gen:new zi("function",!1,!1,null,!0)},Bu=Qe.prototype;Bu.initialContext=function(){return[Ne.b_stat]};Bu.curContext=function(){return this.context[this.context.length-1]};Bu.braceIsBlock=function(t){var e=this.curContext();return e===Ne.f_expr||e===Ne.f_stat?!0:t===S.colon&&(e===Ne.b_stat||e===Ne.b_expr)?!e.isExpr:t===S._return||t===S.name&&this.exprAllowed?$i.test(this.input.slice(this.lastTokEnd,this.start)):t===S._else||t===S.semi||t===S.eof||t===S.parenR||t===S.arrow?!0:t===S.braceL?e===Ne.b_stat:t===S._var||t===S._const||t===S.name?!1:!this.exprAllowed};Bu.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Bu.updateContext=function(t){var e,n=this.type;n.keyword&&t===S.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr};Bu.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};S.parenR.updateContext=S.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===Ne.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};S.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ne.b_stat:Ne.b_expr),this.exprAllowed=!0};S.dollarBraceL.updateContext=function(){this.context.push(Ne.b_tmpl),this.exprAllowed=!0};S.parenL.updateContext=function(t){var e=t===S._if||t===S._for||t===S._with||t===S._while;this.context.push(e?Ne.p_stat:Ne.p_expr),this.exprAllowed=!0};S.incDec.updateContext=function(){};S._function.updateContext=S._class.updateContext=function(t){t.beforeExpr&&t!==S._else&&!(t===S.semi&&this.curContext()!==Ne.p_stat)&&!(t===S._return&&$i.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===S.colon||t===S.braceL)&&this.curContext()===Ne.b_stat)?this.context.push(Ne.f_expr):this.context.push(Ne.f_stat),this.exprAllowed=!1};S.backQuote.updateContext=function(){this.curContext()===Ne.q_tmpl?this.context.pop():this.context.push(Ne.q_tmpl),this.exprAllowed=!1};S.star.updateContext=function(t){if(t===S._function){var e=this.context.length-1;this.context[e]===Ne.f_expr?this.context[e]=Ne.f_expr_gen:this.context[e]=Ne.f_gen}this.exprAllowed=!0};S.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==S.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var $t=Qe.prototype;$t.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i=t.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);return}r="$"+r;var a=e[r];if(a){var u;s==="init"?u=this.strict&&a.init||a.get||a.set:u=a.init||a[s],u&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=e[r]={init:!1,get:!1,set:!1};a[s]=!0}};$t.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===S.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(S.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r};$t.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new mp,i=!0);var u=this.start,c=this.startLoc;(this.type===S.parenL||this.type===S.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,u,c)),this.type.isAssign){var f=this.startNodeAt(u,c);return f.operator=this.value,this.type===S.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===S.eq?this.checkLValPattern(l):this.checkLValSimple(l),f.left=l,this.next(),f.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(f,"AssignmentExpression")}else i&&this.checkExpressionErrors(e,!0);return r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),l};$t.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(S.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(S.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r};$t.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,t)};$t.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==S._in)&&s>i){var a=this.type===S.logicalOR||this.type===S.logicalAND,u=this.type===S.coalesce;u&&(s=S.logicalAND.binop);var c=this.value;this.next();var l=this.start,f=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),l,f,s,r),d=this.buildBinary(e,n,t,h,c,a||u);return(a&&this.type===S.coalesce||u&&(this.type===S.logicalOR||this.type===S.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,n,i,r)}return t};$t.buildBinary=function(t,e,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};$t.parseMaybeUnary=function(t,e,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),e=!0;else if(this.type.prefix){var u=this.startNode(),c=this.type===S.incDec;u.operator=this.value,u.prefix=!0,this.next(),u.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(t,!0),c?this.checkLValSimple(u.argument):this.strict&&u.operator==="delete"&&u.argument.type==="Identifier"?this.raiseRecoverable(u.start,"Deleting local variable in strict mode"):u.operator==="delete"&&z8(u.argument)?this.raiseRecoverable(u.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(u,c?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===S.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==S._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(r,s);l.operator=this.value,l.prefix=!1,l.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(S.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function z8(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&z8(t.expression)}$t.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&s.type==="MemberExpression"&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s};$t.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var u=this.parseSubscript(t,e,n,i,s,a,r);if(u.optional&&(a=!0),u===t||u.type==="ArrowFunctionExpression"){if(a){var c=this.startNodeAt(e,n);c.expression=u,u=this.finishNode(c,"ChainExpression")}return u}t=u}};$t.parseSubscript=function(t,e,n,i,r,s,a){var u=this.options.ecmaVersion>=11,c=u&&this.eat(S.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(S.bracketL);if(l||c&&this.type!==S.parenL&&this.type!==S.backQuote||this.eat(S.dot)){var f=this.startNodeAt(e,n);f.object=t,l?(f.property=this.parseExpression(),this.expect(S.bracketR)):this.type===S.privateId&&t.type!=="Super"?f.property=this.parsePrivateIdent():f.property=this.parseIdent(this.options.allowReserved!=="never"),f.computed=!!l,u&&(f.optional=c),t=this.finishNode(f,"MemberExpression")}else if(!i&&this.eat(S.parenL)){var h=new mp,d=this.yieldPos,p=this.awaitPos,m=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(e,n),g,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=m||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=g,u&&(y.optional=c),t=this.finishNode(y,"CallExpression")}else if(this.type===S.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var _=this.startNodeAt(e,n);_.tag=t,_.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(_,"TaggedTemplateExpression")}return t};$t.parseExprAtom=function(t,e){this.type===S.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===S.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(n,"Super");case S._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case S.name:var r=this.start,s=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(S._function))return this.overrideContext(Ne.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[u],!1,e);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===S.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(S.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[u],!0,e)}return u;case S.regexp:var c=this.value;return n=this.parseLiteral(c.value),n.regex={pattern:c.pattern,flags:c.flags},n;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return n=this.startNode(),n.value=this.type===S._null?null:this.type===S._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case S.parenL:var l=this.start,f=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),f;case S.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(S.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case S.braceL:return this.overrideContext(Ne.b_expr),this.parseObj(!1,t);case S._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};$t.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case S.parenL:return this.parseDynamicImport(t);case S.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}};$t.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(S.parenR)){var e=this.start;this.eat(S.comma)&&this.eat(S.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};$t.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};$t.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};$t.parseParenExpression=function(){this.expect(S.parenL);var t=this.parseExpression();return this.expect(S.parenR),t};$t.parseParenAndDistinguishExpression=function(t,e){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,u=this.startLoc,c=[],l=!0,f=!1,h=new mp,d=this.yieldPos,p=this.awaitPos,m;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;)if(l?l=!1:this.expect(S.comma),s&&this.afterTrailingComma(S.parenR,!0)){f=!0;break}else if(this.type===S.ellipsis){m=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var g=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(S.parenR),t&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,i,c,e);(!c.length||f)&&this.unexpected(this.lastTokStart),m&&this.unexpected(m),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,c.length>1?(r=this.startNodeAt(a,u),r.expressions=c,this.finishNodeAt(r,"SequenceExpression",g,y)):r=c[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var _=this.startNodeAt(n,i);return _.expression=r,this.finishNode(_,"ParenthesizedExpression")}else return r};$t.parseParenItem=function(t){return t};$t.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var nG=[];$t.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(S.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===S._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&t.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(S.parenL)?t.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1):t.arguments=nG,this.finishNode(t,"NewExpression")};$t.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===S.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===S.backQuote,this.finishNode(n,"TemplateElement")};$t.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(S.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")};$t.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!$i.test(this.input.slice(this.lastTokEnd,this.start))};$t.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(S.braceR);){if(i)i=!1;else if(this.expect(S.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(S.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")};$t.parseProperty=function(t,e){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return t?(n.argument=this.parseIdent(!1),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,e),this.type===S.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(t||e)&&(s=this.start,a=this.startLoc),t||(i=this.eat(S.star)));var u=this.containsEsc;return this.parsePropertyName(n),!t&&!u&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,t,i,r,s,a,e,u),this.finishNode(n,"Property")};$t.parsePropertyValue=function(t,e,n,i,r,s,a,u){if((n||i)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===S.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(!e&&!u&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==S.comma&&this.type!==S.braceR&&this.type!==S.eq){(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c=t.kind==="get"?0:1;if(t.value.params.length!==c){var l=t.value.start;t.kind==="get"?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===S.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};$t.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(S.bracketR),t.key;t.computed=!1}return t.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};$t.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};$t.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Y1(e,i.generator)|W1|(n?P8:0)),this.expect(S.parenL),i.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};$t.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Y1(n,!1)|L8),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};$t.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==S.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var u=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!s||u)&&(a=this.strictDirective(this.end),a&&u&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,$8),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=c}this.exitScope()};$t.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(i.type!=="Identifier")return!1}return!0};$t.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,G1,e?null:n)}};$t.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(S.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===S.comma?a=null:this.type===S.ellipsis?(a=this.parseSpread(i),i&&this.type===S.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};$t.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))}};$t.parseIdent=function(t){var e=this.startNode();return this.type===S.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};$t.parsePrivateIdent=function(){var t=this.startNode();return this.type===S.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t};$t.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(S.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};$t.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var Jh=Qe.prototype;Jh.raise=function(t,e){var n=D8(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i};Jh.raiseRecoverable=Jh.raise;Jh.curPosition=function(){if(this.options.locations)return new Kc(this.curLine,this.pos-this.lineStart)};var _a=Qe.prototype,iG=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};_a.enterScope=function(t){this.scopeStack.push(new iG(t))};_a.exitScope=function(){this.scopeStack.pop()};_a.treatFunctionsAsVarInScope=function(t){return t.flags&Lu||!this.inModule&&t.flags&Xc};_a.declareName=function(t,e,n){var i=!1;if(e===fs){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&r.flags&Xc&&delete this.undefinedExports[t]}else if(e===V8){var s=this.currentScope();s.lexical.push(t)}else if(e===U8){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(t)>-1:i=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var u=this.scopeStack.length-1;u>=0;--u){var c=this.scopeStack[u];if(c.lexical.indexOf(t)>-1&&!(c.flags&B8&&c.lexical[0]===t)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(t)>-1){i=!0;break}if(c.var.push(t),this.inModule&&c.flags&Xc&&delete this.undefinedExports[t],c.flags&H1)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")};_a.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};_a.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};_a.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&H1)return e}};_a.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&H1&&!(e.flags&L8))return e}};var gp=function(e,n,i){this.type="",this.start=n,this.end=0,e.options.locations&&(this.loc=new pp(e,i)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[n,0])},Cl=Qe.prototype;Cl.startNode=function(){return new gp(this,this.start,this.startLoc)};Cl.startNodeAt=function(t,e){return new gp(this,t,e)};function q8(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}Cl.finishNode=function(t,e){return q8.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};Cl.finishNodeAt=function(t,e,n,i){return q8.call(this,t,e,n,i)};Cl.copyNode=function(t){var e=new gp(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var W8="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",H8=W8+" Extended_Pictographic",Y8=H8,G8=Y8+" EBase EComp EMod EPres ExtPict",K8=G8,rG=K8,sG={9:W8,10:H8,11:Y8,12:G8,13:K8,14:rG},Aw="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",X8="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",J8=X8+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Q8=J8+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Z8=Q8+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",tT=Z8+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",aG=tT+" Kawi Nag_Mundari Nagm",oG={9:X8,10:J8,11:Q8,12:Z8,13:tT,14:aG},eT={};function uG(t){var e=eT[t]={binary:Da(sG[t]+" "+Aw),nonBinary:{General_Category:Da(Aw),Script:Da(oG[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var F0=0,Iw=[9,10,11,12,13,14];F0<Iw.length;F0+=1){var cG=Iw[F0];uG(cG)}var ht=Qe.prototype,ks=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=eT[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ks.prototype.reset=function(e,n,i){var r=i.indexOf("u")!==-1;this.start=e|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};ks.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};ks.prototype.at=function(e,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(e>=r)return-1;var s=i.charCodeAt(e);if(!(n||this.switchU)||s<=55295||s>=57344||e+1>=r)return s;var a=i.charCodeAt(e+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};ks.prototype.nextIndex=function(e,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(e>=r)return r;var s=i.charCodeAt(e),a;return!(n||this.switchU)||s<=55295||s>=57344||e+1>=r||(a=i.charCodeAt(e+1))<56320||a>57343?e+1:e+2};ks.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};ks.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};ks.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};ks.prototype.eat=function(e,n){return n===void 0&&(n=!1),this.current(n)===e?(this.advance(n),!0):!1};ht.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);e.indexOf(r)===-1&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}};ht.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))};ht.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];t.groupNames.indexOf(i)===-1&&t.raise("Invalid named capture referenced")}};ht.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};ht.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};ht.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};ht.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1};ht.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};ht.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};ht.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return r!==-1&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1};ht.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};ht.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};ht.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1};ht.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};ht.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};ht.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};ht.regexp_eatSyntaxCharacter=function(t){var e=t.current();return nT(e)?(t.lastIntValue=e,t.advance(),!0):!1};function nT(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}ht.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;(n=t.current())!==-1&&!nT(n);)t.advance();return t.pos!==e};ht.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};ht.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t)){t.groupNames.indexOf(t.lastStringValue)!==-1&&t.raise("Duplicate capture group name"),t.groupNames.push(t.lastStringValue);return}t.raise("Invalid group")}};ht.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};ht.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=sa(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=sa(t.lastIntValue);return!0}return!1};ht.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),lG(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function lG(t){return xs(t,!0)||t===36||t===95}ht.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),fG(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function fG(t){return yu(t,!0)||t===36||t===95||t===8204||t===8205}ht.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};ht.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1};ht.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};ht.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};ht.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};ht.regexp_eatZero=function(t){return t.current()===48&&!yp(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};ht.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};ht.regexp_eatControlLetter=function(t){var e=t.current();return iT(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function iT(t){return t>=65&&t<=90||t>=97&&t<=122}ht.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var n=t.pos,i=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(i&&r>=55296&&r<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}t.pos=s,t.lastIntValue=r}return!0}if(i&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&hG(t.lastIntValue))return!0;i&&t.raise("Invalid unicode escape"),t.pos=n}return!1};function hG(t){return t>=0&&t<=1114111}ht.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};ht.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};ht.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(dG(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(e===80||e===112)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1};function dG(t){return t===100||t===68||t===115||t===83||t===119||t===87}ht.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1};ht.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Tl(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")};ht.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")};ht.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";rT(e=t.current());)t.lastStringValue+=sa(e),t.advance();return t.lastStringValue!==""};function rT(t){return iT(t)||t===95}ht.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";pG(e=t.current());)t.lastStringValue+=sa(e),t.advance();return t.lastStringValue!==""};function pG(t){return rT(t)||yp(t)}ht.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};ht.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1};ht.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;t.switchU&&(e===-1||n===-1)&&t.raise("Invalid character class"),e!==-1&&n!==-1&&e>n&&t.raise("Range out of order in character class")}}};ht.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(n===99||oT(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return i!==93?(t.lastIntValue=i,t.advance(),!0):!1};ht.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};ht.regexp_eatClassControlLetter=function(t){var e=t.current();return yp(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};ht.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};ht.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;yp(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e};function yp(t){return t>=48&&t<=57}ht.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;sT(n=t.current());)t.lastIntValue=16*t.lastIntValue+aT(n),t.advance();return t.pos!==e};function sT(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function aT(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}ht.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+n*8+t.lastIntValue:t.lastIntValue=e*8+n}else t.lastIntValue=e;return!0}return!1};ht.regexp_eatOctalDigit=function(t){var e=t.current();return oT(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function oT(t){return t>=48&&t<=55}ht.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!sT(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+aT(r),t.advance()}return!0};var X1=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new pp(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Gt=Qe.prototype;Gt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new X1(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Gt.getToken=function(){return this.next(),new X1(this)};typeof Symbol<"u"&&(Gt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===S.eof,value:e}}}});Gt.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(S.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};Gt.readToken=function(t){return xs(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};Gt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};Gt.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=N8(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())};Gt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Ru(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())};Gt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(t>8&&t<14||t>=5760&&O8.test(String.fromCharCode(t)))++this.pos;else break t}}};Gt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)};Gt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))};Gt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(S.assign,2):this.finishOp(S.slash,1)};Gt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=t===42?S.star:S.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++n,i=S.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(S.assign,n+1):this.finishOp(i,n)};Gt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(S.assign,3)}return this.finishOp(t===124?S.logicalOR:S.logicalAND,2)}return e===61?this.finishOp(S.assign,2):this.finishOp(t===124?S.bitwiseOR:S.bitwiseAND,1)};Gt.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)};Gt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||$i.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(S.incDec,2):e===61?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)};Gt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(S.assign,n+1):this.finishOp(S.bitShift,n)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(n=2),this.finishOp(S.relational,n))};Gt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(S.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(t===61?S.eq:S.prefix,1)};Gt.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(S.questionDot,2)}if(e===63){if(t>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(S.assign,3)}return this.finishOp(S.coalesce,2)}}return this.finishOp(S.question,1)};Gt.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),xs(e,!0)||e===92))return this.finishToken(S.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+sa(e)+"'")};Gt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(S.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+sa(t)+"'")};Gt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)};Gt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if($i.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if(i==="[")e=!0;else if(i==="]"&&e)e=!1;else if(i==="/"&&!e)break;t=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var u=this.regexpState||(this.regexpState=new ks(this));u.reset(n,r,a),this.validateRegExpFlags(u),this.validateRegExpPattern(u);var c=null;try{c=new RegExp(r,a)}catch{}return this.finishToken(S.regexp,{pattern:r,flags:a,value:c})};Gt.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&e===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,u=0,c=0,l=e??1/0;c<l;++c,++this.pos){var f=this.input.charCodeAt(this.pos),h=void 0;if(i&&f===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),u===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),c===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),u=f;continue}if(f>=97?h=f-97+10:f>=65?h=f-65+10:f>=48&&f<=57?h=f-48:h=1/0,h>=t)break;u=f,a=a*t+h}return i&&u===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||e!=null&&this.pos-s!==e?null:a};function mG(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function uT(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}Gt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return n==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=uT(this.input.slice(e,this.pos)),++this.pos):xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,n)};Gt.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var n=this.pos-e>=2&&this.input.charCodeAt(e)===48;n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&i===110){var r=uT(this.input.slice(e,this.pos));return++this.pos,xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=mG(this.input.slice(e,this.pos),n);return this.finishToken(S.num,s)};Gt.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e};Gt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;i===92?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ru(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(S.string,e)};var cT={};Gt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===cT)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};Gt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw cT;this.raise(t,e)};Gt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===S.template||this.type===S.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(S.template,t));if(n===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Ru(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};Gt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Gt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return sa(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),(i!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Ru(e)?"":String.fromCharCode(e)}};Gt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return n===null&&this.invalidStringToken(e,"Bad character escape sequence"),n};Gt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(yu(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?xs:yu)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=sa(a),n=this.pos}else break;e=!1}return t+this.input.slice(n,this.pos)};Gt.readWord=function(){var t=this.readWord1(),e=S.name;return this.keywords.test(t)&&(e=z1[t]),this.finishToken(e,t)};var gG="8.8.2";Qe.acorn={Parser:Qe,version:gG,defaultOptions:ug,Position:Kc,SourceLocation:pp,getLineInfo:D8,Node:gp,TokenType:te,tokTypes:S,keywordTypes:z1,TokContext:zi,tokContexts:Ne,isIdentifierChar:yu,isIdentifierStart:xs,Token:X1,isNewLine:Ru,lineBreak:$i,lineBreakG:HY,nonASCIIwhitespace:O8};function yG(t,e){return Qe.parse(t,e)}const J1={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},bG={ecmaVersion:11},Tw="$",_G="d",vG="d1",wG="d2",un=t=>(e,n)=>n.error(e,t+" not allowed"),xG=un("Aggregate function"),SG=un("Window function"),EG="Invalid argument",Q1="Invalid column reference",AG=Q1+" (must be input to an aggregate function)",lT="Invalid function call",IG="Invalid member expression",TG="Invalid operator parameter",kG="Invalid param reference",CG="Invalid variable reference",MG="Variable not accessible in operator call",NG="Unsupported variable declaration",OG="Unsupported destructuring pattern",fT="Table expressions do not support closures",hT="Use aq.escape(fn) to use a function as-is (including closures)",FG="use table.params({ name: value }) to define dynamic parameters",DG="use aq.addFunction(name, fn) to add new op functions",RG=`
Note: ${fT}. ${hT}, or ${FG}.`,dT=`
Note: ${fT}. ${hT}, or ${DG}.`,LG=`The ${g8} method is not valid in multi-table expressions.`;function BG(t,e){const n=PG(e);let i=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,LY(i)?(VG(i,t),i=i.body):t.join?(t.scope.add(t.tuple1=vG),t.scope.add(t.tuple2=wG),t.scope.add(t.$param=Tw)):(t.scope.add(t.tuple=_G),t.scope.add(t.$param=Tw)),Qt(i,t,Z1),t.root}function PG(t){try{const e=t.field?UG(t):ae(t)?Ur(t):t;return yG(`expr=(${e})`,bG).body[0].expression.right}catch{Ut(`Expression parse error: ${t+""}`)}}function UG(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}const Z1={FunctionDeclaration:un("Function definitions"),ForStatement:un("For loops"),ForOfStatement:un("For-of loops"),ForInStatement:un("For-in loops"),WhileStatement:un("While loops"),DoWhileStatement:un("Do-while loops"),AwaitExpression:un("Await expressions"),ArrowFunctionExpression:un("Function definitions"),AssignmentExpression:un("Assignments"),FunctionExpression:un("Function definitions"),NewExpression:un('Use of "new"'),UpdateExpression:un("Update expressions"),VariableDeclarator(t,e){hg(t.id,e)},Identifier(t,e,n){gT(t,e,n)&&!e.scope.has(t.name)&&e.error(t,CG,RG)},CallExpression(t,e){const n=pT(t.callee),i=d8(n)||p8(n);if(i){if((e.join||e.aggregate===!1)&&R1(n)&&xG(t,e),(e.join||e.window===!1)&&L1(n)&&SG(t,e),e.$op=1,e.ast)fg(t,n,e),t.arguments.forEach(r=>Qt(r,e,lg));else{const r=e.op($G(e,i,n,t.arguments));Object.assign(t,{type:u8,name:r.id})}return e.$op=0,!1}else h8(n)?fg(t,n,e):e.error(t,lT,dT)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!Xe(qs,i))return;const{name:s}=i;if(mT(t)&&Xe(qs,r)&&nr(J1,r.name)){_T(t,r.name);return}const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;if(a>=0)return kw(t,a,e,yT,n);if(s===e.$param)return kw(t,a,e,zG);e.paramsRef.has(s)?Jc(t,e.paramsRef.get(s)):e.columnRef.has(s)?bT(i,s,e,t):nr(e.params,s)&&Jc(i,s)}};function kw(t,e,n,i,r){const{property:s,computed:a}=t;let u;if(!a)u=s.name;else if(Xe(Du,s))u=s.value;else try{Qt(s,n,Z1,t),u=n.param(s)}catch{n.error(t,IG)}return i(t,u,e,n,r),!1}const lg={...Z1,VariableDeclarator:un("Variable declaration in operator call"),Identifier(t,e,n){gT(t,e,n)&&e.error(t,MG)},CallExpression(t,e){const n=pT(t.callee);h8(n)?fg(t,n,e):e.error(t,lT,dT)}};function VG(t,e){t.generator&&un("Generator functions")(t,e),t.async&&un("Async functions")(t,e);const{params:n}=t,i=n.length,r=a=>(u,c)=>e.columnRef.set(u,[c,a]),s=(a,u)=>e.paramsRef.set(a,u);i&&(e.join?(Zu(e,n[0],"tuple1",r(1)),i>1&&Zu(e,n[1],"tuple2",r(2)),i>2&&Zu(e,n[2],"$param",s)):(Zu(e,n[0],"tuple",r(0)),i>1&&Zu(e,n[1],"$param",s))),e.root=t.body}function Zu(t,e,n,i){Xe(qs,e)?(t.scope.add(e.name),t[n]=e.name):Xe(a8,e)&&e.properties.forEach(r=>{const s=Xe(qs,r.key)?r.key.name:Xe(Du,r.key)?r.key.value:t.error(r,EG);Xe(qs,r.value)||t.error(r.value,OG),i(r.value.name,s)})}function $G(t,e,n,i){const r=[],s=[],a=e.param[0]||0,u=a+(e.param[1]||0);return i.forEach((c,l)=>{l<a?(Qt(c,t,lg),r.push(t.field(c))):l<u?(Qt(c,t,lg),s.push(t.param(c))):t.error(c,TG)}),{name:n,fields:r,params:s,...t.spec.window||{}}}function pT(t){return Xe(qs,t)?t.name:Xe(s8,t)?mT(t)?jG(t.property.name):t.property.name:null}function mT(t){return Xe(qs,t.object)&&t.object.name==="Math"}function jG(t){return t==="max"?"greatest":t==="min"?"least":t}function gT(t,e,n){const{name:i}=t;if(!(Xe(s8,n)&&n.property===t)){if(!(Xe(o8,n)&&n.key===t))if(e.paramsRef.has(i))Jc(t,e.paramsRef.get(i));else if(e.columnRef.has(i))bT(t,i,e,n);else if(nr(e.params,i))Jc(t,i);else if(nr(J1,i))_T(t,i);else return!0}}function yT(t,e,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,Q1),i.aggronly&&!i.$op&&i.error(t,AG),m8(t,e,n,a,r)}function bT(t,e,n,i){const[r,s]=n.columnRef.get(e);yT(t,r,s,n,i)}function zG(t,e,n,i){i.params&&!nr(i.params,e)&&i.error(t,kG),Jc(t,e)}function Jc(t,e){t.type=BH,t.name=e}function _T(t,e){t.type=DH,t.name=e,t.raw=J1[e]}function fg(t,e,n){if(e===g8){const i=n.table;i||n.error(t,LG),y8(t,t.arguments.length?t.arguments.map(r=>{const s=n.param(r),a=On(s)?i.columnName(s):s;return i.column(a)||n.error(r,Q1),a}):i.columnNames())}else t.callee={type:LH,name:e}}function hg(t,e){Xe(qs,t)?e.scope.add(t.name):Xe(MH,t)?t.elements.forEach(n=>hg(n,e)):Xe(a8,t)?t.properties.forEach(n=>hg(n.value,e)):e.error(t.id,NG)}const qG={[Il]:1,[u8]:1};function Zn(t,e={}){const n=e.generate||Yh,i=e.compiler||B1,r=HG(e),s={},a={},u=[],c=[];let l=0,f=-1;const h=e.join?i.join:e.index==1?i.expr2:i.expr,d={op(g){const y=WG(g);return a[y]||(g.id=++f,a[y]=g)},field(g){const y=n(g);return s[y]||(s[y]=++l)},param(g){return Xe(Du,g)?g.value:i.param(n(g),r)},value(g,y){u.push(g);const _=y.escape||(e.ast?RY(y):h(n(y),r));c.push(_),qG[y.type]&&_!==y&&_n(_)&&(_.field=y.name)},error(g,y,_=""){const b=g.start-6,x=g.end-6,v=String(d.spec).slice(b,x);Ut(`${y}: "${v}"${_}`)}};Object.assign(d,e,{params:r});for(const[g,y]of lp(t))d.value(g+"",y.escape?UY(d,y,r):BG(d,y));if(e.ast)return{names:u,exprs:c};const p=[];for(const g in s)p[s[g]]=i.expr(g,r);const m=Object.values(a);return m.forEach(g=>g.fields=g.fields.map(y=>p[y])),{names:u,exprs:c,ops:m}}function WG(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){const n=t.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);e+=`[${n},${!!t.peers}]`}return e}function HG(t){return(t.table?D0(t.table):t.join?{...D0(t.join[1]),...D0(t.join[0])}:{})||{}}function D0(t){return t&&Me(t.params)?t.params():{}}const vT="Expr",qi="ExprList",wT="ExprNumber",lc="ExprObject",No="JoinKeys",Qh="JoinValues",Si="Options",tb="OrderKeys",Fs="SelectionList",Sa="TableRef",Oo="TableRefList",YG="Descending",GG="Query",KG="Selection",XG="Verb",JG="Window";function eb(t,e){return t&&t.expr?new Cw({...t,...e}):new Cw(e,t)}class Cw{constructor(e,n){this.expr=n,Object.assign(this,e)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Me(this.expr)?{func:!0}:{}}}}function QG(t){return eb(t,{desc:!0})}function eo(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return eb(t,e?{expr:e,...i}:i)}function ZG(t,e,n){return eb(t,{window:{frame:e||[-1/0,0],peers:!!n}})}function tK(t){const e=n=>n;return e.toString=()=>t,e}function Mw(t,e){return e=e&&Me(e.query)?e.query():e,e&&Me(e.evaluate)?e.evaluate(null,t):t(e)}function xT(t){return _n(t)&&(ae(t.all)||ae(t.matches)||ae(t.not)||ae(t.range))}function Qc(t){return t&&Me(t.toObject)?t.toObject():Me(t)?{expr:String(t),func:!0}:ae(t)?t.map(Qc):_n(t)?hp(t,e=>Qc(e)):t}function nb(t){return ae(t)?t.map(nb):_n(t)?ae(t.verbs)?Ml.from(t):ae(t.all)?gu():ae(t.range)?MY(...t.range):ae(t.match)?NY(RegExp(...t.match)):ae(t.not)?T8(t.not.map(Qc)):eK(t):t}function eK(t){let e=t,n=t.expr;if(n!=null){if(t.field===!0?e=n=eo(n):t.func===!0&&(e=n=tK(n)),_n(t.window)){const{frame:i,peers:r}=t.window;e=n=ZG(n,i,r)}t.desc===!0&&(e=QG(n))}return t===e?hp(t,i=>nb(i)):e}function nK(t){return ae(t)?t.map(iK):t}function iK(t){const e=[];return Qn(t).forEach(n=>{On(n)?e.push(n):fn(n)?e.push(eo(n,null)):_n(n)&&n.expr||Me(n)?e.push(n):Ut(`Invalid key value: ${n+""}`)}),e}function rK(t){return ae(t)?t.map(sK):t}function sK(t,e){return e<2?Qn(t):t}function aK(t){const e=[];return t.forEach(n=>{const i=n.expr!=null?n.expr:n;if(_n(i)&&!Me(i))for(const r in i)e.push(i[r]);else n=On(i)?i:fn(i)?eo(n):Me(i)?n:Ut(`Invalid orderby field: ${n+""}`),e.push(n)}),e}const oK={[vT]:IT,[qi]:bu,[wT]:dK,[lc]:aa,[No]:pK,[Qh]:mK,[tb]:bu,[Fs]:fK};function uK(t,e,n){return e===Sa?Nw(t):e===Oo?t.map(Nw):ST(Qc(t),e,n)}function ST(t,e,n){return e===Si?t&&cK(t,n):oK[e](t)}function cK(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?ST(r,e[i]):r}return n}function lK(t,e){return Zn({expr:t},{...e,ast:!0}).exprs[0]}function ib(t){return{type:Il,name:t}}function ET(t){return{type:Il,index:t}}function aa(t,e){if(fn(t))return lK(t,e);if(t.expr){let n;if(t.field===!0?n=ib(t.expr):t.func===!0&&(n=aa(t.expr,e)),n)return t.desc&&(n={type:YG,expr:n}),t.window&&(n={type:JG,expr:n,...t.window}),n}return Object.keys(t).map(n=>({...aa(t[n],e),as:n}))}function AT(t){const e=KG;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:bu(t.not)}:t.range?{type:e,operator:"range",arguments:bu(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:Ut("Invalid input")}function fK(t){return Qn(t).map(hK).flat()}function hK(t){return xT(t)?AT(t):On(t)?ET(t):fn(t)?ib(t):_n(t)?Object.keys(t).map(e=>({type:Il,name:e,as:t[e]})):Ut("Invalid input")}function IT(t){return xT(t)?AT(t):On(t)?ET(t):fn(t)?ib(t):_n(t)?aa(t):Ut("Invalid input")}function bu(t){return Qn(t).map(IT).flat()}function dK(t){return On(t)?t:aa(t)}function pK(t){return ae(t)?t.map(bu):aa(t,{join:!0})}function mK(t){return ae(t)?t.map((e,n)=>n<2?bu(e):aa(e,{join:!0})):aa(t,{join:!0})}function Nw(t){return t&&Me(t.toAST)?t.toAST():t}class TT{constructor(e,n=[],i=[]){this.verb=e,this.schema=n,n.forEach((r,s)=>{const a=r.type,u=i[s],c=a===No?nK(u):a===Qh?rK(u):a===tb?aK(u):u;this[r.name]=c!==void 0?c:r.default})}static from(e){const n=dg[e.verb],i=(n.schema||[]).map(({name:r})=>nb(e[r]));return n(...i)}evaluate(e,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===Sa?Mw(n,a):s===Oo?a.map(u=>Mw(n,u)):a});return e[this.verb](...i)}toObject(){const e={verb:this.verb};return this.schema.forEach(({name:n})=>{e[n]=Qc(this[n])}),e}toAST(){const e={type:XG,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{e[n]=uK(this[n],i,r)}),e}}function me(t,e){return Object.assign((...n)=>new TT(t,e,n),{schema:e})}const dg={count:me("count",[{name:"options",type:Si}]),derive:me("derive",[{name:"values",type:lc},{name:"options",type:Si,props:{before:Fs,after:Fs}}]),filter:me("filter",[{name:"criteria",type:lc}]),groupby:me("groupby",[{name:"keys",type:qi}]),orderby:me("orderby",[{name:"keys",type:tb}]),relocate:me("relocate",[{name:"columns",type:Fs},{name:"options",type:Si,props:{before:Fs,after:Fs}}]),rename:me("rename",[{name:"columns",type:Fs}]),rollup:me("rollup",[{name:"values",type:lc}]),sample:me("sample",[{name:"size",type:wT},{name:"options",type:Si,props:{weight:vT}}]),select:me("select",[{name:"columns",type:Fs}]),ungroup:me("ungroup"),unorder:me("unorder"),reify:me("reify"),dedupe:me("dedupe",[{name:"keys",type:qi,default:[]}]),impute:me("impute",[{name:"values",type:lc},{name:"options",type:Si,props:{expand:qi}}]),fold:me("fold",[{name:"values",type:qi},{name:"options",type:Si}]),pivot:me("pivot",[{name:"keys",type:qi},{name:"values",type:qi},{name:"options",type:Si}]),spread:me("spread",[{name:"values",type:qi},{name:"options",type:Si}]),unroll:me("unroll",[{name:"values",type:qi},{name:"options",type:Si,props:{drop:qi}}]),lookup:me("lookup",[{name:"table",type:Sa},{name:"on",type:No},{name:"values",type:qi}]),join:me("join",[{name:"table",type:Sa},{name:"on",type:No},{name:"values",type:Qh},{name:"options",type:Si}]),cross:me("cross",[{name:"table",type:Sa},{name:"values",type:Qh},{name:"options",type:Si}]),semijoin:me("semijoin",[{name:"table",type:Sa},{name:"on",type:No}]),antijoin:me("antijoin",[{name:"table",type:Sa},{name:"on",type:No}]),concat:me("concat",[{name:"tables",type:Oo}]),union:me("union",[{name:"tables",type:Oo}]),intersect:me("intersect",[{name:"tables",type:Oo}]),except:me("except",[{name:"tables",type:Oo}])};class Ml extends H4{constructor(e,n,i){super(n),this._verbs=e||[],this._table=i}static from({verbs:e,table:n,params:i}){return new Ml(e.map(TT.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(e){return arguments.length?(this._params={...this._params,...e},this):this._params}evaluate(e,n){e=e||n(this._table);for(const i of this._verbs)e=i.evaluate(e.params(this._params),n);return e}toObject(){return Ow(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Ow(this,"toAST",{type:GG})}}function Ow(t,e,n){return{...n,verbs:t._verbs.map(i=>i[e]()),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function gK(t,e){return new Ml(t._verbs.concat(e),t._params,t._table)}for(const t in dg){const e=dg[t];Ml.prototype["__"+t]=function(n,...i){return gK(n,e(...i))}}function Pu(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((u,c)=>`${i[a]}${c} = ${i[a]}[${c}]`).join(", ")).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}function yK(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()}function rb(t,e){const n=pi();return e.forEach((i,r)=>{const s=fn(i)?i:r;if(s){const a=t.column(r)||Ut(`Unrecognized column: ${r}`);n.add(s,a)}}),t.create(n)}function kT(t,e,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||Ut("relocate requires a before or after option."),r&&s&&Ut("relocate accepts only one of the before or after options."),e=ws(t,e);const a=[...ws(t,r?n:i).keys()],u=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach(l=>{const f=!e.has(l);if(l===u){s&&f&&c.set(l,l);for(const[h,d]of e)c.set(h,d);if(s)return}f&&c.set(l,l)}),rb(t,c)}function Nl(t,e=i=>i,n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function sb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bK(t,e=0,n=t.length){let i=n?t[e++]:ee;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}function _K(t,e=0,n=t.length){let i=n?t[e++]:ee;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}function rf(t){return Gc(t)?t:+t}function vK(t,e){const n=t.length;if(!n)return ee;if((e=+e)<=0||n<2)return rf(t[0]);if(e>=1)return rf(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=rf(t[r]);return Gc(s)?s:s+(rf(t[r+1])-s)*(i-r)}class wK{constructor(e){this._values=e||[],this._sorted=null,this._start=0}values(e){return this._start&&(this._values=this._values.slice(this._start),this._start=0),e?this._values.slice():this._values}add(e){this._values.push(e),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:bK(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:_K(this._values,this._start)}quantile(e){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(sb)),vK(this._sorted,e)}}const Zh=(t,e,n)=>Pu(e,"{"+Nl(t,(i,r)=>`_${r}.${n}(${e});`)+"}",t);function xK(t,e){const{ops:n,output:i}=SK(t,e),r=t[0].fields,s=r.length,a=s===0?ab:s===1?EK:s===2?AK:Ut("Unsupported field count: "+s);return new a(r,n,i,e)}function SK(t,e){const n={},i=[];function r(a,u=[]){const c=a+":"+u;if(n[c])return n[c];const l=d8(a),f=l.create(...u);return e<0&&l.stream&&l.stream.forEach(h=>r(h,[])),l.req&&l.req.forEach(h=>r(h,[])),n[c]=f,i.push(f),f}const s=t.map(a=>{const u=r(a.name,a.params);return u.output=a.id,u});return{ops:i,output:s}}class ab extends FY{constructor(e,n,i,r){super(i),this._op=n,this._fields=e,this._stream=!!r}init(){const e={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(e)),e.values&&(e.list=new wK),e}write(e,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(e);return 1}_add(){}_rem(){}add(e){++e.count}rem(e){--e.count}}class EK extends ab{constructor(e,n,i,r){super(e,n,i,r);const s=["state","v1","v2"];this._add=Zh(n,s,"add"),this._rem=Zh(n,s,"rem")}add(e,n,i){const r=this._fields[0](n,i);++e.count,Ki(r)&&(++e.valid,e.list&&e.list.add(r),this._add(e,r))}rem(e,n,i){const r=this._fields[0](n,i);--e.count,Ki(r)&&(--e.valid,e.list&&e.list.rem(),this._rem(e,r))}}class AK extends ab{constructor(e,n,i,r){super(e,n,i,r);const s=["state","v1","v2"];this._add=Zh(n,s,"add"),this._rem=Zh(n,s,"rem")}add(e,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++e.count,Ki(r)&&Ki(s)&&(++e.valid,e.list&&e.list.add([r,s]),this._add(e,r,s))}rem(e,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--e.count,Ki(r)&&Ki(s)&&(--e.valid,e.list&&e.list.rem(),this._rem(e,r,s))}}function co(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=Uu(t,e),a=r?(u,c)=>s[u][r[c]]:u=>s[u][0];n=n.map(u=>c=>u(c,i,a))}return n}function Uu(t,e,n){if(!e.length)return n;const i=CT(e),r=t.groups(),s=r?r.size:1;return n=n||up(e.length,()=>Array(s)),s>1?i.forEach(a=>{const u=NT(t,a,r);for(let c=0;c<s;++c)a.write(u[c],n,c)}):i.forEach(a=>{const u=MT(t,a);a.write(u,n,0)}),n}function CT(t,e){const n=[],i={};for(const r of t){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(xK(i[r],e));return n}function MT(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const a=t.indices();for(let u=0;u<i;++u)e.add(n,a[u],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))e.add(n,a,r);else for(let a=0;a<i;++a)e.add(n,a,r);return n}function NT(t,e,n){const{keys:i,size:r}=n,s=up(r,()=>e.init()),a=t.data();if(t.isOrdered()){const u=t.indices(),c=u.length;for(let l=0;l<c;++l){const f=u[l];e.add(s[i[f]],f,a)}}else if(t.isFiltered()){const u=t.mask();for(let c=u.next(0);c>=0;c=u.next(c+1))e.add(s[i[c]],c,a)}else{const u=t.totalRows();for(let c=0;c<u;++c)e.add(s[i[c]],c,a)}return s}function OT(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let u=0;u<a;++u){const c=t.add(i[u],Array(s)),l=n[u];for(let f=0;f<s;++f)c[f]=l(r[f])}}function FT(t){return{left(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const Fw=FT(sb);function IK(t,e,n,i,r){let s,a,u,c,l;const f=g=>a[g-1]===a[g],h=i.length,d=r.length,p=i.length?Pu(["w","r","k"],"{"+Nl(i,(g,y)=>`r[_${y}.id][k]=_${y}.value(w,_${y}.get);`)+"}",i):()=>{},m={i0:0,i1:0,index:0,size:0,peer:f,init(g,y,_,b){m.index=m.i0=m.i1=0,m.size=y.length,s=g,a=y,c=_,l=b,u=r?r.map(x=>x.init()):null;for(let x=0;x<h;++x)i[x].init();return m},value(g,y){return y(s[g],t)},step(g){const[y,_]=e,b=m.size,x=m.i0,v=m.i1;m.i0=y!=null?Math.max(0,g-Math.abs(y)):0,m.i1=_!=null?Math.min(b,g+Math.abs(_)+1):b,m.index=g,n&&(m.i0>0&&f(m.i0)&&(m.i0=Fw.left(a,a[m.i0])),m.i1<b&&f(m.i1)&&(m.i1=Fw.right(a,a[m.i1-1])));for(let w=0;w<d;++w){const A=r[w],T=u[w];for(let C=x;C<m.i0;++C)A.rem(T,s[C],t);for(let C=v;C<m.i1;++C)A.add(T,s[C],t);A.write(T,c,l)}return p(m,c,l),c}};return m}const TK=t=>(t.frame||[null,null]).map(e=>Number.isFinite(e)?Math.abs(e):null),kK=t=>!!t.peers;function CK(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=p8(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}function MK(t,e,n,i={},r){const s=t.data(),a=NK(r,s),u=a.length,c=Pu(["r","d","op"],"{"+Nl(e,(l,f)=>`_${f}[r] = $${f}(r, d, op);`)+"}",e,n);t.partitions().forEach((l,f)=>{const h=l.length,d=OK(t,l);for(let m=0;m<u;++m)a[m].init(l,d,i,f);const p=m=>i[m][f];for(let m=0;m<h;++m){for(let g=0;g<u;++g)a[g].step(m);c(l[m],s,p)}})}function NK(t,e){const n={};return t.forEach(i=>{const r=TK(i),s=kK(i),a=`${r},${s}`,{aggOps:u,winOps:c}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});R1(i.name)?u.push(i):c.push(CK(i))}),Object.values(n).map(i=>IK(e,i.frame,i.peers,i.winOps,CT(i.aggOps,i.frame[0]!=null?-1:1)))}function OK(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let a=1,u=0;a<r;++a)s[a]=n(e[a-1],e[a],i)?++u:u;return s}else return e}function FK(t){return L1(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function ob(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=pi(r.drop?null:t),u=e.map(d=>a.add(d,Array(s))),[c,l]=DK(i),f=t.isGrouped()?t.groups().size:1,h=Uu(t,c,up(i.length,()=>Array(f)));return l.length?MK(t,u,n,h,l):RK(t,u,n,h),t.create(a)}function DK(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const s=t[r];s.id=r,(FK(s)?n:e).push(s)}return[e,n]}function RK(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},u=a?(l,f)=>i[l][a[f]]:l=>i[l][0],c=e.length;for(let l=0;l<c;++l){const f=n[l],h=e[l];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))h[d]=f(d,s,u);else{const d=t.totalRows();for(let p=0;p<d;++p)h[p]=f(p,s,u)}}}function LK(t,e,n={}){const i=ob(t,Zn(e,{table:t}),n);return n.drop||n.before==null&&n.after==null?i:kT(i,Object.keys(e).filter(r=>!t.column(r)),n)}function BK(t,e){if(e.length===0)return t;const n=t.columnNames();return e.reduce((i,r)=>i.antijoin(r.select(n)),t).dedupe()}const sf=2147483648,PK=4294967295;class DT{constructor(e){this._size=e,this._bits=new Uint32Array(Math.ceil(e/32))}get length(){return this._size}count(){const e=this._bits.length;let n=0;for(let i=0;i<e;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(e){return this._bits[e>>5]&sf>>>e}set(e){this._bits[e>>5]|=sf>>>e}clear(e){this._bits[e>>5]&=~(sf>>>e)}scan(e){for(let n=this.next(0);n>=0;n=this.next(n+1))e(n)}next(e){const n=this._bits,i=n.length;let r=e>>5,s=n[r]&PK>>>e;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(e){let n=this.next(0);for(;e--&&n>=0;)n=this.next(n+1);return n}not(){const e=this._bits,n=e.length;for(let r=0;r<n;++r)e[r]=~e[r];const i=this._size%32;return i&&(e[n-1]&=sf>>i-1),this}and(e){if(e){const n=this._bits,i=e._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(e){if(e){const n=this._bits,i=e._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function UK(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new DT(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))e(a,r)&&s.set(a);else for(let a=0;a<n;++a)e(a,r)&&s.set(a);return t.create({filter:s})}function VK(t,e){const n=Zn({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:r}=ob(t,n,{drop:!0}).column("p");i=s=>r[s]}return UK(t,i)}function RT(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,u=new Set(r.drop),c=co(t,i,n),l=pi(),f=new Set(e),h=[],d=[],p=[];t.columnNames().forEach(v=>{if(!u.has(v)){const w=l.add(v,[]);f.has(v)||(h.push(t.column(v)),d.push(w))}}),e.forEach(v=>{u.has(v)||(l.has(v)||l.add(v,[]),p.push(l.data[v]))});const m=a?l.add(a,[]):null;let g=0;const y=h.length,_=p.length,b=(v,w)=>{for(let A=0;A<y;++A)d[A].length=g+w,d[A].fill(h[A].get(v),g,g+w)},x=m?(v,w)=>{for(let A=0;A<w;++A)m[v+A]=A}:()=>{};if(_===1){const v=c[0],w=p[0];t.scan((A,T)=>{const C=Qn(v(A,T)),L=Math.min(C.length,s);b(A,L);for(let O=0;O<L;++O)w[g+O]=C[O];x(g,L),g+=L})}else t.scan((v,w)=>{let A=0;const T=c.map(C=>{const L=Qn(C(v,w));return A=Math.min(Math.max(A,L.length),s),L});b(v,A);for(let C=0;C<_;++C){const L=p[C],O=T[C];for(let k=0;k<A;++k)L[g+k]=O[k]}x(g,A),g+=A});return t.create(l.new())}function $K(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(e.length===0)return t;const[s="key",a="value"]=r.as||[],u=co(t,i,n);return RT(t,{names:[s,a],exprs:[()=>e,(c,l)=>u.map(f=>f(c,l))]},{...r,drop:e})}function ir(t,e,n,i={window:!1}){const r=new Map,s=a=>{a=On(a)?e.columnName(a):a,fn(a)?r.set(a,eo(a)):Me(a)?ws(e,a).forEach(s):_n(a)?A8(r,a):Ut(`Invalid ${t} value: ${a+""}`)};return Qn(n).forEach(s),i.preparse&&i.preparse(r),Zn(r,{table:e,...i})}function jK(t,e,n){return $K(t,ir("fold",t,e),n)}function Dw(t,e,n,i){const r=n&&n.length;return zK(r?qK(t,n,i):t,e,r)}function zK(t,{names:e,exprs:n,ops:i},r){const s=co(t,i,n),a=r?null:pi(t),u=t.totalRows();return e.forEach((c,l)=>{const f=t.column(c),h=r?f.data:a.add(c,Array(u)),d=s[l];t.scan(p=>{const m=f.get(p);h[p]=Ki(m)?m:d(p)})}),r?t:t.create(a)}function qK(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map(m=>t.getter(m))),u=new Set,c=Gh(a);t.scan((m,g)=>u.add(c(m,g)));const l=t.columnNames(),f=pi(),h=l.map(m=>f.add(m,[]));l.forEach((m,g)=>{const y=r[m],_=h[g];t.scan(b=>_.push(y.get(b)))});const d=Gh(a.map((m,g)=>y=>y[g])),p=Pu("v","{"+h.map((m,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",h,l.map(m=>s.indexOf(m)));if(i){let m=i.keys.length;const g=n.reduce((_,b)=>_*b.length,i.size),y=new Uint32Array(g+(m-u.size));y.set(i.keys),Rw(i,n,(_,b)=>{u.has(d(_))||(p(_),y[m++]=b[0])}),f.groupby({...i,keys:y})}else Rw(i,n,m=>{u.has(d(m))||p(m)});return t.create(f.new())}function Rw(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),u=new Int32Array(s),c=[];if(t){const{get:f,rows:h,size:d}=t;a[0]=d,c.push((p,m)=>{const g=h[m];for(let y=0;y<i;++y)p[y]=f[y](g)})}e.forEach((f,h)=>{const d=h+i;a[h+r]=f.length,c.push((p,m)=>p[d]=f[m])});const l=Array(i+e.length);for(let f=0;f<s;++f)c[f](l,0);n(l,u);for(let f=s-1;f>=0;){const h=++u[f];h<a[f]?(c[f](l,h),n(l,u),f=s-1):(u[f]=0,c[f](l,0),--f)}}function ub(t,{names:e,exprs:n,ops:i}){const r=pi(),s=t.groups();return s&&OT(r,s),WK(e,n,s,Uu(t,i),r),t.create(r.new())}function WK(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(c,l)=>i[c][l],u=t.length;for(let c=0;c<u;++c){const l=e[c];if(l.field!=null)r.add(t[c],i[l.field]);else if(s>1){const f=r.add(t[c],Array(s));for(let h=0;h<s;++h)f[h]=l(h,null,a)}else r.add(t[c],[l(0,null,a)])}}function HK(t,e,n={}){if(e=Zn(e,{table:t}),e.names.forEach(i=>t.column(i)?0:Ut(`Invalid impute column ${Ur(i)}`)),n.expand){const i={preparse:YK,aggronly:!0},r=ir("impute",t,n.expand,i),s=ub(t.ungroup(),r);return Dw(t,e,r.names,r.names.map(a=>s.get(a,0)))}else return Dw(t,e)}function YK(t){t.forEach((e,n)=>e.field?t.set(n,e8(e+"")):0)}function GK(t,e){const n=t.columnNames();return e.length?e.reduce((i,r)=>i.semijoin(r.select(n)),t).dedupe():t.reify([])}function LT(t,e){const n=new Map;return t.scan((i,r)=>{const s=e(i,r);s!=null&&s===s&&n.set(s,i)}),n}function KK(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const a=t[s],u=n(a,e);u!=null&&u===u&&(i.has(u)?i.get(u).push(s):i.set(u,[s]))}return i}function XK(t,e){const n=["i","a","j","b"];return Pu(n,"{"+Nl(t,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",t,e)}function JK(t,e,n,{names:i,exprs:r},s={}){const a=t.data(),u=t.indices(!1),c=u.length,l=new Int32Array(c),f=e.data(),h=e.indices(!1),d=h.length,p=new Int32Array(d),m=i.length,g=pi(),y=Array(m),_=Array(m);for(let v=0;v<i.length;++v)y[v]=g.add(i[v],[]),_[v]=r[v];const b=XK(y,_);if((ae(n)?ZK:QK)(b,n,a,f,u,h,l,p,c,d),s.left)for(let v=0;v<c;++v)l[v]||b(u[v],a,-1,f);if(s.right)for(let v=0;v<d;++v)p[v]||b(-1,a,h[v],f);return t.create(g.new())}function QK(t,e,n,i,r,s,a,u,c,l){for(let f=0;f<c;++f){const h=r[f];for(let d=0;d<l;++d){const p=s[d];e(h,n,p,i)&&(t(h,n,p,i),a[f]=1,u[d]=1)}}}function ZK(t,[e,n],i,r,s,a,u,c,l,f){let h,d,p,m,g,y,_,b,x=t;l>=f?(h=i,d=e,p=u,m=s,g=r,y=n,_=c,b=a):(h=r,d=n,p=c,m=a,g=i,y=e,_=u,b=s,x=(A,T,C,L)=>t(C,L,A,T));const v=KK(b,g,y),w=m.length;for(let A=0;A<w;++A){const T=m[A],C=v.get(d(T,h));if(C){const L=C.length;for(let O=0;O<L;++O){const k=C[O];x(T,h,b[k],g),_[k]=1}p[A]=1}}}function td(t,e,n){const i=new Map;Qn(n).forEach((s,a)=>{s=On(s)?e.columnName(s):s,fn(s)?i.set(a,eo(s)):Me(s)||_n(s)&&s.expr?i.set(a,s):Ut(`Invalid ${t} key value: ${s+""}`)});const r=Zn(i,{table:e,aggregate:!1,window:!1});return Gh(r.exprs,!0)}function tX(t,e){const n=new Set(e);return t.filter(i=>n.has(i))}function cb(t,e,n){if(n)fn(n)?n=[n,n]:ae(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=tX(t.columnNames(),e.columnNames());i.length||Ut("Natural join requires shared column names."),n=[i,i]}return n}function BT(t,e,n,i){return n.length!==i.length&&Ut("Mismatched number of join keys"),[td("join",t,n),td("join",e,i)]}const eX={aggregate:!1,window:!1},nX={...eX,index:1};function Lw(t,e,n,i,r={}){n=cb(t,e,n);const s={join:[t,e]};let a;if(ae(n)){const[u,c]=n.map(Qn);a=BT(t,e,u,c),i||(i=iX(t,u,c,r))}else a=Zn({on:n},s).exprs[0],i||(i=[gu(),gu()]);return JK(t,e,a,rX(t,e,i,s,r&&r.suffix),r)}function iX(t,e,n,i){const r=[];e.forEach((a,u)=>fn(a)&&a===n[u]?r.push(a):0);const s=T8(r);if(i.left&&i.right){const a=new Set(r);return[t.columnNames().map(u=>{const c=`[${Ur(u)}]`;return a.has(u)?{[u]:`(a, b) => a${c} == null ? b${c} : a${c}`}:u}),s]}return i.right?[s,gu()]:[gu(),s]}function rX(t,e,n,i,r=[]){if(ae(n)){let s,a,u,c=n.length;s=a=u={names:[],exprs:[]},c--&&(s=ir("join",t,n[0],i)),c--&&(a=ir("join",e,n[1],nX)),c--&&(u=Zn(n[2],i));const l=new Set,f=new Set(s.names);return a.names.forEach(h=>{f.has(h)&&l.add(h)}),l.size&&(Bw(s.names,l,r[0]||"_1"),Bw(a.names,l,r[1]||"_2")),{names:s.names.concat(a.names,u.names),exprs:s.exprs.concat(a.exprs,u.exprs)}}else return Zn(n,i)}function Bw(t,e,n){t.forEach((i,r)=>e.has(i)?t[r]=i+n:0)}function sX(t,e,n,i={}){const r=new DT(t.totalRows());return(ae(n)?aX:oX)(r,t,e,n),i.anti&&r.not().and(t.mask()),t.create({filter:r})}function aX(t,e,n,[i,r]){const s=LT(n,r);e.scan((a,u)=>{s.get(i(a,u))>=0&&t.set(a)})}function oX(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),u=n.data();if(e.isFiltered()||n.isFiltered()){const c=e.indices(!1),l=n.indices(!1);for(let f=0;f<r;++f){const h=c[f];for(let d=0;d<s;++d)if(i(h,a,l[d],u)){t.set(h);break}}}else for(let c=0;c<r;++c)for(let l=0;l<s;++l)if(i(c,a,l,u)){t.set(c);break}}function Pw(t,e,n,i){n=cb(t,e,n);const r=ae(n)?BT(t,e,...n.map(Qn)):Zn({on:n},{join:[t,e]}).exprs[0];return sX(t,e,r,i)}function uX(t,e,[n,i],{names:r,exprs:s,ops:a}){const u=pi(t),c=t.totalRows();r.forEach(d=>u.add(d,Array(c).fill(ee)));const l=LT(e,i),f=Pu(["lr","rr","data"],"{"+Nl(r,(d,p)=>`_[${p}][lr] = $[${p}](rr, data);`)+"}",r.map(d=>u.data[d]),co(e,a,s)),h=e.data();return t.scan((d,p)=>{const m=l.get(n(d,p));m>=0&&f(d,m,h)}),t.create(u)}function cX(t,e,n,i){return n=cb(t,e,n),uX(t,e,[td("lookup",t,n[0]),td("lookup",e,n[1])],ir("lookup",e,i))}const pg=(t,e)=>t??e;function lX(t,e,n,i={}){const{keys:r,keyColumn:s}=fX(t,e,i),a=pg(i.valueSeparator,"_"),u=n.names.length>1?(l,f)=>f+a+r[l]:l=>r[l],c=r.map(l=>Uu(t,n.ops.map(f=>{if(f.name==="count"){const d=p=>l===s[p]?1:NaN;return d.toString=()=>l+":1",{...f,name:"sum",fields:[d]}}const h=f.fields.map(d=>{const p=(m,g)=>l===s[m]?d(m,g):NaN;return p.toString=()=>l+":"+d,p});return{...f,fields:h}})));return t.create(hX(n,u,t.groups(),c))}function fX(t,e,n){const i=n.limit>0?+n.limit:1/0,r=pg(n.sort,!0),s=pg(n.keySeparator,"_"),a=co(t,e.ops,e.exprs),u=a.length===1?a[0]:(h,d)=>a.map(p=>p(h,d)).join(s),c=Array(t.totalRows());t.scan((h,d)=>c[h]=u(h,d));const l=Uu(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>c[h]],params:[]}])[0][0],f=r?l.sort():l;return{keys:Number.isFinite(i)?f.slice(0,i):f,keyColumn:c}}function hX({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=pi(),u=r.length,c=t.length;let l;const f=(h,d)=>l[h][d];i&&OT(a,i);for(let h=0;h<c;++h){const d=e[h];if(d.field!=null)for(let p=0;p<u;++p)a.add(n(p,t[h]),r[p][d.field]);else if(s>1)for(let p=0;p<u;++p){l=r[p];const m=a.add(n(p,t[h]),Array(s));for(let g=0;g<s;++g)m[g]=d(g,null,f)}else for(let p=0;p<u;++p)l=r[p],a.add(n(p,t[h]),[d(0,null,f)])}return a.new()}function dX(t,e,n,i){return lX(t,ir("fold",t,e),ir("fold",t,n,{preparse:pX,aggronly:!0}),i)}function pX(t){t.forEach((e,n)=>e.field?t.set(n,Q4(e+"")):0)}function mX(t,e){const n=new Map;return t.columnNames(i=>(n.set(i,i),0)),rb(t,ws(t,e,n))}function Uw(t,e){return ub(t,Zn(e,{table:t,aggronly:!0,window:!1}))}function gX(t,e,n,i){return(e?i?bX:yX:i?vX:_X)(t.length,t,n,i)}function yX(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*Fu()|0];return e}function bX(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let c=0;c<r;++c)s[c]=a+=i(n[c]);const u=FT(sb).right;for(let c=0;c<t;++c)e[c]=n[u(s,a*Fu())];return e}function _X(t,e,n){const i=n.length;if(t>=i)return n;for(let r=0;r<t;++r)e[r]=n[r];for(let r=t;r<i;++r){const s=r*Fu();s<t&&(e[s|0]=n[r])}return e}function vX(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let u=0;u<r;++u)a[u]=u,s[u]=-Math.log(Fu())/i(n[u]);a.sort((u,c)=>s[u]-s[c]);for(let u=0;u<t;++u)e[u]=n[a[u]];return e}function wX(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const r=Fu()*i--|0,s=t[i+e];t[i+e]=t[r+e],t[r+e]=s}return t}function xX(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let u=0;e=a.map((f,h)=>{let d=e(h);return u+=d=r?d:Math.min(f.length,d),d});const c=new Uint32Array(u);let l=0;return a.forEach((f,h)=>{const d=e[h],p=c.subarray(l,l+=d);!r&&d===f.length?p.set(f):gX(p,r,f,n)}),s!==!1&&(a.length>1||!r)&&wX(c),t.reify(c)}function SX(t,e,n={}){return xX(t,EX(t,e),AX(t,n.weight),n)}const PT=t=>e=>t.get(e)||0;function EX(t,e){return On(e)?()=>e:PT(ub(t,Zn({size:e},{table:t,window:!1})).column("size"))}function AX(t,e){return e==null?null:(e=On(e)?t.columnName(e):e,PT(fn(e)?t.column(e):ob(t,Zn({w:e},{table:t}),{drop:!0}).column("w")))}function IX(t,e){return rb(t,ws(t,e))}function TX(t,{names:e,exprs:n,ops:i=[]},r={}){if(e.length===0)return t;const s=e.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,u=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),c=co(t,i,n),l=pi(),f=e.reduce((d,p,m)=>d.set(p,m),new Map),h=(d,p)=>{const m=kX(t,c[d],u),g=m.length;for(let y=0;y<g;++y)l.add(s[y]||`${p}_${y+1}`,m[y])};return t.columnNames().forEach(d=>{f.has(d)?(a||l.add(d,t.column(d)),h(f.get(d),d),f.delete(d)):l.add(d,t.column(d))}),f.forEach(h),t.create(l)}function kX(t,e,n){const i=t.totalRows(),r=[];return t.scan((s,a)=>{const u=Qn(e(s,a)),c=Math.min(u.length,n);for(;r.length<c;)r.push(Array(i).fill(ee));for(let l=0;l<c;++l)r[l][s]=u[l]}),r}function CX(t,e,n){return TX(t,ir("spread",t,e),n)}function MX(t,e){return t.concat(e).dedupe()}function NX(t,e,n){return RT(t,ir("unroll",t,e),n&&n.drop?{...n,drop:ir("unroll",t,n.drop).names}:n)}function OX(t,e){return t.create({groups:FX(t,e)})}function FX(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(r===0)return null;if(r===1&&!t.isFiltered()&&n[0].field){const p=t.column(n[0].field);if(p.groups)return p.groups(e)}let s=co(t,i,n);const a=Gh(s),u=t.totalRows(),c=new Uint32Array(u),l={},f=[],h=t.data(),d=t.mask();if(d)for(let p=d.next(0);p>=0;p=d.next(p+1)){const m=a(p,h)+"",g=l[m];c[p]=g??(l[m]=f.push(p)-1)}else for(let p=0;p<u;++p){const m=a(p,h)+"",g=l[m];c[p]=g??(l[m]=f.push(p)-1)}return i.length||(s=s.map(p=>m=>p(m,h))),{keys:c,get:s,names:e,rows:f,size:f.length}}function DX(t,e){return OX(t,ir("groupby",t,e))}function RX(t,e){return t.create({order:e})}const LX=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function BX(t,e){const n=[],i=[],r=[];let s=null,a="0",u="0";t.isGrouped()&&(s=t.groups().keys,a="ka",u="kb");const{ops:c}=Zn(e,{table:t,value:(p,m)=>{if(n.push(p),m.escape){const g=y=>`fn[${r.length}](${y}, data)`;i.push([g("a"),g("b")]),r.push(m.escape)}else i.push([Yh(m,{index:"a",op:a}),Yh(m,{index:"b",op:u})])},window:!1}),l=Uu(t,c),f=(p,m)=>l[p][m],h=n.length;let d="return (a, b) => {"+(f&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let p=0;p<h;++p){const m=e.get(n[p]).desc?-1:1,[g,y]=i[p];d+=LX(g,y,-m,m)}return d+="0;};",Function("op","keys","fn","data",d)(f,s,r,t.data())}function PX(t,e){return RX(t,UX(t,e))}function UX(t,e){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return e.forEach(s=>{const a=s.expr!=null?s.expr:s;if(_n(a)&&!Me(a))for(const u in a)r(a[u]);else r(On(a)?eo(s,t.columnName(a)):fn(a)?eo(s):Me(a)?s:Ut(`Invalid orderby field: ${s+""}`))}),BX(t,i)}function VX(t,e){const n=t.numRows(),i=n+e.reduce((a,u)=>a+u.numRows(),0);if(n===i)return t;const r=[t,...e],s=pi();return t.columnNames().forEach(a=>{const u=Array(i);let c=0;r.forEach(l=>{const f=l.column(a)||{get:()=>ee};l.scan(h=>u[c++]=f.get(h))}),s.add(a,u)}),t.create(s.new())}function $X(t,e){const n=pi(),i=t.groups(),{get:r,names:s=[],rows:a,size:u=1}=i||{},c=new Uint32Array(u+1);s.forEach(d=>n.add(d,null));const l=i?NT(t,e,i):[MT(t,e)];e.outputs().map(d=>n.add(d,[]));const f=c.length-1;let h=0;for(let d=0;d<f;++d)h+=c[d+1]=e.write(l[d],n.data,c[d]);if(i){const d=t.data();s.forEach((p,m)=>{const g=n.data[p]=Array(h),y=r[m];for(let _=0,b=0;_<u;++_)g.fill(y(a[_],d),b,b+=c[_+1])})}return t.create(n.new())}function jX(t){return t.isGrouped()?t.create({groups:null}):t}function zX(t){return t.isOrdered()?t.create({order:null}):t}const qX={__antijoin:(t,e,n)=>Pw(t,e,n,{anti:!0}),__count:(t,e={})=>Uw(t,{[e.as||"count"]:Z4()}),__cross:(t,e,n,i)=>Lw(t,e,()=>!0,n,{...i,left:!0,right:!0}),__concat:VX,__dedupe:yK,__derive:LK,__except:BK,__filter:VK,__fold:jK,__impute:HK,__intersect:GK,__join:Lw,__lookup:cX,__pivot:dX,__relocate:kT,__rename:mX,__rollup:Uw,__sample:SX,__select:IX,__semijoin:Pw,__spread:CX,__union:MX,__unroll:NX,__groupby:DX,__orderby:PX,__ungroup:jX,__unorder:zX,__reduce:$X};Object.assign(rs.prototype,qX);function WX(t,e){return rs.from(t,e)}rs.prototype;class UT extends sr{constructor(e){super(),this.function_store=e.matching,this.func_elected=e.default_func,this.ignore_cols=e.ignore_cols,this.backend=e.backend,this.params=e.defaults??{}}snapshot(){return{params:xc(this.params),func_elected:xc(this.func_elected)}}restoreSnapshot(e){this.params=e.params,this.func_elected=e.func_elected}async _execute(e=null){if(zt(e))return;e.length==1&&R5("func_elected",e[0])?this.func_elected=e[0].func_elected:si(e)||e.forEach(c=>{this.params=ad(this.params,c)});let n=await this.backend.execute(this.params),i=WX(n),r=i.columnNames();r=Ac(r,this.ignore_cols);let s=pC(r,r),a=this.function_store[0][this.func_elected],u=[];s.forEach(([c,l])=>{let f=a(c,i.array(c),l,i.array(l));u.push({x:c,y:l,value:f})}),this.emit("data",u,"matching_table")}}class VT extends sr{constructor(){super(),this.overlays={}}snapshot(){return xc(this.overlays)}restoreSnapshot(e){this.overlays=e}async _execute(e,n){e.forEach(r=>{this.overlays=tC(this.overlays,r)});let i=[];Un(({left:r,right:s},a)=>{i.push({key:a,left:r,right:s})},this.overlays),this.emit("data",i,"overlay")}}class HX extends sr{constructor(e){super(),this.backend=e.backend,this.name=e.name,this.params=e.params}async execute(e){this.params=e??this.params;const n=await this.backend.execute(this.params);let i=[];for(const s of n){let a=JSON.parse(s.feature);i.push(a)}const r={type:"FeatureCollection",name:this.name,features:i};return this.emit("data",r,this.name),r}}let Vw={array:X$,url:J$,duckdb:zW,cdt:WW,identity:HW,random:YW,query:W4,matching:UT,overlay:VT,map:HX},YX=0;class TZ extends Map{get backends(){return ri(this)}registerClass(e,n){Vw[e]=n}createBackends(e){for(const n of e)this.createBackend(n)}createBackend(e){e.id=e.id??`_backendid_${YX++}`;let n=Vw[e.type];if(!n)throw new Error(`Backend type ${e.type} not found`);let i=new n(e);return i.id=e.id,this[e.id]=i,console.info("createBackend",e.id,i),i}}class GX{add(e,n,i){let r=`${i.view.id}::${i.eventname}`;return zt(this[r])?this[r]={iact:i,oldVal:e,newVal:n}:this[r].newVal=n,console.log("WriteSet.add",r,this[r]),this}forEach(e){ri(this).forEach(e)}merge(e){if(zt(e))return this;e.forEach(({iact:n,oldVal:i,newVal:r})=>{this.add(i,r,n)})}}const Ps=we(Array),$w=()=>null;let jw=0,KX=0;function jo(t,e,n){if(we(String,e))t[e]=n;else if(Ps(e)){let[i,...r]=e;zt(t[i])&&(t[i]={}),si(r)?jo(t,i,n):jo(t[i],r,n)}}function ed(t,e,n){if(we(String,e))zt(t[e])&&(t[e]=[]),t[e].push(n);else if(Ps(e)){let[i,...r]=e;zt(t[i])&&(t[i]=si(r)?[]:{}),si(r)?ed(t,i,n):ed(t[i],r,n)}}function Ls(t,e,n){if(we(String,e))return t[e]||(we(Function,n)?n():n);if(Ps(e)){let[i,...r]=e;return zt(t[i])?we(Function,n)?n():n:si(r)?Ls(t,i,n):Ls(t[i],r,n)}}class XX{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(e,n,i=$w,r){if(!e.attr)return this;let s=e.view.id,a=e.eventname;return ed(this.dependencies,[s,a],{view:n,domainfunction:i}),ed(this.view2iacts,n.id,e),this.setDefault(n,r),this}dependentViews(e){let n=e.eventname;return Ls(this.dependencies,[e.view.id,n],[])}cmp(e,n){return this.isDependentOn(e.view,n)?1:this.isDependentOn(n.view,e)?-1:0}isDependentOn(e,n){let i=this.getAncestorIacts(e);return _g(r=>(r.store??r)==n,i)}setDefault(e,n){return zt(n)||(this.defaults[e.id]=n),this}getDefault(e,n){return(Ls(this.defaults,e.id)??$w)(n,this.getAncestorIacts(e))}getAncestorIacts(e){let n=[];return Ls(this.view2iacts,e.id,[]).forEach(i=>{n.push(i),n=Ec(n,this.getAncestorIacts(i.view))}),n}getStatesKey(e){let n=this.getAncestorIacts(e),i=Ec([e.id],n.map(r=>[r.id,r.val()]));return console.debug("ancestorStates",i,JSON.stringify(i)),JSON.stringify(i)}saveState(e,n,i){let r=this.getStatesKey(n.view);!zt(i)&&zt(i.states[r])&&jo(i.states,[r,n.eventname],{old:Ls(this.states,[r,n.eventname]),iact:n}),console.debug("saveState",r,n.eventname,Ls(this.states,[r,n.eventname]),e),jo(this.states,[r,n.eventname],e)}restoreStates(e){Un((n,i)=>{Un(({iact:r,old:s},a)=>{console.debug("restoreState",i,r.eventname,s),jo(this.states,[i,r.eventname],s)},n)},e.states)}getState(e,n,i=!0){let r=this.getStatesKey(e);return zt(n)?this.states[r]:Ls(this.states,[r,n],()=>i?this.getDefault(e,n):void 0)}}class kZ{constructor(e){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new XX,this.transactions=[],this._isaborting=!1,this.backends=e;const n=i=>r=>this.backends.createBackend({...r,type:i});this.backend=i=>this.backends.createBackend(i),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(e){if(this.views[e.id]=e,Ps(e)){e.forEach(n=>this.view(n));return}this.interactions[e.id]=this.interactions[e.id]??{_attrs:{}},e.magic=this,Un((n,i)=>{if(!zt(this.interactions[e.id][i]))return;let r=s=>{e.load(o,event)};Object.assign(n,{start:(...s)=>this.start(n,...s),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>mf(n)??{},load:r,id:jw++,view:e,eventname:i,isActive:!1}),n.get=(s,a=null)=>{if(!zt(this.interactions[e.id]._attrs[s]))return this.interactions[e.id]._attrs[s];let u={store:n,attr:s,view:e,eventname:i,load:r,default:a,id:jw++,val:()=>{let c=mf(n);return zo(s)(c)?c[s]:(si(c)||console.error("could not find attr:",ui(mf(n)).length),we(Function,a)?a():a)},start:()=>this.start(u),end:()=>this.end(u),abort:()=>this.abort(u)};return this.interactions[e.id]._attrs[s]=u,u},this.interactions[e.id][i]=n},e.interactions)}render(e,n,i,r={}){return e=Ps(e)?e:[e],n=Ps(n)?n:[n],e.map(a=>{if(we(sr,a))return a;let u=this.backend.identity();return this.connect(u,a),u}).forEach(a=>{n.forEach(u=>a.registerView(u,i,r))}),this}saveBackends(e){e=Ps(e)?e:[e],e.forEach(n=>{n.registerView((i,r)=>{console.debug("saveBackend",this,n,i,r),Un((s,a)=>{Un((u,c)=>{u.forEach(l=>{console.debug("saveBackend.DependencyLeaf.ViewIact",l.view.id,this.i2b[l.view.id]);let f=this.dependencies.getAncestorIacts(l.view),h=Ec([n.id],f.map(d=>[d.id,d.val()]));si(W5(ui(this.i2b[l.view.id]),n.id))||(console.debug("saveBackend.View",n.id,l.view.id),this.dependencies.viewData[h]=i)})},s)},this.dependencies.dependencies)})})}connect(e,n,i){var a;if(Ps(n)){n.forEach(u=>this.connect(e,u,i));return}let r=n,s=r.view;if(zt(this.i2b[s.id])){let u=null;r.subscribe(c=>{if(wg(u,c)){console.debug("iact.subscribe.duplicate",s.id);return}console.log("iact.subscribe.handleEvent",s.id,r.id),u=c,this.handleEvent(c,r)}),r.store?r.store.isActive=!0:r.isActive=!0,(a=s.registerInteraction)==null||a.call(s,r),this.i2b[s.id]={}}zt(e)||jo(this.i2b,[s.id,e.id],this.processBindings(i))}processBindings(e){if(zt(e)||si(e))return Df;if(we(Function,e))return e;let n=j0(ix(we(Array),we(Object)),ds(i=>this.processBindings(i)),j0(we(Function),Df,i=>()=>i))(e);return zo("*",e)?i=>ad(i,Sb(n)(i)):Sb(n)}saveIactState(e,n,i){this.dependencies.saveState(e,n,i),this.dependencies.dependentViews(n).forEach(({view:r,domainfunction:s})=>{if(s){let u=this.dependencies.getAncestorIacts(r);r.render(s(e,u))}let a=this.dependencies.getState(r);Un((u,c)=>{u=u??this.dependencies.getDefault(r,c),u&&(console.debug("saveIactState.load",r.id,c,u),r.load(u,c))},a),(zt(a)||si(a))&&(console.debug("saveIactState.load.default",r.id),r.load(this.dependencies.getDefault(r)))})}handleEvent(e,n){if(!zt(e))if(console.log("handleEvent",this._isaborting,n.view.id,e),this._isaborting)this.dependencies.saveState(e,n,null),this.sendEventToBackends(e,n);else if(this.transactions.length==0||xp(this.transactions).iact!=n)n.start(),this.handleEvent(e,n),n.end();else{let i=xp(this.transactions),r=this.dependencies.getState(n.view,n.eventname,!1);i.writeSet.add(r,e,n),i.visible&&this.sendEventToBackends(e,n)}}sendEventToBackends(e,n){Un((i,r)=>{let s=i(e);this.backends[r].execute(s,n)},this.i2b[n.view.id])}snapshot(){return X5(e=>e.snapshot(),this.backends)}restoreSnapshot(e){Un((n,i)=>{zt(n)||this.backends[i].restoreSnapshot(n)},e.snapshot)}start(e,n=!0){this.transactions.push({xid:KX++,iact:e,visible:n,snapshot:this.snapshot(),states:{},writeSet:new GX}),console.log("magic.start",this.transactions)}end(e){if(!_g(s=>s.iact=e,this.transactions)){console.log("magic.end: can't find interaction",e);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:s,iact:a})=>{this.saveIactState(s,a,n),n.visible||this.sendEventToBackends(s,a)});let i=ri(n.writeSet).map(({iact:s})=>s.id),r=J2(s=>ri(s).map(({iact:a})=>a.id),ri(n.states));if(si(hC(i,r))||console.error("writeset != statesids",i,r),this.transactions.length>0){let s=xp(this.transactions);s.snapshot=Lf(s.snapshot,n.snapshot),s.states=Lf(s.states,n.states),s.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(e){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",xc(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),lC((r,s)=>this.dependencies.cmp(r.iact,s.iact),ri(n.writeSet)).forEach(({iact:r})=>{let s=this.dependencies.getState(r.view,r.eventname);s&&r.view.load&&(console.log("magic.abort.load",s,r),r.view.load(s,r.eventname))})}finally{this._isaborting=!1}}importState(e){let n=JSON.parse(e);this.dependencies.states=n,Un((i,r)=>{let s=this.views[r];this.walkViews(s)},this.dependencies.dependencies)}walkViews(e){let n=this.dependencies.getStatesKey(e),i=this.dependencies.states[n],r=ri(i);if(r.length>1){console.error("unexpected behavior, multiple values for state");return}r.length>0&&e.load(r[0]),Un((s,a)=>{this.dependencies.dependentViews(s).forEach(c=>{this.walkViews(c.view)})},e.interactions)}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const JX=t=>({}),zw=t=>({}),QX=t=>({}),qw=t=>({}),ZX=t=>({}),Ww=t=>({}),tJ=t=>({}),Hw=t=>({}),eJ=t=>({}),Yw=t=>({}),nJ=t=>({}),Gw=t=>({}),iJ=t=>({}),Kw=t=>({}),rJ=t=>({}),Xw=t=>({}),sJ=t=>({}),Jw=t=>({}),aJ=t=>({}),Qw=t=>({}),oJ=t=>({}),Zw=t=>({}),uJ=t=>({}),t2=t=>({}),cJ=t=>({}),e2=t=>({}),lJ=t=>({}),n2=t=>({}),fJ=t=>({}),i2=t=>({});function hJ(t){let e,n,i,r,s,a,u,c,l,f,h,d,p,m,g,y,_,b,x,v,w,A,T,C,L,O,k,N,B,q,E;const j=t[1].header,F=Sn(j,t,t[0],i2),U=t[1].alert,$=Sn(U,t,t[0],n2),X=t[1].dropdown1,K=Sn(X,t,t[0],e2),J=t[1].chart1,ot=Sn(J,t,t[0],t2),Pt=t[1].dropdown2,dt=Sn(Pt,t,t[0],Zw),ct=t[1].chart2,tt=Sn(ct,t,t[0],Qw),ut=t[1].dropdown3,M=Sn(ut,t,t[0],Jw),W=t[1].chart3,G=Sn(W,t,t[0],Xw),P=t[1].dropdown4,et=Sn(P,t,t[0],Kw),pt=t[1].chart4,bt=Sn(pt,t,t[0],Gw),mt=t[1].obplot,Y=Sn(mt,t,t[0],Yw),xt=t[1].slider1,ne=Sn(xt,t,t[0],Hw),ye=t[1].slider2,pe=Sn(ye,t,t[0],Ww),Rn=t[1].slider3,$e=Sn(Rn,t,t[0],qw),ur=t[1].slider4,nn=Sn(ur,t,t[0],zw);return{c(){e=rt("div"),n=rt("div"),F&&F.c(),i=be(),r=rt("div"),$&&$.c(),s=be(),a=rt("div"),K&&K.c(),u=be(),c=rt("div"),ot&&ot.c(),l=be(),f=rt("div"),dt&&dt.c(),h=be(),d=rt("div"),tt&&tt.c(),p=be(),m=rt("div"),M&&M.c(),g=be(),y=rt("div"),G&&G.c(),_=be(),b=rt("div"),et&&et.c(),x=be(),v=rt("div"),bt&&bt.c(),w=be(),A=rt("div"),Y&&Y.c(),T=be(),C=rt("div"),ne&&ne.c(),L=be(),O=rt("div"),pe&&pe.c(),k=be(),N=rt("div"),$e&&$e.c(),B=be(),q=rt("div"),nn&&nn.c(),this.h()},l(V){e=st(V,"DIV",{class:!0});var nt=at(e);n=st(nt,"DIV",{class:!0});var Oe=at(n);F&&F.l(Oe),Oe.forEach(H),i=_e(nt),r=st(nt,"DIV",{class:!0});var Ln=at(r);$&&$.l(Ln),Ln.forEach(H),s=_e(nt),a=st(nt,"DIV",{class:!0});var mi=at(a);K&&K.l(mi),mi.forEach(H),u=_e(nt),c=st(nt,"DIV",{class:!0});var gi=at(c);ot&&ot.l(gi),gi.forEach(H),l=_e(nt),f=st(nt,"DIV",{class:!0});var lo=at(f);dt&&dt.l(lo),lo.forEach(H),h=_e(nt),d=st(nt,"DIV",{class:!0});var D=at(d);tt&&tt.l(D),D.forEach(H),p=_e(nt),m=st(nt,"DIV",{class:!0});var ft=at(m);M&&M.l(ft),ft.forEach(H),g=_e(nt),y=st(nt,"DIV",{class:!0});var ie=at(y);G&&G.l(ie),ie.forEach(H),_=_e(nt),b=st(nt,"DIV",{class:!0});var re=at(b);et&&et.l(re),re.forEach(H),x=_e(nt),v=st(nt,"DIV",{class:!0});var yi=at(v);bt&&bt.l(yi),yi.forEach(H),w=_e(nt),A=st(nt,"DIV",{class:!0});var Vu=at(A);Y&&Y.l(Vu),Vu.forEach(H),T=_e(nt),C=st(nt,"DIV",{class:!0});var Fl=at(C);ne&&ne.l(Fl),Fl.forEach(H),L=_e(nt),O=st(nt,"DIV",{class:!0});var Dl=at(O);pe&&pe.l(Dl),Dl.forEach(H),k=_e(nt),N=st(nt,"DIV",{class:!0});var hb=at(N);$e&&$e.l(hb),hb.forEach(H),B=_e(nt),q=st(nt,"DIV",{class:!0});var db=at(q);nn&&nn.l(db),db.forEach(H),nt.forEach(H),this.h()},h(){z(n,"class","mx-auto"),z(r,"class",""),z(a,"class","mx-auto"),z(c,"class",""),z(f,"class","mx-auto"),z(d,"class",""),z(m,"class","mx-auto"),z(y,"class",""),z(b,"class","mx-auto"),z(v,"class",""),z(A,"class",""),z(C,"class",""),z(O,"class",""),z(N,"class",""),z(q,"class",""),z(e,"class","px-5 py-2 bg-white")},m(V,nt){Et(V,e,nt),Q(e,n),F&&F.m(n,null),Q(e,i),Q(e,r),$&&$.m(r,null),Q(e,s),Q(e,a),K&&K.m(a,null),Q(e,u),Q(e,c),ot&&ot.m(c,null),Q(e,l),Q(e,f),dt&&dt.m(f,null),Q(e,h),Q(e,d),tt&&tt.m(d,null),Q(e,p),Q(e,m),M&&M.m(m,null),Q(e,g),Q(e,y),G&&G.m(y,null),Q(e,_),Q(e,b),et&&et.m(b,null),Q(e,x),Q(e,v),bt&&bt.m(v,null),Q(e,w),Q(e,A),Y&&Y.m(A,null),Q(e,T),Q(e,C),ne&&ne.m(C,null),Q(e,L),Q(e,O),pe&&pe.m(O,null),Q(e,k),Q(e,N),$e&&$e.m(N,null),Q(e,B),Q(e,q),nn&&nn.m(q,null),E=!0},p(V,[nt]){F&&F.p&&(!E||nt&1)&&En(F,j,V,V[0],E?In(j,V[0],nt,fJ):An(V[0]),i2),$&&$.p&&(!E||nt&1)&&En($,U,V,V[0],E?In(U,V[0],nt,lJ):An(V[0]),n2),K&&K.p&&(!E||nt&1)&&En(K,X,V,V[0],E?In(X,V[0],nt,cJ):An(V[0]),e2),ot&&ot.p&&(!E||nt&1)&&En(ot,J,V,V[0],E?In(J,V[0],nt,uJ):An(V[0]),t2),dt&&dt.p&&(!E||nt&1)&&En(dt,Pt,V,V[0],E?In(Pt,V[0],nt,oJ):An(V[0]),Zw),tt&&tt.p&&(!E||nt&1)&&En(tt,ct,V,V[0],E?In(ct,V[0],nt,aJ):An(V[0]),Qw),M&&M.p&&(!E||nt&1)&&En(M,ut,V,V[0],E?In(ut,V[0],nt,sJ):An(V[0]),Jw),G&&G.p&&(!E||nt&1)&&En(G,W,V,V[0],E?In(W,V[0],nt,rJ):An(V[0]),Xw),et&&et.p&&(!E||nt&1)&&En(et,P,V,V[0],E?In(P,V[0],nt,iJ):An(V[0]),Kw),bt&&bt.p&&(!E||nt&1)&&En(bt,pt,V,V[0],E?In(pt,V[0],nt,nJ):An(V[0]),Gw),Y&&Y.p&&(!E||nt&1)&&En(Y,mt,V,V[0],E?In(mt,V[0],nt,eJ):An(V[0]),Yw),ne&&ne.p&&(!E||nt&1)&&En(ne,xt,V,V[0],E?In(xt,V[0],nt,tJ):An(V[0]),Hw),pe&&pe.p&&(!E||nt&1)&&En(pe,ye,V,V[0],E?In(ye,V[0],nt,ZX):An(V[0]),Ww),$e&&$e.p&&(!E||nt&1)&&En($e,Rn,V,V[0],E?In(Rn,V[0],nt,QX):An(V[0]),qw),nn&&nn.p&&(!E||nt&1)&&En(nn,ur,V,V[0],E?In(ur,V[0],nt,JX):An(V[0]),zw)},i(V){E||(je(F,V),je($,V),je(K,V),je(ot,V),je(dt,V),je(tt,V),je(M,V),je(G,V),je(et,V),je(bt,V),je(Y,V),je(ne,V),je(pe,V),je($e,V),je(nn,V),E=!0)},o(V){He(F,V),He($,V),He(K,V),He(ot,V),He(dt,V),He(tt,V),He(M,V),He(G,V),He(et,V),He(bt,V),He(Y,V),He(ne,V),He(pe,V),He($e,V),He(nn,V),E=!1},d(V){V&&H(e),F&&F.d(V),$&&$.d(V),K&&K.d(V),ot&&ot.d(V),dt&&dt.d(V),tt&&tt.d(V),M&&M.d(V),G&&G.d(V),et&&et.d(V),bt&&bt.d(V),Y&&Y.d(V),ne&&ne.d(V),pe&&pe.d(V),$e&&$e.d(V),nn&&nn.d(V)}}}function dJ(t,e,n){let{$$slots:i={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class pJ extends vn{constructor(e){super(),wn(this,e,dJ,hJ,xn,{})}}const nd="_theplot_";function Ol(t,e){t.className=t.className||nd,zt(t.width);let n=Ry(t),i=null;return n.tagName=="svg"&&n.classList.contains(t.className)?i=n:i=n.querySelector(`svg.${t.className}`),i.classList.add(nd),t.width||i.setAttribute("width","100%"),t.height||i.setAttribute("height","100%"),e.innerHTML="",e.appendChild(n),n}class bp{constructor({iact:e,magic:n,plot:i=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=e,this.magic=n,this.plot=i,i&&this.init(i)}load(e){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!e||si(e)){this.el.call(this.brush.clear);return}const{left:n,right:i}=e;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(i)])}}brushed({selection:e}){if(this.iact.isActive)if(!e)this.iact.set(this.defaultSelection);else{const[n,i]=e;this.iact.set({left:this.x.invert(n),right:this.x.invert(i)})}}brushstart({selection:e,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:e,sourceEvent:n}){this.iact.isActive&&(e||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(e){if(!this.iact.isActive)return;if(this.plot=e,this.x=e.scale("x"),this.y=e.scale("y"),this.y.range[0]<this.y.range[1]){let i=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=i}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=e.classList.contains(nd)?Wn(e):Wn(e.querySelector(`.${nd}`));this.brush=_F().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",i=>this.brushed(i)).on("start",i=>this.brushstart(i)).on("end",i=>this.brushended(i)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function mJ(t){let e,n;return{c(){e=rt("div"),n=rt("div"),this.h()},l(i){e=st(i,"DIV",{id:!0});var r=at(e);n=st(r,"DIV",{}),at(n).forEach(H),r.forEach(H),this.h()},h(){z(e,"id",t[0])},m(i,r){Et(i,e,r),Q(e,n),t[17](n)},p(i,[r]){r&1&&z(e,"id",i[0])},i:Wt,o:Wt,d(i){i&&H(e),t[17](null)}}}function gJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(y,N=>n(22,i=N)),y);t.$$.on_destroy.push(()=>r());let{id:a,name:u,magic:c,description:l,xAttr:f,yAttr:h,xLabel:d,xDomainMin:p=null,xDomainMax:m=null,brushX:g=Mn({}),dstore:y=Mn({}),interactions:_={brushX:g,dstore:y}}=e;s();let b,x=null,v={},w=[],A;function T(N,B){return B==="overlay"?(v=N,!0):!1}function C(N,B){!N||N.length===0||typeof B=="object"||(T(N,B)?console.debug("overlays"):w=N,jn(y,i={chart_data:w},i),O())}let{load:L=N=>A==null?void 0:A.load(N)}=e;function O(){n(3,p=p??Or(ds(U0(f),w))),n(4,m=m??Ri(ds(U0(f),w)));const N=Math.max(36,Math.min(w.length,20));let B={x:{domain:[+p,+m]},height:200,marginBottom:50,color:{scheme:"Tableau10",legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[so({ticks:N,fontSize:10}),Tu({fontSize:10}),Cy([p]),My([0]),B$(w,{x:f,y:h,marker:!0,strokeWidth:3}),bl(w,{x:f,y:0,text:d,rotate:90,dy:30}),Xd(v,{x1:"left",x2:"right",y2:Ri(G2(h,w)),fill:"key",color:"key",opacity:.2})]};x=Ol(B,b),g.isActive&&(A=A??new bp({iact:g,magic:c}),A.init(x))}function k(N){oa[N?"unshift":"push"](()=>{b=N,n(2,b)})}return t.$$set=N=>{"id"in N&&n(5,a=N.id),"name"in N&&n(0,u=N.name),"magic"in N&&n(6,c=N.magic),"description"in N&&n(7,l=N.description),"xAttr"in N&&n(8,f=N.xAttr),"yAttr"in N&&n(9,h=N.yAttr),"xLabel"in N&&n(10,d=N.xLabel),"xDomainMin"in N&&n(3,p=N.xDomainMin),"xDomainMax"in N&&n(4,m=N.xDomainMax),"brushX"in N&&n(11,g=N.brushX),"dstore"in N&&s(n(1,y=N.dstore)),"interactions"in N&&n(12,_=N.interactions),"load"in N&&n(15,L=N.load)},[u,y,b,p,m,a,c,l,f,h,d,g,_,T,C,L,O,k]}class yJ extends vn{constructor(e){super(),wn(this,e,gJ,mJ,xn,{id:5,name:0,magic:6,description:7,xAttr:8,yAttr:9,xLabel:10,xDomainMin:3,xDomainMax:4,brushX:11,dstore:1,interactions:12,overlay:13,render:14,load:15,update:16})}get id(){return this.$$.ctx[5]}set id(e){this.$$set({id:e}),Z()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),Z()}get magic(){return this.$$.ctx[6]}set magic(e){this.$$set({magic:e}),Z()}get description(){return this.$$.ctx[7]}set description(e){this.$$set({description:e}),Z()}get xAttr(){return this.$$.ctx[8]}set xAttr(e){this.$$set({xAttr:e}),Z()}get yAttr(){return this.$$.ctx[9]}set yAttr(e){this.$$set({yAttr:e}),Z()}get xLabel(){return this.$$.ctx[10]}set xLabel(e){this.$$set({xLabel:e}),Z()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),Z()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),Z()}get brushX(){return this.$$.ctx[11]}set brushX(e){this.$$set({brushX:e}),Z()}get dstore(){return this.$$.ctx[1]}set dstore(e){this.$$set({dstore:e}),Z()}get interactions(){return this.$$.ctx[12]}set interactions(e){this.$$set({interactions:e}),Z()}get overlay(){return this.$$.ctx[13]}get render(){return this.$$.ctx[14]}get load(){return this.$$.ctx[15]}set load(e){this.$$set({load:e}),Z()}get update(){return this.$$.ctx[16]}}function r2(t){return Object.prototype.toString.call(t)==="[object Date]"}function mg(t,e,n,i){if(typeof n=="number"||r2(n)){const r=i-n,s=(n-e)/(t.dt||1/60),a=t.opts.stiffness*r,u=t.opts.damping*s,c=(a-u)*t.inv_mass,l=(s+c)*t.dt;return Math.abs(l)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,r2(n)?new Date(n.getTime()+l):n+l)}else{if(Array.isArray(n))return n.map((r,s)=>mg(t,e[s],n[s],i[s]));if(typeof n=="object"){const r={};for(const s in n)r[s]=mg(t,e[s],n[s],i[s]);return r}else throw new Error(`Cannot spring ${typeof n} values`)}}function bJ(t,e={}){const n=Mn(t),{stiffness:i=.15,damping:r=.8,precision:s=.01}=e;let a,u,c,l=t,f=t,h=1,d=0,p=!1;function m(y,_={}){f=y;const b=c={};return t==null||_.hard||g.stiffness>=1&&g.damping>=1?(p=!0,a=pb(),l=y,n.set(t=f),Promise.resolve()):(_.soft&&(d=1/((_.soft===!0?.5:+_.soft)*60),h=0),u||(a=pb(),p=!1,u=nk(x=>{if(p)return p=!1,u=null,!1;h=Math.min(h+d,1);const v={inv_mass:h,opts:g,settled:!0,dt:(x-a)*60/1e3},w=mg(v,l,t,f);return a=x,l=t,n.set(t=w),v.settled&&(u=null),!v.settled})),new Promise(x=>{u.promise.then(()=>{b===c&&x()})}))}const g={set:m,update:(y,_)=>m(y(f,t),_),subscribe:n.subscribe,stiffness:i,damping:r,precision:s};return g}function s2(t,e,n){const i=t.slice();return i[28]=e[n],i[30]=n,i}function a2(t){let e,n,i,r,s=(t[6]==="label"||t[7]==="label")&&o2(t);return{c(){e=rt("span"),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0,style:!0});var u=at(e);s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","pip first"),z(e,"style",n=t[14]+": 0%;"),_t(e,"selected",t[18](t[0])),_t(e,"in-range",t[17](t[0]))},m(a,u){Et(a,e,u),s&&s.m(e,null),i||(r=[ce(e,"click",function(){Ws(t[21](t[0]))&&t[21](t[0]).apply(this,arguments)}),ce(e,"touchend",vc(function(){Ws(t[21](t[0]))&&t[21](t[0]).apply(this,arguments)}))],i=!0)},p(a,u){t=a,t[6]==="label"||t[7]==="label"?s?s.p(t,u):(s=o2(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),u&16384&&n!==(n=t[14]+": 0%;")&&z(e,"style",n),u&262145&&_t(e,"selected",t[18](t[0])),u&131073&&_t(e,"in-range",t[17](t[0]))},d(a){a&&H(e),s&&s.d(),i=!1,ua(r)}}}function o2(t){let e,n=t[12](t[16](t[0]),0,0)+"",i,r=t[10]&&u2(t),s=t[11]&&c2(t);return{c(){e=rt("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0});var u=at(e);r&&r.l(u),i=Ce(u,n),s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","pipVal")},m(a,u){Et(a,e,u),r&&r.m(e,null),Q(e,i),s&&s.m(e,null)},p(a,u){a[10]?r?r.p(a,u):(r=u2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u&69633&&n!==(n=a[12](a[16](a[0]),0,0)+"")&&Je(i,n),a[11]?s?s.p(a,u):(s=c2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&H(e),r&&r.d(),s&&s.d()}}}function u2(t){let e,n;return{c(){e=rt("span"),n=ke(t[10]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[10]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-prefix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&H(e)}}}function c2(t){let e,n;return{c(){e=rt("span"),n=ke(t[11]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[11]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-suffix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&H(e)}}}function l2(t){let e,n=Array(t[20]+1),i=[];for(let r=0;r<n.length;r+=1)i[r]=m2(s2(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Hs()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);e=Hs()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);Et(r,e,s)},p(r,s){if(s&4120131){n=Array(r[20]+1);let a;for(a=0;a<n.length;a+=1){const u=s2(r,n,a);i[a]?i[a].p(u,s):(i[a]=m2(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){sd(i,r),r&&H(e)}}}function f2(t){let e,n,i,r,s,a=(t[6]==="label"||t[9]==="label")&&h2(t);return{c(){e=rt("span"),a&&a.c(),n=be(),this.h()},l(u){e=st(u,"SPAN",{class:!0,style:!0});var c=at(e);a&&a.l(c),n=_e(c),c.forEach(H),this.h()},h(){z(e,"class","pip"),z(e,"style",i=t[14]+": "+t[15](t[19](t[30]))+"%;"),_t(e,"selected",t[18](t[19](t[30]))),_t(e,"in-range",t[17](t[19](t[30])))},m(u,c){Et(u,e,c),a&&a.m(e,null),Q(e,n),r||(s=[ce(e,"click",function(){Ws(t[21](t[19](t[30])))&&t[21](t[19](t[30])).apply(this,arguments)}),ce(e,"touchend",vc(function(){Ws(t[21](t[19](t[30])))&&t[21](t[19](t[30])).apply(this,arguments)}))],r=!0)},p(u,c){t=u,t[6]==="label"||t[9]==="label"?a?a.p(t,c):(a=h2(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),c&573440&&i!==(i=t[14]+": "+t[15](t[19](t[30]))+"%;")&&z(e,"style",i),c&786432&&_t(e,"selected",t[18](t[19](t[30]))),c&655360&&_t(e,"in-range",t[17](t[19](t[30])))},d(u){u&&H(e),a&&a.d(),r=!1,ua(s)}}}function h2(t){let e,n=t[12](t[19](t[30]),t[30],t[15](t[19](t[30])))+"",i,r=t[10]&&d2(t),s=t[11]&&p2(t);return{c(){e=rt("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0});var u=at(e);r&&r.l(u),i=Ce(u,n),s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","pipVal")},m(a,u){Et(a,e,u),r&&r.m(e,null),Q(e,i),s&&s.m(e,null)},p(a,u){a[10]?r?r.p(a,u):(r=d2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u&561152&&n!==(n=a[12](a[19](a[30]),a[30],a[15](a[19](a[30])))+"")&&Je(i,n),a[11]?s?s.p(a,u):(s=p2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&H(e),r&&r.d(),s&&s.d()}}}function d2(t){let e,n;return{c(){e=rt("span"),n=ke(t[10]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[10]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-prefix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&H(e)}}}function p2(t){let e,n;return{c(){e=rt("span"),n=ke(t[11]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[11]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-suffix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&H(e)}}}function m2(t){let e=t[19](t[30])!==t[0]&&t[19](t[30])!==t[1],n,i=e&&f2(t);return{c(){i&&i.c(),n=Hs()},l(r){i&&i.l(r),n=Hs()},m(r,s){i&&i.m(r,s),Et(r,n,s)},p(r,s){s&524291&&(e=r[19](r[30])!==r[0]&&r[19](r[30])!==r[1]),e?i?i.p(r,s):(i=f2(r),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(r){i&&i.d(r),r&&H(n)}}}function g2(t){let e,n,i,r,s=(t[6]==="label"||t[8]==="label")&&y2(t);return{c(){e=rt("span"),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0,style:!0});var u=at(e);s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","pip last"),z(e,"style",n=t[14]+": 100%;"),_t(e,"selected",t[18](t[1])),_t(e,"in-range",t[17](t[1]))},m(a,u){Et(a,e,u),s&&s.m(e,null),i||(r=[ce(e,"click",function(){Ws(t[21](t[1]))&&t[21](t[1]).apply(this,arguments)}),ce(e,"touchend",vc(function(){Ws(t[21](t[1]))&&t[21](t[1]).apply(this,arguments)}))],i=!0)},p(a,u){t=a,t[6]==="label"||t[8]==="label"?s?s.p(t,u):(s=y2(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),u&16384&&n!==(n=t[14]+": 100%;")&&z(e,"style",n),u&262146&&_t(e,"selected",t[18](t[1])),u&131074&&_t(e,"in-range",t[17](t[1]))},d(a){a&&H(e),s&&s.d(),i=!1,ua(r)}}}function y2(t){let e,n=t[12](t[16](t[1]),t[20],100)+"",i,r=t[10]&&b2(t),s=t[11]&&_2(t);return{c(){e=rt("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0});var u=at(e);r&&r.l(u),i=Ce(u,n),s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","pipVal")},m(a,u){Et(a,e,u),r&&r.m(e,null),Q(e,i),s&&s.m(e,null)},p(a,u){a[10]?r?r.p(a,u):(r=b2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u&1118210&&n!==(n=a[12](a[16](a[1]),a[20],100)+"")&&Je(i,n),a[11]?s?s.p(a,u):(s=_2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&H(e),r&&r.d(),s&&s.d()}}}function b2(t){let e,n;return{c(){e=rt("span"),n=ke(t[10]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[10]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-prefix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&H(e)}}}function _2(t){let e,n;return{c(){e=rt("span"),n=ke(t[11]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[11]),r.forEach(H),this.h()},h(){z(e,"class","pipVal-suffix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&H(e)}}}function _J(t){let e,n,i,r=(t[6]&&t[7]!==!1||t[7])&&a2(t),s=(t[6]&&t[9]!==!1||t[9])&&l2(t),a=(t[6]&&t[8]!==!1||t[8])&&g2(t);return{c(){e=rt("div"),r&&r.c(),n=be(),s&&s.c(),i=be(),a&&a.c(),this.h()},l(u){e=st(u,"DIV",{class:!0});var c=at(e);r&&r.l(c),n=_e(c),s&&s.l(c),i=_e(c),a&&a.l(c),c.forEach(H),this.h()},h(){z(e,"class","rangePips"),_t(e,"disabled",t[5]),_t(e,"hoverable",t[4]),_t(e,"vertical",t[2]),_t(e,"reversed",t[3]),_t(e,"focus",t[13])},m(u,c){Et(u,e,c),r&&r.m(e,null),Q(e,n),s&&s.m(e,null),Q(e,i),a&&a.m(e,null)},p(u,[c]){u[6]&&u[7]!==!1||u[7]?r?r.p(u,c):(r=a2(u),r.c(),r.m(e,n)):r&&(r.d(1),r=null),u[6]&&u[9]!==!1||u[9]?s?s.p(u,c):(s=l2(u),s.c(),s.m(e,i)):s&&(s.d(1),s=null),u[6]&&u[8]!==!1||u[8]?a?a.p(u,c):(a=g2(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null),c&32&&_t(e,"disabled",u[5]),c&16&&_t(e,"hoverable",u[4]),c&4&&_t(e,"vertical",u[2]),c&8&&_t(e,"reversed",u[3]),c&8192&&_t(e,"focus",u[13])},i:Wt,o:Wt,d(u){u&&H(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function vJ(t,e,n){let i,r,s,a,u,{range:c=!1}=e,{min:l=0}=e,{max:f=100}=e,{step:h=1}=e,{values:d=[(f+l)/2]}=e,{vertical:p=!1}=e,{reversed:m=!1}=e,{hoverable:g=!0}=e,{disabled:y=!1}=e,{pipstep:_=void 0}=e,{all:b=!0}=e,{first:x=void 0}=e,{last:v=void 0}=e,{rest:w=void 0}=e,{prefix:A=""}=e,{suffix:T=""}=e,{formatter:C=(E,j)=>E}=e,{focus:L=void 0}=e,{orientationStart:O=void 0}=e,{percentOf:k=void 0}=e,{moveHandle:N=void 0}=e,{fixFloat:B=void 0}=e;function q(E){y||N(void 0,E)}return t.$$set=E=>{"range"in E&&n(22,c=E.range),"min"in E&&n(0,l=E.min),"max"in E&&n(1,f=E.max),"step"in E&&n(23,h=E.step),"values"in E&&n(24,d=E.values),"vertical"in E&&n(2,p=E.vertical),"reversed"in E&&n(3,m=E.reversed),"hoverable"in E&&n(4,g=E.hoverable),"disabled"in E&&n(5,y=E.disabled),"pipstep"in E&&n(25,_=E.pipstep),"all"in E&&n(6,b=E.all),"first"in E&&n(7,x=E.first),"last"in E&&n(8,v=E.last),"rest"in E&&n(9,w=E.rest),"prefix"in E&&n(10,A=E.prefix),"suffix"in E&&n(11,T=E.suffix),"formatter"in E&&n(12,C=E.formatter),"focus"in E&&n(13,L=E.focus),"orientationStart"in E&&n(14,O=E.orientationStart),"percentOf"in E&&n(15,k=E.percentOf),"moveHandle"in E&&n(26,N=E.moveHandle),"fixFloat"in E&&n(16,B=E.fixFloat)},t.$$.update=()=>{t.$$.dirty&41943047&&n(27,i=_||((f-l)/h>=(p?50:100)?(f-l)/(p?10:20):1)),t.$$.dirty&142606339&&n(20,r=parseInt((f-l)/(h*i),10)),t.$$.dirty&142671873&&n(19,s=function(E){return B(l+E*h*i)}),t.$$.dirty&16842752&&n(18,a=function(E){return d.some(j=>B(j)===B(E))}),t.$$.dirty&20971520&&n(17,u=function(E){if(c==="min")return d[0]>E;if(c==="max")return d[0]<E;if(c)return d[0]<E&&d[1]>E})},[l,f,p,m,g,y,b,x,v,w,A,T,C,L,O,k,B,u,a,s,r,q,c,h,d,_,N,i]}class wJ extends vn{constructor(e){super(),wn(this,e,vJ,_J,xn,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function v2(t,e,n){const i=t.slice();return i[64]=e[n],i[66]=n,i}function w2(t){let e,n=t[21](t[64],t[66],t[23](t[64]))+"",i,r=t[18]&&x2(t),s=t[19]&&S2(t);return{c(){e=rt("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=st(a,"SPAN",{class:!0});var u=at(e);r&&r.l(u),i=Ce(u,n),s&&s.l(u),u.forEach(H),this.h()},h(){z(e,"class","rangeFloat")},m(a,u){Et(a,e,u),r&&r.m(e,null),Q(e,i),s&&s.m(e,null)},p(a,u){a[18]?r?r.p(a,u):(r=x2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u[0]&10485761&&n!==(n=a[21](a[64],a[66],a[23](a[64]))+"")&&Je(i,n),a[19]?s?s.p(a,u):(s=S2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&H(e),r&&r.d(),s&&s.d()}}}function x2(t){let e,n;return{c(){e=rt("span"),n=ke(t[18]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[18]),r.forEach(H),this.h()},h(){z(e,"class","rangeFloat-prefix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r[0]&262144&&Je(n,i[18])},d(i){i&&H(e)}}}function S2(t){let e,n;return{c(){e=rt("span"),n=ke(t[19]),this.h()},l(i){e=st(i,"SPAN",{class:!0});var r=at(e);n=Ce(r,t[19]),r.forEach(H),this.h()},h(){z(e,"class","rangeFloat-suffix")},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r[0]&524288&&Je(n,i[19])},d(i){i&&H(e)}}}function E2(t){let e,n,i,r,s,a,u,c,l,f,h,d,p=t[7]&&w2(t);return{c(){e=rt("span"),n=rt("span"),i=be(),p&&p.c(),this.h()},l(m){e=st(m,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var g=at(e);n=st(g,"SPAN",{class:!0}),at(n).forEach(H),i=_e(g),p&&p.l(g),g.forEach(H),this.h()},h(){z(n,"class","rangeNub"),z(e,"role","slider"),z(e,"class","rangeHandle"),z(e,"data-handle",t[66]),z(e,"style",r=t[28]+": "+t[29][t[66]]+"%; z-index: "+(t[26]===t[66]?3:2)+";"),z(e,"aria-valuemin",s=t[2]===!0&&t[66]===1?t[0][0]:t[3]),z(e,"aria-valuemax",a=t[2]===!0&&t[66]===0?t[0][1]:t[4]),z(e,"aria-valuenow",u=t[64]),z(e,"aria-valuetext",c=""+(t[18]+t[21](t[64],t[66],t[23](t[64]))+t[19])),z(e,"aria-orientation",l=t[6]?"vertical":"horizontal"),z(e,"aria-disabled",t[10]),z(e,"disabled",t[10]),z(e,"tabindex",f=t[10]?-1:0),_t(e,"active",t[24]&&t[26]===t[66]),_t(e,"press",t[25]&&t[26]===t[66])},m(m,g){Et(m,e,g),Q(e,n),Q(e,i),p&&p.m(e,null),h||(d=[ce(e,"blur",t[34]),ce(e,"focus",t[35]),ce(e,"keydown",t[36])],h=!0)},p(m,g){m[7]?p?p.p(m,g):(p=w2(m),p.c(),p.m(e,null)):p&&(p.d(1),p=null),g[0]&872415232&&r!==(r=m[28]+": "+m[29][m[66]]+"%; z-index: "+(m[26]===m[66]?3:2)+";")&&z(e,"style",r),g[0]&13&&s!==(s=m[2]===!0&&m[66]===1?m[0][0]:m[3])&&z(e,"aria-valuemin",s),g[0]&21&&a!==(a=m[2]===!0&&m[66]===0?m[0][1]:m[4])&&z(e,"aria-valuemax",a),g[0]&1&&u!==(u=m[64])&&z(e,"aria-valuenow",u),g[0]&11272193&&c!==(c=""+(m[18]+m[21](m[64],m[66],m[23](m[64]))+m[19]))&&z(e,"aria-valuetext",c),g[0]&64&&l!==(l=m[6]?"vertical":"horizontal")&&z(e,"aria-orientation",l),g[0]&1024&&z(e,"aria-disabled",m[10]),g[0]&1024&&z(e,"disabled",m[10]),g[0]&1024&&f!==(f=m[10]?-1:0)&&z(e,"tabindex",f),g[0]&83886080&&_t(e,"active",m[24]&&m[26]===m[66]),g[0]&100663296&&_t(e,"press",m[25]&&m[26]===m[66])},d(m){m&&H(e),p&&p.d(),h=!1,ua(d)}}}function A2(t){let e,n;return{c(){e=rt("span"),this.h()},l(i){e=st(i,"SPAN",{class:!0,style:!0}),at(e).forEach(H),this.h()},h(){z(e,"class","rangeBar"),z(e,"style",n=t[28]+": "+t[32](t[29])+"%; "+t[27]+": "+t[33](t[29])+"%;")},m(i,r){Et(i,e,r)},p(i,r){r[0]&939524096&&n!==(n=i[28]+": "+i[32](i[29])+"%; "+i[27]+": "+i[33](i[29])+"%;")&&z(e,"style",n)},d(i){i&&H(e)}}}function I2(t){let e,n;return e=new wJ({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[28],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[24],percentOf:t[23],moveHandle:t[31],fixFloat:t[30]}}),{c(){V2(e.$$.fragment)},l(i){$2(e.$$.fragment,i)},m(i,r){j2(e,i,r),n=!0},p(i,r){const s={};r[0]&1&&(s.values=i[0]),r[0]&8&&(s.min=i[3]),r[0]&16&&(s.max=i[4]),r[0]&32&&(s.step=i[5]),r[0]&4&&(s.range=i[2]),r[0]&64&&(s.vertical=i[6]),r[0]&256&&(s.reversed=i[8]),r[0]&268435456&&(s.orientationStart=i[28]),r[0]&512&&(s.hoverable=i[9]),r[0]&1024&&(s.disabled=i[10]),r[0]&8192&&(s.all=i[13]),r[0]&16384&&(s.first=i[14]),r[0]&32768&&(s.last=i[15]),r[0]&65536&&(s.rest=i[16]),r[0]&4096&&(s.pipstep=i[12]),r[0]&262144&&(s.prefix=i[18]),r[0]&524288&&(s.suffix=i[19]),r[0]&1048576&&(s.formatter=i[20]),r[0]&16777216&&(s.focus=i[24]),r[0]&8388608&&(s.percentOf=i[23]),e.$set(s)},i(i){n||(je(e.$$.fragment,i),n=!0)},o(i){He(e.$$.fragment,i),n=!1},d(i){z2(e,i)}}}function xJ(t){let e,n,i,r,s,a,u=t[0],c=[];for(let h=0;h<u.length;h+=1)c[h]=E2(v2(t,u,h));let l=t[2]&&A2(t),f=t[11]&&I2(t);return{c(){e=rt("div");for(let h=0;h<c.length;h+=1)c[h].c();n=be(),l&&l.c(),i=be(),f&&f.c(),this.h()},l(h){e=st(h,"DIV",{id:!0,class:!0});var d=at(e);for(let p=0;p<c.length;p+=1)c[p].l(d);n=_e(d),l&&l.l(d),i=_e(d),f&&f.l(d),d.forEach(H),this.h()},h(){z(e,"id",t[17]),z(e,"class","rangeSlider"),_t(e,"range",t[2]),_t(e,"disabled",t[10]),_t(e,"hoverable",t[9]),_t(e,"vertical",t[6]),_t(e,"reversed",t[8]),_t(e,"focus",t[24]),_t(e,"min",t[2]==="min"),_t(e,"max",t[2]==="max"),_t(e,"pips",t[11]),_t(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(h,d){Et(h,e,d);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(e,null);Q(e,n),l&&l.m(e,null),Q(e,i),f&&f.m(e,null),t[50](e),r=!0,s||(a=[ce(window,"mousedown",t[39]),ce(window,"touchstart",t[39]),ce(window,"mousemove",t[40]),ce(window,"touchmove",t[40]),ce(window,"mouseup",t[41]),ce(window,"touchend",t[42]),ce(window,"keydown",t[43]),ce(e,"mousedown",t[37]),ce(e,"mouseup",t[38]),ce(e,"touchstart",vc(t[37])),ce(e,"touchend",vc(t[38]))],s=!0)},p(h,d){if(d[0]&934020317|d[1]&56){u=h[0];let p;for(p=0;p<u.length;p+=1){const m=v2(h,u,p);c[p]?c[p].p(m,d):(c[p]=E2(m),c[p].c(),c[p].m(e,n))}for(;p<c.length;p+=1)c[p].d(1);c.length=u.length}h[2]?l?l.p(h,d):(l=A2(h),l.c(),l.m(e,i)):l&&(l.d(1),l=null),h[11]?f?(f.p(h,d),d[0]&2048&&je(f,1)):(f=I2(h),f.c(),je(f,1),f.m(e,null)):f&&(ik(),He(f,1,1,()=>{f=null}),rk()),(!r||d[0]&131072)&&z(e,"id",h[17]),(!r||d[0]&4)&&_t(e,"range",h[2]),(!r||d[0]&1024)&&_t(e,"disabled",h[10]),(!r||d[0]&512)&&_t(e,"hoverable",h[9]),(!r||d[0]&64)&&_t(e,"vertical",h[6]),(!r||d[0]&256)&&_t(e,"reversed",h[8]),(!r||d[0]&16777216)&&_t(e,"focus",h[24]),(!r||d[0]&4)&&_t(e,"min",h[2]==="min"),(!r||d[0]&4)&&_t(e,"max",h[2]==="max"),(!r||d[0]&2048)&&_t(e,"pips",h[11]),(!r||d[0]&122880)&&_t(e,"pip-labels",h[13]==="label"||h[14]==="label"||h[15]==="label"||h[16]==="label")},i(h){r||(je(f),r=!0)},o(h){He(f),r=!1},d(h){h&&H(e),sd(c,h),l&&l.d(),f&&f.d(),t[50](null),s=!1,ua(a)}}}function T2(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function R0(t){return t.type.includes("touch")?t.touches[0]:t}function SJ(t,e,n){let i,r,s,a,u,c,l=Wt,f=()=>(l(),l=kr(M,D=>n(29,c=D)),M);t.$$.on_destroy.push(()=>l());let{slider:h=void 0}=e,{range:d=!1}=e,{pushy:p=!1}=e,{min:m=0}=e,{max:g=100}=e,{step:y=1}=e,{values:_=[(g+m)/2]}=e,{vertical:b=!1}=e,{float:x=!1}=e,{reversed:v=!1}=e,{hoverable:w=!0}=e,{disabled:A=!1}=e,{pips:T=!1}=e,{pipstep:C=void 0}=e,{all:L=void 0}=e,{first:O=void 0}=e,{last:k=void 0}=e,{rest:N=void 0}=e,{id:B=void 0}=e,{prefix:q=""}=e,{suffix:E=""}=e,{formatter:j=(D,ft,ie)=>D}=e,{handleFormatter:F=j}=e,{precision:U=2}=e,{springValues:$={stiffness:.15,damping:.4}}=e;const X=sk();let K=0,J=!1,ot=!1,Pt=!1,dt=!1,ct=_.length-1,tt,ut,M;const W=D=>parseFloat(D.toFixed(U));function G(D){const ft=h.querySelectorAll(".handle"),ie=Array.prototype.includes.call(ft,D),re=Array.prototype.some.call(ft,yi=>yi.contains(D));return ie||re}function P(D){return d==="min"||d==="max"?D.slice(0,1):d?D.slice(0,2):D}function et(){return h.getBoundingClientRect()}function pt(D){const ft=et();let ie=0,re=0,yi=0;b?(ie=D.clientY-ft.top,re=ie/ft.height*100,re=v?re:100-re):(ie=D.clientX-ft.left,re=ie/ft.width*100,re=v?100-re:re),yi=(g-m)/100*re+m;let Vu;return d===!0&&_[0]===_[1]?yi>_[1]?1:0:(Vu=_.indexOf([..._].sort((Fl,Dl)=>Math.abs(yi-Fl)-Math.abs(yi-Dl))[0]),Vu)}function bt(D){const ft=et();let ie=0,re=0,yi=0;b?(ie=D.clientY-ft.top,re=ie/ft.height*100,re=v?re:100-re):(ie=D.clientX-ft.left,re=ie/ft.width*100,re=v?100-re:re),yi=(g-m)/100*re+m,mt(ct,yi)}function mt(D,ft){return ft=s(ft),typeof D>"u"&&(D=ct),d&&(D===0&&ft>_[1]?p?n(0,_[1]=ft,_):ft=_[1]:D===1&&ft<_[0]&&(p?n(0,_[0]=ft,_):ft=_[0])),_[D]!==ft&&n(0,_[D]=ft,_),ut!==ft&&(gi(),ut=ft),ft}function Y(D){return d==="min"?0:D[0]}function xt(D){return d==="max"?0:d==="min"?100-D[0]:100-D[1]}function ne(D){dt&&(n(24,J=!1),ot=!1,n(25,Pt=!1))}function ye(D){A||(n(26,ct=T2(D.target)),n(24,J=!0))}function pe(D){if(!A){const ft=T2(D.target);let ie=D.ctrlKey||D.metaKey||D.shiftKey?y*10:y,re=!1;switch(D.key){case"PageDown":ie*=10;case"ArrowRight":case"ArrowUp":mt(ft,_[ft]+ie),re=!0;break;case"PageUp":ie*=10;case"ArrowLeft":case"ArrowDown":mt(ft,_[ft]-ie),re=!0;break;case"Home":mt(ft,m),re=!0;break;case"End":mt(ft,g),re=!0;break}re&&(D.preventDefault(),D.stopPropagation())}}function Rn(D){if(!A){const ft=D.target,ie=R0(D);n(24,J=!0),ot=!0,n(25,Pt=!0),n(26,ct=pt(ie)),tt=ut=s(_[ct]),Ln(),D.type==="touchstart"&&!ft.matches(".pipVal")&&bt(ie)}}function $e(D){D.type==="touchend"&&mi(),n(25,Pt=!1)}function ur(D){dt=!1,J&&D.target!==h&&!h.contains(D.target)&&n(24,J=!1)}function nn(D){A||ot&&bt(R0(D))}function V(D){if(!A){const ft=D.target;ot&&((ft===h||h.contains(ft))&&(n(24,J=!0),!G(ft)&&!ft.matches(".pipVal")&&bt(R0(D))),mi())}ot=!1,n(25,Pt=!1)}function nt(D){ot=!1,n(25,Pt=!1)}function Oe(D){A||(D.target===h||h.contains(D.target))&&(dt=!0)}function Ln(){!A&&X("start",{activeHandle:ct,value:tt,values:_.map(D=>s(D))})}function mi(){!A&&X("stop",{activeHandle:ct,startValue:tt,value:_[ct],values:_.map(D=>s(D))})}function gi(){!A&&X("change",{activeHandle:ct,startValue:tt,previousValue:typeof ut>"u"?tt:ut,value:_[ct],values:_.map(D=>s(D))})}function lo(D){oa[D?"unshift":"push"](()=>{h=D,n(1,h)})}return t.$$set=D=>{"slider"in D&&n(1,h=D.slider),"range"in D&&n(2,d=D.range),"pushy"in D&&n(44,p=D.pushy),"min"in D&&n(3,m=D.min),"max"in D&&n(4,g=D.max),"step"in D&&n(5,y=D.step),"values"in D&&n(0,_=D.values),"vertical"in D&&n(6,b=D.vertical),"float"in D&&n(7,x=D.float),"reversed"in D&&n(8,v=D.reversed),"hoverable"in D&&n(9,w=D.hoverable),"disabled"in D&&n(10,A=D.disabled),"pips"in D&&n(11,T=D.pips),"pipstep"in D&&n(12,C=D.pipstep),"all"in D&&n(13,L=D.all),"first"in D&&n(14,O=D.first),"last"in D&&n(15,k=D.last),"rest"in D&&n(16,N=D.rest),"id"in D&&n(17,B=D.id),"prefix"in D&&n(18,q=D.prefix),"suffix"in D&&n(19,E=D.suffix),"formatter"in D&&n(20,j=D.formatter),"handleFormatter"in D&&n(21,F=D.handleFormatter),"precision"in D&&n(45,U=D.precision),"springValues"in D&&n(46,$=D.springValues)},t.$$.update=()=>{t.$$.dirty[0]&24&&n(49,r=function(D){return D<=m?m:D>=g?g:D}),t.$$.dirty[0]&56|t.$$.dirty[1]&262144&&n(48,s=function(D){if(D<=m)return W(m);if(D>=g)return W(g);let ft=(D-m)%y,ie=D-ft;return Math.abs(ft)*2>=y&&(ie+=ft>0?y:-y),ie=r(ie),W(ie)}),t.$$.dirty[0]&24&&n(23,i=function(D){let ft=(D-m)/(g-m)*100;return isNaN(ft)||ft<=0?0:ft>=100?100:W(ft)}),t.$$.dirty[0]&12582937|t.$$.dirty[1]&229376&&(Array.isArray(_)||(n(0,_=[(g+m)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),n(0,_=P(_.map(D=>s(D)))),K!==_.length?f(n(22,M=bJ(_.map(D=>i(D)),$))):M.set(_.map(D=>i(D))),n(47,K=_.length)),t.$$.dirty[0]&320&&n(28,a=b?v?"top":"bottom":v?"right":"left"),t.$$.dirty[0]&320&&n(27,u=b?v?"bottom":"top":v?"left":"right")},[_,h,d,m,g,y,b,x,v,w,A,T,C,L,O,k,N,B,q,E,j,F,M,i,J,Pt,ct,u,a,c,W,mt,Y,xt,ne,ye,pe,Rn,$e,ur,nn,V,nt,Oe,p,U,$,K,s,r,lo]}class EJ extends vn{constructor(e){super(),wn(this,e,SJ,xJ,xn,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function k2(t){let e,n;return{c(){e=rt("p"),n=ke(t[2])},l(i){e=st(i,"P",{});var r=at(e);n=Ce(r,t[2]),r.forEach(H)},m(i,r){Et(i,e,r),Q(e,n)},p(i,r){r&4&&Je(n,i[2])},d(i){i&&H(e)}}}function AJ(t){let e,n,i,r,s,a=t[2]&&k2(t);function u(l){t[14](l)}let c={min:+t[0],max:+t[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return t[6]!==void 0&&(c.values=t[6]),i=new EJ({props:c}),oa.push(()=>ak(i,"values",u)),i.$on("start",t[8]),i.$on("change",t[7]),i.$on("stop",t[9]),{c(){e=rt("div"),a&&a.c(),n=be(),V2(i.$$.fragment),this.h()},l(l){e=st(l,"DIV",{class:!0,id:!0});var f=at(e);a&&a.l(f),n=_e(f),$2(i.$$.fragment,f),f.forEach(H),this.h()},h(){z(e,"class","px-[1%] py-[1%] ml-[2.1%]"),z(e,"id","slider")},m(l,f){Et(l,e,f),a&&a.m(e,null),Q(e,n),j2(i,e,null),s=!0},p(l,[f]){l[2]?a?a.p(l,f):(a=k2(l),a.c(),a.m(e,n)):a&&(a.d(1),a=null);const h={};f&1&&(h.min=+l[0]),f&2&&(h.max=+l[1]),!r&&f&64&&(r=!0,h.values=l[6],ok(()=>r=!1)),i.$set(h)},i(l){s||(je(i.$$.fragment,l),s=!0)},o(l){He(i.$$.fragment,l),s=!1},d(l){l&&H(e),a&&a.d(),z2(i)}}}function IJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(b,k=>n(15,i=k)),b),a,u=Wt,c=()=>(u(),u=kr(y,k=>n(16,a=k)),y),l,f=Wt,h=()=>(f(),f=kr(_,k=>n(17,l=k)),_);t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>u()),t.$$.on_destroy.push(()=>f());let{min:d=0,max:p=100,id:m,description:g}=e,{change:y=Mn({})}=e;c();let{stop:_=Mn({})}=e;h();let{drag:b=Mn({})}=e;s();let{interactions:x={change:y,stop:_,drag:b}}=e;uk("dims");let v=[d,p];[...v];function w(k){console.log("Slider.render",k),k&&we(Array,k)&&si(k.filter(N=>N===void 0))&&(n(6,v=[+k[0].min,+k[0].max]),n(0,[d,p]=v,d,n(1,p)),console.log("Slider.render.to",v)),v&&v.length>=2&&T()}function A(k,N){console.log("Slider.load",k,N),!(!zo("left")(k)||!zo("right")(k))&&(k=k??{left:d,right:p},n(6,v=[k.left??d,k.right??p]),T())}function T(){y.isActive&&jn(y,a={left:v[0],right:v[1]},a),b.isActive&&jn(b,i={left:v[0],right:v[1]},i)}function C(){b.isActive&&jn(b,i={left:v[0],right:v[1]},i)}function L(){_.isActive&&jn(_,l={left:v[0],right:v[1]},l),y.isActive&&jn(y,a={left:v[0],right:v[1]},a),b.isActive&&jn(b,i={left:v[0],right:v[1]},i)}function O(k){v=k,n(6,v)}return t.$$set=k=>{"min"in k&&n(0,d=k.min),"max"in k&&n(1,p=k.max),"id"in k&&n(10,m=k.id),"description"in k&&n(2,g=k.description),"change"in k&&c(n(3,y=k.change)),"stop"in k&&h(n(4,_=k.stop)),"drag"in k&&s(n(5,b=k.drag)),"interactions"in k&&n(11,x=k.interactions)},[d,p,g,y,_,b,v,T,C,L,m,x,w,A,O]}class TJ extends vn{constructor(e){super(),wn(this,e,IJ,AJ,xn,{min:0,max:1,id:10,description:2,change:3,stop:4,drag:5,interactions:11,render:12,load:13})}get min(){return this.$$.ctx[0]}set min(e){this.$$set({min:e}),Z()}get max(){return this.$$.ctx[1]}set max(e){this.$$set({max:e}),Z()}get id(){return this.$$.ctx[10]}set id(e){this.$$set({id:e}),Z()}get description(){return this.$$.ctx[2]}set description(e){this.$$set({description:e}),Z()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),Z()}get stop(){return this.$$.ctx[4]}set stop(e){this.$$set({stop:e}),Z()}get drag(){return this.$$.ctx[5]}set drag(e){this.$$set({drag:e}),Z()}get interactions(){return this.$$.ctx[11]}set interactions(e){this.$$set({interactions:e}),Z()}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}}function kJ(t){let e,n;return{c(){e=rt("div"),n=rt("div"),this.h()},l(i){e=st(i,"DIV",{id:!0});var r=at(e);n=st(r,"DIV",{}),at(n).forEach(H),r.forEach(H),this.h()},h(){z(e,"id",t[0])},m(i,r){Et(i,e,r),Q(e,n),t[20](n)},p(i,[r]){r&1&&z(e,"id",i[0])},i:Wt,o:Wt,d(i){i&&H(e),t[20](null)}}}function CJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(x,E=>n(25,i=E)),x);t.$$.on_destroy.push(()=>r());let{id:a,name:u,groupNames:c=[],title:l="",xAttr:f,yAttr:h="val",yMax:d,magic:p,xDomainMin:m=null,xDomainMax:g=null,theplot:y=null}=e,_={},{brushX:b=Mn({}),dstore:x=Mn({}),interactions:v={dstore:x,brushX:b}}=e;s();let w,A=null,T=[],C=[{},{}],{load:L=E=>w==null?void 0:w.load(E)}=e;function O(E,j){return j!="overlay"?!1:(_=E,!0)}function k(E,j){return j!="badyear"?!1:(E.forEach((F,U)=>{F.rank=U+1,F[f]=Number(F[f])}),C=E,!0)}function N(E,j){!E||E.length===0||typeof j=="object"||(k(E,j)||O(E,j)?console.debug("overlay or badyear"):(T=W$(E,{include:c}),T.forEach(F=>F[f]=Number(F[f]))),jn(x,i={chart_data:T},i),B())}function B(){n(3,m=+m),n(4,g=+g);let E=Um({x:{type:"linear",domain:[m-1,g]}}),j=U=>(C.length-U.rank)*(.3/C.length)+.7,F={x:E,color:{domain:c,range:x3,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[so({ticks:ox(U=>U+m,g-m),tickRotate:-90,fontSize:10,tickFormat:U=>(U+"").slice(-2)}),Tu({fontSize:10,label:"Payout"}),My([0]),Cy([E.domain[0]]),Sh(C,{x1:U=>U[f]-.5,x2:U=>U[f]+.5,y:j,stroke:"black",opacity:.8,strokeWidth:1}),U$(C,{x1:U=>U[f]-.5,x2:U=>U[f]+.5,y1:0,y2:j,fill:"gray",opacity:.1}),Xd(_,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),F$(T,{filter:U=>U.key==c[3]&&U[f]>=m&&U[f]<=g&&+U[h]==0,x:U=>+U[f],y:0,stroke:"red",strokeWidth:1})]};c.forEach((U,$)=>{let X=(1+$)/c.length*.7;F.marks.push(Sh(T,{filter:K=>K.key==U&&K[f]>=m&&K[f]<=g,x:K=>+K[f]+X-.35,y1:0,y2:h,stroke:"key",strokeWidth:4}))}),n(5,y=Ol(F,A)),b.isActive&&(w=w??new bp({iact:b,magic:p}),w.init(y))}function q(E){oa[E?"unshift":"push"](()=>{A=E,n(2,A)})}return t.$$set=E=>{"id"in E&&n(6,a=E.id),"name"in E&&n(0,u=E.name),"groupNames"in E&&n(7,c=E.groupNames),"title"in E&&n(8,l=E.title),"xAttr"in E&&n(9,f=E.xAttr),"yAttr"in E&&n(10,h=E.yAttr),"yMax"in E&&n(11,d=E.yMax),"magic"in E&&n(12,p=E.magic),"xDomainMin"in E&&n(3,m=E.xDomainMin),"xDomainMax"in E&&n(4,g=E.xDomainMax),"theplot"in E&&n(5,y=E.theplot),"brushX"in E&&n(13,b=E.brushX),"dstore"in E&&s(n(1,x=E.dstore)),"interactions"in E&&n(14,v=E.interactions),"load"in E&&n(15,L=E.load)},[u,x,A,m,g,y,a,c,l,f,h,d,p,b,v,L,O,k,N,B,q]}class MJ extends vn{constructor(e){super(),wn(this,e,CJ,kJ,xn,{id:6,name:0,groupNames:7,title:8,xAttr:9,yAttr:10,yMax:11,magic:12,xDomainMin:3,xDomainMax:4,theplot:5,brushX:13,dstore:1,interactions:14,load:15,overlay:16,badyear:17,render:18,update:19})}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),Z()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),Z()}get groupNames(){return this.$$.ctx[7]}set groupNames(e){this.$$set({groupNames:e}),Z()}get title(){return this.$$.ctx[8]}set title(e){this.$$set({title:e}),Z()}get xAttr(){return this.$$.ctx[9]}set xAttr(e){this.$$set({xAttr:e}),Z()}get yAttr(){return this.$$.ctx[10]}set yAttr(e){this.$$set({yAttr:e}),Z()}get yMax(){return this.$$.ctx[11]}set yMax(e){this.$$set({yMax:e}),Z()}get magic(){return this.$$.ctx[12]}set magic(e){this.$$set({magic:e}),Z()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),Z()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),Z()}get theplot(){return this.$$.ctx[5]}set theplot(e){this.$$set({theplot:e}),Z()}get brushX(){return this.$$.ctx[13]}set brushX(e){this.$$set({brushX:e}),Z()}get dstore(){return this.$$.ctx[1]}set dstore(e){this.$$set({dstore:e}),Z()}get interactions(){return this.$$.ctx[14]}set interactions(e){this.$$set({interactions:e}),Z()}get load(){return this.$$.ctx[15]}set load(e){this.$$set({load:e}),Z()}get overlay(){return this.$$.ctx[16]}get badyear(){return this.$$.ctx[17]}get render(){return this.$$.ctx[18]}get update(){return this.$$.ctx[19]}}function NJ(t){let e,n;return{c(){e=rt("div"),n=rt("div"),this.h()},l(i){e=st(i,"DIV",{id:!0});var r=at(e);n=st(r,"DIV",{}),at(n).forEach(H),r.forEach(H),this.h()},h(){z(e,"id",t[0])},m(i,r){Et(i,e,r),Q(e,n),t[11](n)},p(i,[r]){r&1&&z(e,"id",i[0])},i:Wt,o:Wt,d(i){i&&H(e),t[11](null)}}}function OJ(t,e,n){let{id:i,name:r,xDomainMin:s,xDomainMax:a,magic:u}=e,{brushX:c=Mn({})}=e,{interactions:l={brushX:c}}=e,f,h,d,p={},m=[];function g(x,v){return v!="overlay"?!1:(p=x,!0)}function y(x,v){n(1,h.innerHTML="",h),!(!x||x.length===0||typeof v=="object")&&(g(x,v)?console.debug("overlay"):m=x,_())}function _(){let x=0,v={x:{domain:[+s,+a],type:"linear"},y:{axis:null,label:!0},marginBottom:50,height:m.length*40,color:{style:{"font-size":10,"margin-left":"2rem"},scheme:"Tableau10",legend:!0},marks:[so({ticks:36,fontSize:10}),Sh(m,{x1:"start_time",x2:"end_time",y:"crop",strokeWidth:3,fy:"activity"}),bl(m,{x:w=>{let A=(w.end_time-w.start_time)/2+w.start_time;return x++,console.log("yy",x,w,A),A},y:"crop",dy:3,lineAnchor:"top",fy:"activity",fontSize:10,color:"gray",text:"crop"}),Xd(p,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2})]};f=Ol(v,h),c.isActive&&(d=d??new bp({iact:c,magic:u}),d.init(f))}function b(x){oa[x?"unshift":"push"](()=>{h=x,n(1,h)})}return t.$$set=x=>{"id"in x&&n(2,i=x.id),"name"in x&&n(0,r=x.name),"xDomainMin"in x&&n(3,s=x.xDomainMin),"xDomainMax"in x&&n(4,a=x.xDomainMax),"magic"in x&&n(5,u=x.magic),"brushX"in x&&n(6,c=x.brushX),"interactions"in x&&n(7,l=x.interactions)},[r,h,i,s,a,u,c,l,g,y,_,b]}class FJ extends vn{constructor(e){super(),wn(this,e,OJ,NJ,xn,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),Z()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),Z()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),Z()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),Z()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),Z()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),Z()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),Z()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function DJ(t){let e,n;return{c(){e=rt("div"),n=rt("div"),this.h()},l(i){e=st(i,"DIV",{id:!0});var r=at(e);n=st(r,"DIV",{}),at(n).forEach(H),r.forEach(H),this.h()},h(){z(e,"id",t[0])},m(i,r){Et(i,e,r),Q(e,n),t[6](n)},p(i,[r]){r&1&&z(e,"id",i[0])},i:Wt,o:Wt,d(i){i&&H(e),t[6](null)}}}function RJ(t,e,n){let{name:i,id:r,interactions:s={}}=e,a,u=[];function c(h,d){!h||h.length===0||(u=h,l())}function l(){let h=Um({color:{type:"linear",scheme:"greens"}}),d=Um({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),p=u.map(g=>d.apply(Gf(h.apply(+g.value)).l)),m={padding:0,marginLeft:150,height:300,color:h,marks:[so({fontSize:10,label:null}),Tu({fontSize:10,label:null}),C$(u,{x:"x",y:"y",fill:g=>+g.value,stroke:"white"}),bl(u,{x:"x",y:"y",text:g=>g.value,fill:p,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};Ol(m,a)}function f(h){oa[h?"unshift":"push"](()=>{a=h,n(1,a)})}return t.$$set=h=>{"name"in h&&n(0,i=h.name),"id"in h&&n(2,r=h.id),"interactions"in h&&n(3,s=h.interactions)},[i,a,r,s,c,l,f]}class LJ extends vn{constructor(e){super(),wn(this,e,RJ,DJ,xn,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),Z()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),Z()}get interactions(){return this.$$.ctx[3]}set interactions(e){this.$$set({interactions:e}),Z()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}function C2(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function BJ(t){let e,n=t[13][t[2]]+"",i;return{c(){e=rt("option"),i=ke(n),this.h()},l(r){e=st(r,"OPTION",{});var s=at(e);i=Ce(s,n),s.forEach(H),this.h()},h(){e.__value=t[15],e.value=e.__value},m(r,s){Et(r,e,s),Q(e,i)},p(r,s){s&36&&n!==(n=r[13][r[2]]+"")&&Je(i,n)},d(r){r&&H(e)}}}function PJ(t){let e,n=t[13][t[2]]+"",i;return{c(){e=rt("option"),i=ke(n),this.h()},l(r){e=st(r,"OPTION",{});var s=at(e);i=Ce(s,n),s.forEach(H),this.h()},h(){e.__value=t[15],e.value=e.__value,e.selected=!0},m(r,s){Et(r,e,s),Q(e,i)},p(r,s){s&36&&n!==(n=r[13][r[2]]+"")&&Je(i,n)},d(r){r&&H(e)}}}function M2(t){let e;function n(s,a){return s[15]===s[1]?PJ:BJ}let i=n(t),r=i(t);return{c(){r.c(),e=Hs()},l(s){r.l(s),e=Hs()},m(s,a){r.m(s,a),Et(s,e,a)},p(s,a){i===(i=n(s))&&r?r.p(s,a):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&H(e)}}}function UJ(t){let e,n,i,r,s=t[5],a=[];for(let u=0;u<s.length;u+=1)a[u]=M2(C2(t,s,u));return{c(){e=rt("div"),n=rt("select");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=st(u,"DIV",{class:!0,id:!0});var c=at(e);n=st(c,"SELECT",{class:!0});var l=at(n);for(let f=0;f<a.length;f+=1)a[f].l(l);l.forEach(H),c.forEach(H),this.h()},h(){z(n,"class","form-select appearance-none block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),t[4]===void 0&&ck(()=>t[10].call(n)),z(e,"class","px-[1%] py-[1%]"),z(e,"id",t[0])},m(u,c){Et(u,e,c),Q(e,n);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(n,null);mb(n,t[4],!0),i||(r=[ce(n,"change",t[10]),ce(n,"change",t[6])],i=!0)},p(u,[c]){if(c&38){s=u[5];let l;for(l=0;l<s.length;l+=1){const f=C2(u,s,l);a[l]?a[l].p(f,c):(a[l]=M2(f),a[l].c(),a[l].m(n,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=s.length}c&16&&mb(n,u[4]),c&1&&z(e,"id",u[0])},i:Wt,o:Wt,d(u){u&&H(e),sd(a,u),i=!1,ua(r)}}}function VJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(l,_=>n(11,i=_)),l);t.$$.on_destroy.push(()=>r());let{id:a,index:u,dropdown_key:c}=e,{change:l=Mn({})}=e;s();let{interactions:f={change:l}}=e,h=null,d=[];function p(_,b){n(5,d=_??d),n(4,h=h??u),console.log("Dropdown.render",d,h,b),g()}function m(_){console.log("Dropdown.load",_),n(4,h=_.idx),p()}function g(){l.isActive&&jn(l,i={...d[h],idx:h},i)}function y(){h=lk(this),n(4,h)}return t.$$set=_=>{"id"in _&&n(0,a=_.id),"index"in _&&n(1,u=_.index),"dropdown_key"in _&&n(2,c=_.dropdown_key),"change"in _&&s(n(3,l=_.change)),"interactions"in _&&n(7,f=_.interactions)},[a,u,c,l,h,d,g,f,p,m,y]}class $J extends vn{constructor(e){super(),wn(this,e,VJ,UJ,xn,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),Z()}get index(){return this.$$.ctx[1]}set index(e){this.$$set({index:e}),Z()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(e){this.$$set({dropdown_key:e}),Z()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),Z()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),Z()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function jJ(t){let e,n,i,r,s,a,u,c,l,f,h,d,p,m;return{c(){e=rt("form"),n=rt("div"),i=rt("input"),r=be(),s=rt("button"),a=ke("Login"),u=be(),c=rt("button"),l=ke("Save"),f=be(),h=rt("button"),d=ke("Logout"),this.h()},l(g){e=st(g,"FORM",{class:!0});var y=at(e);n=st(y,"DIV",{class:!0});var _=at(n);i=st(_,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),r=_e(_),s=st(_,"BUTTON",{class:!0,type:!0});var b=at(s);a=Ce(b,"Login"),b.forEach(H),u=_e(_),c=st(_,"BUTTON",{class:!0,type:!0});var x=at(c);l=Ce(x,"Save"),x.forEach(H),f=_e(_),h=st(_,"BUTTON",{class:!0,type:!0});var v=at(h);d=Ce(v,"Logout"),v.forEach(H),_.forEach(H),y.forEach(H),this.h()},h(){z(i,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),z(i,"type","text"),z(i,"placeholder","Login..."),z(i,"aria-label","username"),z(s,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),z(s,"type","button"),z(c,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),z(c,"type","button"),z(h,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),z(h,"type","button"),z(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),z(e,"class","w-full max-w-sm mx-auto")},m(g,y){Et(g,e,y),Q(e,n),Q(n,i),Ff(i,t[1]),Q(n,r),Q(n,s),Q(s,a),Q(n,u),Q(n,c),Q(c,l),Q(n,f),Q(n,h),Q(h,d),p||(m=[ce(i,"input",t[14]),ce(s,"click",t[2]),ce(c,"click",t[3]),ce(h,"click",t[4])],p=!0)},p(g,[y]){y&2&&i.value!==g[1]&&Ff(i,g[1])},i:Wt,o:Wt,d(g){g&&H(e),p=!1,ua(m)}}}function $T(t,e){console.debug("login invoked",t,e)}function zJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(a,w=>n(16,i=w)),a);t.$$.on_destroy.push(()=>r());let{status:a=Mn({}),interactions:u={status:a}}=e;s();let{id:c,magic:l,client:f,exportFunc:h,importFunc:d,dataTable:p,stateTable:m}=e,g,y;const _=async()=>{console.debug("login user: ",g),y=l.exportState();const w=await f.query(d,{table:m,user:g});if(!w){alert("there is no data for this user"),jn(a,i={user:g,loggedin:!0},i);return}jn(a,i={user:g,loggedin:!0},i),l.importState(w.data)},b=async()=>{let w=l.exportData();await f.mutation(h,{data:w,table:p,user:g}),w=l.exportState(),await f.mutation(h,{data:w,table:m,user:g})},x=async()=>{l.importState(y),n(1,g=null)};function v(){g=this.value,n(1,g)}return t.$$set=w=>{"status"in w&&s(n(0,a=w.status)),"interactions"in w&&n(5,u=w.interactions),"id"in w&&n(6,c=w.id),"magic"in w&&n(7,l=w.magic),"client"in w&&n(8,f=w.client),"exportFunc"in w&&n(9,h=w.exportFunc),"importFunc"in w&&n(10,d=w.importFunc),"dataTable"in w&&n(11,p=w.dataTable),"stateTable"in w&&n(12,m=w.stateTable)},[a,g,_,b,x,u,c,l,f,h,d,p,m,$T,v]}class qJ extends vn{constructor(e){super(),wn(this,e,zJ,jJ,xn,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,render:13})}get status(){return this.$$.ctx[0]}set status(e){this.$$set({status:e}),Z()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),Z()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),Z()}get magic(){return this.$$.ctx[7]}set magic(e){this.$$set({magic:e}),Z()}get client(){return this.$$.ctx[8]}set client(e){this.$$set({client:e}),Z()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(e){this.$$set({exportFunc:e}),Z()}get importFunc(){return this.$$.ctx[10]}set importFunc(e){this.$$set({importFunc:e}),Z()}get dataTable(){return this.$$.ctx[11]}set dataTable(e){this.$$set({dataTable:e}),Z()}get stateTable(){return this.$$.ctx[12]}set stateTable(e){this.$$set({stateTable:e}),Z()}get render(){return $T}}function WJ(t){let e,n,i,r;return{c(){e=rt("form"),n=rt("input"),this.h()},l(s){e=st(s,"FORM",{class:!0});var a=at(e);n=st(a,"INPUT",{type:!0,class:!0,placeholder:!0}),a.forEach(H),this.h()},h(){z(n,"type","text"),z(n,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),z(n,"placeholder",t[0]),z(e,"class","px-[1%] py-[1%] ml-[5.9%]")},m(s,a){Et(s,e,a),Q(e,n),Ff(n,t[2]),i||(r=[ce(n,"input",t[8]),ce(n,"change",t[3])],i=!0)},p(s,[a]){a&1&&z(n,"placeholder",s[0]),a&4&&n.value!==s[2]&&Ff(n,s[2])},i:Wt,o:Wt,d(s){s&&H(e),i=!1,ua(r)}}}function HJ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(c,g=>n(9,i=g)),c);t.$$.on_destroy.push(()=>r());let a=null,{placeholder:u="textbox"}=e,{change:c=Mn({})}=e;s();let{id:l}=e,{interactions:f={change:c}}=e;function h(){c.isActive&&jn(c,i={text:a},i)}function d(g){g&&R.is(Array,g)&&g.length&&n(0,u=String(g[0]))}function p(g,y){n(2,a=g),h()}function m(){a=this.value,n(2,a)}return t.$$set=g=>{"placeholder"in g&&n(0,u=g.placeholder),"change"in g&&s(n(1,c=g.change)),"id"in g&&n(4,l=g.id),"interactions"in g&&n(5,f=g.interactions)},[u,c,a,h,l,f,d,p,m]}class YJ extends vn{constructor(e){super(),wn(this,e,HJ,WJ,xn,{placeholder:0,change:1,id:4,interactions:5,render:6,load:7})}get placeholder(){return this.$$.ctx[0]}set placeholder(e){this.$$set({placeholder:e}),Z()}get change(){return this.$$.ctx[1]}set change(e){this.$$set({change:e}),Z()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),Z()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),Z()}get render(){return this.$$.ctx[6]}get load(){return this.$$.ctx[7]}}var jT={exports:{}},GJ=jT.exports={};GJ.forEach=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}};var zT=jT.exports,KJ=function(t){var e=t.stateHandler.getState;function n(a){var u=e(a);return u&&!!u.isDetectable}function i(a){e(a).isDetectable=!0}function r(a){return!!e(a).busy}function s(a,u){e(a).busy=!!u}return{isDetectable:n,markAsDetectable:i,isBusy:r,markBusy:s}},XJ=function(t){var e={};function n(a){var u=t.get(a);return u===void 0?[]:e[u]||[]}function i(a,u){var c=t.get(a);e[c]||(e[c]=[]),e[c].push(u)}function r(a,u){for(var c=n(a),l=0,f=c.length;l<f;++l)if(c[l]===u){c.splice(l,1);break}}function s(a){var u=n(a);u&&(u.length=0)}return{get:n,add:i,removeListener:r,removeAllListeners:s}},JJ=function(){var t=1;function e(){return t++}return{generate:e}},QJ=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function i(s){var a=n(s);return a&&a.id!==void 0?a.id:null}function r(s){var a=n(s);if(!a)throw new Error("setId required the element to have a resize detection state.");var u=e.generate();return a.id=u,u}return{get:i,set:r}},ZJ=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var i=function(r,s){r[s]=function(){var u=console[s];if(u.apply)u.apply(console,arguments);else for(var c=0;c<arguments.length;c++)u(arguments[c])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n},qT={exports:{}},WT=qT.exports={};WT.isIE=function(t){function e(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var n=function(){var i,r=3,s=document.createElement("div"),a=s.getElementsByTagName("i");do s.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(a[0]);return r>4?r:i}();return t===n};WT.isLegacyOpera=function(){return!!window.opera};var HT=qT.exports,YT={exports:{}},tQ=YT.exports={};tQ.getOption=eQ;function eQ(t,e,n){var i=t[e];return i==null&&n!==void 0?n:i}var nQ=YT.exports,N2=nQ,iQ=function(e){e=e||{};var n=e.reporter,i=N2.getOption(e,"async",!0),r=N2.getOption(e,"auto",!0);r&&!i&&(n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),i=!0);var s=O2(),a,u=!1;function c(m,g){!u&&r&&i&&s.size()===0&&h(),s.add(m,g)}function l(){for(u=!0;s.size();){var m=s;s=O2(),m.process()}u=!1}function f(m){u||(m===void 0&&(m=i),a&&(d(a),a=null),m?h():l())}function h(){a=p(l)}function d(m){var g=clearTimeout;return g(m)}function p(m){var g=function(y){return setTimeout(y,0)};return g(m)}return{add:c,force:f}};function O2(){var t={},e=0,n=0,i=0;function r(u,c){c||(c=u,u=0),u>n?n=u:u<i&&(i=u),t[u]||(t[u]=[]),t[u].push(c),e++}function s(){for(var u=i;u<=n;u++)for(var c=t[u],l=0;l<c.length;l++){var f=c[l];f()}}function a(){return e}return{add:r,process:s,size:a}}var lb="_erd";function rQ(t){return t[lb]={},GT(t)}function GT(t){return t[lb]}function sQ(t){delete t[lb]}var aQ={initState:rQ,getState:GT,cleanState:sQ},tc=HT,oQ=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function r(l,f){function h(){f(l)}if(tc.isIE(8))i(l).object={proxy:h},l.attachEvent("onresize",h);else{var d=u(l);if(!d)throw new Error("Element is not detectable by this strategy.");d.contentDocument.defaultView.addEventListener("resize",h)}}function s(l){var f=t.important?" !important; ":"; ";return(l.join(f)+f).trim()}function a(l,f,h){h||(h=f,f=l,l=null),l=l||{},l.debug;function d(p,m){var g=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),y=!1,_=window.getComputedStyle(p),b=p.offsetWidth,x=p.offsetHeight;i(p).startSize={width:b,height:x};function v(){function w(){if(_.position==="static"){p.style.setProperty("position","relative",l.important?"important":"");var C=function(L,O,k,N){function B(E){return E.replace(/[^-\d\.]/g,"")}var q=k[N];q!=="auto"&&B(q)!=="0"&&(L.warn("An element that is positioned static has style."+N+"="+q+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+N+" will be set to 0. Element: ",O),O.style.setProperty(N,"0",l.important?"important":""))};C(e,p,_,"top"),C(e,p,_,"right"),C(e,p,_,"bottom"),C(e,p,_,"left")}}function A(){y||w();function C(O,k){if(!O.contentDocument){var N=i(O);N.checkForObjectDocumentTimeoutId&&window.clearTimeout(N.checkForObjectDocumentTimeoutId),N.checkForObjectDocumentTimeoutId=setTimeout(function(){N.checkForObjectDocumentTimeoutId=0,C(O,k)},100);return}k(O.contentDocument)}var L=this;C(L,function(k){m(p)})}_.position!==""&&(w(),y=!0);var T=document.createElement("object");T.style.cssText=g,T.tabIndex=-1,T.type="text/html",T.setAttribute("aria-hidden","true"),T.onload=A,tc.isIE()||(T.data="about:blank"),i(p)&&(p.appendChild(T),i(p).object=T,tc.isIE()&&(T.data="about:blank"))}n?n.add(v):v()}tc.isIE(8)?h(f):d(f,h)}function u(l){return i(l).object}function c(l){if(i(l)){var f=u(l);f&&(tc.isIE(8)?l.detachEvent("onresize",f.proxy):l.removeChild(f),i(l).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(l).checkForObjectDocumentTimeoutId),delete i(l).object)}}return{makeDetectable:a,addListener:r,uninstall:c}},uQ=zT.forEach,cQ=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;t.stateHandler.hasState;var r=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var s=f(),a="erd_scroll_detection_scrollbar_style",u="erd_scroll_detection_container";function c(v){h(v,a,u)}c(window.document);function l(v){var w=t.important?" !important; ":"; ";return(v.join(w)+w).trim()}function f(){var v=500,w=500,A=document.createElement("div");A.style.cssText=l(["position: absolute","width: "+v*2+"px","height: "+w*2+"px","visibility: hidden","margin: 0","padding: 0"]);var T=document.createElement("div");T.style.cssText=l(["position: absolute","width: "+v+"px","height: "+w+"px","overflow: scroll","visibility: none","top: "+-v*3+"px","left: "+-w*3+"px","visibility: hidden","margin: 0","padding: 0"]),T.appendChild(A),document.body.insertBefore(T,document.body.firstChild);var C=v-T.clientWidth,L=w-T.clientHeight;return document.body.removeChild(T),{width:C,height:L}}function h(v,w,A){function T(k,N){N=N||function(q){v.head.appendChild(q)};var B=v.createElement("style");return B.innerHTML=k,B.id=w,N(B),B}if(!v.getElementById(w)){var C=A+"_animation",L=A+"_animation_active",O=`/* Created by the element-resize-detector library. */
`;O+="."+A+" > div::-webkit-scrollbar { "+l(["display: none"])+` }

`,O+="."+L+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+C,"animation-name: "+C])+` }
`,O+="@-webkit-keyframes "+C+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,O+="@keyframes "+C+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",T(O)}}function d(v){v.className+=" "+u+"_animation_active"}function p(v,w,A){if(v.addEventListener)v.addEventListener(w,A);else if(v.attachEvent)v.attachEvent("on"+w,A);else return e.error("[scroll] Don't know how to add event listeners.")}function m(v,w,A){if(v.removeEventListener)v.removeEventListener(w,A);else if(v.detachEvent)v.detachEvent("on"+w,A);else return e.error("[scroll] Don't know how to remove event listeners.")}function g(v){return i(v).container.childNodes[0].childNodes[0].childNodes[0]}function y(v){return i(v).container.childNodes[0].childNodes[0].childNodes[1]}function _(v,w){var A=i(v).listeners;if(!A.push)throw new Error("Cannot add listener to an element that is not detectable.");i(v).listeners.push(w)}function b(v,w,A){A||(A=w,w=v,v=null),v=v||{};function T(){if(v.debug){var M=Array.prototype.slice.call(arguments);if(M.unshift(r.get(w),"Scroll: "),e.log.apply)e.log.apply(null,M);else for(var W=0;W<M.length;W++)e.log(M[W])}}function C(M){function W(G){var P=G.getRootNode&&G.getRootNode().contains(G);return G===G.ownerDocument.body||G.ownerDocument.body.contains(G)||P}return!W(M)||window.getComputedStyle(M)===null}function L(M){var W=i(M).container.childNodes[0],G=window.getComputedStyle(W);return!G.width||G.width.indexOf("px")===-1}function O(){var M=window.getComputedStyle(w),W={};return W.position=M.position,W.width=w.offsetWidth,W.height=w.offsetHeight,W.top=M.top,W.right=M.right,W.bottom=M.bottom,W.left=M.left,W.widthCSS=M.width,W.heightCSS=M.height,W}function k(){var M=O();i(w).startSize={width:M.width,height:M.height},T("Element start size",i(w).startSize)}function N(){i(w).listeners=[]}function B(){if(T("storeStyle invoked."),!i(w)){T("Aborting because element has been uninstalled");return}var M=O();i(w).style=M}function q(M,W,G){i(M).lastWidth=W,i(M).lastHeight=G}function E(M){return g(M).childNodes[0]}function j(){return 2*s.width+1}function F(){return 2*s.height+1}function U(M){return M+10+j()}function $(M){return M+10+F()}function X(M){return M*2+j()}function K(M){return M*2+F()}function J(M,W,G){var P=g(M),et=y(M),pt=U(W),bt=$(G),mt=X(W),Y=K(G);P.scrollLeft=pt,P.scrollTop=bt,et.scrollLeft=mt,et.scrollTop=Y}function ot(){var M=i(w).container;if(!M){M=document.createElement("div"),M.className=u,M.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(w).container=M,d(M),w.appendChild(M);var W=function(){i(w).onRendered&&i(w).onRendered()};p(M,"animationstart",W),i(w).onAnimationStart=W}return M}function Pt(){function M(){var Oe=i(w).style;if(Oe.position==="static"){w.style.setProperty("position","relative",v.important?"important":"");var Ln=function(mi,gi,lo,D){function ft(re){return re.replace(/[^-\d\.]/g,"")}var ie=lo[D];ie!=="auto"&&ft(ie)!=="0"&&(mi.warn("An element that is positioned static has style."+D+"="+ie+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+D+" will be set to 0. Element: ",gi),gi.style[D]=0)};Ln(e,w,Oe,"top"),Ln(e,w,Oe,"right"),Ln(e,w,Oe,"bottom"),Ln(e,w,Oe,"left")}}function W(Oe,Ln,mi,gi){return Oe=Oe?Oe+"px":"0",Ln=Ln?Ln+"px":"0",mi=mi?mi+"px":"0",gi=gi?gi+"px":"0",["left: "+Oe,"top: "+Ln,"right: "+gi,"bottom: "+mi]}if(T("Injecting elements"),!i(w)){T("Aborting because element has been uninstalled");return}M();var G=i(w).container;G||(G=ot());var P=s.width,et=s.height,pt=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),bt=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(W(-(1+P),-(1+et),-et,-P))),mt=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Y=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),xt=l(["position: absolute","left: 0","top: 0"]),ne=l(["position: absolute","width: 200%","height: 200%"]),ye=document.createElement("div"),pe=document.createElement("div"),Rn=document.createElement("div"),$e=document.createElement("div"),ur=document.createElement("div"),nn=document.createElement("div");ye.dir="ltr",ye.style.cssText=pt,ye.className=u,pe.className=u,pe.style.cssText=bt,Rn.style.cssText=mt,$e.style.cssText=xt,ur.style.cssText=Y,nn.style.cssText=ne,Rn.appendChild($e),ur.appendChild(nn),pe.appendChild(Rn),pe.appendChild(ur),ye.appendChild(pe),G.appendChild(ye);function V(){var Oe=i(w);Oe&&Oe.onExpand?Oe.onExpand():T("Aborting expand scroll handler: element has been uninstalled")}function nt(){var Oe=i(w);Oe&&Oe.onShrink?Oe.onShrink():T("Aborting shrink scroll handler: element has been uninstalled")}p(Rn,"scroll",V),p(ur,"scroll",nt),i(w).onExpandScroll=V,i(w).onShrinkScroll=nt}function dt(){function M(mt,Y,xt){var ne=E(mt),ye=U(Y),pe=$(xt);ne.style.setProperty("width",ye+"px",v.important?"important":""),ne.style.setProperty("height",pe+"px",v.important?"important":"")}function W(mt){var Y=w.offsetWidth,xt=w.offsetHeight,ne=Y!==i(w).lastWidth||xt!==i(w).lastHeight;T("Storing current size",Y,xt),q(w,Y,xt),n.add(0,function(){if(ne){if(!i(w)){T("Aborting because element has been uninstalled");return}if(!G()){T("Aborting because element container has not been initialized");return}if(v.debug){var pe=w.offsetWidth,Rn=w.offsetHeight;(pe!==Y||Rn!==xt)&&e.warn(r.get(w),"Scroll: Size changed before updating detector elements.")}M(w,Y,xt)}}),n.add(1,function(){if(!i(w)){T("Aborting because element has been uninstalled");return}if(!G()){T("Aborting because element container has not been initialized");return}J(w,Y,xt)}),ne&&mt&&n.add(2,function(){if(!i(w)){T("Aborting because element has been uninstalled");return}if(!G()){T("Aborting because element container has not been initialized");return}mt()})}function G(){return!!i(w).container}function P(){function mt(){return i(w).lastNotifiedWidth===void 0}T("notifyListenersIfNeeded invoked");var Y=i(w);if(mt()&&Y.lastWidth===Y.startSize.width&&Y.lastHeight===Y.startSize.height)return T("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Y.lastWidth===Y.lastNotifiedWidth&&Y.lastHeight===Y.lastNotifiedHeight)return T("Not notifying: Size already notified");T("Current size not notified, notifying..."),Y.lastNotifiedWidth=Y.lastWidth,Y.lastNotifiedHeight=Y.lastHeight,uQ(i(w).listeners,function(xt){xt(w)})}function et(){if(T("startanimation triggered."),L(w)){T("Ignoring since element is still unrendered...");return}T("Element rendered.");var mt=g(w),Y=y(w);(mt.scrollLeft===0||mt.scrollTop===0||Y.scrollLeft===0||Y.scrollTop===0)&&(T("Scrollbars out of sync. Updating detector elements..."),W(P))}function pt(){if(T("Scroll detected."),L(w)){T("Scroll event fired while unrendered. Ignoring...");return}W(P)}if(T("registerListenersAndPositionElements invoked."),!i(w)){T("Aborting because element has been uninstalled");return}i(w).onRendered=et,i(w).onExpand=pt,i(w).onShrink=pt;var bt=i(w).style;M(w,bt.width,bt.height)}function ct(){if(T("finalizeDomMutation invoked."),!i(w)){T("Aborting because element has been uninstalled");return}var M=i(w).style;q(w,M.width,M.height),J(w,M.width,M.height)}function tt(){A(w)}function ut(){T("Installing..."),N(),k(),n.add(0,B),n.add(1,Pt),n.add(2,dt),n.add(3,ct),n.add(4,tt)}T("Making detectable..."),C(w)?(T("Element is detached"),ot(),T("Waiting until element is attached..."),i(w).onRendered=function(){T("Element is now attached"),ut()}):ut()}function x(v){var w=i(v);w&&(w.onExpandScroll&&m(g(v),"scroll",w.onExpandScroll),w.onShrinkScroll&&m(y(v),"scroll",w.onShrinkScroll),w.onAnimationStart&&m(w.container,"animationstart",w.onAnimationStart),w.container&&v.removeChild(w.container))}return{makeDetectable:b,addListener:_,uninstall:x,initDocument:c}},fc=zT.forEach,lQ=KJ,fQ=XJ,hQ=JJ,dQ=QJ,pQ=ZJ,F2=HT,mQ=iQ,Ms=aQ,gQ=oQ,yQ=cQ;function D2(t){return Array.isArray(t)||t.length!==void 0}function R2(t){if(Array.isArray(t))return t;var e=[];return fc(t,function(n){e.push(n)}),e}function L2(t){return t&&t.nodeType===1}var bQ=function(t){t=t||{};var e;if(t.idHandler)e={get:function(b){return t.idHandler.get(b,!0)},set:t.idHandler.set};else{var n=hQ(),i=dQ({idGenerator:n,stateHandler:Ms});e=i}var r=t.reporter;if(!r){var s=r===!1;r=pQ(s)}var a=Ns(t,"batchProcessor",mQ({reporter:r})),u={};u.callOnAdd=!!Ns(t,"callOnAdd",!0),u.debug=!!Ns(t,"debug",!1);var c=fQ(e),l=lQ({stateHandler:Ms}),f,h=Ns(t,"strategy","object"),d=Ns(t,"important",!1),p={reporter:r,batchProcessor:a,stateHandler:Ms,idHandler:e,important:d};if(h==="scroll"&&(F2.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),h="object"):F2.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),h="object")),h==="scroll")f=yQ(p);else if(h==="object")f=gQ(p);else throw new Error("Invalid strategy name: "+h);var m={};function g(b,x,v){function w(k){var N=c.get(k);fc(N,function(q){q(k)})}function A(k,N,B){c.add(N,B),k&&B(N)}if(v||(v=x,x=b,b={}),!x)throw new Error("At least one element required.");if(!v)throw new Error("Listener required.");if(L2(x))x=[x];else if(D2(x))x=R2(x);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var T=0,C=Ns(b,"callOnAdd",u.callOnAdd),L=Ns(b,"onReady",function(){}),O=Ns(b,"debug",u.debug);fc(x,function(N){Ms.getState(N)||(Ms.initState(N),e.set(N));var B=e.get(N);if(O&&r.log("Attaching listener to element",B,N),!l.isDetectable(N)){if(O&&r.log(B,"Not detectable."),l.isBusy(N)){O&&r.log(B,"System busy making it detectable"),A(C,N,v),m[B]=m[B]||[],m[B].push(function(){T++,T===x.length&&L()});return}return O&&r.log(B,"Making detectable..."),l.markBusy(N,!0),f.makeDetectable({debug:O,important:d},N,function(E){if(O&&r.log(B,"onElementDetectable"),Ms.getState(E)){l.markAsDetectable(E),l.markBusy(E,!1),f.addListener(E,w),A(C,E,v);var j=Ms.getState(E);if(j&&j.startSize){var F=E.offsetWidth,U=E.offsetHeight;(j.startSize.width!==F||j.startSize.height!==U)&&w(E)}m[B]&&fc(m[B],function($){$()})}else O&&r.log(B,"Element uninstalled before being detectable.");delete m[B],T++,T===x.length&&L()})}O&&r.log(B,"Already detecable, adding listener."),A(C,N,v),T++}),T===x.length&&L()}function y(b){if(!b)return r.error("At least one element is required.");if(L2(b))b=[b];else if(D2(b))b=R2(b);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");fc(b,function(x){c.removeAllListeners(x),f.uninstall(x),Ms.cleanState(x)})}function _(b){f.initDocument&&f.initDocument(b)}return{listenTo:g,removeListener:c.removeListener,removeAllListeners:c.removeAllListeners,uninstall:y,initDocument:_}};function Ns(t,e,n){var i=t[e];return i==null&&n!==void 0?n:i}const _Q=q$(bQ);_Q({strategy:"scroll"});function vQ(t){let e,n;return{c(){e=rt("div"),n=fk("svg"),this.h()},l(i){e=st(i,"DIV",{class:!0});var r=at(e);n=hk(r,"svg",{id:!0,viewBox:!0,width:!0,height:!0});var s=at(n);s.forEach(H),r.forEach(H),this.h()},h(){z(n,"id","svgcontainer"),z(n,"viewBox","372 130 30 30"),z(n,"width","100%"),z(n,"height","100%"),z(e,"class","w-5/5 h-5/5")},m(i,r){Et(i,e,r),Q(e,n),t[4](e)},p:Wt,i:Wt,o:Wt,d(i){i&&H(e),t[4](null)}}}function wQ(t,e,n){let{spec:i}=e,{theplot:r=null}=e,s,a=[],u;function c(f,h){if(!f||f.length==0)return;h=="overlay"||(a=f??a),console.log("map data to plot: ",a);let d={projection:"equirectangular",color:{type:"quantile",n:9,scheme:"blues"},marks:[z$(a,{strokeOpacity:.5,strokeWidth:.01,precision:.01,fill:m=>m.properties.OBJECTID})]};n(1,r=Ry(d)),u=r.children[1];let p=document.getElementById("svgcontainer");p.innerHTML="",p.append(u)}function l(f){oa[f?"unshift":"push"](()=>{s=f,n(0,s)})}return t.$$set=f=>{"spec"in f&&n(2,i=f.spec),"theplot"in f&&n(1,r=f.theplot)},[s,r,i,c,l]}let xQ=class extends vn{constructor(e){super(),wn(this,e,wQ,vQ,xn,{spec:2,theplot:1,render:3})}get spec(){return this.$$.ctx[2]}set spec(e){this.$$set({spec:e}),Z()}get theplot(){return this.$$.ctx[1]}set theplot(e){this.$$set({theplot:e}),Z()}get render(){return this.$$.ctx[3]}};function B2(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function SQ(t){let e,n=t[13][t[2]]+"",i,r,s,a;return{c(){e=rt("button"),i=ke(n),r=be(),this.h()},l(u){e=st(u,"BUTTON",{class:!0});var c=at(e);i=Ce(c,n),r=_e(c),c.forEach(H),this.h()},h(){z(e,"class","bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded")},m(u,c){Et(u,e,c),Q(e,i),Q(e,r),s||(a=ce(e,"click",function(){Ws(t[5](t[13],t[15]))&&t[5](t[13],t[15]).apply(this,arguments)}),s=!0)},p(u,c){t=u,c&20&&n!==(n=t[13][t[2]]+"")&&Je(i,n)},d(u){u&&H(e),s=!1,a()}}}function EQ(t){let e,n=t[13][t[2]]+"",i,r,s,a;return{c(){e=rt("button"),i=ke(n),r=be(),this.h()},l(u){e=st(u,"BUTTON",{class:!0});var c=at(e);i=Ce(c,n),r=_e(c),c.forEach(H),this.h()},h(){z(e,"class","bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded")},m(u,c){Et(u,e,c),Q(e,i),Q(e,r),s||(a=ce(e,"click",function(){Ws(t[5](t[13],t[15]))&&t[5](t[13],t[15]).apply(this,arguments)}),s=!0)},p(u,c){t=u,c&20&&n!==(n=t[13][t[2]]+"")&&Je(i,n)},d(u){u&&H(e),s=!1,a()}}}function P2(t){let e;function n(s,a){return s[3]===s[15]?EQ:SQ}let i=n(t),r=i(t);return{c(){r.c(),e=Hs()},l(s){r.l(s),e=Hs()},m(s,a){r.m(s,a),Et(s,e,a)},p(s,a){i===(i=n(s))&&r?r.p(s,a):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&H(e)}}}function AQ(t){let e,n=t[4],i=[];for(let r=0;r<n.length;r+=1)i[r]=P2(B2(t,n,r));return{c(){e=rt("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=st(r,"DIV",{class:!0,id:!0});var s=at(e);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(H),this.h()},h(){z(e,"class","px-[1%] py-[1%] flex items-center space-x-4"),z(e,"id",t[1])},m(r,s){Et(r,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null)},p(r,[s]){if(s&60){n=r[4];let a;for(a=0;a<n.length;a+=1){const u=B2(r,n,a);i[a]?i[a].p(u,s):(i[a]=P2(u),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}s&2&&z(e,"id",r[1])},i:Wt,o:Wt,d(r){r&&H(e),sd(i,r)}}}function IQ(t,e,n){let i,r=Wt,s=()=>(r(),r=kr(a,b=>n(11,i=b)),a);t.$$.on_destroy.push(()=>r());let{change:a=Mn({})}=e;s();let{userFunc:u=()=>{}}=e,{id:c}=e,{button_key:l}=e,{default_idx:f}=e,{interactions:h={change:a}}=e,d,p=[];function m(b,x){console.debug("button clicked with selected state and idx: ",b,x),jn(a,i=ax([l],b),i),n(3,d=x)}function g(b,x){!b||!we(Array,b)||!b.length||n(4,p=b)}function y(b){let x=-1;return Un((v,w)=>{console.debug("buttons row, keyed value, and idx",v,v[l],w),v[l]===i[l]&&(x=w)},b),console.debug("getActiveIdx returns: ",x),Number(x)}function _(b,x){jn(a,i=b,i),n(3,d=y(p))}return t.$$set=b=>{"change"in b&&s(n(0,a=b.change)),"userFunc"in b&&n(6,u=b.userFunc),"id"in b&&n(1,c=b.id),"button_key"in b&&n(2,l=b.button_key),"default_idx"in b&&n(7,f=b.default_idx),"interactions"in b&&n(8,h=b.interactions)},[a,c,l,d,p,m,u,f,h,g,_]}class TQ extends vn{constructor(e){super(),wn(this,e,IQ,AQ,xn,{change:0,userFunc:6,id:1,button_key:2,default_idx:7,interactions:8,render:9,load:10})}get change(){return this.$$.ctx[0]}set change(e){this.$$set({change:e}),Z()}get userFunc(){return this.$$.ctx[6]}set userFunc(e){this.$$set({userFunc:e}),Z()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),Z()}get button_key(){return this.$$.ctx[2]}set button_key(e){this.$$set({button_key:e}),Z()}get default_idx(){return this.$$.ctx[7]}set default_idx(e){this.$$set({default_idx:e}),Z()}get interactions(){return this.$$.ctx[8]}set interactions(e){this.$$set({interactions:e}),Z()}get render(){return this.$$.ctx[9]}get load(){return this.$$.ctx[10]}}function kQ(t){let e,n;return{c(){e=rt("div"),n=rt("div"),this.h()},l(i){e=st(i,"DIV",{id:!0});var r=at(e);n=st(r,"DIV",{}),at(n).forEach(H),r.forEach(H),this.h()},h(){z(e,"id",t[0])},m(i,r){Et(i,e,r),Q(e,n),t[11](n)},p(i,[r]){r&1&&z(e,"id",i[0])},i:Wt,o:Wt,d(i){i&&H(e),t[11](null)}}}let CQ="activity";function MQ(t,e,n){let{id:i,name:r,xDomainMin:s,xDomainMax:a,magic:u}=e,{brushX:c=Mn({})}=e,{interactions:l={brushX:c}}=e,f,h,d,p={},m=[];function g(x,v){return v!="overlay"?!1:(p=x,!0)}function y(x,v){n(1,h.innerHTML="",h),!(!x||x.length===0||typeof v=="object")&&(g(x,v)?console.debug("overlay"):(m=x,rx(ri(m.map(w=>w[CQ])))),_())}function _(){let x={x:{domain:[+s,+a],type:"linear"},marginTop:20,marginBottom:50,color:{scheme:"Tableau10",legend:!0},marks:[Tu({tickRotate:60,fontSize:6,label:null}),so({ticks:a-s+1,fontSize:7}),Sh(m,{y:"village",x1:"start_time",x2:"end_time",stroke:"activity",opacity:.5}),Xd(p,{x1:"left",x2:"right",fill:"key",color:"key",opacity:.2})]};f=Ol(x,h),c.isActive&&(d=d??new bp({iact:c,magic:u}),d.init(f))}function b(x){oa[x?"unshift":"push"](()=>{h=x,n(1,h)})}return t.$$set=x=>{"id"in x&&n(2,i=x.id),"name"in x&&n(0,r=x.name),"xDomainMin"in x&&n(3,s=x.xDomainMin),"xDomainMax"in x&&n(4,a=x.xDomainMax),"magic"in x&&n(5,u=x.magic),"brushX"in x&&n(6,c=x.brushX),"interactions"in x&&n(7,l=x.interactions)},[r,h,i,s,a,u,c,l,g,y,_,b]}class NQ extends vn{constructor(e){super(),wn(this,e,MQ,kQ,xn,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),Z()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),Z()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),Z()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),Z()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),Z()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),Z()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),Z()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}const OQ=Object.freeze(Object.defineProperty({__proto__:null,BarGrouped:MJ,Buttons:TQ,Container:pJ,CropCal:FJ,CropCalLink:NQ,DropDown:$J,Header:bk,Line:yJ,Login:qJ,Map:xQ,MatchingTable:LJ,MatchingTableBackend:UT,OverlayBackend:VT,QueryBackend:W4,Slider:TJ,Spinner:mk,Textbox:YJ},Symbol.toStringTag,{value:"Module"}));let FQ=Lf(OQ,Y$);function af(t,e){if(!t)throw new Error(e)}function DQ(t){let e=t.replaceAll(/\$\w+/g,n=>`o['${n.substring(1)}']`);return new Function("o",`return ${e}`)}const KT=j0(ix(we(Array),we(Object)),ds(t=>KT(t)),DQ);let L0={};class MZ{constructor(e,n){this.magic=e,this.config=n,this.backends={},this.interactions={},this.views={},this.viewIdToViews,this.deferred=[],this._deferredMode=!1;const i=s=>a=>{let u=this.magic.backend[s](a);return u.type=s,u};["overlay","duckdb","array","identity"].forEach(s=>this[s]=i(s)),this.root=document.createElement("div"),document.body.appendChild(this.root),this.loadBackends(n.backends??[]),this.loadViews(n.views??[]),this._deferredMode=!0,this.deferred.forEach(s=>s())}defer(e,n){if(this._deferredMode)throw new Error(n);this.deferred.push(e.bind(this))}async init(){await this.loadDependencies(this.config.dependencies??[]);for(let e of ri(this.backends))e.type=="duckdb"&&await e.init();for(let e of ri(this.backends))switch(e.type){case"array":e.execute();break;case"query":await e.execute();break;case"matching":await e.execute();break}Un((e,n)=>{var i;(i=this.views[n])==null||i.load(e())},this.magic.dependencies.defaults);for(let e of ri(this.backends))e.save&&this.magic.saveBackends(e)}newName(e="name"){return L0[e]=L0[e]??0,`${e}${L0[e]++}`}loadBackends(e){let n=Tb(this.createBackend.bind(this));return xg(i=>i.type=="duckdb",e).forEach(n),ex(i=>i.type=="duckdb",e).forEach(n),this}createBackend(e){let n=e.name??(e.type?this.newName(e.type):this.newName("backend"));if(this.backends[n])throw new Error(`Backend ${n} already exists`);let i=null;if(e.type)i=this[e.type](e);else if(e.query)i=this.query(e);else if(e.matching)i=this.matching(e);else{if(e.backend)return this.backends[e.backend];if(e.interaction){i=this.identity();let r=this.interactions[e.interaction];zt(r)&&this.defer(()=>this.createBackend(e),`Interaction ${e.interaction} not found`),i&&r&&this.magic.connect(i,r)}else if(e.array)i=this.array({...e,data:e.array});else throw new Error("Can't initialize backend config:",e)}return af(!zt(i),`Backend is null ${i.type}`),af(!zt(i.type),`New Backend must have type attr ${JSON.stringify(e)}`),i.save=e.save,this.backends[n]=i,i}matching({name:e,ignore_cols:n,default_func:i,backend:r,matching:s,defaults:a={}}){r=we(String,r)?this.backends[r]:r,e=e??this.newName("matching");let u=this.magic.backend.matching({id:e,backend:r,default_func:i,matching:s,ignore_cols:n,defaults:a});return u.type="matching",u}query({name:e,query:n,defaults:i={},db:r="duckdb"}){r=we(String,r)?this.backends[r]:r,e=e??this.newName("query");let s=this.magic.backend.query({id:e,backend:r,query:n,name:e,defaults:i});return s.type="query",s}loadViews(e){e=e??[];let n=e.map(i=>{let r=this.canonicalizeData(i.data),s=this.makeView(i);return this.views[i.name]=s,this.magic.view(s),s.backends=Ec(s.backends??[],r??[]),s.backends.forEach(a=>{this.magic.render(a,s)}),s});gC(e,n).forEach(([i,r])=>{(i.interactions??[]).forEach(a=>{this.connectInteractions(r,a)})})}connectInteractions(e,{to:n,name:i,type:r,defaults:s}){let a=e.interactions[r];if(zt(a))throw new Error(`Interaction ${r} not found in View ${e.id}`);if(this.interactions[i]=a,zt(s)||this.magic.dependencies.setDefault(e,()=>s),zt(n)||si(n)){this.magic.connect(null,a,null);return}(we(Array,n)?n:[n]).forEach(c=>{c=we(String,c)?{backend:c}:c;let l=this.backends[c.backend],f=KT(Cb(["opts","backend","view"],c));if(zt(l)){let h=c.backend;if(/\w+\.\d+/.test(h)){let[d,p]=h.split(".");l=this.views[d].backends[parseInt(p)],af(!zt(l),`Backend not found ${h}`)}else{let d=this.views[h];zt(d)&&this.defer(()=>this.connectInteractions(e,{to:c,name:i,type:r,defaults:s}),`Interaction references nonexistent backend ${c.backend} and view ${h}`),l=this.identity(),this.magic.render(l,d)}}this.magic.connect(l,a,f)})}makeView(e){let n=e.type,i=Cb(["data","interactions"],e);i.id=i.id??i.name??this.newName(n);let r=null;e.selector?r=document.querySelector(e.selector):(r=document.createElement("div"),this.root.appendChild(r)),console.log("new View",n,i);let s=new FQ[n]({target:r,props:i});return s.el=r,s}canonicalizeData(e){if(we(String,e)){let n=this.backends[e];return af(!zt(n),`Backend named ${e} not found`),[n]}return e=we(Array,e)?e:[e],_g(zo(_k,e[0]),["query","matching","backend","interaction"])||(e=[{array:e}]),e.map(Tb(this.createBackend.bind(this)))}async loadDependencies(e){(e??[]).forEach(({source:n,attr:i,target:r})=>{let s=null;if(s=this.interactions[n],zt(s)&&/\w+\.\w+/.test(n)){let[u,c]=n.split(".");s=this.views[u].interactions[c]}if(zt(s))throw new Error(`Interaction not found ${n}`);(we(Array,r)?r:[r]).forEach(async u=>{u=we(String,u)?{view:u}:u;let c=u.view,l=this.views[c];if(zt(l))throw new Error("View not found: ",c);let f;if(zo("function")(u.defaults)){let h=await this.backends[u.defaults.backend].execute();f=new Function("e","a",u.defaults.function).bind(h)}else f=u.defaults?()=>u.defaults:null;this.magic.dependencies.add(s.get(i),l,null,f)})})}}const NZ=`backends:
- type: duckdb
  name: duckdb
  sources:
  - parquet: "Decads.parquet" #might be able to remove this
    name: "decads"
  - parquet: "DRC_CHIRPS.parquet"
    name: "DRC_CHIRPS"
  - parquet: "farmer_clean.parquet"
    name: "farmer_clean"
- type: query
  name: clim_q
  db: duckdb
  query: "
    WITH T1 AS (
    SELECT 
    territory,
    decad,
    avg(chirps) as chirps,
    FROM DRC_CHIRPS
    WHERE territory = 'var(region)'
    AND decad < 56
    GROUP BY territory, decad
    ORDER BY territory, decad
    ) 
    SELECT
    T1.chirps,
    T1.territory as territory,
    T1.decad as decad,
    Decads.Month as month
    FROM T1 
    JOIN Decads
    ON
    (T1.decad = Decads.decad)
    "
  defaults:
    region: "bulungu"
  save: true
- type: query
  name: crop_q
  db: duckdb
  query: "
  WITH T1 AS
  (
  SELECT
  activity,
  season,
  village,
  crop,
  province,
  territory,
  sector,
  avg(start) as start_time,
  avg(farmer_clean.end) as end_time
  FROM farmer_clean
  WHERE 
  territory = 'var(region)'
  AND season = 'var(season)'
  AND crop = 'var(crop)'
  GROUP BY activity, season, village, crop, province, territory, sector
  ORDER BY crop
  ),
  T2 AS 
  (
  SELECT
  crop,
  village,
  activity, 
  start_time as start_time,
  end_time as end_time
  FROM T1
  )
  SELECT *
  FROM T2;
  "
  defaults:
    region: 'bulungu'
    crop: 'manioc'
    season: 'A'
  save: true
- type: overlay
  name: overlay
views:
  # discussion point: for login should we have a separate
  # convex function to different table
- type: Login
  name: Login
  selector: "#login"
  dataTable: DRC_Data
  stateTable: DRC_State
- type: DropDown
  name: dd_territory
  selector: "#dd-territory"
  dropdown_key: territory
  index: 0
  data:
    - query: "SELECT DISTINCT territory FROM DRC_CHIRPS"
  interactions:
    - type: change
      name: ddc-territory
      defaults:
        region: bulungu
      to:
        - backend: clim_q
          region: $territory
        - backend: crop_q
          region: $territory
- type: Line
  name: clim
  selector: "#clim-chart"
  xAttr: decad
  yAttr: chirps
  xLabel: month
  data:
    - backend: clim_q
    - backend: overlay
- type: Buttons
  name: seasons
  selector: "#season-buttons"
  button_key: season
  data:
    - query: "SELECT DISTINCT season FROM farmer_clean"
  interactions:
    - type: change
      name: season-buttons 
      to:
        - backend: crop_q
          season: $season
- type: Buttons
  name: crops
  selector: "#crop-buttons"
  button_key: crop
  data:
    - query: "SELECT DISTINCT crop FROM farmer_clean"
  interactions:
    - type: change
      name: crop-buttons
      to:
        - backend: crop_q
          crop: $crop
- type: CropCalLink
  name: crop
  selector: "#crop-chart"
  xDomainMin: 1
  xDomainMax: 55 
  data:
    - backend: crop_q
    - backend: overlay
- type: Slider
  name: prep
  min: 1
  max: 55
  selector: "#prep-slider"
  description: "prep"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          prep:
            left: $left
            right: $right
- type: Slider
  name: planting 
  min: 1
  max: 55
  selector: "#planting-slider"
  description: "planting"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          planting:
            left: $left
            right: $right
- type: Slider
  name: flowering
  min: 1
  max: 55
  selector: "#flowering-slider"
  description: "flowering"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          flowering:
            left: $left
            right: $right
- type: Slider
  name: tasseling
  min: 1
  max: 55
  selector: "#tasseling-slider"
  description: "tasseling"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          tasseling:
            left: $left
            right: $right
- type: Slider
  name: harvesting
  min: 1
  max: 55
  selector: "#harvesting-slider"
  description: "harvesting"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          harvesting:
            left: $left
            right: $right
- type: Slider
  name: rain 
  min: 1
  max: 55
  selector: "#rain-slider"
  description: "rain"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          rain:
            left: $left
            right: $right
dependencies:
  - source: ddc-territory
    attr: "territory"
    target:
      - view: seasons
        defaults:
          season: 'A'
      - view: crops
        defaults:
          crop: 'manioc'
      - view: prep
        defaults:
          left: 10
          right: 15
      - view: planting 
        defaults:
          left: 15
          right: 20
      - view: flowering
        defaults:
          left: 30
          right: 40
      - view: tasseling
        defaults:
          left: 45
          right: 50
      - view: harvesting
        defaults:
          left: 50
          right: 55
      - view: rain
        defaults:
          left: 30
          right: 35
`,of="1.0.3";var Sr=[],Ei=[],RQ=Uint8Array,B0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _o=0,LQ=B0.length;_o<LQ;++_o)Sr[_o]=B0[_o],Ei[B0.charCodeAt(_o)]=_o;Ei["-".charCodeAt(0)]=62;Ei["_".charCodeAt(0)]=63;function BQ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function PQ(t,e,n){return(e+n)*3/4-n}function id(t){var e,n=BQ(t),i=n[0],r=n[1],s=new RQ(PQ(t,i,r)),a=0,u=r>0?i-4:i,c;for(c=0;c<u;c+=4)e=Ei[t.charCodeAt(c)]<<18|Ei[t.charCodeAt(c+1)]<<12|Ei[t.charCodeAt(c+2)]<<6|Ei[t.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Ei[t.charCodeAt(c)]<<2|Ei[t.charCodeAt(c+1)]>>4,s[a++]=e&255),r===1&&(e=Ei[t.charCodeAt(c)]<<10|Ei[t.charCodeAt(c+1)]<<4|Ei[t.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function UQ(t){return Sr[t>>18&63]+Sr[t>>12&63]+Sr[t>>6&63]+Sr[t&63]}function VQ(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(UQ(i));return r.join("")}function rd(t){for(var e,n=t.length,i=n%3,r=[],s=16383,a=0,u=n-i;a<u;a+=s)r.push(VQ(t,a,a+s>u?u:a+s));return i===1?(e=t[n-1],r.push(Sr[e>>2]+Sr[e<<4&63]+"==")):i===2&&(e=(t[n-2]<<8)+t[n-1],r.push(Sr[e>>10]+Sr[e>>4&63]+Sr[e<<2&63]+"=")),r.join("")}function uf(t){if(t===void 0)return{};if(!XT(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function $Q(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);if(!(t.indexOf("127.0.0.1")!==-1||t.indexOf("localhost")!==-1)&&!t.endsWith(".convex.cloud"))throw new Error(`Invalid deployment address: Must end with ".convex.cloud". Found "${t}".`)}function XT(t){var r;const e=typeof t=="object",n=Object.getPrototypeOf(t),i=n===null||n===Object.prototype||((r=n==null?void 0:n.constructor)==null?void 0:r.name)==="Object";return e&&i}const JT=!0,_u=BigInt("-9223372036854775808"),fb=BigInt("9223372036854775807"),gg=BigInt("0"),jQ=BigInt("8"),zQ=BigInt("256");function QT(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function qQ(t){t<gg&&(t-=_u+_u);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let i=0;for(const r of e.match(/.{2}/g).reverse())n.set([parseInt(r,16)],i++),t>>=jQ;return rd(n)}function WQ(t){const e=id(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=gg,i=gg;for(const r of e)n+=BigInt(r)*zQ**i,i++;return n>fb&&(n+=_u+_u),n}function HQ(t){if(t<_u||fb<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),rd(new Uint8Array(e))}function YQ(t){const e=id(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const GQ=DataView.prototype.setBigInt64?HQ:qQ,KQ=DataView.prototype.getBigInt64?YQ:WQ,U2=1024;function yg(t){if(t.length===0)throw new Error("Empty field names are disallowed.");if(t.length>U2)throw new Error(`Field name ${t} exceeds maximum field name length ${U2}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function Ao(t,e){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>Ao(r,e));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const n=Object.entries(t);if(n.length===1){const r=n[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return id(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return KQ(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const s=id(t.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const u=new DataView(s.buffer).getFloat64(0,JT);if(!QT(u))throw new Error(`Float ${u} should be encoded as a number`);return u}if(r==="$set"){if(!Array.isArray(t.$set))throw new Error(`Malformed $set field on ${t}`);if(!e)throw new Error(`Received a Set which is no longer supported as a Convex type, with values: ${t.$set}.`);return new Set(t.$set.map(s=>Ao(s,e)))}if(r==="$map"){if(!Array.isArray(t.$map))throw new Error(`Malformed $map field on ${t}`);if(!e)throw new Error(`Received a Map which is no longer supported as a Convex type, with entries: ${t.$map}.`);const s=new Map;for(const a of t.$map){if(!Array.isArray(a)||a.length!==2)throw new Error(`Malformed pair in $map ${t}`);const u=Ao(a[0],e),c=Ao(a[1],e);s.set(u,c)}return s}}const i={};for(const[r,s]of Object.entries(t))yg(r),i[r]=Ao(s,e);return i}function cf(t,e=!1){return Ao(t,e)}function _c(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function Ea(t,e,n,i,r){var a;if(t===void 0){const u=n&&` (present at path ${n} in original object ${_c(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<_u||fb<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:GQ(t)}}if(typeof t=="number")if(QT(t)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,t,JT),{$float:rd(new Uint8Array(u))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:rd(new Uint8Array(t))};if(Array.isArray(t))return t.map((u,c)=>Ea(u,e,n+`[${c}]`,!1,r));if(t instanceof Set){if(!r)throw new Error(P0(n,"Set",[...t],e));return{$set:[...t].map((u,c)=>Ea(u,e,n+`.keys()[${c}]`,!1,r))}}if(t instanceof Map){if(!r)throw new Error(P0(n,"Map",[...t],e));return{$map:[...t].map(([u,c],l)=>{const f=Ea(u,e,n+`.keys()[${l}]`,!1,r),h=Ea(c,e,n+`.values()[${l}]`,!1,r);return[f,h]})}}if(!XT(t)){const u=(a=t==null?void 0:t.constructor)==null?void 0:a.name,c=u?`${u} `:"";throw new Error(P0(n,c,t,e))}const s={};for(const[u,c]of Object.entries(t))c!==void 0?(yg(u),s[u]=Ea(c,e,n+`.${u}`,!1,r)):i&&(yg(u),s[u]=XQ(c,e,n+`.${u}`));return s}function P0(t,e,n,i){return t?`${e}${_c(n)} is not a supported Convex type (present at path ${t} in original object ${_c(i)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${_c(n)} is not a supported Convex type.`}function XQ(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${_c(t)} but original value is undefined`);return Ea(t,e,n,!1,!1)}function lf(t,e=!1){return Ea(t,t,"",!1,e)}const JQ="color:rgb(0, 145, 255)";function QQ(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}function ff(t,e,n,i){const r=QQ(e);if(t==="info"){const s=i.match(/^\[.*?\] /);if(s===null){console.error(`[CONVEX ${r}(${n})] Could not parse console.log`);return}const a=i.slice(1,s[0].length-2),u=i.slice(s[0].length);console.log(`%c[CONVEX ${r}(${n})] [${a}]`,JQ,u)}else console.error(`[CONVEX ${r}(${n})] ${i}`)}const ZT=Symbol.for("functionName");function hf(t){if(typeof t=="string")return t;const e=t[ZT];if(!e)throw new Error(`${t} is not a functionReference`);return e}function tk(t=[]){const e={get(n,i){if(typeof i=="string"){const r=[...t,i];return tk(r)}else if(i===ZT){if(t.length<2)throw new Error("API path must include at least 2 parts (module name and function name). Found: "+t);const r=t.slice(0,-1).join("/"),s=t[t.length-1];return s==="default"?r:r+":"+s}else return i===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}tk();const df=560,pf=globalThis.fetch||((...t)=>dk(()=>import("./index.c39342d1.js"),[],import.meta.url).then(({default:e})=>e(...t)));class OZ{constructor(e){$Q(e),this.address=`${e}/api`,this.debug=!0}backendUrl(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e){this.clearAuth(),this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}async query(e,...n){const i=uf(n[0]),r=hf(e),s=JSON.stringify({path:r,args:[lf(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${of}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const u=await pf(`${this.address}/query`,{body:s,method:"POST",headers:a,credentials:"include"});if(!u.ok&&u.status!==df)throw new Error(await u.text());const c=await u.json();if(this.debug)for(const l of c.logLines??[])ff("info","query",r,l);switch(c.status){case"success":return cf(c.value,!0);case"error":throw new Error(c.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(c)}`)}}async mutation(e,...n){const i=uf(n[0]),r=hf(e),s=JSON.stringify({path:r,args:[lf(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${of}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const u=await pf(`${this.address}/mutation`,{body:s,method:"POST",headers:a,credentials:"include"});if(!u.ok&&u.status!==df)throw new Error(await u.text());const c=await u.json();if(this.debug)for(const l of c.logLines??[])ff("info","mutation",r,l);switch(c.status){case"success":return cf(c.value,!0);case"error":throw new Error(c.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(c)}`)}}async action(e,...n){const i=uf(n[0]),r=hf(e),s=JSON.stringify({path:r,args:[lf(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${of}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const u=await pf(`${this.address}/action`,{body:s,method:"POST",headers:a,credentials:"include"});if(!u.ok&&u.status!==df)throw new Error(await u.text());const c=await u.json();if(this.debug)for(const l of c.logLines??[])ff("info","action",r,l);switch(c.status){case"success":return cf(c.value,!0);case"error":throw new Error(c.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(c)}`)}}async function(e,...n){const i=uf(n[0]),r=typeof e=="string"?e:hf(e),s=JSON.stringify({path:r,args:[lf(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${of}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const u=await pf(`${this.address}/function`,{body:s,method:"POST",headers:a,credentials:"include"});if(!u.ok&&u.status!==df)throw new Error(await u.text());const c=await u.json();if(this.debug)for(const l of c.logLines??[])ff("info","any",r,l);switch(c.status){case"success":return cf(c.value,!0);case"error":throw new Error(c.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(c)}`)}}}export{TZ as B,MZ as C,kZ as M,OZ as a,H$ as b,oZ as g,rZ as l,NZ as r};
