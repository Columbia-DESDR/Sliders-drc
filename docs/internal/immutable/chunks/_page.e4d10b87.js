import{S as fn,i as hn,s as dn,e as Z,c as tt,b as et,f as $,v as V,h as xt,n as Bt,t as ke,a as zt,d as Ce,g as qt,j as Y,k as Je,L as gf,F as Sn,H as En,I as In,J as An,q as je,o as He,M as nt,N as kr,O as kn,y as oa,P as yb,Q as ik,R as _t,T as fe,U as Ws,V as vu,W as ca,m as Hs,E as ad,x as rk,p as sk,X as ak,A as j2,B as z2,C as q2,D as W2,Y as ok,Z as ck,_ as uk,$ as lk,a0 as bb,a1 as fk,a2 as Df,a3 as hk,a4 as dk,l as pk,u as mk}from"./index.df90ccbe.js";import{w as On}from"./index.178fa477.js";import{b as gk}from"./paths.9f8cd630.js";/* empty css                                              */import{_ as yk}from"./preload-helper.41c905a7.js";function bk(t){let e;return{c(){e=Z("div"),this.h()},l(n){e=tt(n,"DIV",{id:!0,class:!0}),et(e).forEach($),this.h()},h(){V(e,"id","loading"),V(e,"class","svelte-1e2b3ig")},m(n,i){xt(n,e,i)},p:Bt,i:Bt,o:Bt,d(n){n&&$(e)}}}class _k extends fn{constructor(e){super(),hn(this,e,null,bk,dn,{})}}function vk(t){let e,n,i,r,s,a,c,u;return{c(){e=Z("div"),n=ke("Time to initialize database is "),i=ke(t[1]),r=ke(" milliseconds."),s=zt(),a=Z("div"),c=ke("DESDR: "),u=ke(t[0]),this.h()},l(l){e=tt(l,"DIV",{class:!0});var f=et(e);n=Ce(f,"Time to initialize database is "),i=Ce(f,t[1]),r=Ce(f," milliseconds."),f.forEach($),s=qt(l),a=tt(l,"DIV",{class:!0});var h=et(a);c=Ce(h,"DESDR: "),u=Ce(h,t[0]),h.forEach($),this.h()},h(){V(e,"class","text-xs"),V(a,"class","text-center py-5 px-2 text-5xl font-bold")},m(l,f){xt(l,e,f),Y(e,n),Y(e,i),Y(e,r),xt(l,s,f),xt(l,a,f),Y(a,c),Y(a,u)},p(l,[f]){f&2&&Je(i,l[1]),f&1&&Je(u,l[0])},i:Bt,o:Bt,d(l){l&&$(e),l&&$(s),l&&$(a)}}}function wk(t,e,n){let{country:i,initTime:r}=e;return t.$$set=s=>{"country"in s&&n(0,i=s.country),"initTime"in s&&n(1,r=s.initTime)},[i,r]}class xk extends fn{constructor(e){super(),hn(this,e,wk,vk,dn,{country:0,initTime:1})}}const Sk={"@@functional/placeholder":!0};function Te(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function Ae(t){return function e(n){return arguments.length===0||Te(n)?e:t.apply(this,arguments)}}function gt(t){return function e(n,i){switch(arguments.length){case 0:return e;case 1:return Te(n)?e:Ae(function(r){return t(n,r)});default:return Te(n)&&Te(i)?e:Te(n)?Ae(function(r){return t(r,i)}):Te(i)?Ae(function(r){return t(n,r)}):t(n,i)}}}function H2(t,e){t=t||[],e=e||[];var n,i=t.length,r=e.length,s=[];for(n=0;n<i;)s[s.length]=t[n],n+=1;for(n=0;n<r;)s[s.length]=e[n],n+=1;return s}function Zu(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,i){return e.apply(this,arguments)};case 3:return function(n,i,r){return e.apply(this,arguments)};case 4:return function(n,i,r,s){return e.apply(this,arguments)};case 5:return function(n,i,r,s,a){return e.apply(this,arguments)};case 6:return function(n,i,r,s,a,c){return e.apply(this,arguments)};case 7:return function(n,i,r,s,a,c,u){return e.apply(this,arguments)};case 8:return function(n,i,r,s,a,c,u,l){return e.apply(this,arguments)};case 9:return function(n,i,r,s,a,c,u,l,f){return e.apply(this,arguments)};case 10:return function(n,i,r,s,a,c,u,l,f,h){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Y2(t,e,n){return function(){for(var i=[],r=0,s=t,a=0;a<e.length||r<arguments.length;){var c;a<e.length&&(!Te(e[a])||r>=arguments.length)?c=e[a]:(c=arguments[r],r+=1),i[a]=c,Te(c)||(s-=1),a+=1}return s<=0?n.apply(this,i):Zu(s,Y2(t,i,n))}}var Va=gt(function(e,n){return e===1?Ae(n):Zu(e,Y2(e,[],n))});function tl(t){return function e(n,i,r){switch(arguments.length){case 0:return e;case 1:return Te(n)?e:gt(function(s,a){return t(n,s,a)});case 2:return Te(n)&&Te(i)?e:Te(n)?gt(function(s,a){return t(s,i,a)}):Te(i)?gt(function(s,a){return t(n,s,a)}):Ae(function(s){return t(n,i,s)});default:return Te(n)&&Te(i)&&Te(r)?e:Te(n)&&Te(i)?gt(function(s,a){return t(s,a,r)}):Te(n)&&Te(r)?gt(function(s,a){return t(s,i,a)}):Te(i)&&Te(r)?gt(function(s,a){return t(n,s,a)}):Te(n)?Ae(function(s){return t(s,i,r)}):Te(i)?Ae(function(s){return t(n,s,r)}):Te(r)?Ae(function(s){return t(n,i,s)}):t(n,i,r)}}}const $a=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Ek(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function el(t,e,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!$a(i)){for(var r=0;r<t.length;){if(typeof i[t[r]]=="function")return i[t[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(Ek(i)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}function Ik(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}const hs={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};var Ak=gt(function(e,n){return n>e?n:e});function yf(t,e){for(var n=0,i=e.length,r=Array(i);n<i;)r[n]=t(e[n]),n+=1;return r}function wu(t){return Object.prototype.toString.call(t)==="[object String]"}var wg=Ae(function(e){return $a(e)?!0:!e||typeof e!="object"||wu(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Tk=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},t}();function kk(t){return new Tk(t)}var Ck=gt(function(e,n){return Zu(e.length,function(){return e.apply(n,arguments)})});function Mk(t,e,n){for(var i=0,r=n.length;i<r;){if(e=t["@@transducer/step"](e,n[i]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i+=1}return t["@@transducer/result"](e)}function _b(t,e,n){for(var i=n.next();!i.done;){if(e=t["@@transducer/step"](e,i.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i=n.next()}return t["@@transducer/result"](e)}function vb(t,e,n,i){return t["@@transducer/result"](n[i](Ck(t["@@transducer/step"],t),e))}var wb=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Ys(t,e,n){if(typeof t=="function"&&(t=kk(t)),wg(n))return Mk(t,e,n);if(typeof n["fantasy-land/reduce"]=="function")return vb(t,e,n,"fantasy-land/reduce");if(n[wb]!=null)return _b(t,e,n[wb]());if(typeof n.next=="function")return _b(t,e,n);if(typeof n.reduce=="function")return vb(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Nk=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),Ok=gt(function(e,n){return new Nk(e,n)});function Er(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var xb=Object.prototype.toString,G2=function(){return xb.call(arguments)==="[object Arguments]"?function(e){return xb.call(e)==="[object Arguments]"}:function(e){return Er("callee",e)}}(),Fk=!{toString:null}.propertyIsEnumerable("toString"),Sb=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Eb=function(){return arguments.propertyIsEnumerable("length")}(),Dk=function(e,n){for(var i=0;i<e.length;){if(e[i]===n)return!0;i+=1}return!1},Rk=Ae(typeof Object.keys=="function"&&!Eb?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,i,r=[],s=Eb&&G2(e);for(n in e)Er(n,e)&&(!s||n!=="length")&&(r[r.length]=n);if(Fk)for(i=Sb.length-1;i>=0;)n=Sb[i],Er(n,e)&&!Dk(r,n)&&(r[r.length]=n),i-=1;return r});const ci=Rk;var Lk=gt(el(["fantasy-land/map","map"],Ok,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return Va(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return Ys(function(i,r){return i[r]=e(n[r]),i},{},ci(n));default:return yf(e,n)}}));const ds=Lk,Bk=Number.isInteger||function(e){return e<<0===e};var Pk=gt(function(e,n){var i=e<0?n.length+e:e;return wu(n)?n.charAt(i):n[i]});const K2=Pk;var Uk=gt(function(e,n){if(n!=null)return Bk(e)?K2(e,n):n[e]});const V0=Uk;var Vk=gt(function(e,n){return ds(V0(e),n)});const X2=Vk;var $k=tl(Ys);const J2=$k;var jk=function(){function t(e,n){this.xf=n,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=Ik(this.xf["@@transducer/step"](e,!0))),e},t}(),zk=gt(function(e,n){return new jk(e,n)}),qk=gt(el(["any"],zk,function(e,n){for(var i=0;i<n.length;){if(e(n[i]))return!0;i+=1}return!1}));const xg=qk;var Wk=gt(function(e,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(n):typeof e=="function"?function(i){return e(i)(n(i))}:Ys(function(i,r){return H2(i,ds(r,n))},[],e)}),Hk=gt(function(e,n){return e.apply(this,n)}),Yk=Ae(function(e){for(var n=ci(e),i=n.length,r=[],s=0;s<i;)r[s]=e[n[s]],s+=1;return r});const Hn=Yk;function Ib(t,e){return $a(e)?e.map(t):ci(e).reduce(function(n,i){return n[i]=t(e[i]),n},{})}var Gk=Ae(function t(e){return e=Ib(function(n){return typeof n=="function"?n:t(n)},e),Va(J2(Ak,0,X2("length",Hn(e))),function(){var n=arguments;return Ib(function(i){return Hk(i,n)},e)})});const Ab=Gk;var Kk=Ae(function(e){return e==null});const Ht=Kk;function $0(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Xk=gt(function(e,n){var i=Va(e,n);return Va(e,function(){return Ys(Wk,ds(i,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Jk=Ae(function(e){return Xk(e.length,e)});function Q2(t){return function e(n){for(var i,r,s,a=[],c=0,u=n.length;c<u;){if(wg(n[c]))for(i=t?e(n[c]):n[c],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[c];c+=1}return a}}function Qk(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var Zk=function(t){return{"@@transducer/init":hs.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var i=t["@@transducer/step"](e,n);return i["@@transducer/reduced"]?Qk(i):i}}},t5=function(e){var n=Zk(e);return{"@@transducer/init":hs.init,"@@transducer/result":function(i){return n["@@transducer/result"](i)},"@@transducer/step":function(i,r){return wg(r)?Ys(n,i,r):Ys(n,i,[r])}}},e5=gt(function(e,n){return ds(e,t5(n))}),n5=gt(el(["fantasy-land/chain","chain"],e5,function(e,n){return typeof n=="function"?function(i){return e(n(i))(i)}:Q2(!1)(ds(e,n))}));const Z2=n5;function i5(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var j0=Ae(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function tx(t,e,n,i){var r=function(a){for(var c=e.length,u=0;u<c;){if(t===e[u])return n[u];u+=1}e[u]=t,n[u]=a;for(var l in t)t.hasOwnProperty(l)&&(a[l]=i?tx(t[l],e,n,!0):t[l]);return a};switch(j0(t)){case"Object":return r(Object.create(Object.getPrototypeOf(t)));case"Array":return r([]);case"Date":return new Date(t.valueOf());case"RegExp":return i5(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}var r5=Ae(function(e){return e!=null&&typeof e.clone=="function"?e.clone():tx(e,[],[],!0)});const xu=r5;function s5(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function ex(t,e){return function(){var n=arguments.length;if(n===0)return e();var i=arguments[n-1];return $a(i)||typeof i[t]!="function"?e.apply(this,arguments):i[t].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var a5=tl(ex("slice",function(e,n,i){return Array.prototype.slice.call(i,e,n)})),o5=Ae(ex("tail",a5(1,1/0)));const c5=o5;function u5(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Zu(arguments[0].length,J2(s5,arguments[0],c5(arguments)))}function l5(t){return t}var f5=Ae(l5);const Rf=f5;function Tb(t){for(var e=[],n;!(n=t.next()).done;)e.push(n.value);return e}function kb(t,e,n){for(var i=0,r=n.length;i<r;){if(t(e,n[i]))return!0;i+=1}return!1}function h5(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function d5(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}const vp=typeof Object.is=="function"?Object.is:d5;function Cb(t,e,n,i){var r=Tb(t),s=Tb(e);function a(c,u){return Sg(c,u,n.slice(),i.slice())}return!kb(function(c,u){return!kb(a,u,c)},s,r)}function Sg(t,e,n,i){if(vp(t,e))return!0;var r=j0(t);if(r!==j0(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(r){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&h5(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&vp(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!vp(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===t)return i[s]===e;s-=1}switch(r){case"Map":return t.size!==e.size?!1:Cb(t.entries(),e.entries(),n.concat([t]),i.concat([e]));case"Set":return t.size!==e.size?!1:Cb(t.values(),e.values(),n.concat([t]),i.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=ci(t);if(a.length!==ci(e).length)return!1;var c=n.concat([t]),u=i.concat([e]);for(s=a.length-1;s>=0;){var l=a[s];if(!(Er(l,e)&&Sg(e[l],t[l],c,u)))return!1;s-=1}return!0}var p5=gt(function(e,n){return Sg(e,n,[],[])});const Eg=p5;function m5(t,e,n){var i,r;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(i=1/e;n<t.length;){if(r=t[n],r===0&&1/r===i)return n;n+=1}return-1}else if(e!==e){for(;n<t.length;){if(r=t[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(e===null)return t.indexOf(e,n)}for(;n<t.length;){if(Eg(t[n],e))return n;n+=1}return-1}function Su(t,e){return m5(e,t,0)>=0}function wp(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var $c=function(e){return(e<10?"0":"")+e},g5=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+$c(e.getUTCMonth()+1)+"-"+$c(e.getUTCDate())+"T"+$c(e.getUTCHours())+":"+$c(e.getUTCMinutes())+":"+$c(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function y5(t){return function(){return!t.apply(this,arguments)}}function nx(t,e){for(var n=0,i=e.length,r=[];n<i;)t(e[n])&&(r[r.length]=e[n]),n+=1;return r}function Lf(t){return Object.prototype.toString.call(t)==="[object Object]"}var b5=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},t}(),_5=gt(function(e,n){return new b5(e,n)}),v5=gt(el(["fantasy-land/filter","filter"],_5,function(t,e){return Lf(e)?Ys(function(n,i){return t(e[i])&&(n[i]=e[i]),n},{},ci(e)):nx(t,e)}));const Ig=v5;var w5=gt(function(e,n){return Ig(y5(e),n)});const ix=w5;function rx(t,e){var n=function(a){var c=e.concat([t]);return Su(a,c)?"<Circular>":rx(a,c)},i=function(s,a){return yf(function(c){return wp(c)+": "+n(s[c])},a.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+yf(n,t).join(", ")+"))";case"[object Array]":return"["+yf(n,t).concat(i(t,ix(function(s){return/^\d+$/.test(s)},ci(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):wp(g5(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":wp(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var r=t.toString();if(r!=="[object Object]")return r}return"{"+i(t,ci(t)).join(", ")+"}"}}var xp=Ae(function(e){return rx(e,[])}),x5=gt(function(e,n){if($a(e)){if($a(n))return e.concat(n);throw new TypeError(xp(n)+" is not an array")}if(wu(e)){if(wu(n))return e+n;throw new TypeError(xp(n)+" is not a string")}if(e!=null&&$0(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&$0(e.concat))return e.concat(n);throw new TypeError(xp(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const Eu=x5;var S5=Ae(function(e){return Va(e.length,e)});const Mb=S5;var Ag=function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!Nb(e,!0,this)},t.prototype.has=function(e){return Nb(e,!1,this)},t}();function Nb(t,e,n){var i=typeof t,r,s;switch(i){case"string":case"number":return t===0&&1/t===-1/0?n._items["-0"]?!0:(e&&(n._items["-0"]=!0),!1):n._nativeSet!==null?e?(r=n._nativeSet.size,n._nativeSet.add(t),s=n._nativeSet.size,s===r):n._nativeSet.has(t):i in n._items?t in n._items[i]?!0:(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var a=t?1:0;return n._items[i][a]?!0:(e&&(n._items[i][a]=!0),!1)}else return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?e?(r=n._nativeSet.size,n._nativeSet.add(t),s=n._nativeSet.size,s===r):n._nativeSet.has(t):i in n._items?Su(t,n._items[i])?!0:(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return n._items[i]?!0:(e&&(n._items[i]=!0),!1);case"object":if(t===null)return n._items.null?!0:(e&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(t),i in n._items?Su(t,n._items[i])?!0:(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}var E5=gt(function(e,n){for(var i=[],r=0,s=e.length,a=n.length,c=new Ag,u=0;u<a;u+=1)c.add(n[u]);for(;r<s;)c.add(e[r])&&(i[i.length]=e[r]),r+=1;return i});const Iu=E5;var I5=K2(-1);const Sp=I5;var A5=gt(function(e,n){return e||n}),T5=gt(function(e,n){return $0(e)?function(){return e.apply(this,arguments)||n.apply(this,arguments)}:Jk(A5)(e,n)});const sx=T5;function k5(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var C5=Ae(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():$a(e)?[]:wu(e)?"":Lf(e)?{}:G2(e)?function(){return arguments}():k5(e)?e.constructor.from(""):void 0}),M5=Ae(Q2(!0));const N5=M5;var O5=Ae(function(e){return Va(e.length,function(n,i){var r=Array.prototype.slice.call(arguments,0);return r[0]=i,r[1]=n,e.apply(this,r)})}),F5=gt(function(e,n){for(var i=ci(n),r=0;r<i.length;){var s=i[r];e(n[s],s,n),r+=1}return n});const $n=F5;var D5=Ae(function(e){for(var n={},i=0;i<e.length;)n[e[i][0]]=e[i][1],i+=1;return n});const R5=D5;var L5=gt(function(e,n){if(e.length===0||Ht(n))return!1;for(var i=n,r=0;r<e.length;)if(!Ht(i)&&Er(e[r],i))i=i[e[r]],r+=1;else return!1;return!0}),B5=gt(function(e,n){return L5([e],n)});const zo=B5;var P5=gt(function(e,n){return Ht(n)?!1:e in n});const U5=P5;var V5=tl(function(e,n,i){return Va(Math.max(e.length,n.length,i.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):i.apply(this,arguments)})});const z0=V5;var $5=gt(Su);const j5=$5;var z5=function(){function t(e,n){this.xf=n,this.f=e,this.set=new Ag}return t.prototype["@@transducer/init"]=hs.init,t.prototype["@@transducer/result"]=hs.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),q5=gt(function(e,n){return new z5(e,n)}),W5=gt(el([],q5,function(t,e){for(var n=new Ag,i=[],r=0,s,a;r<e.length;)a=e[r],s=t(a),n.add(s)&&i.push(a),r+=1;return i}));const H5=W5;var Y5=H5(Rf);const ax=Y5;var G5=gt(function(e,n){var i,r;return e.length>n.length?(i=e,r=n):(i=n,r=e),ax(nx(O5(Su)(i),r))});const q0=G5;function K5(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)Er(s,r)&&(e[s]=r[s]);n+=1}return e}const ox=typeof Object.assign=="function"?Object.assign:K5;var X5=gt(function(e,n){return n instanceof e||n!=null&&(n.constructor===e||e.name==="Object"&&typeof n=="object")});const we=X5;var J5=Ae(function(e){return e!=null&&Eg(e,C5(e))});const Cn=J5;var Q5=gt(function(e,n){return Ys(function(i,r){return i[r]=e(n[r],r,n),i},{},ci(n))});const Z5=Q5;var tC=tl(function(e,n,i){var r={},s;for(s in n)Er(s,n)&&(r[s]=Er(s,i)?e(s,n[s],i[s]):n[s]);for(s in i)Er(s,i)&&!Er(s,r)&&(r[s]=i[s]);return r}),eC=tl(function t(e,n,i){return tC(function(r,s,a){return Lf(s)&&Lf(a)?t(e,s,a):e(r,s,a)},n,i)}),nC=gt(function(e,n){return eC(function(i,r,s){return s},e,n)});const iC=nC;var rC=gt(function(e,n){return ox({},n,e)});const Bf=rC;var sC=gt(function(e,n){return ox({},e,n)});const od=sC;var aC=gt(function(e,n){for(var i={},r={},s=0,a=e.length;s<a;)r[e[s]]=1,s+=1;for(var c in n)r.hasOwnProperty(c)||(i[c]=n[c]);return i});const Ob=aC;function oC(t){return gt(function(e,n){return Zu(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})})}var cC=oC(H2);const uC=cC;var lC=gt(function(e,n){for(var i={},r=0;r<e.length;)e[r]in n&&(i[e[r]]=n[e[r]]),r+=1;return i});const cx=lC;var fC=gt(function(e,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=e(r),r+=1;return s});const ux=fC;var hC=gt(function(e,n){return Array.prototype.slice.call(n,0).sort(e)});const dC=hC;var pC=gt(function(e,n){return Eu(Iu(e,n),Iu(n,e))});const mC=pC;var gC=gt(function(e,n){for(var i=0,r=e.length,s,a=n.length,c=[];i<r;){for(s=0;s<a;)c[c.length]=[e[i],n[s]],s+=1;i+=1}return c});const yC=gC;var bC=gt(function(e,n){for(var i=[],r=0,s=Math.min(e.length,n.length);r<s;)i[r]=[e[r],n[r]],r+=1;return i});const _C=bC;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function lx(t){return typeof t>"u"||t===null}function vC(t){return typeof t=="object"&&t!==null}function wC(t){return Array.isArray(t)?t:lx(t)?[]:[t]}function xC(t,e){var n,i,r,s;if(e)for(s=Object.keys(e),n=0,i=s.length;n<i;n+=1)r=s[n],t[r]=e[r];return t}function SC(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function EC(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var IC=lx,AC=vC,TC=wC,kC=SC,CC=EC,MC=xC,Mn={isNothing:IC,isObject:AC,toArray:TC,repeat:kC,isNegativeZero:CC,extend:MC};function fx(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function Au(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=fx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Au.prototype=Object.create(Error.prototype);Au.prototype.constructor=Au;Au.prototype.toString=function(e){return this.name+": "+fx(this,e)};var es=Au;function Ep(t,e,n,i,r){var s="",a="",c=Math.floor(r/2)-1;return i-e>c&&(s=" ... ",e=i-c+s.length),n-i>c&&(a=" ...",n=i+c-a.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+a,pos:i-e+s.length}}function Ip(t,e){return Mn.repeat(" ",e-t.length)+t}function NC(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,a=-1;s=n.exec(t.buffer);)r.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var c="",u,l,f=Math.min(t.line+e.linesAfter,r.length).toString().length,h=e.maxLength-(e.indent+f+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)l=Ep(t.buffer,i[a-u],r[a-u],t.position-(i[a]-i[a-u]),h),c=Mn.repeat(" ",e.indent)+Ip((t.line-u+1).toString(),f)+" | "+l.str+`
`+c;for(l=Ep(t.buffer,i[a],r[a],t.position,h),c+=Mn.repeat(" ",e.indent)+Ip((t.line+1).toString(),f)+" | "+l.str+`
`,c+=Mn.repeat("-",e.indent+f+3+l.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=r.length);u++)l=Ep(t.buffer,i[a+u],r[a+u],t.position-(i[a]-i[a+u]),h),c+=Mn.repeat(" ",e.indent)+Ip((t.line+u+1).toString(),f)+" | "+l.str+`
`;return c.replace(/\n$/,"")}var OC=NC,FC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],DC=["scalar","sequence","mapping"];function RC(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function LC(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(FC.indexOf(n)===-1)throw new es('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=RC(e.styleAliases||null),DC.indexOf(this.kind)===-1)throw new es('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var wn=LC;function Fb(t,e){var n=[];return t[e].forEach(function(i){var r=n.length;n.forEach(function(s,a){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=a)}),n[r]=i}),n}function BC(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function W0(t){return this.extend(t)}W0.prototype.extend=function(e){var n=[],i=[];if(e instanceof wn)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new es("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof wn))throw new es("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new es("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new es("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof wn))throw new es("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(W0.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Fb(r,"implicit"),r.compiledExplicit=Fb(r,"explicit"),r.compiledTypeMap=BC(r.compiledImplicit,r.compiledExplicit),r};var PC=W0,UC=new wn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),VC=new wn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),$C=new wn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),jC=new PC({explicit:[UC,VC,$C]});function zC(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function qC(){return null}function WC(t){return t===null}var HC=new wn("tag:yaml.org,2002:null",{kind:"scalar",resolve:zC,construct:qC,predicate:WC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function YC(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function GC(t){return t==="true"||t==="True"||t==="TRUE"}function KC(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var XC=new wn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:YC,construct:GC,predicate:KC,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function JC(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function QC(t){return 48<=t&&t<=55}function ZC(t){return 48<=t&&t<=57}function tM(t){if(t===null)return!1;var e=t.length,n=0,i=!1,r;if(!e)return!1;if(r=t[n],(r==="-"||r==="+")&&(r=t[++n]),r==="0"){if(n+1===e)return!0;if(r=t[++n],r==="b"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!JC(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!QC(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<e;n++)if(r=t[n],r!=="_"){if(!ZC(t.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function eM(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function nM(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Mn.isNegativeZero(t)}var iM=new wn("tag:yaml.org,2002:int",{kind:"scalar",resolve:tM,construct:eM,predicate:nM,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),rM=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sM(t){return!(t===null||!rM.test(t)||t[t.length-1]==="_")}function aM(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var oM=/^[-+]?[0-9]+e/;function cM(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mn.isNegativeZero(t))return"-0.0";return n=t.toString(10),oM.test(n)?n.replace("e",".e"):n}function uM(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Mn.isNegativeZero(t))}var lM=new wn("tag:yaml.org,2002:float",{kind:"scalar",resolve:sM,construct:aM,predicate:uM,represent:cM,defaultStyle:"lowercase"}),fM=jC.extend({implicit:[HC,XC,iM,lM]}),hM=fM,hx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),dx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function dM(t){return t===null?!1:hx.exec(t)!==null||dx.exec(t)!==null}function pM(t){var e,n,i,r,s,a,c,u=0,l=null,f,h,d;if(e=hx.exec(t),e===null&&(e=dx.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(n,i,r));if(s=+e[4],a=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(f=+e[10],h=+(e[11]||0),l=(f*60+h)*6e4,e[9]==="-"&&(l=-l)),d=new Date(Date.UTC(n,i,r,s,a,c,u)),l&&d.setTime(d.getTime()-l),d}function mM(t){return t.toISOString()}var gM=new wn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:dM,construct:pM,instanceOf:Date,represent:mM});function yM(t){return t==="<<"||t===null}var bM=new wn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:yM}),Tg=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function _M(t){if(t===null)return!1;var e,n,i=0,r=t.length,s=Tg;for(n=0;n<r;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function vM(t){var e,n,i=t.replace(/[\r\n=]/g,""),r=i.length,s=Tg,a=0,c=[];for(e=0;e<r;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|s.indexOf(i.charAt(e));return n=r%4*6,n===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):n===18?(c.push(a>>10&255),c.push(a>>2&255)):n===12&&c.push(a>>4&255),new Uint8Array(c)}function wM(t){var e="",n=0,i,r,s=t.length,a=Tg;for(i=0;i<s;i++)i%3===0&&i&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[i];return r=s%3,r===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):r===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):r===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}function xM(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var SM=new wn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:_M,construct:vM,predicate:xM,represent:wM}),EM=Object.prototype.hasOwnProperty,IM=Object.prototype.toString;function AM(t){if(t===null)return!0;var e=[],n,i,r,s,a,c=t;for(n=0,i=c.length;n<i;n+=1){if(r=c[n],a=!1,IM.call(r)!=="[object Object]")return!1;for(s in r)if(EM.call(r,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function TM(t){return t!==null?t:[]}var kM=new wn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:AM,construct:TM}),CM=Object.prototype.toString;function MM(t){if(t===null)return!0;var e,n,i,r,s,a=t;for(s=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(i=a[e],CM.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[e]=[r[0],i[r[0]]]}return!0}function NM(t){if(t===null)return[];var e,n,i,r,s,a=t;for(s=new Array(a.length),e=0,n=a.length;e<n;e+=1)i=a[e],r=Object.keys(i),s[e]=[r[0],i[r[0]]];return s}var OM=new wn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:MM,construct:NM}),FM=Object.prototype.hasOwnProperty;function DM(t){if(t===null)return!0;var e,n=t;for(e in n)if(FM.call(n,e)&&n[e]!==null)return!1;return!0}function RM(t){return t!==null?t:{}}var LM=new wn("tag:yaml.org,2002:set",{kind:"mapping",resolve:DM,construct:RM}),BM=hM.extend({implicit:[gM,bM],explicit:[SM,kM,OM,LM]}),Gs=Object.prototype.hasOwnProperty,Pf=1,px=2,mx=3,Uf=4,Ap=1,PM=2,Db=3,UM=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,VM=/[\x85\u2028\u2029]/,$M=/[,\[\]\{\}]/,gx=/^(?:!|!!|![a-z\-]+!)$/i,yx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Rb(t){return Object.prototype.toString.call(t)}function Cr(t){return t===10||t===13}function Ra(t){return t===9||t===32}function Kn(t){return t===9||t===32||t===10||t===13}function Ao(t){return t===44||t===91||t===93||t===123||t===125}function jM(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function zM(t){return t===120?2:t===117?4:t===85?8:0}function qM(t){return 48<=t&&t<=57?t-48:-1}function Lb(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function WM(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var bx=new Array(256),_x=new Array(256);for(var fo=0;fo<256;fo++)bx[fo]=Lb(fo)?1:0,_x[fo]=Lb(fo);function HM(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||BM,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function vx(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=OC(n),new es(e,n)}function lt(t,e){throw vx(t,e)}function Vf(t,e){t.onWarning&&t.onWarning.call(null,vx(t,e))}var Bb={YAML:function(e,n,i){var r,s,a;e.version!==null&&lt(e,"duplication of %YAML directive"),i.length!==1&&lt(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&lt(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),a=parseInt(r[2],10),s!==1&&lt(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Vf(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var r,s;i.length!==2&&lt(e,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],gx.test(r)||lt(e,"ill-formed tag handle (first argument) of the TAG directive"),Gs.call(e.tagMap,r)&&lt(e,'there is a previously declared suffix for "'+r+'" tag handle'),yx.test(s)||lt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{lt(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function js(t,e,n,i){var r,s,a,c;if(e<n){if(c=t.input.slice(e,n),i)for(r=0,s=c.length;r<s;r+=1)a=c.charCodeAt(r),a===9||32<=a&&a<=1114111||lt(t,"expected valid JSON character");else UM.test(c)&&lt(t,"the stream contains non-printable characters");t.result+=c}}function Pb(t,e,n,i){var r,s,a,c;for(Mn.isObject(n)||lt(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),a=0,c=r.length;a<c;a+=1)s=r[a],Gs.call(e,s)||(e[s]=n[s],i[s]=!0)}function To(t,e,n,i,r,s,a,c,u){var l,f;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),l=0,f=r.length;l<f;l+=1)Array.isArray(r[l])&&lt(t,"nested arrays are not supported inside keys"),typeof r=="object"&&Rb(r[l])==="[object Object]"&&(r[l]="[object Object]");if(typeof r=="object"&&Rb(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(l=0,f=s.length;l<f;l+=1)Pb(t,e,s[l],n);else Pb(t,e,s,n);else!t.json&&!Gs.call(n,r)&&Gs.call(e,r)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=u||t.position,lt(t,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete n[r];return e}function kg(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):lt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ze(t,e,n){for(var i=0,r=t.input.charCodeAt(t.position);r!==0;){for(;Ra(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(Cr(r))for(kg(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&Vf(t,"deficient indentation"),i}function cd(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Kn(n)))}function Cg(t,e){e===1?t.result+=" ":e>1&&(t.result+=Mn.repeat(`
`,e-1))}function YM(t,e,n){var i,r,s,a,c,u,l,f,h=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Kn(p)||Ao(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(r=t.input.charCodeAt(t.position+1),Kn(r)||n&&Ao(r)))return!1;for(t.kind="scalar",t.result="",s=a=t.position,c=!1;p!==0;){if(p===58){if(r=t.input.charCodeAt(t.position+1),Kn(r)||n&&Ao(r))break}else if(p===35){if(i=t.input.charCodeAt(t.position-1),Kn(i))break}else{if(t.position===t.lineStart&&cd(t)||n&&Ao(p))break;if(Cr(p))if(u=t.line,l=t.lineStart,f=t.lineIndent,ze(t,!1,-1),t.lineIndent>=e){c=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=u,t.lineStart=l,t.lineIndent=f;break}}c&&(js(t,s,a,!1),Cg(t,t.line-u),s=a=t.position,c=!1),Ra(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return js(t,s,a,!1),t.result?!0:(t.kind=h,t.result=d,!1)}function GM(t,e){var n,i,r;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(js(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,r=t.position;else return!0;else Cr(n)?(js(t,i,r,!0),Cg(t,ze(t,!1,e)),i=r=t.position):t.position===t.lineStart&&cd(t)?lt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);lt(t,"unexpected end of the stream within a single quoted scalar")}function KM(t,e){var n,i,r,s,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return js(t,n,t.position,!0),t.position++,!0;if(c===92){if(js(t,n,t.position,!0),c=t.input.charCodeAt(++t.position),Cr(c))ze(t,!1,e);else if(c<256&&bx[c])t.result+=_x[c],t.position++;else if((a=zM(c))>0){for(r=a,s=0;r>0;r--)c=t.input.charCodeAt(++t.position),(a=jM(c))>=0?s=(s<<4)+a:lt(t,"expected hexadecimal character");t.result+=WM(s),t.position++}else lt(t,"unknown escape sequence");n=i=t.position}else Cr(c)?(js(t,n,i,!0),Cg(t,ze(t,!1,e)),n=i=t.position):t.position===t.lineStart&&cd(t)?lt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}lt(t,"unexpected end of the stream within a double quoted scalar")}function XM(t,e){var n=!0,i,r,s,a=t.tag,c,u=t.anchor,l,f,h,d,p,m=Object.create(null),g,y,v,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,p=!1,c=[];else if(b===123)f=125,p=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(ze(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=u,t.kind=p?"mapping":"sequence",t.result=c,!0;n?b===44&&lt(t,"expected the node content, but found ','"):lt(t,"missed comma between flow collection entries"),y=g=v=null,h=d=!1,b===63&&(l=t.input.charCodeAt(t.position+1),Kn(l)&&(h=d=!0,t.position++,ze(t,!0,e))),i=t.line,r=t.lineStart,s=t.position,qo(t,e,Pf,!1,!0),y=t.tag,g=t.result,ze(t,!0,e),b=t.input.charCodeAt(t.position),(d||t.line===i)&&b===58&&(h=!0,b=t.input.charCodeAt(++t.position),ze(t,!0,e),qo(t,e,Pf,!1,!0),v=t.result),p?To(t,c,m,y,g,v,i,r,s):h?c.push(To(t,null,m,y,g,v,i,r,s)):c.push(g),ze(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(n=!0,b=t.input.charCodeAt(++t.position)):n=!1}lt(t,"unexpected end of the stream within a flow collection")}function JM(t,e){var n,i,r=Ap,s=!1,a=!1,c=e,u=0,l=!1,f,h;if(h=t.input.charCodeAt(t.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)Ap===r?r=h===43?Db:PM:lt(t,"repeat of a chomping mode identifier");else if((f=qM(h))>=0)f===0?lt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?lt(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(Ra(h)){do h=t.input.charCodeAt(++t.position);while(Ra(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Cr(h)&&h!==0)}for(;h!==0;){for(kg(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),Cr(h)){u++;continue}if(t.lineIndent<c){r===Db?t.result+=Mn.repeat(`
`,s?1+u:u):r===Ap&&s&&(t.result+=`
`);break}for(i?Ra(h)?(l=!0,t.result+=Mn.repeat(`
`,s?1+u:u)):l?(l=!1,t.result+=Mn.repeat(`
`,u+1)):u===0?s&&(t.result+=" "):t.result+=Mn.repeat(`
`,u):t.result+=Mn.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,n=t.position;!Cr(h)&&h!==0;)h=t.input.charCodeAt(++t.position);js(t,n,t.position,!1)}return!0}function Ub(t,e){var n,i=t.tag,r=t.anchor,s=[],a,c=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),!(u!==45||(a=t.input.charCodeAt(t.position+1),!Kn(a))));){if(c=!0,t.position++,ze(t,!0,-1)&&t.lineIndent<=e){s.push(null),u=t.input.charCodeAt(t.position);continue}if(n=t.line,qo(t,e,mx,!1,!0),s.push(t.result),ze(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&u!==0)lt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=i,t.anchor=r,t.kind="sequence",t.result=s,!0):!1}function QM(t,e,n){var i,r,s,a,c,u,l=t.tag,f=t.anchor,h={},d=Object.create(null),p=null,m=null,g=null,y=!1,v=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(b===63||b===58)&&Kn(i))b===63?(y&&(To(t,h,d,p,m,null,a,c,u),p=m=g=null),v=!0,y=!0,r=!0):y?(y=!1,r=!0):lt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=i;else{if(a=t.line,c=t.lineStart,u=t.position,!qo(t,n,px,!1,!0))break;if(t.line===s){for(b=t.input.charCodeAt(t.position);Ra(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),Kn(b)||lt(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(To(t,h,d,p,m,null,a,c,u),p=m=g=null),v=!0,y=!1,r=!1,p=t.tag,m=t.result;else if(v)lt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=f,!0}else if(v)lt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=f,!0}if((t.line===s||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,u=t.position),qo(t,e,Uf,!0,r)&&(y?m=t.result:g=t.result),y||(To(t,h,d,p,m,g,a,c,u),p=m=g=null),ze(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&b!==0)lt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&To(t,h,d,p,m,null,a,c,u),v&&(t.tag=l,t.anchor=f,t.kind="mapping",t.result=h),v}function ZM(t){var e,n=!1,i=!1,r,s,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&lt(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(i=!0,r="!!",a=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(s=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):lt(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Kn(a);)a===33&&(i?lt(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),gx.test(r)||lt(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),$M.test(s)&&lt(t,"tag suffix cannot contain flow indicator characters")}s&&!yx.test(s)&&lt(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{lt(t,"tag name is malformed: "+s)}return n?t.tag=s:Gs.call(t.tagMap,r)?t.tag=t.tagMap[r]+s:r==="!"?t.tag="!"+s:r==="!!"?t.tag="tag:yaml.org,2002:"+s:lt(t,'undeclared tag handle "'+r+'"'),!0}function tN(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&lt(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Kn(n)&&!Ao(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function eN(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Kn(i)&&!Ao(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Gs.call(t.anchorMap,n)||lt(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],ze(t,!0,-1),!0}function qo(t,e,n,i,r){var s,a,c,u=1,l=!1,f=!1,h,d,p,m,g,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=a=c=Uf===n||mx===n,i&&ze(t,!0,-1)&&(l=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;ZM(t)||tN(t);)ze(t,!0,-1)?(l=!0,c=s,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):c=!1;if(c&&(c=l||r),(u===1||Uf===n)&&(Pf===n||px===n?g=e:g=e+1,y=t.position-t.lineStart,u===1?c&&(Ub(t,y)||QM(t,y,g))||XM(t,g)?f=!0:(a&&JM(t,g)||GM(t,g)||KM(t,g)?f=!0:eN(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&lt(t,"alias node should not have any properties")):YM(t,g,Pf===n)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(f=c&&Ub(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&lt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,d=t.implicitTypes.length;h<d;h+=1)if(m=t.implicitTypes[h],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Gs.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,p=t.typeMap.multi[t.kind||"fallback"],h=0,d=p.length;h<d;h+=1)if(t.tag.slice(0,p[h].tag.length)===p[h].tag){m=p[h];break}m||lt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&lt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):lt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}function nN(t){var e=t.position,n,i,r,s=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ze(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(s=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Kn(a);)a=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),r=[],i.length<1&&lt(t,"directive name must not be less than one character in length");a!==0;){for(;Ra(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Cr(a));break}if(Cr(a))break;for(n=t.position;a!==0&&!Kn(a);)a=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}a!==0&&kg(t),Gs.call(Bb,i)?Bb[i](t,i,r):Vf(t,'unknown document directive "'+i+'"')}if(ze(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ze(t,!0,-1)):s&&lt(t,"directives end mark is expected"),qo(t,t.lineIndent-1,Uf,!1,!0),ze(t,!0,-1),t.checkLineBreaks&&VM.test(t.input.slice(e,t.position))&&Vf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cd(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ze(t,!0,-1));return}if(t.position<t.length-1)lt(t,"end of the stream or a document separator is expected");else return}function wx(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new HM(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,lt(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)nN(n);return n.documents}function iN(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=wx(t,n);if(typeof e!="function")return i;for(var r=0,s=i.length;r<s;r+=1)e(i[r])}function rN(t,e){var n=wx(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new es("expected a single document in the stream, but found more")}}var sN=iN,aN=rN,oN={loadAll:sN,load:aN},cN=oN.load;function Xn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nl(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mg(t){let e,n,i;t.length!==2?(e=Xn,n=(c,u)=>Xn(t(c),u),i=(c,u)=>t(c)-u):(e=t===Xn||t===nl?t:uN,n=t,i=t);function r(c,u,l=0,f=c.length){if(l<f){if(e(u,u)!==0)return f;do{const h=l+f>>>1;n(c[h],u)<0?l=h+1:f=h}while(l<f)}return l}function s(c,u,l=0,f=c.length){if(l<f){if(e(u,u)!==0)return f;do{const h=l+f>>>1;n(c[h],u)<=0?l=h+1:f=h}while(l<f)}return l}function a(c,u,l=0,f=c.length){const h=r(c,u,l,f-1);return h>l&&i(c[h-1],u)>-i(c[h],u)?h-1:h}return{left:r,center:a,right:s}}function uN(){return 0}function xx(t){return t===null?NaN:+t}function*lN(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const fN=Mg(Xn),hN=fN.right;Mg(xx).center;const Ng=hN;function dN(t){return t.length|0}function pN(t){return!(t>0)}function mN(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function gN(t){return e=>t(...e)}function yN(...t){const e=typeof t[t.length-1]=="function"&&gN(t.pop());t=t.map(mN);const n=t.map(dN),i=t.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(pN))return s;for(;;){s.push(r.map((c,u)=>t[u][c]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?s.map(e):s;r[a--]=0}}}function bN(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Sx(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r));else{let a=-1;for(let c of t)(c=e(c,++a,t))!=null&&(c=+c)>=c&&(i=c-r,r+=i/++n,s+=i*(c-r))}if(n>1)return s/(n-1)}function _N(t,e){const n=Sx(t,e);return n&&Math.sqrt(n)}function Wo(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class ja{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],a=e+s,c=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);c&&(n[i++]=c),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,s=r-(a-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}class za extends Map{constructor(e,n=Ax){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(H0(this,e))}has(e){return super.has(H0(this,e))}set(e,n){return super.set(Ex(this,e),n)}delete(e){return super.delete(Ix(this,e))}}class Og extends Set{constructor(e,n=Ax){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(H0(this,e))}add(e){return super.add(Ex(this,e))}delete(e){return super.delete(Ix(this,e))}}function H0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Ex({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Ix({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Ax(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Y0(t){return t}function Fg(t,...e){return Dg(t,Y0,Y0,e)}function hu(t,e,...n){return Dg(t,Y0,e,n)}function vN(t,e,...n){return Dg(t,Array.from,e,n)}function Dg(t,e,n,i){return function r(s,a){if(a>=i.length)return n(s);const c=new za,u=i[a++];let l=-1;for(const f of s){const h=u(f,++l,s),d=c.get(h);d?d.push(f):c.set(h,[f])}for(const[f,h]of c)c.set(f,r(h,a));return e(c)}(t,0)}function wN(t,e){return Array.from(e,n=>t[n])}function G0(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,s)=>s);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,s)=>{for(const a of e){const c=$f(a[r],a[s]);if(c)return c}})):(n=t.map(n),i.sort((r,s)=>$f(n[r],n[s]))),wN(t,i)}return t.sort(Tx(n))}function Tx(t=Xn){if(t===Xn)return $f;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function $f(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Rg(t,e,n){return(e.length!==2?G0(hu(t,e,n),([i,r],[s,a])=>Xn(r,a)||Xn(i,s)):G0(Fg(t,n),([i,r],[s,a])=>e(r,a)||Xn(i,s))).map(([i])=>i)}const xN=Math.sqrt(50),SN=Math.sqrt(10),EN=Math.sqrt(2);function jf(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=xN?10:s>=SN?5:s>=EN?2:1;let c,u,l;return r<0?(l=Math.pow(10,-r)/a,c=Math.round(t*l),u=Math.round(e*l),c/l<t&&++c,u/l>e&&--u,l=-l):(l=Math.pow(10,r)*a,c=Math.round(t/l),u=Math.round(e/l),c*l<t&&++c,u*l>e&&--u),u<c&&.5<=n&&n<2?jf(t,e,n*2):[c,u,l]}function zf(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?jf(e,t,n):jf(t,e,n);if(!(s>=r))return[];const c=s-r+1,u=new Array(c);if(i)if(a<0)for(let l=0;l<c;++l)u[l]=(s-l)/-a;else for(let l=0;l<c;++l)u[l]=(s-l)*a;else if(a<0)for(let l=0;l<c;++l)u[l]=(r+l)/-a;else for(let l=0;l<c;++l)u[l]=(r+l)*a;return u}function K0(t,e,n){return e=+e,t=+t,n=+n,jf(t,e,n)[2]}function X0(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?K0(e,t,n):K0(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Ri(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function IN(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Or(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function AN(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function kx(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?$f:Tx(r);i>n;){if(i-n>600){const u=i-n+1,l=e-n+1,f=Math.log(u),h=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(e-l*h/u+d)),m=Math.min(i,Math.floor(e+(u-l)*h/u+d));kx(t,e,p,m,r)}const s=t[e];let a=n,c=i;for(jc(t,n,e),r(t[i],s)>0&&jc(t,n,i);a<c;){for(jc(t,a,c),++a,--c;r(t[a],s)<0;)++a;for(;r(t[c],s)>0;)--c}r(t[n],s)===0?jc(t,n,c):(++c,jc(t,c,i)),c<=e&&(n=c+1),e<=c&&(i=c-1)}return t}function jc(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Cx(t,e=Xn){let n,i=!1;if(e.length===1){let r;for(const s of t){const a=e(s);(i?Xn(a,r)>0:Xn(a,a)===0)&&(n=s,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function qf(t,e,n){if(t=Float64Array.from(lN(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return Or(t);if(e>=1)return Ri(t);var i,r=(i-1)*e,s=Math.floor(r),a=Ri(kx(t,s).subarray(0,s+1)),c=Or(t.subarray(s+1));return a+(c-a)*(r-s)}}function TN(t,e,n=xx){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),c=+n(t[s+1],s+1,t);return a+(c-a)*(r-s)}}function kN(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function J0(t,e){return qf(t,.5,e)}function*CN(t){for(const e of t)yield*e}function Mx(t){return Array.from(CN(t))}function MN(t,e){const n=new za;if(e===void 0)for(let s of t)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let a of t)(a=e(a,++s,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[s,a]of n)a>r&&(r=a,i=s);return i}function Q0(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function qa(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function Wf(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function NN(t){return t}var Tp=1,kp=2,Z0=3,Rl=4,Vb=1e-6;function ON(t){return"translate("+t+",0)"}function FN(t){return"translate(0,"+t+")"}function DN(t){return e=>+t(e)}function RN(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function LN(){return!this.__axis}function BN(t,e){var n=[],i=null,r=null,s=6,a=6,c=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Tp||t===Rl?-1:1,f=t===Rl||t===kp?"x":"y",h=t===Tp||t===Z0?ON:FN;function d(p){var m=i??(e.ticks?e.ticks.apply(e,n):e.domain()),g=r??(e.tickFormat?e.tickFormat.apply(e,n):NN),y=Math.max(s,0)+c,v=e.range(),b=+v[0]+u,x=+v[v.length-1]+u,w=(e.bandwidth?RN:DN)(e.copy(),u),_=p.selection?p.selection():p,E=_.selectAll(".domain").data([null]),T=_.selectAll(".tick").data(m,e).order(),C=T.exit(),D=T.enter().append("g").attr("class","tick"),O=T.select("line"),k=T.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(D),O=O.merge(D.append("line").attr("stroke","currentColor").attr(f+"2",l*s)),k=k.merge(D.append("text").attr("fill","currentColor").attr(f,l*y).attr("dy",t===Tp?"0em":t===Z0?"0.71em":"0.32em")),p!==_&&(E=E.transition(p),T=T.transition(p),O=O.transition(p),k=k.transition(p),C=C.transition(p).attr("opacity",Vb).attr("transform",function(N){return isFinite(N=w(N))?h(N+u):this.getAttribute("transform")}),D.attr("opacity",Vb).attr("transform",function(N){var B=this.parentNode.__axis;return h((B&&isFinite(B=B(N))?B:w(N))+u)})),C.remove(),E.attr("d",t===Rl||t===kp?a?"M"+l*a+","+b+"H"+u+"V"+x+"H"+l*a:"M"+u+","+b+"V"+x:a?"M"+b+","+l*a+"V"+u+"H"+x+"V"+l*a:"M"+b+","+u+"H"+x),T.attr("opacity",1).attr("transform",function(N){return h(w(N)+u)}),O.attr(f+"2",l*s),k.attr(f,l*y).text(g),_.filter(LN).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===kp?"start":t===Rl?"end":"middle"),_.each(function(){this.__axis=w})}return d.scale=function(p){return arguments.length?(e=p,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),d):i&&i.slice()},d.tickFormat=function(p){return arguments.length?(r=p,d):r},d.tickSize=function(p){return arguments.length?(s=a=+p,d):s},d.tickSizeInner=function(p){return arguments.length?(s=+p,d):s},d.tickSizeOuter=function(p){return arguments.length?(a=+p,d):a},d.tickPadding=function(p){return arguments.length?(c=+p,d):c},d.offset=function(p){return arguments.length?(u=+p,d):u},d}function PN(t){return BN(Z0,t)}var UN={value:()=>{}};function Lg(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new bf(n)}function bf(t){this._=t}function VN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}bf.prototype=Lg.prototype={constructor:bf,on:function(t,e){var n=this._,i=VN(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=$N(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=$b(n[r],t.name,e);else if(e==null)for(r in n)n[r]=$b(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bf(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function $N(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function $b(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=UN,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var tm="http://www.w3.org/1999/xhtml";const Ho={svg:"http://www.w3.org/2000/svg",xhtml:tm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ud(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ho.hasOwnProperty(e)?{space:Ho[e],local:t}:t}function jN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tm&&e.documentElement.namespaceURI===tm?e.createElement(t):e.createElementNS(n,t)}}function zN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ld(t){var e=ud(t);return(e.local?zN:jN)(e)}function qN(){}function Bg(t){return t==null?qN:function(){return this.querySelector(t)}}function WN(t){typeof t!="function"&&(t=Bg(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=new Array(a),u,l,f=0;f<a;++f)(u=s[f])&&(l=t.call(u,u.__data__,f,s))&&("__data__"in u&&(l.__data__=u.__data__),c[f]=l);return new ui(i,this._parents)}function HN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function YN(){return[]}function Nx(t){return t==null?YN:function(){return this.querySelectorAll(t)}}function GN(t){return function(){return HN(t.apply(this,arguments))}}function KN(t){typeof t=="function"?t=GN(t):t=Nx(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],c=a.length,u,l=0;l<c;++l)(u=a[l])&&(i.push(t.call(u,u.__data__,l,a)),r.push(u));return new ui(i,r)}function Ox(t){return function(){return this.matches(t)}}function Fx(t){return function(e){return e.matches(t)}}var XN=Array.prototype.find;function JN(t){return function(){return XN.call(this.children,t)}}function QN(){return this.firstElementChild}function ZN(t){return this.select(t==null?QN:JN(typeof t=="function"?t:Fx(t)))}var t7=Array.prototype.filter;function e7(){return Array.from(this.children)}function n7(t){return function(){return t7.call(this.children,t)}}function i7(t){return this.selectAll(t==null?e7:n7(typeof t=="function"?t:Fx(t)))}function r7(t){typeof t!="function"&&(t=Ox(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&c.push(u);return new ui(i,this._parents)}function Dx(t){return new Array(t.length)}function s7(){return new ui(this._enter||this._groups.map(Dx),this._parents)}function Hf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hf.prototype={constructor:Hf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function a7(t){return function(){return t}}function o7(t,e,n,i,r,s){for(var a=0,c,u=e.length,l=s.length;a<l;++a)(c=e[a])?(c.__data__=s[a],i[a]=c):n[a]=new Hf(t,s[a]);for(;a<u;++a)(c=e[a])&&(r[a]=c)}function c7(t,e,n,i,r,s,a){var c,u,l=new Map,f=e.length,h=s.length,d=new Array(f),p;for(c=0;c<f;++c)(u=e[c])&&(d[c]=p=a.call(u,u.__data__,c,e)+"",l.has(p)?r[c]=u:l.set(p,u));for(c=0;c<h;++c)p=a.call(t,s[c],c,s)+"",(u=l.get(p))?(i[c]=u,u.__data__=s[c],l.delete(p)):n[c]=new Hf(t,s[c]);for(c=0;c<f;++c)(u=e[c])&&l.get(d[c])===u&&(r[c]=u)}function u7(t){return t.__data__}function l7(t,e){if(!arguments.length)return Array.from(this,u7);var n=e?c7:o7,i=this._parents,r=this._groups;typeof t!="function"&&(t=a7(t));for(var s=r.length,a=new Array(s),c=new Array(s),u=new Array(s),l=0;l<s;++l){var f=i[l],h=r[l],d=h.length,p=f7(t.call(f,f&&f.__data__,l,i)),m=p.length,g=c[l]=new Array(m),y=a[l]=new Array(m),v=u[l]=new Array(d);n(f,h,g,y,v,p,e);for(var b=0,x=0,w,_;b<m;++b)if(w=g[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<m;);w._next=_||null}}return a=new ui(a,i),a._enter=c,a._exit=u,a}function f7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function h7(){return new ui(this._exit||this._groups.map(Dx),this._parents)}function d7(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function p7(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var l=n[u],f=i[u],h=l.length,d=c[u]=new Array(h),p,m=0;m<h;++m)(p=l[m]||f[m])&&(d[m]=p);for(;u<r;++u)c[u]=n[u];return new ui(c,this._parents)}function m7(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function g7(t){t||(t=y7);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],c=a.length,u=r[s]=new Array(c),l,f=0;f<c;++f)(l=a[f])&&(u[f]=l);u.sort(e)}return new ui(r,this._parents).order()}function y7(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function b7(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function _7(){return Array.from(this)}function v7(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function w7(){let t=0;for(const e of this)++t;return t}function x7(){return!this.node()}function S7(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,c;s<a;++s)(c=r[s])&&t.call(c,c.__data__,s,r);return this}function E7(t){return function(){this.removeAttribute(t)}}function I7(t){return function(){this.removeAttributeNS(t.space,t.local)}}function A7(t,e){return function(){this.setAttribute(t,e)}}function T7(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function k7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function C7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function M7(t,e){var n=ud(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?I7:E7:typeof e=="function"?n.local?C7:k7:n.local?T7:A7)(n,e))}function Rx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function N7(t){return function(){this.style.removeProperty(t)}}function O7(t,e,n){return function(){this.style.setProperty(t,e,n)}}function F7(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function D7(t,e,n){return arguments.length>1?this.each((e==null?N7:typeof e=="function"?F7:O7)(t,e,n??"")):Yo(this.node(),t)}function Yo(t,e){return t.style.getPropertyValue(e)||Rx(t).getComputedStyle(t,null).getPropertyValue(e)}function R7(t){return function(){delete this[t]}}function L7(t,e){return function(){this[t]=e}}function B7(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function P7(t,e){return arguments.length>1?this.each((e==null?R7:typeof e=="function"?B7:L7)(t,e)):this.node()[t]}function Lx(t){return t.trim().split(/^|\s+/)}function Pg(t){return t.classList||new Bx(t)}function Bx(t){this._node=t,this._names=Lx(t.getAttribute("class")||"")}Bx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Px(t,e){for(var n=Pg(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Ux(t,e){for(var n=Pg(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function U7(t){return function(){Px(this,t)}}function V7(t){return function(){Ux(this,t)}}function $7(t,e){return function(){(e.apply(this,arguments)?Px:Ux)(this,t)}}function j7(t,e){var n=Lx(t+"");if(arguments.length<2){for(var i=Pg(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?$7:e?U7:V7)(n,e))}function z7(){this.textContent=""}function q7(t){return function(){this.textContent=t}}function W7(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function H7(t){return arguments.length?this.each(t==null?z7:(typeof t=="function"?W7:q7)(t)):this.node().textContent}function Y7(){this.innerHTML=""}function G7(t){return function(){this.innerHTML=t}}function K7(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function X7(t){return arguments.length?this.each(t==null?Y7:(typeof t=="function"?K7:G7)(t)):this.node().innerHTML}function J7(){this.nextSibling&&this.parentNode.appendChild(this)}function Q7(){return this.each(J7)}function Z7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t9(){return this.each(Z7)}function e9(t){var e=typeof t=="function"?t:ld(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function n9(){return null}function i9(t,e){var n=typeof t=="function"?t:ld(t),i=e==null?n9:typeof e=="function"?e:Bg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function r9(){var t=this.parentNode;t&&t.removeChild(this)}function s9(){return this.each(r9)}function a9(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o9(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function c9(t){return this.select(t?o9:a9)}function u9(t){return arguments.length?this.property("__data__",t):this.node().__data__}function l9(t){return function(e){t.call(this,e,this.__data__)}}function f9(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function h9(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function d9(t,e,n){return function(){var i=this.__on,r,s=l9(e);if(i){for(var a=0,c=i.length;a<c;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function p9(t,e,n){var i=f9(t+""),r,s=i.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,l=c.length,f;u<l;++u)for(r=0,f=c[u];r<s;++r)if((a=i[r]).type===f.type&&a.name===f.name)return f.value}return}for(c=e?d9:h9,r=0;r<s;++r)this.each(c(i[r],e,n));return this}function Vx(t,e,n){var i=Rx(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function m9(t,e){return function(){return Vx(this,t,e)}}function g9(t,e){return function(){return Vx(this,t,e.apply(this,arguments))}}function y9(t,e){return this.each((typeof e=="function"?g9:m9)(t,e))}function*b9(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var $x=[null];function ui(t,e){this._groups=t,this._parents=e}function il(){return new ui([[document.documentElement]],$x)}function _9(){return this}ui.prototype=il.prototype={constructor:ui,select:WN,selectAll:KN,selectChild:ZN,selectChildren:i7,filter:r7,data:l7,enter:s7,exit:h7,join:d7,merge:p7,selection:_9,order:m7,sort:g7,call:b7,nodes:_7,node:v7,size:w7,empty:x7,each:S7,attr:M7,style:D7,property:P7,classed:j7,text:H7,html:X7,raise:Q7,lower:t9,append:e9,insert:i9,remove:s9,clone:c9,datum:u9,on:p9,dispatch:y9,[Symbol.iterator]:b9};function Yn(t){return typeof t=="string"?new ui([[document.querySelector(t)]],[document.documentElement]):new ui([[t]],$x)}function v9(t){let e;for(;e=t.sourceEvent;)t=e;return t}function em(t,e){if(t=v9(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const nm={capture:!0,passive:!1};function im(t){t.preventDefault(),t.stopImmediatePropagation()}function w9(t){var e=t.document.documentElement,n=Yn(t).on("dragstart.drag",im,nm);"onselectstart"in e?n.on("selectstart.drag",im,nm):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function x9(t,e){var n=t.document.documentElement,i=Yn(t).on("dragstart.drag",null);e&&(i.on("click.drag",im,nm),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function vc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ua(){}var Wa=.7,Go=1/Wa,Fo="\\s*([+-]?\\d+)\\s*",Tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S9=/^#([0-9a-f]{3,8})$/,E9=new RegExp(`^rgb\\(${Fo},${Fo},${Fo}\\)$`),I9=new RegExp(`^rgb\\(${Mr},${Mr},${Mr}\\)$`),A9=new RegExp(`^rgba\\(${Fo},${Fo},${Fo},${Tu}\\)$`),T9=new RegExp(`^rgba\\(${Mr},${Mr},${Mr},${Tu}\\)$`),k9=new RegExp(`^hsl\\(${Tu},${Mr},${Mr}\\)$`),C9=new RegExp(`^hsla\\(${Tu},${Mr},${Mr},${Tu}\\)$`),jb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vc(ua,Ks,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zb,formatHex:zb,formatHex8:M9,formatHsl:N9,formatRgb:qb,toString:qb});function zb(){return this.rgb().formatHex()}function M9(){return this.rgb().formatHex8()}function N9(){return jx(this).formatHsl()}function qb(){return this.rgb().formatRgb()}function Ks(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=S9.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Wb(e):n===3?new sn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ll(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ll(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=E9.exec(t))?new sn(e[1],e[2],e[3],1):(e=I9.exec(t))?new sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=A9.exec(t))?Ll(e[1],e[2],e[3],e[4]):(e=T9.exec(t))?Ll(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=k9.exec(t))?Gb(e[1],e[2]/100,e[3]/100,1):(e=C9.exec(t))?Gb(e[1],e[2]/100,e[3]/100,e[4]):jb.hasOwnProperty(t)?Wb(jb[t]):t==="transparent"?new sn(NaN,NaN,NaN,0):null}function Wb(t){return new sn(t>>16&255,t>>8&255,t&255,1)}function Ll(t,e,n,i){return i<=0&&(t=e=n=NaN),new sn(t,e,n,i)}function Ug(t){return t instanceof ua||(t=Ks(t)),t?(t=t.rgb(),new sn(t.r,t.g,t.b,t.opacity)):new sn}function Xs(t,e,n,i){return arguments.length===1?Ug(t):new sn(t,e,n,i??1)}function sn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}vc(sn,Xs,rl(ua,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new sn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sn(La(this.r),La(this.g),La(this.b),Yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hb,formatHex:Hb,formatHex8:O9,formatRgb:Yb,toString:Yb}));function Hb(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}`}function O9(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}${Ia((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yb(){const t=Yf(this.opacity);return`${t===1?"rgb(":"rgba("}${La(this.r)}, ${La(this.g)}, ${La(this.b)}${t===1?")":`, ${t})`}`}function Yf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function La(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ia(t){return t=La(t),(t<16?"0":"")+t.toString(16)}function Gb(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hi(t,e,n,i)}function jx(t){if(t instanceof Hi)return new Hi(t.h,t.s,t.l,t.opacity);if(t instanceof ua||(t=Ks(t)),!t)return new Hi;if(t instanceof Hi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,c=s-r,u=(s+r)/2;return c?(e===s?a=(n-i)/c+(n<i)*6:n===s?a=(i-e)/c+2:a=(e-n)/c+4,c/=u<.5?s+r:2-s-r,a*=60):c=u>0&&u<1?0:a,new Hi(a,c,u,t.opacity)}function rm(t,e,n,i){return arguments.length===1?jx(t):new Hi(t,e,n,i??1)}function Hi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}vc(Hi,rm,rl(ua,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new Hi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new Hi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new sn(Cp(t>=240?t-240:t+120,r,i),Cp(t,r,i),Cp(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Hi(Kb(this.h),Bl(this.s),Bl(this.l),Yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yf(this.opacity);return`${t===1?"hsl(":"hsla("}${Kb(this.h)}, ${Bl(this.s)*100}%, ${Bl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Kb(t){return t=(t||0)%360,t<0?t+360:t}function Bl(t){return Math.max(0,Math.min(1,t||0))}function Cp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zx=Math.PI/180,qx=180/Math.PI,Gf=18,Wx=.96422,Hx=1,Yx=.82521,Gx=4/29,Do=6/29,Kx=3*Do*Do,F9=Do*Do*Do;function Xx(t){if(t instanceof Nr)return new Nr(t.l,t.a,t.b,t.opacity);if(t instanceof ss)return Jx(t);t instanceof sn||(t=Ug(t));var e=Fp(t.r),n=Fp(t.g),i=Fp(t.b),r=Mp((.2225045*e+.7168786*n+.0606169*i)/Hx),s,a;return e===n&&n===i?s=a=r:(s=Mp((.4360747*e+.3850649*n+.1430804*i)/Wx),a=Mp((.0139322*e+.0971045*n+.7141733*i)/Yx)),new Nr(116*r-16,500*(s-r),200*(r-a),t.opacity)}function sm(t,e,n,i){return arguments.length===1?Xx(t):new Nr(t,e,n,i??1)}function Nr(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}vc(Nr,sm,rl(ua,{brighter(t){return new Nr(this.l+Gf*(t??1),this.a,this.b,this.opacity)},darker(t){return new Nr(this.l-Gf*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Wx*Np(e),t=Hx*Np(t),n=Yx*Np(n),new sn(Op(3.1338561*e-1.6168667*t-.4906146*n),Op(-.9787684*e+1.9161415*t+.033454*n),Op(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Mp(t){return t>F9?Math.pow(t,1/3):t/Kx+Gx}function Np(t){return t>Do?t*t*t:Kx*(t-Gx)}function Op(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Fp(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function D9(t){if(t instanceof ss)return new ss(t.h,t.c,t.l,t.opacity);if(t instanceof Nr||(t=Xx(t)),t.a===0&&t.b===0)return new ss(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*qx;return new ss(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Kf(t,e,n,i){return arguments.length===1?D9(t):new ss(t,e,n,i??1)}function ss(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Jx(t){if(isNaN(t.h))return new Nr(t.l,0,0,t.opacity);var e=t.h*zx;return new Nr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}vc(ss,Kf,rl(ua,{brighter(t){return new ss(this.h,this.c,this.l+Gf*(t??1),this.opacity)},darker(t){return new ss(this.h,this.c,this.l-Gf*(t??1),this.opacity)},rgb(){return Jx(this).rgb()}}));var Qx=-.14861,Vg=1.78277,$g=-.29227,fd=-.90649,ku=1.97294,Xb=ku*fd,Jb=ku*Vg,Qb=Vg*$g-fd*Qx;function R9(t){if(t instanceof Ba)return new Ba(t.h,t.s,t.l,t.opacity);t instanceof sn||(t=Ug(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Qb*i+Xb*e-Jb*n)/(Qb+Xb-Jb),s=i-r,a=(ku*(n-r)-$g*s)/fd,c=Math.sqrt(a*a+s*s)/(ku*r*(1-r)),u=c?Math.atan2(a,s)*qx-120:NaN;return new Ba(u<0?u+360:u,c,r,t.opacity)}function Fr(t,e,n,i){return arguments.length===1?R9(t):new Ba(t,e,n,i??1)}function Ba(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}vc(Ba,Fr,rl(ua,{brighter(t){return t=t==null?Go:Math.pow(Go,t),new Ba(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wa:Math.pow(Wa,t),new Ba(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*zx,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new sn(255*(e+n*(Qx*i+Vg*r)),255*(e+n*($g*i+fd*r)),255*(e+n*(ku*i)),this.opacity)}}));function L9(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}function B9(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,c=i<e-1?t[i+2]:2*s-r;return L9((n-i/e)*e,a,r,s,c)}}const hd=t=>()=>t;function Zx(t,e){return function(n){return t+n*e}}function P9(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function jg(t,e){var n=e-t;return n?Zx(t,n>180||n<-180?n-360*Math.round(n/360):n):hd(isNaN(t)?e:t)}function U9(t){return(t=+t)==1?_n:function(e,n){return n-e?P9(e,n,t):hd(isNaN(e)?n:e)}}function _n(t,e){var n=e-t;return n?Zx(t,n):hd(isNaN(t)?e:t)}const Ha=function t(e){var n=U9(e);function i(r,s){var a=n((r=Xs(r)).r,(s=Xs(s)).r),c=n(r.g,s.g),u=n(r.b,s.b),l=_n(r.opacity,s.opacity);return function(f){return r.r=a(f),r.g=c(f),r.b=u(f),r.opacity=l(f),r+""}}return i.gamma=t,i}(1);function V9(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),a,c;for(a=0;a<n;++a)c=Xs(e[a]),i[a]=c.r||0,r[a]=c.g||0,s[a]=c.b||0;return i=t(i),r=t(r),s=t(s),c.opacity=1,function(u){return c.r=i(u),c.g=r(u),c.b=s(u),c+""}}}var $9=V9(B9);function j9(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function z9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function q9(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=wc(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(c){for(a=0;a<i;++a)s[a]=r[a](c);return s}}function W9(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function yn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function H9(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=wc(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var am=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dp=new RegExp(am.source,"g");function Y9(t){return function(){return t}}function G9(t){return function(e){return t(e)+""}}function tS(t,e){var n=am.lastIndex=Dp.lastIndex=0,i,r,s,a=-1,c=[],u=[];for(t=t+"",e=e+"";(i=am.exec(t))&&(r=Dp.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),c[a]?c[a]+=s:c[++a]=s),(i=i[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,u.push({i:a,x:yn(i,r)})),n=Dp.lastIndex;return n<e.length&&(s=e.slice(n),c[a]?c[a]+=s:c[++a]=s),c.length<2?u[0]?G9(u[0].x):Y9(e):(e=u.length,function(l){for(var f=0,h;f<e;++f)c[(h=u[f]).i]=h.x(l);return c.join("")})}function wc(t,e){var n=typeof e,i;return e==null||n==="boolean"?hd(e):(n==="number"?yn:n==="string"?(i=Ks(e))?(e=i,Ha):tS:e instanceof Ks?Ha:e instanceof Date?W9:z9(e)?j9:Array.isArray(e)?q9:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?H9:yn)(t,e)}function zg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Zb=180/Math.PI,om={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eS(t,e,n,i,r,s){var a,c,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,u/=c),t*i<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Zb,skewX:Math.atan(u)*Zb,scaleX:a,scaleY:c}}var Pl;function K9(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?om:eS(e.a,e.b,e.c,e.d,e.e,e.f)}function X9(t){return t==null||(Pl||(Pl=document.createElementNS("http://www.w3.org/2000/svg","g")),Pl.setAttribute("transform",t),!(t=Pl.transform.baseVal.consolidate()))?om:(t=t.matrix,eS(t.a,t.b,t.c,t.d,t.e,t.f))}function nS(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function s(l,f,h,d,p,m){if(l!==h||f!==d){var g=p.push("translate(",null,e,null,n);m.push({i:g-4,x:yn(l,h)},{i:g-2,x:yn(f,d)})}else(h||d)&&p.push("translate("+h+e+d+n)}function a(l,f,h,d){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:yn(l,f)})):f&&h.push(r(h)+"rotate("+f+i)}function c(l,f,h,d){l!==f?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:yn(l,f)}):f&&h.push(r(h)+"skewX("+f+i)}function u(l,f,h,d,p,m){if(l!==h||f!==d){var g=p.push(r(p)+"scale(",null,",",null,")");m.push({i:g-4,x:yn(l,h)},{i:g-2,x:yn(f,d)})}else(h!==1||d!==1)&&p.push(r(p)+"scale("+h+","+d+")")}return function(l,f){var h=[],d=[];return l=t(l),f=t(f),s(l.translateX,l.translateY,f.translateX,f.translateY,h,d),a(l.rotate,f.rotate,h,d),c(l.skewX,f.skewX,h,d),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,d),l=f=null,function(p){for(var m=-1,g=d.length,y;++m<g;)h[(y=d[m]).i]=y.x(p);return h.join("")}}}var J9=nS(K9,"px, ","px)","deg)"),Q9=nS(X9,", ",")",")");function Z9(t){return function(e,n){var i=t((e=rm(e)).h,(n=rm(n)).h),r=_n(e.s,n.s),s=_n(e.l,n.l),a=_n(e.opacity,n.opacity);return function(c){return e.h=i(c),e.s=r(c),e.l=s(c),e.opacity=a(c),e+""}}}const tO=Z9(jg);function eO(t,e){var n=_n((t=sm(t)).l,(e=sm(e)).l),i=_n(t.a,e.a),r=_n(t.b,e.b),s=_n(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=s(a),t+""}}function nO(t){return function(e,n){var i=t((e=Kf(e)).h,(n=Kf(n)).h),r=_n(e.c,n.c),s=_n(e.l,n.l),a=_n(e.opacity,n.opacity);return function(c){return e.h=i(c),e.c=r(c),e.l=s(c),e.opacity=a(c),e+""}}}const iO=nO(jg);function iS(t){return function e(n){n=+n;function i(r,s){var a=t((r=Fr(r)).h,(s=Fr(s)).h),c=_n(r.s,s.s),u=_n(r.l,s.l),l=_n(r.opacity,s.opacity);return function(f){return r.h=a(f),r.s=c(f),r.l=u(Math.pow(f,n)),r.opacity=l(f),r+""}}return i.gamma=e,i}(1)}iS(jg);var qg=iS(_n);function Wg(t,e){e===void 0&&(e=t,t=wc);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var c=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[c](a-c)}}function Ji(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Ko=0,eu=0,zc=0,rS=1e3,Xf,nu,Jf=0,Ya=0,dd=0,Cu=typeof performance=="object"&&performance.now?performance:Date,sS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hg(){return Ya||(sS(rO),Ya=Cu.now()+dd)}function rO(){Ya=0}function Qf(){this._call=this._time=this._next=null}Qf.prototype=aS.prototype={constructor:Qf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Hg():+n)+(e==null?0:+e),!this._next&&nu!==this&&(nu?nu._next=this:Xf=this,nu=this),this._call=t,this._time=n,cm()},stop:function(){this._call&&(this._call=null,this._time=1/0,cm())}};function aS(t,e,n){var i=new Qf;return i.restart(t,e,n),i}function sO(){Hg(),++Ko;for(var t=Xf,e;t;)(e=Ya-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ko}function t_(){Ya=(Jf=Cu.now())+dd,Ko=eu=0;try{sO()}finally{Ko=0,oO(),Ya=0}}function aO(){var t=Cu.now(),e=t-Jf;e>rS&&(dd-=e,Jf=t)}function oO(){for(var t,e=Xf,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xf=n);nu=t,cm(i)}function cm(t){if(!Ko){eu&&(eu=clearTimeout(eu));var e=t-Ya;e>24?(t<1/0&&(eu=setTimeout(t_,t-Cu.now()-dd)),zc&&(zc=clearInterval(zc))):(zc||(Jf=Cu.now(),zc=setInterval(aO,rS)),Ko=1,sS(t_))}}function e_(t,e,n){var i=new Qf;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var cO=Lg("start","end","cancel","interrupt"),uO=[],oS=0,n_=1,um=2,_f=3,i_=4,lm=5,vf=6;function pd(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;lO(t,n,{name:e,index:i,group:r,on:cO,tween:uO,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:oS})}function Yg(t,e){var n=rr(t,e);if(n.state>oS)throw new Error("too late; already scheduled");return n}function Vr(t,e){var n=rr(t,e);if(n.state>_f)throw new Error("too late; already running");return n}function rr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lO(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=aS(s,0,n.time);function s(l){n.state=n_,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var f,h,d,p;if(n.state!==n_)return u();for(f in i)if(p=i[f],p.name===n.name){if(p.state===_f)return e_(a);p.state===i_?(p.state=vf,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[f]):+f<e&&(p.state=vf,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[f])}if(e_(function(){n.state===_f&&(n.state=i_,n.timer.restart(c,n.delay,n.time),c(l))}),n.state=um,n.on.call("start",t,t.__data__,n.index,n.group),n.state===um){for(n.state=_f,r=new Array(d=n.tween.length),f=0,h=-1;f<d;++f)(p=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function c(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=lm,1),h=-1,d=r.length;++h<d;)r[h].call(t,f);n.state===lm&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=vf,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function fm(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>um&&i.state<lm,i.state=vf,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function fO(t){return this.each(function(){fm(this,t)})}function hO(t,e){var n,i;return function(){var r=Vr(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,c=i.length;a<c;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function dO(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Vr(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var c={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=c;break}u===l&&r.push(c)}s.tween=r}}function pO(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=rr(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?hO:dO)(n,t,e))}function Gg(t,e,n){var i=t._id;return t.each(function(){var r=Vr(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return rr(r,i).value[e]}}function cS(t,e){var n;return(typeof e=="number"?yn:e instanceof Ks?Ha:(n=Ks(e))?(e=n,Ha):tS)(t,e)}function mO(t){return function(){this.removeAttribute(t)}}function gO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yO(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function bO(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function _O(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function vO(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function wO(t,e){var n=ud(t),i=n==="transform"?Q9:cS;return this.attrTween(t,typeof e=="function"?(n.local?vO:_O)(n,i,Gg(this,"attr."+t,e)):e==null?(n.local?gO:mO)(n):(n.local?bO:yO)(n,i,e))}function xO(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function SO(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function EO(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&SO(t,s)),n}return r._value=e,r}function IO(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&xO(t,s)),n}return r._value=e,r}function AO(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=ud(t);return this.tween(n,(i.local?EO:IO)(i,e))}function TO(t,e){return function(){Yg(this,t).delay=+e.apply(this,arguments)}}function kO(t,e){return e=+e,function(){Yg(this,t).delay=e}}function CO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?TO:kO)(e,t)):rr(this.node(),e).delay}function MO(t,e){return function(){Vr(this,t).duration=+e.apply(this,arguments)}}function NO(t,e){return e=+e,function(){Vr(this,t).duration=e}}function OO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?MO:NO)(e,t)):rr(this.node(),e).duration}function FO(t,e){if(typeof e!="function")throw new Error;return function(){Vr(this,t).ease=e}}function DO(t){var e=this._id;return arguments.length?this.each(FO(e,t)):rr(this.node(),e).ease}function RO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Vr(this,t).ease=n}}function LO(t){if(typeof t!="function")throw new Error;return this.each(RO(this._id,t))}function BO(t){typeof t!="function"&&(t=Ox(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&c.push(u);return new ps(i,this._parents,this._name,this._id)}function PO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),c=0;c<s;++c)for(var u=e[c],l=n[c],f=u.length,h=a[c]=new Array(f),d,p=0;p<f;++p)(d=u[p]||l[p])&&(h[p]=d);for(;c<i;++c)a[c]=e[c];return new ps(a,this._parents,this._name,this._id)}function UO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function VO(t,e,n){var i,r,s=UO(e)?Yg:Vr;return function(){var a=s(this,t),c=a.on;c!==i&&(r=(i=c).copy()).on(e,n),a.on=r}}function $O(t,e){var n=this._id;return arguments.length<2?rr(this.node(),n).on.on(t):this.each(VO(n,t,e))}function jO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function zO(){return this.on("end.remove",jO(this._id))}function qO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bg(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,l=s[a]=new Array(u),f,h,d=0;d<u;++d)(f=c[d])&&(h=t.call(f,f.__data__,d,c))&&("__data__"in f&&(h.__data__=f.__data__),l[d]=h,pd(l[d],e,n,d,l,rr(f,n)));return new ps(s,this._parents,e,n)}function WO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nx(t));for(var i=this._groups,r=i.length,s=[],a=[],c=0;c<r;++c)for(var u=i[c],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var d=t.call(f,f.__data__,h,u),p,m=rr(f,n),g=0,y=d.length;g<y;++g)(p=d[g])&&pd(p,e,n,g,d,m);s.push(d),a.push(f)}return new ps(s,a,e,n)}var HO=il.prototype.constructor;function YO(){return new HO(this._groups,this._parents)}function GO(t,e){var n,i,r;return function(){var s=Yo(this,t),a=(this.style.removeProperty(t),Yo(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function uS(t){return function(){this.style.removeProperty(t)}}function KO(t,e,n){var i,r=n+"",s;return function(){var a=Yo(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function XO(t,e,n){var i,r,s;return function(){var a=Yo(this,t),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(t),Yo(this,t))),a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c))}}function JO(t,e){var n,i,r,s="style."+e,a="end."+s,c;return function(){var u=Vr(this,t),l=u.on,f=u.value[s]==null?c||(c=uS(e)):void 0;(l!==n||r!==f)&&(i=(n=l).copy()).on(a,r=f),u.on=i}}function QO(t,e,n){var i=(t+="")=="transform"?J9:cS;return e==null?this.styleTween(t,GO(t,i)).on("end.style."+t,uS(t)):typeof e=="function"?this.styleTween(t,XO(t,i,Gg(this,"style."+t,e))).each(JO(this._id,t)):this.styleTween(t,KO(t,i,e),n).on("end.style."+t,null)}function ZO(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function tF(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&ZO(t,a,n)),i}return s._value=e,s}function eF(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,tF(t,e,n??""))}function nF(t){return function(){this.textContent=t}}function iF(t){return function(){var e=t(this);this.textContent=e??""}}function rF(t){return this.tween("text",typeof t=="function"?iF(Gg(this,"text",t)):nF(t==null?"":t+""))}function sF(t){return function(e){this.textContent=t.call(this,e)}}function aF(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&sF(r)),e}return i._value=t,i}function oF(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,aF(t))}function cF(){for(var t=this._name,e=this._id,n=lS(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,l=0;l<c;++l)if(u=a[l]){var f=rr(u,e);pd(u,t,n,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ps(i,this._parents,t,n)}function uF(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var c={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var l=Vr(this,i),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),l.on=e}),r===0&&s()})}var lF=0;function ps(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function lS(){return++lF}var qr=il.prototype;ps.prototype={constructor:ps,select:qO,selectAll:WO,selectChild:qr.selectChild,selectChildren:qr.selectChildren,filter:BO,merge:PO,selection:YO,transition:cF,call:qr.call,nodes:qr.nodes,node:qr.node,size:qr.size,empty:qr.empty,each:qr.each,on:$O,attr:wO,attrTween:AO,style:QO,styleTween:eF,text:rF,textTween:oF,remove:zO,tween:pO,delay:CO,duration:OO,ease:DO,easeVarying:LO,end:uF,[Symbol.iterator]:qr[Symbol.iterator]};function fF(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var hF={time:null,delay:0,duration:250,ease:fF};function dF(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function pF(t){var e,n;t instanceof ps?(e=t._id,t=t._name):(e=lS(),(n=hF).time=Hg(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,l=0;l<c;++l)(u=a[l])&&pd(u,t,e,l,a,n||dF(u,e));return new ps(i,this._parents,t,e)}il.prototype.interrupt=fO;il.prototype.transition=pF;const Rp=t=>()=>t;function mF(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function gF(t){t.stopImmediatePropagation()}function Lp(t){t.preventDefault(),t.stopImmediatePropagation()}var r_={name:"drag"},Bp={name:"space"},ho={name:"handle"},po={name:"center"};const{abs:s_,max:mn,min:gn}=Math;function a_(t){return[+t[0],+t[1]]}function o_(t){return[a_(t[0]),a_(t[1])]}var wf={name:"x",handles:["w","e"].map(Zf),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Pp={name:"y",handles:["n","s"].map(Zf),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Wr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},u_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},yF={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},bF={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Zf(t){return{type:t}}function _F(t){return!t.ctrlKey&&!t.button}function vF(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function wF(){return navigator.maxTouchPoints||"ontouchstart"in this}function Up(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function xF(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function SF(){return EF(wf)}function EF(t){var e=vF,n=_F,i=wF,r=!0,s=Lg("start","brush","end"),a=6,c;function u(y){var v=y.property("__brush",g).selectAll(".overlay").data([Zf("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Wr.overlay).merge(v).each(function(){var x=Up(this).extent;Yn(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),y.selectAll(".selection").data([Zf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Wr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=y.selectAll(".handle").data(t.handles,function(x){return x.type});b.exit().remove(),b.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return Wr[x.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(y,v,b){y.tween?y.on("start.brush",function(x){f(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){f(this,arguments).end(x)}).tween("brush",function(){var x=this,w=x.__brush,_=f(x,arguments),E=w.selection,T=t.input(typeof v=="function"?v.apply(this,arguments):v,w.extent),C=wc(E,T);function D(O){w.selection=O===1&&T===null?null:C(O),l.call(x),_.brush()}return E!==null&&T!==null?D:D(1)}):y.each(function(){var x=this,w=arguments,_=x.__brush,E=t.input(typeof v=="function"?v.apply(x,w):v,_.extent),T=f(x,w).beforestart();fm(x),_.selection=E===null?null:E,l.call(x),T.start(b).brush(b).end(b)})},u.clear=function(y,v){u.move(y,null,v)};function l(){var y=Yn(this),v=Up(this).selection;v?(y.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-a/2:v[0][0]-a/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-a/2:v[0][1]-a/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+a:a}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+a:a})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(y,v,b){var x=y.__brush.emitter;return x&&(!b||!x.clean)?x:new h(y,v,b)}function h(y,v,b){this.that=y,this.args=v,this.state=y.__brush,this.active=0,this.clean=b}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,v){return this.starting?(this.starting=!1,this.emit("start",y,v)):this.emit("brush",y),this},brush:function(y,v){return this.emit("brush",y,v),this},end:function(y,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,v)),this},emit:function(y,v,b){var x=Yn(this.that).datum();s.call(y,this.that,new mF(y,{sourceEvent:v,target:u,selection:t.output(this.state.selection),mode:b,dispatch:s}),x)}};function d(y){if(c&&!y.touches||!n.apply(this,arguments))return;var v=this,b=y.target.__data__.type,x=(r&&y.metaKey?b="overlay":b)==="selection"?r_:r&&y.altKey?po:ho,w=t===Pp?null:yF[b],_=t===wf?null:bF[b],E=Up(v),T=E.extent,C=E.selection,D=T[0][0],O,k,N=T[0][1],B,z,I=T[1][0],j,F,P=T[1][1],W,J,X=0,Q=0,ot,Ut=w&&_&&r&&y.shiftKey,dt,ut,rt=Array.from(y.touches||[y],G=>{const St=G.identifier;return G=em(G,v),G.point0=G.slice(),G.identifier=St,G});fm(v);var ct=f(v,arguments,!0).beforestart();if(b==="overlay"){C&&(ot=!0);const G=[rt[0],rt[1]||rt[0]];E.selection=C=[[O=t===Pp?D:gn(G[0][0],G[1][0]),B=t===wf?N:gn(G[0][1],G[1][1])],[j=t===Pp?I:mn(G[0][0],G[1][0]),W=t===wf?P:mn(G[0][1],G[1][1])]],rt.length>1&&st(y)}else O=C[0][0],B=C[0][1],j=C[1][0],W=C[1][1];k=O,z=B,F=j,J=W;var M=Yn(v).attr("pointer-events","none"),H=M.selectAll(".overlay").attr("cursor",Wr[b]);if(y.touches)ct.moved=U,ct.ended=pt;else{var K=Yn(y.view).on("mousemove.brush",U,!0).on("mouseup.brush",pt,!0);r&&K.on("keydown.brush",bt,!0).on("keyup.brush",mt,!0),w9(y.view)}l.call(v),ct.start(y,x.name);function U(G){for(const St of G.changedTouches||[G])for(const re of rt)re.identifier===St.identifier&&(re.cur=em(St,v));if(Ut&&!dt&&!ut&&rt.length===1){const St=rt[0];s_(St.cur[0]-St[0])>s_(St.cur[1]-St[1])?ut=!0:dt=!0}for(const St of rt)St.cur&&(St[0]=St.cur[0],St[1]=St.cur[1]);ot=!0,Lp(G),st(G)}function st(G){const St=rt[0],re=St.point0;var _e;switch(X=St[0]-re[0],Q=St[1]-re[1],x){case Bp:case r_:{w&&(X=mn(D-O,gn(I-j,X)),k=O+X,F=j+X),_&&(Q=mn(N-B,gn(P-W,Q)),z=B+Q,J=W+Q);break}case ho:{rt[1]?(w&&(k=mn(D,gn(I,rt[0][0])),F=mn(D,gn(I,rt[1][0])),w=1),_&&(z=mn(N,gn(P,rt[0][1])),J=mn(N,gn(P,rt[1][1])),_=1)):(w<0?(X=mn(D-O,gn(I-O,X)),k=O+X,F=j):w>0&&(X=mn(D-j,gn(I-j,X)),k=O,F=j+X),_<0?(Q=mn(N-B,gn(P-B,Q)),z=B+Q,J=W):_>0&&(Q=mn(N-W,gn(P-W,Q)),z=B,J=W+Q));break}case po:{w&&(k=mn(D,gn(I,O-X*w)),F=mn(D,gn(I,j+X*w))),_&&(z=mn(N,gn(P,B-Q*_)),J=mn(N,gn(P,W+Q*_)));break}}F<k&&(w*=-1,_e=O,O=j,j=_e,_e=k,k=F,F=_e,b in c_&&H.attr("cursor",Wr[b=c_[b]])),J<z&&(_*=-1,_e=B,B=W,W=_e,_e=z,z=J,J=_e,b in u_&&H.attr("cursor",Wr[b=u_[b]])),E.selection&&(C=E.selection),dt&&(k=C[0][0],F=C[1][0]),ut&&(z=C[0][1],J=C[1][1]),(C[0][0]!==k||C[0][1]!==z||C[1][0]!==F||C[1][1]!==J)&&(E.selection=[[k,z],[F,J]],l.call(v),ct.brush(G,x.name))}function pt(G){if(gF(G),G.touches){if(G.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else x9(G.view,ot),K.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),H.attr("cursor",Wr.overlay),E.selection&&(C=E.selection),xF(C)&&(E.selection=null,l.call(v)),ct.end(G,x.name)}function bt(G){switch(G.keyCode){case 16:{Ut=w&&_;break}case 18:{x===ho&&(w&&(j=F-X*w,O=k+X*w),_&&(W=J-Q*_,B=z+Q*_),x=po,st(G));break}case 32:{(x===ho||x===po)&&(w<0?j=F-X:w>0&&(O=k-X),_<0?W=J-Q:_>0&&(B=z-Q),x=Bp,H.attr("cursor",Wr.selection),st(G));break}default:return}Lp(G)}function mt(G){switch(G.keyCode){case 16:{Ut&&(dt=ut=Ut=!1,st(G));break}case 18:{x===po&&(w<0?j=F:w>0&&(O=k),_<0?W=J:_>0&&(B=z),x=ho,st(G));break}case 32:{x===Bp&&(G.altKey?(w&&(j=F-X*w,O=k+X*w),_&&(W=J-Q*_,B=z+Q*_),x=po):(w<0?j=F:w>0&&(O=k),_<0?W=J:_>0&&(B=z),x=ho),H.attr("cursor",Wr[b]),st(G));break}default:return}Lp(G)}}function p(y){f(this,arguments).moved(y)}function m(y){f(this,arguments).ended(y)}function g(){var y=this.__brush||{selection:null};return y.extent=o_(e.apply(this,arguments)),y.dim=t,y}return u.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Rp(o_(y)),u):e},u.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Rp(!!y),u):n},u.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Rp(!!y),u):i},u.handleSize=function(y){return arguments.length?(a=+y,u):a},u.keyModifiers=function(y){return arguments.length?(r=!!y,u):r},u.on=function(){var y=s.on.apply(s,arguments);return y===s?u:y},u}const hm=Math.PI,dm=2*hm,wa=1e-6,IF=dm-wa;function fS(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function AF(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fS;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class hS{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fS:AF(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,c=this._y1,u=i-e,l=r-n,f=a-e,h=c-n,d=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>wa)if(!(Math.abs(h*u-l*f)>wa)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,m=r-c,g=u*u+l*l,y=p*p+m*m,v=Math.sqrt(g),b=Math.sqrt(d),x=s*Math.tan((hm-Math.acos((g+d-y)/(2*v*b)))/2),w=x/b,_=x/v;Math.abs(w-1)>wa&&this._append`L${e+w*f},${n+w*h}`,this._append`A${s},${s},0,0,${+(h*p>f*m)},${this._x1=e+_*u},${this._y1=n+_*l}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let c=i*Math.cos(r),u=i*Math.sin(r),l=e+c,f=n+u,h=1^a,d=a?r-s:s-r;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>wa||Math.abs(this._y1-f)>wa)&&this._append`L${l},${f}`,i&&(d<0&&(d=d%dm+dm),d>IF?this._append`A${i},${i},0,1,${h},${e-c},${n-u}A${i},${i},0,1,${h},${this._x1=l},${this._y1=f}`:d>wa&&this._append`A${i},${i},0,${+(d>=hm)},${h},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Us(t=3){return new hS(+t)}var l_={},Vp={},$p=34,qc=10,jp=13;function dS(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function TF(t,e){var n=dS(t);return function(i,r){return e(n(i),r,t)}}function f_(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function Vn(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function kF(t){return t<0?"-"+Vn(-t,6):t>9999?"+"+Vn(t,6):Vn(t,4)}function CF(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":kF(t.getUTCFullYear())+"-"+Vn(t.getUTCMonth()+1,2)+"-"+Vn(t.getUTCDate(),2)+(r?"T"+Vn(e,2)+":"+Vn(n,2)+":"+Vn(i,2)+"."+Vn(r,3)+"Z":i?"T"+Vn(e,2)+":"+Vn(n,2)+":"+Vn(i,2)+"Z":n||e?"T"+Vn(e,2)+":"+Vn(n,2)+"Z":"")}function MF(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(h,d){var p,m,g=r(h,function(y,v){if(p)return p(y,v-1);m=y,p=d?TF(y,d):dS(y)});return g.columns=m||[],g}function r(h,d){var p=[],m=h.length,g=0,y=0,v,b=m<=0,x=!1;h.charCodeAt(m-1)===qc&&--m,h.charCodeAt(m-1)===jp&&--m;function w(){if(b)return Vp;if(x)return x=!1,l_;var E,T=g,C;if(h.charCodeAt(T)===$p){for(;g++<m&&h.charCodeAt(g)!==$p||h.charCodeAt(++g)===$p;);return(E=g)>=m?b=!0:(C=h.charCodeAt(g++))===qc?x=!0:C===jp&&(x=!0,h.charCodeAt(g)===qc&&++g),h.slice(T+1,E-1).replace(/""/g,'"')}for(;g<m;){if((C=h.charCodeAt(E=g++))===qc)x=!0;else if(C===jp)x=!0,h.charCodeAt(g)===qc&&++g;else if(C!==n)continue;return h.slice(T,E)}return b=!0,h.slice(T,m)}for(;(v=w())!==Vp;){for(var _=[];v!==l_&&v!==Vp;)_.push(v),v=w();d&&(_=d(_,y++))==null||p.push(_)}return p}function s(h,d){return h.map(function(p){return d.map(function(m){return f(p[m])}).join(t)})}function a(h,d){return d==null&&(d=f_(h)),[d.map(f).join(t)].concat(s(h,d)).join(`
`)}function c(h,d){return d==null&&(d=f_(h)),s(h,d).join(`
`)}function u(h){return h.map(l).join(`
`)}function l(h){return h.map(f).join(t)}function f(h){return h==null?"":h instanceof Date?CF(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:c,formatRows:u,formatRow:l,formatValue:f}}var NF=MF(","),OF=NF.parse;function FF(t){for(var e in t){var n=t[e].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))DF&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const DF=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function RF(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function LF(t,e){return fetch(t,e).then(RF)}function BF(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),LF(e,n).then(function(r){return t(r,i)})}}var PF=BF(OF);function UF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function th(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Xo(t){return t=th(Math.abs(t)),t?t[1]:NaN}function VF(t,e){return function(n,i){for(var r=n.length,s=[],a=0,c=t[0],u=0;r>0&&c>0&&(u+c+1>i&&(c=Math.max(1,i-u)),s.push(n.substring(r-=c,r+c)),!((u+=c+1)>i));)c=t[a=(a+1)%t.length];return s.reverse().join(e)}}function $F(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mu(t){if(!(e=jF.exec(t)))throw new Error("invalid format: "+t);var e;return new Kg({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mu.prototype=Kg.prototype;function Kg(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Kg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zF(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var pS;function qF(t,e){var n=th(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(pS=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+th(t,Math.max(0,e+s-1))[0]}function h_(t,e){var n=th(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const d_={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:UF,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>h_(t*100,e),r:h_,s:qF,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function p_(t){return t}var m_=Array.prototype.map,g_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function WF(t){var e=t.grouping===void 0||t.thousands===void 0?p_:VF(m_.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?p_:$F(m_.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Mu(h);var d=h.fill,p=h.align,m=h.sign,g=h.symbol,y=h.zero,v=h.width,b=h.comma,x=h.precision,w=h.trim,_=h.type;_==="n"?(b=!0,_="g"):d_[_]||(x===void 0&&(x=12),w=!0,_="g"),(y||d==="0"&&p==="=")&&(y=!0,d="0",p="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T=g==="$"?i:/[%p]/.test(_)?a:"",C=d_[_],D=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O(k){var N=E,B=T,z,I,j;if(_==="c")B=C(k)+B,k="";else{k=+k;var F=k<0||1/k<0;if(k=isNaN(k)?u:C(Math.abs(k),x),w&&(k=zF(k)),F&&+k==0&&m!=="+"&&(F=!1),N=(F?m==="("?m:c:m==="-"||m==="("?"":m)+N,B=(_==="s"?g_[8+pS/3]:"")+B+(F&&m==="("?")":""),D){for(z=-1,I=k.length;++z<I;)if(j=k.charCodeAt(z),48>j||j>57){B=(j===46?r+k.slice(z+1):k.slice(z))+B,k=k.slice(0,z);break}}}b&&!y&&(k=e(k,1/0));var P=N.length+k.length+B.length,W=P<v?new Array(v-P+1).join(d):"";switch(b&&y&&(k=e(W+k,W.length?v-B.length:1/0),W=""),p){case"<":k=N+k+B+W;break;case"=":k=N+W+k+B;break;case"^":k=W.slice(0,P=W.length>>1)+N+k+B+W.slice(P);break;default:k=W+N+k+B;break}return s(k)}return O.toString=function(){return h+""},O}function f(h,d){var p=l((h=Mu(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(Xo(d)/3)))*3,g=Math.pow(10,-m),y=g_[8+m/3];return function(v){return p(g*v)+y}}return{format:l,formatPrefix:f}}var Ul,xc,mS;HF({thousands:",",grouping:[3],currency:["$",""]});function HF(t){return Ul=WF(t),xc=Ul.format,mS=Ul.formatPrefix,Ul}function YF(t){return Math.max(0,-Xo(Math.abs(t)))}function GF(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xo(e)/3)))*3-Xo(Math.abs(t)))}function KF(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xo(e)-Xo(t))+1}var Lt=1e-6,gS=1e-12,Yt=Math.PI,Ue=Yt/2,y_=Yt/4,li=Yt*2,Tn=180/Yt,Le=Yt/180,me=Math.abs,Sc=Math.atan,ms=Math.atan2,Wt=Math.cos,yS=Math.exp,eh=Math.log,zp=Math.pow,Ft=Math.sin,Ci=Math.sign||function(t){return t>0?1:t<0?-1:0},Jn=Math.sqrt,Xg=Math.tan;function bS(t){return t>1?0:t<-1?Yt:Math.acos(t)}function Li(t){return t>1?Ue:t<-1?-Ue:Math.asin(t)}function Mi(){}function nh(t,e){t&&__.hasOwnProperty(t.type)&&__[t.type](t,e)}var b_={Feature:function(t,e){nh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)nh(n[i].geometry,e)}},__={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){pm(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pm(n[i],e,0)},Polygon:function(t,e){v_(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)v_(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)nh(n[i],e)}};function pm(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function v_(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pm(t[n],e,1);e.polygonEnd()}function vo(t,e){t&&b_.hasOwnProperty(t.type)?b_[t.type](t,e):nh(t,e)}function mm(t){return[ms(t[1],t[0]),Li(t[2])]}function Jo(t){var e=t[0],n=t[1],i=Wt(n);return[i*Wt(e),i*Ft(e),Ft(n)]}function Vl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ih(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qp(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $l(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function gm(t){var e=Jn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ym(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function bm(t,e){return me(t)>Yt&&(t-=Math.round(t/li)*li),[t,e]}bm.invert=bm;function _S(t,e,n){return(t%=li)?e||n?ym(x_(t),S_(e,n)):x_(t):e||n?S_(e,n):bm}function w_(t){return function(e,n){return e+=t,me(e)>Yt&&(e-=Math.round(e/li)*li),[e,n]}}function x_(t){var e=w_(t);return e.invert=w_(-t),e}function S_(t,e){var n=Wt(t),i=Ft(t),r=Wt(e),s=Ft(e);function a(c,u){var l=Wt(u),f=Wt(c)*l,h=Ft(c)*l,d=Ft(u),p=d*n+f*i;return[ms(h*r-p*s,f*n-d*i),Li(p*r+h*s)]}return a.invert=function(c,u){var l=Wt(u),f=Wt(c)*l,h=Ft(c)*l,d=Ft(u),p=d*r-h*s;return[ms(h*r+d*s,f*n+p*i),Li(p*n-f*i)]},a}function XF(t){t=_S(t[0]*Le,t[1]*Le,t.length>2?t[2]*Le:0);function e(n){return n=t(n[0]*Le,n[1]*Le),n[0]*=Tn,n[1]*=Tn,n}return e.invert=function(n){return n=t.invert(n[0]*Le,n[1]*Le),n[0]*=Tn,n[1]*=Tn,n},e}function JF(t,e,n,i,r,s){if(n){var a=Wt(e),c=Ft(e),u=i*n;r==null?(r=e+i*li,s=e-u/2):(r=E_(a,r),s=E_(a,s),(i>0?r<s:r>s)&&(r+=i*li));for(var l,f=r;i>0?f>s:f<s;f-=u)l=mm([a,-c*Wt(f),-c*Ft(f)]),t.point(l[0],l[1])}}function E_(t,e){e=Jo(e),e[0]-=t,gm(e);var n=bS(-e[1]);return((-e[2]<0?-n:n)+li-Lt)%li}function vS(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Mi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function xf(t,e){return me(t[0]-e[0])<Lt&&me(t[1]-e[1])<Lt}function jl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function wS(t,e,n,i,r){var s=[],a=[],c,u;if(t.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],v=m[g],b;if(xf(y,v)){if(!y[2]&&!v[2]){for(r.lineStart(),c=0;c<g;++c)r.point((y=m[c])[0],y[1]);r.lineEnd();return}v[0]+=2*Lt}s.push(b=new jl(y,m,null,!0)),a.push(b.o=new jl(y,null,b,!1)),s.push(b=new jl(v,m,null,!1)),a.push(b.o=new jl(v,null,b,!0))}}),!!s.length){for(a.sort(e),I_(s),I_(a),c=0,u=a.length;c<u;++c)a[c].e=n=!n;for(var l=s[0],f,h;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;f=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(c=0,u=f.length;c<u;++c)r.point((h=f[c])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(f=d.p.z,c=f.length-1;c>=0;--c)r.point((h=f[c])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,f=d.z,p=!p}while(!d.v);r.lineEnd()}}}function I_(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Wp(t){return me(t[0])<=Yt?t[0]:Ci(t[0])*((me(t[0])+Yt)%li-Yt)}function QF(t,e){var n=Wp(e),i=e[1],r=Ft(i),s=[Ft(n),-Wt(n),0],a=0,c=0,u=new ja;r===1?i=Ue+Lt:r===-1&&(i=-Ue-Lt);for(var l=0,f=t.length;l<f;++l)if(d=(h=t[l]).length)for(var h,d,p=h[d-1],m=Wp(p),g=p[1]/2+y_,y=Ft(g),v=Wt(g),b=0;b<d;++b,m=w,y=E,v=T,p=x){var x=h[b],w=Wp(x),_=x[1]/2+y_,E=Ft(_),T=Wt(_),C=w-m,D=C>=0?1:-1,O=D*C,k=O>Yt,N=y*E;if(u.add(ms(N*D*Ft(O),v*T+N*Wt(O))),a+=k?C+D*li:C,k^m>=n^w>=n){var B=ih(Jo(p),Jo(x));gm(B);var z=ih(s,B);gm(z);var I=(k^C>=0?-1:1)*Li(z[2]);(i>I||i===I&&(B[0]||B[1]))&&(c+=k^C>=0?1:-1)}}return(a<-Lt||a<Lt&&u<-gS)^c&1}function xS(t,e,n,i){return function(r){var s=e(r),a=vS(),c=e(a),u=!1,l,f,h,d={point:p,lineStart:g,lineEnd:y,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=x,f=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=g,d.lineEnd=y,f=Mx(f);var w=QF(l,i);f.length?(u||(r.polygonStart(),u=!0),wS(f,tD,w,n,r)):w&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),f=l=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,_){t(w,_)&&r.point(w,_)}function m(w,_){s.point(w,_)}function g(){d.point=m,s.lineStart()}function y(){d.point=p,s.lineEnd()}function v(w,_){h.push([w,_]),c.point(w,_)}function b(){c.lineStart(),h=[]}function x(){v(h[0][0],h[0][1]),c.lineEnd();var w=c.clean(),_=a.result(),E,T=_.length,C,D,O;if(h.pop(),l.push(h),h=null,!!T){if(w&1){if(D=_[0],(C=D.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),E=0;E<C;++E)r.point((O=D[E])[0],O[1]);r.lineEnd()}return}T>1&&w&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(ZF))}}return d}}function ZF(t){return t.length>1}function tD(t,e){return((t=t.x)[0]<0?t[1]-Ue-Lt:Ue-t[1])-((e=e.x)[0]<0?e[1]-Ue-Lt:Ue-e[1])}const A_=xS(function(){return!0},eD,iD,[-Yt,-Ue]);function eD(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,a){var c=s>0?Yt:-Yt,u=me(s-e);me(u-Yt)<Lt?(t.point(e,n=(n+a)/2>0?Ue:-Ue),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(c,n),t.point(s,n),r=0):i!==c&&u>=Yt&&(me(e-i)<Lt&&(e-=i*Lt),me(s-c)<Lt&&(s-=c*Lt),n=nD(e,n,s,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(c,n),r=0),t.point(e=s,n=a),i=c},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function nD(t,e,n,i){var r,s,a=Ft(t-n);return me(a)>Lt?Sc((Ft(e)*(s=Wt(i))*Ft(n)-Ft(i)*(r=Wt(e))*Ft(t))/(r*s*a)):(e+i)/2}function iD(t,e,n,i){var r;if(t==null)r=n*Ue,i.point(-Yt,r),i.point(0,r),i.point(Yt,r),i.point(Yt,0),i.point(Yt,-r),i.point(0,-r),i.point(-Yt,-r),i.point(-Yt,0),i.point(-Yt,r);else if(me(t[0]-e[0])>Lt){var s=t[0]<e[0]?Yt:-Yt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function rD(t){var e=Wt(t),n=6*Le,i=e>0,r=me(e)>Lt;function s(f,h,d,p){JF(p,t,n,d,f,h)}function a(f,h){return Wt(f)*Wt(h)>e}function c(f){var h,d,p,m,g;return{lineStart:function(){m=p=!1,g=1},point:function(y,v){var b=[y,v],x,w=a(y,v),_=i?w?0:l(y,v):w?l(y+(y<0?Yt:-Yt),v):0;if(!h&&(m=p=w)&&f.lineStart(),w!==p&&(x=u(h,b),(!x||xf(h,x)||xf(b,x))&&(b[2]=1)),w!==p)g=0,w?(f.lineStart(),x=u(b,h),f.point(x[0],x[1])):(x=u(h,b),f.point(x[0],x[1],2),f.lineEnd()),h=x;else if(r&&h&&i^w){var E;!(_&d)&&(E=u(b,h,!0))&&(g=0,i?(f.lineStart(),f.point(E[0][0],E[0][1]),f.point(E[1][0],E[1][1]),f.lineEnd()):(f.point(E[1][0],E[1][1]),f.lineEnd(),f.lineStart(),f.point(E[0][0],E[0][1],3)))}w&&(!h||!xf(h,b))&&f.point(b[0],b[1]),h=b,p=w,d=_},lineEnd:function(){p&&f.lineEnd(),h=null},clean:function(){return g|(m&&p)<<1}}}function u(f,h,d){var p=Jo(f),m=Jo(h),g=[1,0,0],y=ih(p,m),v=Vl(y,y),b=y[0],x=v-b*b;if(!x)return!d&&f;var w=e*v/x,_=-e*b/x,E=ih(g,y),T=$l(g,w),C=$l(y,_);qp(T,C);var D=E,O=Vl(T,D),k=Vl(D,D),N=O*O-k*(Vl(T,T)-1);if(!(N<0)){var B=Jn(N),z=$l(D,(-O-B)/k);if(qp(z,T),z=mm(z),!d)return z;var I=f[0],j=h[0],F=f[1],P=h[1],W;j<I&&(W=I,I=j,j=W);var J=j-I,X=me(J-Yt)<Lt,Q=X||J<Lt;if(!X&&P<F&&(W=F,F=P,P=W),Q?X?F+P>0^z[1]<(me(z[0]-I)<Lt?F:P):F<=z[1]&&z[1]<=P:J>Yt^(I<=z[0]&&z[0]<=j)){var ot=$l(D,(-O+B)/k);return qp(ot,T),[z,mm(ot)]}}}function l(f,h){var d=i?t:Yt-t,p=0;return f<-d?p|=1:f>d&&(p|=2),h<-d?p|=4:h>d&&(p|=8),p}return xS(a,c,s,i?[0,-t]:[-Yt,t-Yt])}function sD(t,e,n,i,r,s){var a=t[0],c=t[1],u=e[0],l=e[1],f=0,h=1,d=u-a,p=l-c,m;if(m=n-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=r-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=i-c,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>f&&(f=m)}if(m=s-c,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<h&&(h=m)}return f>0&&(t[0]=a+f*d,t[1]=c+f*p),h<1&&(e[0]=a+h*d,e[1]=c+h*p),!0}}}}}var iu=1e9,zl=-iu;function SS(t,e,n,i){function r(l,f){return t<=l&&l<=n&&e<=f&&f<=i}function s(l,f,h,d){var p=0,m=0;if(l==null||(p=a(l,h))!==(m=a(f,h))||u(l,f)<0^h>0)do d.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+h+4)%4)!==m);else d.point(f[0],f[1])}function a(l,f){return me(l[0]-t)<Lt?f>0?0:3:me(l[0]-n)<Lt?f>0?2:1:me(l[1]-e)<Lt?f>0?1:0:f>0?3:2}function c(l,f){return u(l.x,f.x)}function u(l,f){var h=a(l,1),d=a(f,1);return h!==d?h-d:h===0?f[1]-l[1]:h===1?l[0]-f[0]:h===2?l[1]-f[1]:f[0]-l[0]}return function(l){var f=l,h=vS(),d,p,m,g,y,v,b,x,w,_,E,T={point:C,lineStart:N,lineEnd:B,polygonStart:O,polygonEnd:k};function C(I,j){r(I,j)&&f.point(I,j)}function D(){for(var I=0,j=0,F=p.length;j<F;++j)for(var P=p[j],W=1,J=P.length,X=P[0],Q,ot,Ut=X[0],dt=X[1];W<J;++W)Q=Ut,ot=dt,X=P[W],Ut=X[0],dt=X[1],ot<=i?dt>i&&(Ut-Q)*(i-ot)>(dt-ot)*(t-Q)&&++I:dt<=i&&(Ut-Q)*(i-ot)<(dt-ot)*(t-Q)&&--I;return I}function O(){f=h,d=[],p=[],E=!0}function k(){var I=D(),j=E&&I,F=(d=Mx(d)).length;(j||F)&&(l.polygonStart(),j&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),F&&wS(d,c,I,s,l),l.polygonEnd()),f=l,d=p=m=null}function N(){T.point=z,p&&p.push(m=[]),_=!0,w=!1,b=x=NaN}function B(){d&&(z(g,y),v&&w&&h.rejoin(),d.push(h.result())),T.point=C,w&&f.lineEnd()}function z(I,j){var F=r(I,j);if(p&&m.push([I,j]),_)g=I,y=j,v=F,_=!1,F&&(f.lineStart(),f.point(I,j));else if(F&&w)f.point(I,j);else{var P=[b=Math.max(zl,Math.min(iu,b)),x=Math.max(zl,Math.min(iu,x))],W=[I=Math.max(zl,Math.min(iu,I)),j=Math.max(zl,Math.min(iu,j))];sD(P,W,t,e,n,i)?(w||(f.lineStart(),f.point(P[0],P[1])),f.point(W[0],W[1]),F||f.lineEnd(),E=!1):F&&(f.lineStart(),f.point(I,j),E=!1)}b=I,x=j,w=F}return T}}const _m=t=>t;var Hp=new ja,vm=new ja,ES,IS,wm,xm,Bs={point:Mi,lineStart:Mi,lineEnd:Mi,polygonStart:function(){Bs.lineStart=aD,Bs.lineEnd=cD},polygonEnd:function(){Bs.lineStart=Bs.lineEnd=Bs.point=Mi,Hp.add(me(vm)),vm=new ja},result:function(){var t=Hp/2;return Hp=new ja,t}};function aD(){Bs.point=oD}function oD(t,e){Bs.point=AS,ES=wm=t,IS=xm=e}function AS(t,e){vm.add(xm*t-wm*e),wm=t,xm=e}function cD(){AS(ES,IS)}const T_=Bs;var Qo=1/0,rh=Qo,Nu=-Qo,sh=Nu,uD={point:lD,lineStart:Mi,lineEnd:Mi,polygonStart:Mi,polygonEnd:Mi,result:function(){var t=[[Qo,rh],[Nu,sh]];return Nu=sh=-(rh=Qo=1/0),t}};function lD(t,e){t<Qo&&(Qo=t),t>Nu&&(Nu=t),e<rh&&(rh=e),e>sh&&(sh=e)}const ah=uD;var Sm=0,Em=0,ru=0,oh=0,ch=0,ko=0,Im=0,Am=0,su=0,TS,kS,gr,yr,Yi={point:Ga,lineStart:k_,lineEnd:C_,polygonStart:function(){Yi.lineStart=dD,Yi.lineEnd=pD},polygonEnd:function(){Yi.point=Ga,Yi.lineStart=k_,Yi.lineEnd=C_},result:function(){var t=su?[Im/su,Am/su]:ko?[oh/ko,ch/ko]:ru?[Sm/ru,Em/ru]:[NaN,NaN];return Sm=Em=ru=oh=ch=ko=Im=Am=su=0,t}};function Ga(t,e){Sm+=t,Em+=e,++ru}function k_(){Yi.point=fD}function fD(t,e){Yi.point=hD,Ga(gr=t,yr=e)}function hD(t,e){var n=t-gr,i=e-yr,r=Jn(n*n+i*i);oh+=r*(gr+t)/2,ch+=r*(yr+e)/2,ko+=r,Ga(gr=t,yr=e)}function C_(){Yi.point=Ga}function dD(){Yi.point=mD}function pD(){CS(TS,kS)}function mD(t,e){Yi.point=CS,Ga(TS=gr=t,kS=yr=e)}function CS(t,e){var n=t-gr,i=e-yr,r=Jn(n*n+i*i);oh+=r*(gr+t)/2,ch+=r*(yr+e)/2,ko+=r,r=yr*t-gr*e,Im+=r*(gr+t),Am+=r*(yr+e),su+=r*3,Ga(gr=t,yr=e)}const M_=Yi;function MS(t){this._context=t}MS.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,li);break}}},result:Mi};var Tm=new ja,Yp,NS,OS,au,ou,uh={point:Mi,lineStart:function(){uh.point=gD},lineEnd:function(){Yp&&FS(NS,OS),uh.point=Mi},polygonStart:function(){Yp=!0},polygonEnd:function(){Yp=null},result:function(){var t=+Tm;return Tm=new ja,t}};function gD(t,e){uh.point=FS,NS=au=t,OS=ou=e}function FS(t,e){au-=t,ou-=e,Tm.add(Jn(au*au+ou*ou)),au=t,ou=e}const N_=uh;let O_,lh,F_,D_;class R_{constructor(e){this._append=e==null?DS:yD(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==F_||this._append!==lh){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,F_=i,lh=this._append,D_=this._,this._=r}this._+=D_;break}}}result(){const e=this._;return this._="",e.length?e:null}}function DS(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yD(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return DS;if(e!==O_){const n=10**e;O_=e,lh=function(r){let s=1;this._+=r[0];for(const a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return lh}function sl(t,e){let n=3,i=4.5,r,s;function a(c){return c&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),vo(c,r(s))),s.result()}return a.area=function(c){return vo(c,r(T_)),T_.result()},a.measure=function(c){return vo(c,r(N_)),N_.result()},a.bounds=function(c){return vo(c,r(ah)),ah.result()},a.centroid=function(c){return vo(c,r(M_)),M_.result()},a.projection=function(c){return arguments.length?(r=c==null?(t=null,_m):(t=c).stream,a):t},a.context=function(c){return arguments.length?(s=c==null?(e=null,new R_(n)):new MS(e=c),typeof i!="function"&&s.pointRadius(i),a):e},a.pointRadius=function(c){return arguments.length?(i=typeof c=="function"?c:(s.pointRadius(+c),+c),a):i},a.digits=function(c){if(!arguments.length)return n;if(c==null)n=null;else{const u=Math.floor(c);if(!(u>=0))throw new RangeError(`invalid digits: ${c}`);n=u}return e===null&&(s=new R_(n)),a},a.projection(t).digits(n).context(e)}function fh(t){return{stream:md(t)}}function md(t){return function(e){var n=new km;for(var i in t)n[i]=t[i];return n.stream=e,n}}function km(){}km.prototype={constructor:km,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Jg(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),vo(n,t.stream(ah)),e(ah.result()),i!=null&&t.clipExtent(i),t}function Qg(t,e,n){return Jg(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),c=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,u=+e[0][1]+(s-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([c,u])},n)}function RS(t,e,n){return Qg(t,[[0,0],e],n)}function LS(t,e,n){return Jg(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,c=-s*i[0][1];t.scale(150*s).translate([a,c])},n)}function BS(t,e,n){return Jg(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],c=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([a,c])},n)}var L_=16,bD=Wt(30*Le);function B_(t,e){return+e?vD(t,e):_D(t)}function _D(t){return md({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function vD(t,e){function n(i,r,s,a,c,u,l,f,h,d,p,m,g,y){var v=l-i,b=f-r,x=v*v+b*b;if(x>4*e&&g--){var w=a+d,_=c+p,E=u+m,T=Jn(w*w+_*_+E*E),C=Li(E/=T),D=me(me(E)-1)<Lt||me(s-h)<Lt?(s+h)/2:ms(_,w),O=t(D,C),k=O[0],N=O[1],B=k-i,z=N-r,I=b*B-v*z;(I*I/x>e||me((v*B+b*z)/x-.5)>.3||a*d+c*p+u*m<bD)&&(n(i,r,s,a,c,u,k,N,D,w/=T,_/=T,E,g,y),y.point(k,N),n(k,N,D,w,_,E,l,f,h,d,p,m,g,y))}}return function(i){var r,s,a,c,u,l,f,h,d,p,m,g,y={point:v,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),y.lineStart=_},polygonEnd:function(){i.polygonEnd(),y.lineStart=b}};function v(C,D){C=t(C,D),i.point(C[0],C[1])}function b(){h=NaN,y.point=x,i.lineStart()}function x(C,D){var O=Jo([C,D]),k=t(C,D);n(h,d,f,p,m,g,h=k[0],d=k[1],f=C,p=O[0],m=O[1],g=O[2],L_,i),i.point(h,d)}function w(){y.point=v,i.lineEnd()}function _(){b(),y.point=E,y.lineEnd=T}function E(C,D){x(r=C,D),s=h,a=d,c=p,u=m,l=g,y.point=x}function T(){n(h,d,f,p,m,g,s,a,r,c,u,l,L_,i),y.lineEnd=w,w()}return y}}var wD=md({point:function(t,e){this.stream.point(t*Le,e*Le)}});function xD(t){return md({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function SD(t,e,n,i,r){function s(a,c){return a*=i,c*=r,[e+t*a,n-t*c]}return s.invert=function(a,c){return[(a-e)/t*i,(n-c)/t*r]},s}function P_(t,e,n,i,r,s){if(!s)return SD(t,e,n,i,r);var a=Wt(s),c=Ft(s),u=a*t,l=c*t,f=a/t,h=c/t,d=(c*n-a*e)/t,p=(c*e+a*n)/t;function m(g,y){return g*=i,y*=r,[u*g-l*y+e,n-l*g-u*y]}return m.invert=function(g,y){return[i*(f*g-h*y+d),r*(p-h*g-f*y)]},m}function la(t){return PS(function(){return t})()}function PS(t){var e,n=150,i=480,r=250,s=0,a=0,c=0,u=0,l=0,f,h=0,d=1,p=1,m=null,g=A_,y=null,v,b,x,w=_m,_=.5,E,T,C,D,O;function k(I){return C(I[0]*Le,I[1]*Le)}function N(I){return I=C.invert(I[0],I[1]),I&&[I[0]*Tn,I[1]*Tn]}k.stream=function(I){return D&&O===I?D:D=wD(xD(f)(g(E(w(O=I)))))},k.preclip=function(I){return arguments.length?(g=I,m=void 0,z()):g},k.postclip=function(I){return arguments.length?(w=I,y=v=b=x=null,z()):w},k.clipAngle=function(I){return arguments.length?(g=+I?rD(m=I*Le):(m=null,A_),z()):m*Tn},k.clipExtent=function(I){return arguments.length?(w=I==null?(y=v=b=x=null,_m):SS(y=+I[0][0],v=+I[0][1],b=+I[1][0],x=+I[1][1]),z()):y==null?null:[[y,v],[b,x]]},k.scale=function(I){return arguments.length?(n=+I,B()):n},k.translate=function(I){return arguments.length?(i=+I[0],r=+I[1],B()):[i,r]},k.center=function(I){return arguments.length?(s=I[0]%360*Le,a=I[1]%360*Le,B()):[s*Tn,a*Tn]},k.rotate=function(I){return arguments.length?(c=I[0]%360*Le,u=I[1]%360*Le,l=I.length>2?I[2]%360*Le:0,B()):[c*Tn,u*Tn,l*Tn]},k.angle=function(I){return arguments.length?(h=I%360*Le,B()):h*Tn},k.reflectX=function(I){return arguments.length?(d=I?-1:1,B()):d<0},k.reflectY=function(I){return arguments.length?(p=I?-1:1,B()):p<0},k.precision=function(I){return arguments.length?(E=B_(T,_=I*I),z()):Jn(_)},k.fitExtent=function(I,j){return Qg(k,I,j)},k.fitSize=function(I,j){return RS(k,I,j)},k.fitWidth=function(I,j){return LS(k,I,j)},k.fitHeight=function(I,j){return BS(k,I,j)};function B(){var I=P_(n,0,0,d,p,h).apply(null,e(s,a)),j=P_(n,i-I[0],r-I[1],d,p,h);return f=_S(c,u,l),T=ym(e,j),C=ym(f,T),E=B_(T,_),z()}function z(){return D=O=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&N,B()}}function Zg(t){var e=0,n=Yt/3,i=PS(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*Le,n=s[1]*Le):[e*Tn,n*Tn]},r}function ED(t){var e=Wt(t);function n(i,r){return[i*e,Ft(r)/e]}return n.invert=function(i,r){return[i/e,Li(r*e)]},n}function ID(t,e){var n=Ft(t),i=(n+Ft(e))/2;if(me(i)<Lt)return ED(t);var r=1+n*(2*i-n),s=Jn(r)/i;function a(c,u){var l=Jn(r-2*i*Ft(u))/i;return[l*Ft(c*=i),s-l*Wt(c)]}return a.invert=function(c,u){var l=s-u,f=ms(c,me(l))*Ci(l);return l*i<0&&(f-=Yt*Ci(c)*Ci(l)),[f/i,Li((r-(c*c+l*l)*i*i)/(2*i))]},a}function hh(){return Zg(ID).scale(155.424).center([0,33.6442])}function US(){return hh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function AD(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function TD(){var t,e,n=US(),i,r=hh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=hh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,u,l={point:function(d,p){u=[d,p]}};function f(d){var p=d[0],m=d[1];return u=null,i.point(p,m),u||(s.point(p,m),u)||(c.point(p,m),u)}f.invert=function(d){var p=n.scale(),m=n.translate(),g=(d[0]-m[0])/p,y=(d[1]-m[1])/p;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?r:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(d)},f.stream=function(d){return t&&e===d?t:t=AD([n.stream(e=d),r.stream(d),a.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),r.precision(d),a.precision(d),h()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),r.scale(d*.35),a.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),m=+d[0],g=+d[1];return i=n.translate(d).clipExtent([[m-.455*p,g-.238*p],[m+.455*p,g+.238*p]]).stream(l),s=r.translate([m-.307*p,g+.201*p]).clipExtent([[m-.425*p+Lt,g+.12*p+Lt],[m-.214*p-Lt,g+.234*p-Lt]]).stream(l),c=a.translate([m-.205*p,g+.212*p]).clipExtent([[m-.214*p+Lt,g+.166*p+Lt],[m-.115*p-Lt,g+.234*p-Lt]]).stream(l),h()},f.fitExtent=function(d,p){return Qg(f,d,p)},f.fitSize=function(d,p){return RS(f,d,p)},f.fitWidth=function(d,p){return LS(f,d,p)},f.fitHeight=function(d,p){return BS(f,d,p)};function h(){return t=e=null,f}return f.scale(1070)}function VS(t){return function(e,n){var i=Wt(e),r=Wt(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Ft(e),s*Ft(n)]}}function al(t){return function(e,n){var i=Jn(e*e+n*n),r=t(i),s=Ft(r),a=Wt(r);return[ms(e*s,i*a),Li(i&&n*s/i)]}}var $S=VS(function(t){return Jn(2/(1+t))});$S.invert=al(function(t){return 2*Li(t/2)});function kD(){return la($S).scale(124.75).clipAngle(180-.001)}var jS=VS(function(t){return(t=bS(t))&&t/Ft(t)});jS.invert=al(function(t){return t});function CD(){return la(jS).scale(79.4188).clipAngle(180-.001)}function gd(t,e){return[t,eh(Xg((Ue+e)/2))]}gd.invert=function(t,e){return[t,2*Sc(yS(e))-Ue]};function MD(){return zS(gd).scale(961/li)}function zS(t){var e=la(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,a=null,c,u,l;e.scale=function(h){return arguments.length?(i(h),f()):i()},e.translate=function(h){return arguments.length?(r(h),f()):r()},e.center=function(h){return arguments.length?(n(h),f()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=c=u=l=null:(a=+h[0][0],c=+h[0][1],u=+h[1][0],l=+h[1][1]),f()):a==null?null:[[a,c],[u,l]]};function f(){var h=Yt*i(),d=e(XF(e.rotate()).invert([0,0]));return s(a==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:t===gd?[[Math.max(d[0]-h,a),c],[Math.min(d[0]+h,u),l]]:[[a,Math.max(d[1]-h,c)],[u,Math.min(d[1]+h,l)]])}return f()}function ql(t){return Xg((Ue+t)/2)}function ND(t,e){var n=Wt(t),i=t===e?Ft(t):eh(n/Wt(e))/eh(ql(e)/ql(t)),r=n*zp(ql(t),i)/i;if(!i)return gd;function s(a,c){r>0?c<-Ue+Lt&&(c=-Ue+Lt):c>Ue-Lt&&(c=Ue-Lt);var u=r/zp(ql(c),i);return[u*Ft(i*a),r-u*Wt(i*a)]}return s.invert=function(a,c){var u=r-c,l=Ci(i)*Jn(a*a+u*u),f=ms(a,me(u))*Ci(u);return u*i<0&&(f-=Yt*Ci(a)*Ci(u)),[f/i,2*Sc(zp(r/l,1/i))-Ue]},s}function OD(){return Zg(ND).scale(109.5).parallels([30,30])}function dh(t,e){return[t,e]}dh.invert=dh;function FD(){return la(dh).scale(152.63)}function DD(t,e){var n=Wt(t),i=t===e?Ft(t):(n-Wt(e))/(e-t),r=n/i+t;if(me(i)<Lt)return dh;function s(a,c){var u=r-c,l=i*a;return[u*Ft(l),r-u*Wt(l)]}return s.invert=function(a,c){var u=r-c,l=ms(a,me(u))*Ci(u);return u*i<0&&(l-=Yt*Ci(a)*Ci(u)),[l/i,r-Ci(i)*Jn(a*a+u*u)]},s}function RD(){return Zg(DD).scale(131.154).center([0,13.9389])}var du=1.340264,pu=-.081106,mu=893e-6,gu=.003796,ph=Jn(3)/2,LD=12;function qS(t,e){var n=Li(ph*Ft(e)),i=n*n,r=i*i*i;return[t*Wt(n)/(ph*(du+3*pu*i+r*(7*mu+9*gu*i))),n*(du+pu*i+r*(mu+gu*i))]}qS.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,a,c,u;s<LD&&(c=n*(du+pu*i+r*(mu+gu*i))-e,u=du+3*pu*i+r*(7*mu+9*gu*i),n-=a=c/u,i=n*n,r=i*i*i,!(me(a)<gS));++s);return[ph*t*(du+3*pu*i+r*(7*mu+9*gu*i))/Wt(n),Li(Ft(n)/ph)]};function BD(){return la(qS).scale(177.158)}function WS(t,e){var n=Wt(e),i=Wt(t)*n;return[n*Ft(t)/i,Ft(e)/i]}WS.invert=al(Sc);function PD(){return la(WS).scale(144.049).clipAngle(60)}function HS(t,e){return[Wt(e)*Ft(t),Ft(e)]}HS.invert=al(Li);function UD(){return la(HS).scale(249.5).clipAngle(90+Lt)}function YS(t,e){var n=Wt(e),i=1+Wt(t)*n;return[n*Ft(t)/i,Ft(e)/i]}YS.invert=al(function(t){return 2*Sc(t)});function VD(){return la(YS).scale(250).clipAngle(142)}function GS(t,e){return[eh(Xg((Ue+e)/2)),-t]}GS.invert=function(t,e){return[-e,2*Sc(yS(t))-Ue]};function $D(){var t=zS(GS),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function yd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Cm=Symbol("implicit");function ty(){var t=new za,e=[],n=[],i=Cm;function r(s){let a=t.get(s);if(a===void 0){if(i!==Cm)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new za;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return ty(e,n).unknown(i)},$r.apply(r,arguments),r}function bd(){var t=ty().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,c=!1,u=0,l=0,f=.5;delete t.unknown;function h(){var d=e().length,p=r<i,m=p?r:i,g=p?i:r;s=(g-m)/Math.max(1,d-u+l*2),c&&(s=Math.floor(s)),m+=(g-m-s*(d-u))*f,a=s*(1-u),c&&(m=Math.round(m),a=Math.round(a));var y=Q0(d).map(function(v){return m+s*v});return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([i,r]=d,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(d){return[i,r]=d,i=+i,r=+r,c=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(d){return arguments.length?(c=!!d,h()):c},t.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),h()):u},t.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),h()):u},t.paddingOuter=function(d){return arguments.length?(l=+d,h()):l},t.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),h()):f},t.copy=function(){return bd(e(),[i,r]).round(c).paddingInner(u).paddingOuter(l).align(f)},$r.apply(h(),arguments)}function KS(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return KS(e())},t}function jD(){return KS(bd.apply(null,arguments).paddingInner(1))}function zD(t){return function(){return t}}function Mm(t){return+t}var U_=[0,1];function Ni(t){return t}function Nm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zD(isNaN(e)?NaN:.5)}function qD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function WD(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Nm(r,i),s=n(a,s)):(i=Nm(i,r),s=n(s,a)),function(c){return s(i(c))}}function HD(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Nm(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(c){var u=Ng(t,c,1,i)-1;return s[u](r[u](c))}}function ol(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _d(){var t=U_,e=U_,n=wc,i,r,s,a=Ni,c,u,l;function f(){var d=Math.min(t.length,e.length);return a!==Ni&&(a=qD(t[0],t[d-1])),c=d>2?HD:WD,u=l=null,h}function h(d){return d==null||isNaN(d=+d)?s:(u||(u=c(t.map(i),e,n)))(i(a(d)))}return h.invert=function(d){return a(r((l||(l=c(e,t.map(i),yn)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,Mm),f()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),f()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=zg,f()},h.clamp=function(d){return arguments.length?(a=d?!0:Ni,f()):a!==Ni},h.interpolate=function(d){return arguments.length?(n=d,f()):n},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,p){return i=d,r=p,f()}}function XS(){return _d()(Ni,Ni)}function YD(t,e,n,i){var r=X0(t,e,n),s;switch(i=Mu(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=GF(r,a))&&(i.precision=s),mS(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=KF(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=YF(r))&&(i.precision=s-(i.type==="%")*2);break}}return xc(i)}function cl(t){var e=t.domain;return t.ticks=function(n){var i=e();return zf(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return YD(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],c=i[s],u,l,f=10;for(c<a&&(l=a,a=c,c=l,l=r,r=s,s=l);f-- >0;){if(l=K0(a,c,n),l===u)return i[r]=a,i[s]=c,e(i);if(l>0)a=Math.floor(a/l)*l,c=Math.ceil(c/l)*l;else if(l<0)a=Math.ceil(a*l)/l,c=Math.floor(c*l)/l;else break;u=l}return t},t}function ey(){var t=XS();return t.copy=function(){return ol(t,ey())},$r.apply(t,arguments),cl(t)}function JS(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Mm),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return JS(t).unknown(e)},t=arguments.length?Array.from(t,Mm):[0,1],cl(n)}function QS(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function V_(t){return Math.log(t)}function $_(t){return Math.exp(t)}function GD(t){return-Math.log(-t)}function KD(t){return-Math.exp(-t)}function XD(t){return isFinite(t)?+("1e"+t):t<0?0:t}function JD(t){return t===10?XD:t===Math.E?Math.exp:e=>Math.pow(t,e)}function QD(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function j_(t){return(e,n)=>-t(-e,n)}function ZS(t){const e=t(V_,$_),n=e.domain;let i=10,r,s;function a(){return r=QD(i),s=JD(i),n()[0]<0?(r=j_(r),s=j_(s),t(GD,KD)):t(V_,$_),e}return e.base=function(c){return arguments.length?(i=+c,a()):i},e.domain=function(c){return arguments.length?(n(c),a()):n()},e.ticks=c=>{const u=n();let l=u[0],f=u[u.length-1];const h=f<l;h&&([l,f]=[f,l]);let d=r(l),p=r(f),m,g;const y=c==null?10:+c;let v=[];if(!(i%1)&&p-d<y){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(m=1;m<i;++m)if(g=d<0?m/s(-d):m*s(d),!(g<l)){if(g>f)break;v.push(g)}}else for(;d<=p;++d)for(m=i-1;m>=1;--m)if(g=d>0?m/s(-d):m*s(d),!(g<l)){if(g>f)break;v.push(g)}v.length*2<y&&(v=zf(l,f,y))}else v=zf(d,p,Math.min(p-d,y)).map(s);return h?v.reverse():v},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=Mu(u)).precision==null&&(u.trim=!0),u=xc(u)),c===1/0)return u;const l=Math.max(1,i*c/e.ticks().length);return f=>{let h=f/s(Math.round(r(f)));return h*i<i-.5&&(h*=i),h<=l?u(f):""}},e.nice=()=>n(QS(n(),{floor:c=>s(Math.floor(r(c))),ceil:c=>s(Math.ceil(r(c)))})),e}function t3(){const t=ZS(_d()).domain([1,10]);return t.copy=()=>ol(t,t3()).base(t.base()),$r.apply(t,arguments),t}function z_(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function q_(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function e3(t){var e=1,n=t(z_(e),q_(e));return n.constant=function(i){return arguments.length?t(z_(e=+i),q_(e)):e},cl(n)}function n3(){var t=e3(_d());return t.copy=function(){return ol(t,n3()).constant(t.constant())},$r.apply(t,arguments)}function W_(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ZD(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tR(t){return t<0?-t*t:t*t}function i3(t){var e=t(Ni,Ni),n=1;function i(){return n===1?t(Ni,Ni):n===.5?t(ZD,tR):t(W_(n),W_(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},cl(e)}function r3(){var t=i3(_d());return t.copy=function(){return ol(t,r3()).exponent(t.exponent())},$r.apply(t,arguments),t}function s3(){var t=[],e=[],n=[],i;function r(){var a=0,c=Math.max(1,e.length);for(n=new Array(c-1);++a<c;)n[a-1]=TN(t,a/c);return s}function s(a){return a==null||isNaN(a=+a)?i:e[Ng(n,a)]}return s.invertExtent=function(a){var c=e.indexOf(a);return c<0?[NaN,NaN]:[c>0?n[c-1]:t[0],c<n.length?n[c]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let c of a)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Xn),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return s3().domain(t).range(e).unknown(i)},$r.apply(s,arguments)}function a3(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[Ng(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return a3().domain(t).range(e).unknown(n)},$r.apply(r,arguments)}const Gp=new Date,Kp=new Date;function Ze(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),c=r.ceil(s);return s-a<c-s?a:c},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,c)=>{const u=[];if(s=r.ceil(s),c=c==null?1:Math.floor(c),!(s<a)||!(c>0))return u;let l;do u.push(l=new Date(+s)),e(s,c),t(s);while(l<s&&s<a);return u},r.filter=s=>Ze(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,c)=>{if(a>=a)if(c<0)for(;++c<=0;)for(;e(a,-1),!s(a););else for(;--c>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(Gp.setTime(+s),Kp.setTime(+a),t(Gp),t(Kp),Math.floor(n(Gp,Kp))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const mh=Ze(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);mh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ze(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):mh);mh.range;const as=1e3,Oi=as*60,os=Oi*60,gs=os*24,ny=gs*7,H_=gs*30,Xp=gs*365,cs=Ze(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*as)},(t,e)=>(e-t)/as,t=>t.getUTCSeconds());cs.range;const vd=Ze(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getMinutes());vd.range;const wd=Ze(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getUTCMinutes());wd.range;const xd=Ze(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as-t.getMinutes()*Oi)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getHours());xd.range;const Sd=Ze(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getUTCHours());Sd.range;const Ec=Ze(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oi)/gs,t=>t.getDate()-1);Ec.range;const Ed=Ze(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gs,t=>t.getUTCDate()-1);Ed.range;const iy=Ze(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gs,t=>Math.floor(t/gs));iy.range;function no(t){return Ze(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Oi)/ny)}const Zo=no(0),Ou=no(1),o3=no(2),c3=no(3),Ka=no(4),u3=no(5),l3=no(6);Zo.range;Ou.range;o3.range;c3.range;Ka.range;u3.range;l3.range;function io(t){return Ze(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ny)}const tc=io(0),Fu=io(1),f3=io(2),h3=io(3),Xa=io(4),d3=io(5),p3=io(6);tc.range;Fu.range;f3.range;h3.range;Xa.range;d3.range;p3.range;const Id=Ze(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Id.range;const Ad=Ze(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ad.range;const Qi=Ze(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Qi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ze(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Qi.range;const Zi=Ze(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ze(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Zi.range;function m3(t,e,n,i,r,s){const a=[[cs,1,as],[cs,5,5*as],[cs,15,15*as],[cs,30,30*as],[s,1,Oi],[s,5,5*Oi],[s,15,15*Oi],[s,30,30*Oi],[r,1,os],[r,3,3*os],[r,6,6*os],[r,12,12*os],[i,1,gs],[i,2,2*gs],[n,1,ny],[e,1,H_],[e,3,3*H_],[t,1,Xp]];function c(l,f,h){const d=f<l;d&&([l,f]=[f,l]);const p=h&&typeof h.range=="function"?h:u(l,f,h),m=p?p.range(l,+f+1):[];return d?m.reverse():m}function u(l,f,h){const d=Math.abs(f-l)/h,p=Mg(([,,y])=>y).right(a,d);if(p===a.length)return t.every(X0(l/Xp,f/Xp,h));if(p===0)return mh.every(Math.max(X0(l,f,h),1));const[m,g]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return m.every(g)}return[c,u]}const[eR,nR]=m3(Zi,Ad,tc,iy,Sd,wd),[iR,rR]=m3(Qi,Id,Zo,Ec,xd,vd);function Jp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function sR(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,c=t.months,u=t.shortMonths,l=Hc(r),f=Yc(r),h=Hc(s),d=Yc(s),p=Hc(a),m=Yc(a),g=Hc(c),y=Yc(c),v=Hc(u),b=Yc(u),x={a:F,A:P,b:W,B:J,c:null,d:Q_,e:Q_,f:kR,g:PR,G:VR,H:IR,I:AR,j:TR,L:g3,m:CR,M:MR,p:X,q:Q,Q:ev,s:nv,S:NR,u:OR,U:FR,V:DR,w:RR,W:LR,x:null,X:null,y:BR,Y:UR,Z:$R,"%":tv},w={a:ot,A:Ut,b:dt,B:ut,c:null,d:Z_,e:Z_,f:WR,g:eL,G:iL,H:jR,I:zR,j:qR,L:b3,m:HR,M:YR,p:rt,q:ct,Q:ev,s:nv,S:GR,u:KR,U:XR,V:JR,w:QR,W:ZR,x:null,X:null,y:tL,Y:nL,Z:rL,"%":tv},_={a:O,A:k,b:N,B,c:z,d:X_,e:X_,f:wR,g:K_,G:G_,H:J_,I:J_,j:yR,L:vR,m:gR,M:bR,p:D,q:mR,Q:SR,s:ER,S:_R,u:lR,U:fR,V:hR,w:uR,W:dR,x:I,X:j,y:K_,Y:G_,Z:pR,"%":xR};x.x=E(n,x),x.X=E(i,x),x.c=E(e,x),w.x=E(n,w),w.X=E(i,w),w.c=E(e,w);function E(M,H){return function(K){var U=[],st=-1,pt=0,bt=M.length,mt,G,St;for(K instanceof Date||(K=new Date(+K));++st<bt;)M.charCodeAt(st)===37&&(U.push(M.slice(pt,st)),(G=Y_[mt=M.charAt(++st)])!=null?mt=M.charAt(++st):G=mt==="e"?" ":"0",(St=H[mt])&&(mt=St(K,G)),U.push(mt),pt=st+1);return U.push(M.slice(pt,st)),U.join("")}}function T(M,H){return function(K){var U=Wc(1900,void 0,1),st=C(U,M,K+="",0),pt,bt;if(st!=K.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(H&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(pt=Qp(Wc(U.y,0,1)),bt=pt.getUTCDay(),pt=bt>4||bt===0?Fu.ceil(pt):Fu(pt),pt=Ed.offset(pt,(U.V-1)*7),U.y=pt.getUTCFullYear(),U.m=pt.getUTCMonth(),U.d=pt.getUTCDate()+(U.w+6)%7):(pt=Jp(Wc(U.y,0,1)),bt=pt.getDay(),pt=bt>4||bt===0?Ou.ceil(pt):Ou(pt),pt=Ec.offset(pt,(U.V-1)*7),U.y=pt.getFullYear(),U.m=pt.getMonth(),U.d=pt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),bt="Z"in U?Qp(Wc(U.y,0,1)).getUTCDay():Jp(Wc(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(bt+5)%7:U.w+U.U*7-(bt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,Qp(U)):Jp(U)}}function C(M,H,K,U){for(var st=0,pt=H.length,bt=K.length,mt,G;st<pt;){if(U>=bt)return-1;if(mt=H.charCodeAt(st++),mt===37){if(mt=H.charAt(st++),G=_[mt in Y_?H.charAt(st++):mt],!G||(U=G(M,K,U))<0)return-1}else if(mt!=K.charCodeAt(U++))return-1}return U}function D(M,H,K){var U=l.exec(H.slice(K));return U?(M.p=f.get(U[0].toLowerCase()),K+U[0].length):-1}function O(M,H,K){var U=p.exec(H.slice(K));return U?(M.w=m.get(U[0].toLowerCase()),K+U[0].length):-1}function k(M,H,K){var U=h.exec(H.slice(K));return U?(M.w=d.get(U[0].toLowerCase()),K+U[0].length):-1}function N(M,H,K){var U=v.exec(H.slice(K));return U?(M.m=b.get(U[0].toLowerCase()),K+U[0].length):-1}function B(M,H,K){var U=g.exec(H.slice(K));return U?(M.m=y.get(U[0].toLowerCase()),K+U[0].length):-1}function z(M,H,K){return C(M,e,H,K)}function I(M,H,K){return C(M,n,H,K)}function j(M,H,K){return C(M,i,H,K)}function F(M){return a[M.getDay()]}function P(M){return s[M.getDay()]}function W(M){return u[M.getMonth()]}function J(M){return c[M.getMonth()]}function X(M){return r[+(M.getHours()>=12)]}function Q(M){return 1+~~(M.getMonth()/3)}function ot(M){return a[M.getUTCDay()]}function Ut(M){return s[M.getUTCDay()]}function dt(M){return u[M.getUTCMonth()]}function ut(M){return c[M.getUTCMonth()]}function rt(M){return r[+(M.getUTCHours()>=12)]}function ct(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var H=E(M+="",x);return H.toString=function(){return M},H},parse:function(M){var H=T(M+="",!1);return H.toString=function(){return M},H},utcFormat:function(M){var H=E(M+="",w);return H.toString=function(){return M},H},utcParse:function(M){var H=T(M+="",!0);return H.toString=function(){return M},H}}}var Y_={"-":"",_:" ",0:"0"},on=/^\s*\d+/,aR=/^%/,oR=/[\\^$*+?|[\]().{}]/g;function le(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function cR(t){return t.replace(oR,"\\$&")}function Hc(t){return new RegExp("^(?:"+t.map(cR).join("|")+")","i")}function Yc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function uR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function lR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function fR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function hR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function dR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function G_(t,e,n){var i=on.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function K_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function pR(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function mR(t,e,n){var i=on.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function gR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function X_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function yR(t,e,n){var i=on.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function J_(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function bR(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function _R(t,e,n){var i=on.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function vR(t,e,n){var i=on.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function wR(t,e,n){var i=on.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function xR(t,e,n){var i=aR.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function SR(t,e,n){var i=on.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ER(t,e,n){var i=on.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Q_(t,e){return le(t.getDate(),e,2)}function IR(t,e){return le(t.getHours(),e,2)}function AR(t,e){return le(t.getHours()%12||12,e,2)}function TR(t,e){return le(1+Ec.count(Qi(t),t),e,3)}function g3(t,e){return le(t.getMilliseconds(),e,3)}function kR(t,e){return g3(t,e)+"000"}function CR(t,e){return le(t.getMonth()+1,e,2)}function MR(t,e){return le(t.getMinutes(),e,2)}function NR(t,e){return le(t.getSeconds(),e,2)}function OR(t){var e=t.getDay();return e===0?7:e}function FR(t,e){return le(Zo.count(Qi(t)-1,t),e,2)}function y3(t){var e=t.getDay();return e>=4||e===0?Ka(t):Ka.ceil(t)}function DR(t,e){return t=y3(t),le(Ka.count(Qi(t),t)+(Qi(t).getDay()===4),e,2)}function RR(t){return t.getDay()}function LR(t,e){return le(Ou.count(Qi(t)-1,t),e,2)}function BR(t,e){return le(t.getFullYear()%100,e,2)}function PR(t,e){return t=y3(t),le(t.getFullYear()%100,e,2)}function UR(t,e){return le(t.getFullYear()%1e4,e,4)}function VR(t,e){var n=t.getDay();return t=n>=4||n===0?Ka(t):Ka.ceil(t),le(t.getFullYear()%1e4,e,4)}function $R(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+le(e/60|0,"0",2)+le(e%60,"0",2)}function Z_(t,e){return le(t.getUTCDate(),e,2)}function jR(t,e){return le(t.getUTCHours(),e,2)}function zR(t,e){return le(t.getUTCHours()%12||12,e,2)}function qR(t,e){return le(1+Ed.count(Zi(t),t),e,3)}function b3(t,e){return le(t.getUTCMilliseconds(),e,3)}function WR(t,e){return b3(t,e)+"000"}function HR(t,e){return le(t.getUTCMonth()+1,e,2)}function YR(t,e){return le(t.getUTCMinutes(),e,2)}function GR(t,e){return le(t.getUTCSeconds(),e,2)}function KR(t){var e=t.getUTCDay();return e===0?7:e}function XR(t,e){return le(tc.count(Zi(t)-1,t),e,2)}function _3(t){var e=t.getUTCDay();return e>=4||e===0?Xa(t):Xa.ceil(t)}function JR(t,e){return t=_3(t),le(Xa.count(Zi(t),t)+(Zi(t).getUTCDay()===4),e,2)}function QR(t){return t.getUTCDay()}function ZR(t,e){return le(Fu.count(Zi(t)-1,t),e,2)}function tL(t,e){return le(t.getUTCFullYear()%100,e,2)}function eL(t,e){return t=_3(t),le(t.getUTCFullYear()%100,e,2)}function nL(t,e){return le(t.getUTCFullYear()%1e4,e,4)}function iL(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Xa(t):Xa.ceil(t),le(t.getUTCFullYear()%1e4,e,4)}function rL(){return"+0000"}function tv(){return"%"}function ev(t){return+t}function nv(t){return Math.floor(+t/1e3)}var mo,ry,Du;sL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sL(t){return mo=sR(t),ry=mo.format,mo.parse,Du=mo.utcFormat,mo.utcParse,mo}function aL(t){return new Date(t)}function oL(t){return t instanceof Date?+t:+new Date(+t)}function sy(t,e,n,i,r,s,a,c,u,l){var f=XS(),h=f.invert,d=f.domain,p=l(".%L"),m=l(":%S"),g=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),b=l("%b %d"),x=l("%B"),w=l("%Y");function _(E){return(u(E)<E?p:c(E)<E?m:a(E)<E?g:s(E)<E?y:i(E)<E?r(E)<E?v:b:n(E)<E?x:w)(E)}return f.invert=function(E){return new Date(h(E))},f.domain=function(E){return arguments.length?d(Array.from(E,oL)):d().map(aL)},f.ticks=function(E){var T=d();return t(T[0],T[T.length-1],E??10)},f.tickFormat=function(E,T){return T==null?_:l(T)},f.nice=function(E){var T=d();return(!E||typeof E.range!="function")&&(E=e(T[0],T[T.length-1],E??10)),E?d(QS(T,E)):f},f.copy=function(){return ol(f,sy(t,e,n,i,r,s,a,c,u,l))},f}function cL(){return $r.apply(sy(iR,rR,Qi,Id,Zo,Ec,xd,vd,cs,ry).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uL(){return $r.apply(sy(eR,nR,Zi,Ad,tc,Ed,Sd,wd,cs,Du).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Td(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kd(){var t=0,e=.5,n=1,i=1,r,s,a,c,u,l=Ni,f,h=!1,d;function p(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-s)*(i*g<i*s?c:u),l(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,r=f(t=+t),s=f(e=+e),a=f(n=+n),c=r===s?0:.5/(s-r),u=s===a?0:.5/(a-s),i=s<r?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(l=g,p):l};function m(g){return function(y){var v,b,x;return arguments.length?([v,b,x]=y,l=Wg(g,[v,b,x]),p):[l(0),l(.5),l(1)]}}return p.range=m(wc),p.rangeRound=m(zg),p.unknown=function(g){return arguments.length?(d=g,p):d},function(g){return f=g,r=g(t),s=g(e),a=g(n),c=r===s?0:.5/(s-r),u=s===a?0:.5/(a-s),i=s<r?-1:1,p}}function v3(){var t=cl(kd()(Ni));return t.copy=function(){return Td(t,v3())},yd.apply(t,arguments)}function w3(){var t=ZS(kd()).domain([.1,1,10]);return t.copy=function(){return Td(t,w3()).base(t.base())},yd.apply(t,arguments)}function x3(){var t=e3(kd());return t.copy=function(){return Td(t,x3()).constant(t.constant())},yd.apply(t,arguments)}function S3(){var t=i3(kd());return t.copy=function(){return Td(t,S3()).exponent(t.exponent())},yd.apply(t,arguments)}function Pt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const E3=Pt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),lL=Pt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),fL=Pt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hL=Pt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),dL=Pt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),pL=Pt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),mL=Pt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),gL=Pt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),yL=Pt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),bL=Pt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),xe=t=>$9(t[t.length-1]);var I3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Pt);const A3=xe(I3);var T3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Pt);const k3=xe(T3);var C3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Pt);const M3=xe(C3);var N3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Pt);const O3=xe(N3);var Om=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Pt);const gh=xe(Om);var F3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Pt);const D3=xe(F3);var Fm=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Pt);const yh=xe(Fm);var R3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Pt);const L3=xe(R3);var B3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Pt);const P3=xe(B3);var U3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Pt);const V3=xe(U3);var $3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Pt);const j3=xe($3);var z3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Pt);const q3=xe(z3);var W3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Pt);const H3=xe(W3);var Y3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Pt);const G3=xe(Y3);var K3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Pt);const X3=xe(K3);var J3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Pt);const Q3=xe(J3);var Z3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Pt);const t6=xe(Z3);var e6=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Pt);const n6=xe(e6);var i6=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Pt);const r6=xe(i6);var s6=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Pt);const a6=xe(s6);var o6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Pt);const c6=xe(o6);var u6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Pt);const l6=xe(u6);var f6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Pt);const h6=xe(f6);var d6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Pt);const p6=xe(d6);var m6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Pt);const g6=xe(m6);var y6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Pt);const b6=xe(y6);var _6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Pt);const v6=xe(_6);function w6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const x6=qg(Fr(300,.5,0),Fr(-240,.5,1));var S6=qg(Fr(-100,.75,.35),Fr(80,1.5,.8)),E6=qg(Fr(260,.75,.35),Fr(80,1.5,.8)),Wl=Fr();function I6(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Wl.h=360*t-100,Wl.s=1.5-1.5*e,Wl.l=.8-.9*e,Wl+""}var Hl=Xs(),_L=Math.PI/3,vL=Math.PI*2/3;function A6(t){var e;return t=(.5-t)*Math.PI,Hl.r=255*(e=Math.sin(t))*e,Hl.g=255*(e=Math.sin(t+_L))*e,Hl.b=255*(e=Math.sin(t+vL))*e,Hl+""}function T6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Cd(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const k6=Cd(Pt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var C6=Cd(Pt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),M6=Cd(Pt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),N6=Cd(Pt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function go(t){return function(){return t}}const O6=Math.cos,ay=Math.min,bh=Math.sin,tn=Math.sqrt,iv=1e-12,_h=Math.PI,Md=2*_h;function wL(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new hS(e)}function xL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function F6(t){this._context=t}F6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Nd(t){return new F6(t)}function SL(t){return t[0]}function EL(t){return t[1]}function IL(t,e){var n=go(!0),i=null,r=Nd,s=null,a=wL(c);t=typeof t=="function"?t:t===void 0?SL:go(t),e=typeof e=="function"?e:e===void 0?EL:go(e);function c(u){var l,f=(u=xL(u)).length,h,d=!1,p;for(i==null&&(s=r(p=a())),l=0;l<=f;++l)!(l<f&&n(h=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,l,u),+e(h,l,u));if(p)return s=null,p+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:go(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:go(+u),c):e},c.defined=function(u){return arguments.length?(n=typeof u=="function"?u:go(!!u),c):n},c.curve=function(u){return arguments.length?(r=u,i!=null&&(s=r(i)),c):r},c.context=function(u){return arguments.length?(u==null?i=s=null:s=r(i=u),c):i},c}class D6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function AL(t){return new D6(t,!0)}function TL(t){return new D6(t,!1)}const kL=tn(3),R6={draw(t,e){const n=tn(e+ay(e/28,.75))*.59436,i=n/2,r=i*kL;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Ru={draw(t,e){const n=tn(e/_h);t.moveTo(n,0),t.arc(0,0,n,0,Md)}},L6={draw(t,e){const n=tn(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},B6=tn(1/3),CL=B6*2,P6={draw(t,e){const n=tn(e/CL),i=n*B6;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},U6={draw(t,e){const n=tn(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},V6={draw(t,e){const n=tn(e-ay(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},$6={draw(t,e){const n=tn(e),i=-n/2;t.rect(i,i,n,n)}},j6={draw(t,e){const n=tn(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},ML=.8908130915292852,z6=bh(_h/10)/bh(7*_h/10),NL=bh(Md/10)*z6,OL=-O6(Md/10)*z6,q6={draw(t,e){const n=tn(e*ML),i=NL*n,r=OL*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=Md*s/5,c=O6(a),u=bh(a);t.lineTo(u*n,-c*n),t.lineTo(c*i-u*r,u*i+c*r)}t.closePath()}},Zp=tn(3),W6={draw(t,e){const n=-tn(e/(Zp*3));t.moveTo(0,n*2),t.lineTo(-Zp*n,-n),t.lineTo(Zp*n,-n),t.closePath()}},FL=tn(3),H6={draw(t,e){const n=tn(e)*.6824,i=n/2,r=n*FL/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},bi=-.5,_i=tn(3)/2,Dm=1/tn(12),DL=(Dm/2+1)*3,Y6={draw(t,e){const n=tn(e/DL),i=n/2,r=n*Dm,s=i,a=n*Dm+n,c=-s,u=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(c,u),t.lineTo(bi*i-_i*r,_i*i+bi*r),t.lineTo(bi*s-_i*a,_i*s+bi*a),t.lineTo(bi*c-_i*u,_i*c+bi*u),t.lineTo(bi*i+_i*r,bi*r-_i*i),t.lineTo(bi*s+_i*a,bi*a-_i*s),t.lineTo(bi*c+_i*u,bi*u-_i*c),t.closePath()}},G6={draw(t,e){const n=tn(e-ay(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},RL=[Ru,L6,P6,$6,q6,W6,Y6],LL=[Ru,V6,G6,H6,R6,j6,U6];function Js(){}function vh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Od(t){this._context=t}Od.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function BL(t){return new Od(t)}function K6(t){this._context=t}K6.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PL(t){return new K6(t)}function X6(t){this._context=t}X6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:vh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function UL(t){return new X6(t)}function J6(t,e){this._basis=new Od(t),this._beta=e}J6.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],s=t[n]-i,a=e[n]-r,c=-1,u;++c<=n;)u=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+u*s),this._beta*e[c]+(1-this._beta)*(r+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const VL=function t(e){function n(i){return e===1?new Od(i):new J6(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function wh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function oy(t,e){this._context=t,this._k=(1-e)/6}oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wh(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:wh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const $L=function t(e){function n(i){return new oy(i,e)}return n.tension=function(i){return t(+i)},n}(0);function cy(t,e){this._context=t,this._k=(1-e)/6}cy.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const jL=function t(e){function n(i){return new cy(i,e)}return n.tension=function(i){return t(+i)},n}(0);function uy(t,e){this._context=t,this._k=(1-e)/6}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const zL=function t(e){function n(i){return new uy(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ly(t,e,n){var i=t._x1,r=t._y1,s=t._x2,a=t._y2;if(t._l01_a>iv){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>iv){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(i,r,s,a,t._x2,t._y2)}function Q6(t,e){this._context=t,this._alpha=e}Q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qL=function t(e){function n(i){return e?new Q6(i,e):new oy(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Z6(t,e){this._context=t,this._alpha=e}Z6.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const WL=function t(e){function n(i){return e?new Z6(i,e):new cy(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function tE(t,e){this._context=t,this._alpha=e}tE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const HL=function t(e){function n(i){return e?new tE(i,e):new uy(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function eE(t){this._context=t}eE.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function YL(t){return new eE(t)}function rv(t){return t<0?-1:1}function sv(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),c=(s*r+a*i)/(i+r);return(rv(s)+rv(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(c))||0}function av(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function t0(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,c=(s-i)/3;t._context.bezierCurveTo(i+c,r+c*e,s-c,a-c*n,s,a)}function xh(t){this._context=t}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:t0(this,this._t0,av(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,t0(this,av(this,n=sv(this,t,e)),n);break;default:t0(this,this._t0,n=sv(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function nE(t){this._context=new iE(t)}(nE.prototype=Object.create(xh.prototype)).point=function(t,e){xh.prototype.point.call(this,e,t)};function iE(t){this._context=t}iE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function GL(t){return new xh(t)}function KL(t){return new nE(t)}function rE(t){this._context=t}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=ov(t),r=ov(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ov(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function XL(t){return new rE(t)}function Fd(t,e){this._context=t,this._t=e}Fd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function JL(t){return new Fd(t,.5)}function QL(t){return new Fd(t,0)}function ZL(t){return new Fd(t,1)}function cu(t,e,n){this.k=t,this.x=e,this.y=n}cu.prototype={constructor:cu,scale:function(t){return t===1?this:new cu(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new cu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cu.prototype;function Qs(t){return t!=null&&!Number.isNaN(t)}function Ja(t,e){return+Qs(e)-+Qs(t)||Xn(t,e)}function Rm(t,e){return+Qs(e)-+Qs(t)||nl(t,e)}function fy(t){return t!=null&&`${t}`!=""}function sE(t){return isFinite(t)?t:NaN}function ul(t){return t>0&&isFinite(t)?t:NaN}function Dd(t){return t<0&&isFinite(t)?t:NaN}function tB(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${eB(t.getUTCFullYear())}-${Zr(t.getUTCMonth()+1,2)}-${Zr(t.getUTCDate(),2)}${n||i||r||s?`T${Zr(n,2)}:${Zr(i,2)}${r||s?`:${Zr(r,2)}${s?`.${Zr(s,3)}`:""}`:""}Z`:""}`}function eB(t){return t<0?`-${Zr(-t,6)}`:t>9999?`+${Zr(t,6)}`:Zr(t,4)}function Zr(t,e){return`${t}`.padStart(e,"0")}const nB=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function aE(t,e){return nB.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const iB=new Map([["second",cs],["minute",vd],["hour",xd],["day",Ec],["week",Zo],["month",Id],["year",Qi],["monday",Ou],["tuesday",o3],["wednesday",c3],["thursday",Ka],["friday",u3],["saturday",l3],["sunday",Zo]]),rB=new Map([["second",cs],["minute",wd],["hour",Sd],["day",iy],["week",tc],["month",Ad],["year",Zi],["monday",Fu],["tuesday",f3],["wednesday",h3],["thursday",Xa],["friday",d3],["saturday",p3],["sunday",tc]]);function oE(t,e){let n=`${t}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let i=1;const r=/^(?:(\d+)\s+)/.exec(n);switch(r&&(n=n.slice(r[0].length),i=+r[1]),n){case"quarter":n="month",i*=3;break;case"half":n="month",i*=6;break}let s=e.get(n);if(!s)throw new Error(`unknown interval: ${t}`);if(!(i>1))return s;if(!s.every)throw new Error(`non-periodic interval: ${n}`);return s.every(i)}function sB(t){return oE(t,iB)}function aB(t){return oE(t,rB)}function oB(t){if(!t)return!1;const e=t.floor(new Date(Date.UTC(2e3,11,31)));return Zi(e)>=e}function cB(t){if(!t)return!1;const e=t.floor(new Date(2e3,11,31));return Qi(e)>=e}const Lu=Object.getPrototypeOf(Uint8Array),uB=Object.prototype.toString;function Fi(t,e,n){const i=typeof e;return i==="string"?cv(t,cE(e),n):i==="function"?cv(t,e,n):i==="number"||e instanceof Date||i==="boolean"?an(t,Ic(e),n):typeof(e==null?void 0:e.transform)=="function"?uv(e.transform(t),n):uv(e,n)}function cv(t,e,n){return an(t,(n==null?void 0:n.prototype)instanceof Lu?lB(e):e,n)}function uv(t,e){return e===void 0?Dr(t):t instanceof e?t:e.prototype instanceof Lu&&!(t instanceof Lu)?e.from(t,hy):e.from(t)}function lB(t){return(e,n)=>hy(t(e,n))}const Sf=[null],cE=t=>e=>e[t],uE={transform:fa},di={transform:t=>t},fB=()=>1,hB=()=>!0,bn=t=>t==null?t:`${t}`,Ie=t=>t==null?t:+t,lE=t=>t?t[0]:void 0,dB=t=>t?t[1]:void 0,Ic=t=>()=>t;function pB(t){const e=+`${t}`.slice(1)/100;return(n,i)=>qf(n,e,i)}function Vs(t){return t instanceof Lu?t:an(t,hy,Float64Array)}function hy(t){return t==null?NaN:Number(t)}function mB(t){return an(t,gB)}function gB(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?aE(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Qa(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Pd(t)?[void 0,t]:[t,void 0]}function vn(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Rd(t,e,n){if(t!=null)return Ss(t,e,n)}function Ss(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Dr(t){return t==null||t instanceof Array||t instanceof Lu?t:Array.from(t)}function an(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Lm(t,e=Array){return t instanceof e?t.slice():e.from(t)}function fE({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function yB({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function bB(t){return fE(t)||yB(t)||t.interval!==void 0}function ll(t){return(t==null?void 0:t.toString)===uB}function Sh(t){return ll(t)&&(t.type!==void 0||t.domain!==void 0)}function Ld(t){return ll(t)&&typeof t.transform!="function"}function ec(t){return Ld(t)&&t.value===void 0&&t.channel===void 0}function _B(t,e,n,i=di){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function fl(t,e){return t===void 0&&e===void 0?[lE,dB]:[t,e]}function hE({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Qa(e)),t===void 0&&([t]=Qa(n)),t}function fa(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function dE(t,e){return an(e,n=>t[n])}function Aa(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Bm(t){let e;return[{transform:()=>e,label:hl(t)},n=>e=n]}function vB(t){return t==null?[t]:Bm(t)}function hl(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function wB(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return tr(i)||tr(r)?an(i,(s,a)=>new Date((+i[a]+ +r[a])/2)):an(i,(s,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function xB(t,e){const n=pE(e==null?void 0:e.interval,e==null?void 0:e.type);return n?an(t,n):t}function pE(t,e){const n=dy(t,e);return n&&(i=>Qs(i)?n.floor(i):i)}function dy(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Q0(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Q0(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof t=="string")return(e==="time"?sB:aB)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function dl(t,e){if(t=dy(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function SB(t,e){if(t=dl(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function Bd(t){return t===void 0||Ld(t)?t:{value:t}}function EB(t){return t==null?null:{transform:e=>Fi(e,t,Float64Array),label:hl(t)}}function ha(t){return t&&typeof t[Symbol.iterator]=="function"}function mE(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function lv(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function tr(t){for(const e of t)if(e!=null)return e instanceof Date}function IB(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&aE(e)}function AB(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function TB(t){for(const e of t)if(e!=null)return typeof e=="number"}function e0(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}function Pd(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),t==="none"||t==="currentcolor"||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||Ks(t)!==null)}function kB(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Gn(t){return t==null||Bu(t)}function Bu(t){return/^\s*none\s*$/i.test(t)}function CB(t){return/^\s*round\s*$/i.test(t)}function gE(t,e){return Rd(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Ud(t="middle"){return gE(t,"frameAnchor")}function Pu(t){if(t==null)return;const e=t[0],n=t[t.length-1];return nl(e,n)}function MB(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const s=i[r];n===t?n={...n,[r]:s}:n[r]=s}return n}function NB(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function yE(t){return ha(t)?NB(t):t}const Ir=Symbol("position"),Es=Symbol("color"),Vd=Symbol("radius"),$d=Symbol("length"),jd=Symbol("opacity"),zd=Symbol("symbol"),De=new Map([["x",Ir],["y",Ir],["fx",Ir],["fy",Ir],["r",Vd],["color",Es],["opacity",jd],["symbol",zd],["length",$d]]),OB=Math.sqrt(3),FB=2/OB,DB={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*FB,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},py=new Map([["asterisk",R6],["circle",Ru],["cross",L6],["diamond",P6],["diamond2",U6],["hexagon",DB],["plus",V6],["square",$6],["square2",j6],["star",q6],["times",G6],["triangle",W6],["triangle2",H6],["wye",Y6]]);function my(t){return t&&typeof t.draw=="function"}function RB(t){return my(t)?!0:typeof t!="string"?!1:py.has(t.toLowerCase())}function gy(t){if(t==null||my(t))return t;const e=py.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function LB(t){if(t==null||my(t))return[void 0,t];if(typeof t=="string"){const e=py.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function yy({filter:t,sort:e,reverse:n,transform:i,initializer:r,...s}={},a){if(i===void 0&&(t!=null&&(i=bE(t)),e!=null&&!ec(e)&&(i=n0(i,by(e))),n&&(i=n0(i,_E))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(e===null||ec(e))&&{sort:e},transform:n0(i,a)}}function pl({filter:t,sort:e,reverse:n,initializer:i,...r}={},s){return i===void 0&&(t!=null&&(i=bE(t)),e!=null&&!ec(e)&&(i=i0(i,by(e))),n&&(i=i0(i,_E))),{...r,...(e===null||ec(e))&&{sort:e},initializer:i0(i,s)}}function n0(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Dr(n),i,r)}}function i0(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...s){let a,c,u,l,f,h;return{data:c=n,facets:u=i,channels:a}=t.call(this,n,i,r,...s),{data:f=c,facets:h=u,channels:l}=e.call(this,c,u,{...r,...a},...s),{data:f,facets:h,channels:{...a,...l}}}}function BB(t,e){return(t.initializer!=null?pl:yy)(t,e)}function bE(t){return(e,n)=>{const i=Fi(e,t);return{data:e,facets:n.map(r=>r.filter(s=>i[s]))}}}function _E(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function PB(t,{sort:e,...n}={}){return{...(Ld(t)&&t.channel!==void 0?pl:BB)(n,by(t)),sort:ec(e)?e:null}}function by(t){return(typeof t=="function"&&t.length!==1?UB:VB)(t)}function UB(t){return(e,n)=>{const i=(r,s)=>t(e[r],e[s]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function VB(t){let e,n;({channel:e,value:t,order:n}={...Bd(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Rm:Ja),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ja;break;case"descending":n=Rm;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,a)=>{let c;if(e===void 0)c=Fi(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(c=a[e],!c)return{};c=c.value}const u=(l,f)=>n(c[l],c[f]);return{data:r,facets:s.map(l=>l.slice().sort(u))}}}function $B(t,e,n=jB){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ll(t))return zB(t);if(typeof t=="function")return qB(t);if(/^p\d{2}$/i.test(t))return Kr(pB(t));switch(`${t}`.toLowerCase()){case"first":return HB;case"last":return YB;case"identity":return WB;case"count":return hv;case"distinct":return GB;case"sum":return e==null?hv:KB;case"proportion":return dv(e,"data");case"proportion-facet":return dv(e,"facet");case"deviation":return Kr(_N);case"min":return Kr(Or);case"min-index":return Kr(AN);case"max":return Kr(Ri);case"max-index":return Kr(IN);case"mean":return fv(kN);case"median":return fv(J0);case"variance":return Kr(Sx);case"mode":return Kr(MN)}return n(t)}function jB(t){throw new Error(`invalid reduce: ${t}`)}function zB(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function qB(t){return{reduceIndex(e,n,i){return t(dE(n,e),i)}}}function Kr(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function fv(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return tr(n)?new Date(i):i}}}const WB={reduceIndex(t,e){return dE(e,t)}},HB={reduceIndex(t,e){return e[t[0]]}},YB={reduceIndex(t,e){return e[t[t.length-1]]}},hv={label:"Frequency",reduceIndex(t){return t.length}},GB={label:"Distinct",reduceIndex(t,e){const n=new Og;for(const i of t)n.add(e[i]);return n.size}},KB=Kr(qa);function dv(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>qa(n,s=>i[s])/r}}function Uu(t,{scale:e,type:n,value:i,filter:r,hint:s},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),vE(a,{scale:e,type:n,value:Fi(t,i),label:hl(i),filter:r,hint:s})}function XB(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Uu(e,i,n)]))}function JB(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:s}])=>{const a=r==null?null:e[r];return[i,a==null?s:an(s,a)]}));return n.channels=t,n}function vE(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&e0(i,Pd)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&e0(i,kB)?null:"opacity";break;case"symbol":n!==!0&&e0(i,RB)?(e.scale=null,e.value=an(i,gy)):e.scale="symbol";break;default:e.scale=De.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!De.has(n))throw new Error(`unknown scale: ${n}`);return e}function QB(t,e,n,i,r){const{order:s,reverse:a,reduce:c=!0,limit:u}=r;for(const l in r){if(!De.has(l))continue;let{value:f,order:h=s,reverse:d=a,reduce:p=c,limit:m=u}=Bd(r[l]);const g=f==null?void 0:f.startsWith("-");if(g&&(f=f.slice(1)),h=h===void 0?g!==(f==="width"||f==="height")?xE:wE:eP(h),p==null||p===!1)continue;const y=l==="fx"||l==="fy"?tP(e,i[l]):ZB(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);const v=y.value,[b=0,x=1/0]=ha(m)?m:m<0?[m]:[0,m];if(f==null)y.domain=()=>{let w=Array.from(new Og(v));return d&&(w=w.reverse()),(b!==0||x!==1/0)&&(w=w.slice(b,x)),w};else{const w=f==="data"?t:f==="height"?pv(n,"y1","y2"):f==="width"?pv(n,"x1","x2"):Pm(n,f,f==="y"?"y2":f==="x"?"x2":void 0),_=$B(p===!0?"max":p,w);y.domain=()=>{let E=vN(fa(v),T=>_.reduceIndex(T,w),T=>v[T]);return h&&E.sort(h),d&&E.reverse(),(b!==0||x!==1/0)&&(E=E.slice(b,x)),E.map(lE)}}}}function ZB(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function tP(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let s=0;s<n.length;++s){const a=i[n[s][0]];for(const c of t[s])r[c]=a}return e}function pv(t,e,n){const i=Pm(t,e),r=Pm(t,n);return an(r,(s,a)=>Math.abs(s-i[a]),Float64Array)}function Pm(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function eP(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return wE;case"descending":return xE}throw new Error(`invalid order: ${t}`)}function wE([t,e],[n,i]){return Ja(e,i)||Ja(t,n)}function xE([t,e],[n,i]){return Rm(e,i)||Ja(t,n)}function nP(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function _y(t={}){const{document:e=typeof window<"u"?window.document:void 0}=t;return{document:e}}function en(t,{document:e}){return Yn(ld(t).call(e.documentElement))}let Um=0;function iP(){const t=Um;return Um=0,t}function Ro(t){console.warn(t),++Um}const SE=Math.PI,Hr=2*SE,r0=.618;function rP({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:s=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let c,u,l="frame";if(ll(t)){let _;if({type:t,domain:u,inset:_,insetTop:n=_!==void 0?_:n,insetRight:i=_!==void 0?_:i,insetBottom:r=_!==void 0?_:r,insetLeft:s=_!==void 0?_:s,clip:l=l,...c}=t,t==null)return}typeof t!="function"&&({type:t}=EE(t));const{width:f,height:h,marginLeft:d,marginRight:p,marginTop:m,marginBottom:g}=a,y=f-d-p-s-i,v=h-m-g-n-r;if(t=t==null?void 0:t({width:y,height:v,clip:l,...c}),t==null)return;l=sP(l,d,m,f-p,h-g);let b=d+s,x=m+n,w;if(u!=null){const[[_,E],[T,C]]=sl(t).bounds(u),D=Math.min(y/(T-_),v/(C-E));D>0?(b-=(D*(_+T)-y)/2,x-=(D*(E+C)-v)/2,w=fh({point(O,k){this.stream.point(O*D+b,k*D+x)}})):Ro("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&x===0?IE():fh({point(_,E){this.stream.point(_+b,E+x)}})),{stream:_=>t.stream(w.stream(l(_)))}}function EE(t){switch(`${t}`.toLowerCase()){case"albers-usa":return ji(TD,.7463,.4673);case"albers":return Yl(US,.7463,.4673);case"azimuthal-equal-area":return ji(kD,4,4);case"azimuthal-equidistant":return ji(CD,Hr,Hr);case"conic-conformal":return Yl(OD,Hr,Hr);case"conic-equal-area":return Yl(hh,6.1702,2.9781);case"conic-equidistant":return Yl(RD,7.312,3.6282);case"equal-earth":return ji(BD,5.4133,2.6347);case"equirectangular":return ji(FD,Hr,SE);case"gnomonic":return ji(PD,3.4641,3.4641);case"identity":return{type:IE};case"reflect-y":return{type:aP};case"mercator":return ji(MD,Hr,Hr);case"orthographic":return ji(UD,2,2);case"stereographic":return ji(VD,2,2);case"transverse-mercator":return ji($D,Hr,Hr);default:throw new Error(`unknown projection type: ${t}`)}}function sP(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return s=>s;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return SS(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function ji(t,e,n){return{type:({width:i,height:r,rotate:s,precision:a=.15,clip:c})=>{var l,f,h;const u=t();return a!=null&&((l=u.precision)==null||l.call(u,a)),s!=null&&((f=u.rotate)==null||f.call(u,s)),typeof c=="number"&&((h=u.clipAngle)==null||h.call(u,c)),u.scale(Math.min(i/e,r/n)),u.translate([i/2,r/2]),u},aspectRatio:n/e}}function Yl(t,e,n){const{type:i,aspectRatio:r}=ji(t,e,n);return{type:s=>{const{parallels:a,domain:c,width:u,height:l}=s,f=i(s);return a!=null&&(f.parallels(a),c===void 0&&f.fitSize([u,l],{type:"Sphere"})),f},aspectRatio:r}}const IE=Ic({stream:t=>t}),aP=Ic(fh({point(t,e){this.stream.point(t,-e)}}));function oP(t,e,n,i){const r=n[t],s=n[e],a=r.length,c=n[t]=new Float64Array(a).fill(NaN),u=n[e]=new Float64Array(a).fill(NaN);let l;const f=i.stream({point(h,d){c[l]=h,u[l]=d}});for(l=0;l<a;++l)f.point(r[l],s[l])}function cP(t,e){if(typeof(t==null?void 0:t.stream)=="function")return r0;if(ll(t)&&(t=t.type),t==null)return uP(e)?r0:void 0;if(typeof t!="function"){const{aspectRatio:n}=EE(t);if(n)return n}return r0}function uP(t){for(const e of t)if(e.channels.geometry)return!0;return!1}const AE=new Map([["accent",lL],["category10",E3],["dark2",fL],["paired",hL],["pastel1",dL],["pastel2",pL],["set1",mL],["set2",gL],["set3",yL],["tableau10",bL]]);function lP(t){return t!=null&&AE.has(`${t}`.toLowerCase())}const mv=new Map([...AE,["brbg",Yr(I3,A3)],["prgn",Yr(T3,k3)],["piyg",Yr(C3,M3)],["puor",Yr(N3,O3)],["rdbu",Yr(Om,gh)],["rdgy",Yr(F3,D3)],["rdylbu",Yr(Fm,yh)],["rdylgn",Yr(R3,L3)],["spectral",Yr(B3,P3)],["burd",gv(Om,gh)],["buylrd",gv(Fm,yh)],["blues",rn(u6,l6)],["greens",rn(f6,h6)],["greys",rn(d6,p6)],["oranges",rn(_6,v6)],["purples",rn(m6,g6)],["reds",rn(y6,b6)],["turbo",Gr(T6)],["viridis",Gr(k6)],["magma",Gr(C6)],["inferno",Gr(M6)],["plasma",Gr(N6)],["cividis",Gr(w6)],["cubehelix",Gr(x6)],["warm",Gr(S6)],["cool",Gr(E6)],["bugn",rn(U3,V3)],["bupu",rn($3,j3)],["gnbu",rn(z3,q3)],["orrd",rn(W3,H3)],["pubu",rn(K3,X3)],["pubugn",rn(Y3,G3)],["purd",rn(J3,Q3)],["rdpu",rn(Z3,t6)],["ylgn",rn(i6,r6)],["ylgnbu",rn(e6,n6)],["ylorbr",rn(s6,a6)],["ylorrd",rn(o6,c6)],["rainbow",yv(I6)],["sinebow",yv(A6)]]);function rn(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ji(e,n):t[n])}function Yr(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ji(e,n):t[n])}function gv(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ji(i=>e(1-i),n):t[n].slice().reverse())}function Gr(t){return({length:e})=>Ji(t,Math.max(2,Math.floor(e)))}function yv(t){return({length:e})=>Ji(t,Math.floor(e)+1).slice(0,-1)}function TE(t){const e=`${t}`.toLowerCase();if(!mv.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return mv.get(e)}function qd(t,e){const n=TE(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function fP(t,e="greys"){const n=new Set,[i,r]=qd(e,2);for(const s of t)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const bv=new Map([["brbg",A3],["prgn",k3],["piyg",M3],["puor",O3],["rdbu",gh],["rdgy",D3],["rdylbu",yh],["rdylgn",L3],["spectral",P3],["burd",t=>gh(1-t)],["buylrd",t=>yh(1-t)],["blues",l6],["greens",h6],["greys",p6],["purples",g6],["reds",b6],["oranges",v6],["turbo",T6],["viridis",k6],["magma",C6],["inferno",M6],["plasma",N6],["cividis",w6],["cubehelix",x6],["warm",S6],["cool",E6],["bugn",V3],["bupu",j3],["gnbu",q3],["orrd",H3],["pubugn",G3],["pubu",X3],["purd",Q3],["rdpu",t6],["ylgnbu",n6],["ylgn",r6],["ylorbr",a6],["ylorrd",c6],["rainbow",I6],["sinebow",A6]]);function vy(t){const e=`${t}`.toLowerCase();if(!bv.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return bv.get(e)}const hP=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function dP(t){return t!=null&&hP.has(`${t}`.toLowerCase())}const kE=t=>e=>t(1-e),s0=[0,1],_v=new Map([["number",yn],["rgb",Ha],["hsl",tO],["hcl",iO],["lab",eO]]);function CE(t){const e=`${t}`.toLowerCase();if(!_v.has(e))throw new Error(`unknown interpolator: ${e}`);return _v.get(e)}function ml(t,e,n,{type:i,nice:r,clamp:s,zero:a,domain:c=NE(t,n),unknown:u,round:l,scheme:f,interval:h,range:d=De.get(t)===Vd?EP(n,c):De.get(t)===$d?IP(n,c):De.get(t)===jd?s0:void 0,interpolate:p=De.get(t)===Es?f==null&&d!==void 0?Ha:vy(f!==void 0?f:i==="cyclical"?"rainbow":"turbo"):l?zg:yn,reverse:m}){if(h=dl(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),m=!!m,typeof p!="function"&&(p=CE(p)),p.length===1?(m&&(p=kE(p),m=!1),d===void 0&&(d=Float64Array.from(c,(g,y)=>y/(c.length-1)),d.length===2&&(d=s0)),e.interpolate((d===s0?Ic:xy)(p))):e.interpolate(p),a){const[g,y]=Wo(c);(g>0||y<0)&&(c=Lm(c),Pu(c)!==Math.sign(g)?c[c.length-1]=0:c[0]=0)}return m&&(c=Wf(c)),e.domain(c).unknown(u),r&&(e.nice(pP(r,i)),c=e.domain()),d!==void 0&&e.range(d),s&&e.clamp(s),{type:i,domain:c,range:d,scale:e,interpolate:p,interval:h}}function pP(t,e){return t===!0?void 0:typeof t=="number"?t:SB(t,e)}function mP(t,e,n){return ml(t,ey(),e,n)}function gP(t,e,n){return ME(t,e,{...n,exponent:.5})}function ME(t,e,{exponent:n=1,...i}){return ml(t,r3().exponent(n),e,{...i,type:"pow"})}function yP(t,e,{base:n=10,domain:i=AP(e),...r}){return ml(t,t3().base(n),e,{...r,domain:i})}function bP(t,e,{constant:n=1,...i}){return ml(t,n3().constant(n),e,i)}function _P(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:a=TP(e),unknown:c,interpolate:u,reverse:l}){return n===void 0&&(n=u!==void 0?Ji(u,r):De.get(t)===Es?qd(s,r):void 0),a.length>0&&(a=s3(a,n===void 0?{length:r}:n).quantiles()),wy(t,e,{domain:a,range:n,reverse:l,unknown:c})}function vP(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=NE(t,e),unknown:a,interpolate:c,reverse:u}){const[l,f]=Wo(s);let h;return n===void 0?(h=zf(l,f,i),h[0]<=l&&h.splice(0,1),h[h.length-1]>=f&&h.pop(),i=h.length+1,n=c!==void 0?Ji(c,i):De.get(t)===Es?qd(r,i):void 0):(h=Ji(yn(l,f),i+1).slice(1,-1),l instanceof Date&&(h=h.map(d=>new Date(d)))),Pu(Dr(s))<0&&h.reverse(),wy(t,e,{domain:h,range:n,reverse:u,unknown:a})}function wy(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:a=s!==void 0?Ji(s,n.length+1):De.get(t)===Es?qd(r,n.length+1):void 0,reverse:c}){n=Dr(n);const u=Pu(n);if(!isNaN(u)&&!wP(n,u))throw new Error(`the ${t} scale has a non-monotonic domain`);return c&&(a=Wf(a)),{type:"threshold",scale:a3(u<0?Wf(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function wP(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const s=nl(r,r=t[n]);if(s!==0&&s!==e)return!1}return!0}function xP(){return{type:"identity",scale:JS()}}function Vu(t,e=sE){return t.length?[Or(t,({value:n})=>n===void 0?n:Or(n,e)),Ri(t,({value:n})=>n===void 0?n:Ri(n,e))]:[0,1]}function NE(t,e){const n=De.get(t);return(n===Vd||n===jd||n===$d?SP:Vu)(e)}function SP(t){return[0,t.length?Ri(t,({value:e})=>e===void 0?e:Ri(e,sE)):1]}function EP(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=qf(t,.5,({value:a})=>a===void 0?NaN:qf(a,.25,ul)),r=e.map(a=>3*Math.sqrt(a/i)),s=30/Ri(r);return s<1?r.map(a=>a*s):r}function IP(t,e){const n=J0(t,({value:s})=>s===void 0?NaN:J0(s,Math.abs)),i=e.map(s=>12*s/n),r=60/Ri(i);return r<1?i.map(s=>s*r):i}function AP(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Vu(t,ul);if(n<0)return Vu(t,Dd)}return[1,10]}function TP(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function xy(t){return(e,n)=>i=>t(e+i*(n-e))}function Wd(t,e,n,i,{type:r,nice:s,clamp:a,domain:c=Vu(i),unknown:u,pivot:l=0,scheme:f,range:h,symmetric:d=!0,interpolate:p=De.get(t)===Es?f==null&&h!==void 0?Ha:vy(f!==void 0?f:"rdbu"):yn,reverse:m}){l=+l;let[g,y]=c;if(nl(g,y)<0&&([g,y]=[y,g],m=!m),g=Math.min(g,l),y=Math.max(y,l),typeof p!="function"&&(p=CE(p)),h!==void 0&&(p=p.length===1?xy(p)(...h):Wg(p,h)),m&&(p=kE(p)),d){const v=n.apply(l),b=v-n.apply(g),x=n.apply(y)-v;b<x?g=n.invert(v-x):b>x&&(y=n.invert(v+b))}return e.domain([g,l,y]).unknown(u).interpolator(p),a&&e.clamp(a),s&&e.nice(s),{type:r,domain:[g,y],pivot:l,interpolate:p,scale:e}}function kP(t,e,n){return Wd(t,v3(),OP,e,n)}function CP(t,e,n){return OE(t,e,{...n,exponent:.5})}function OE(t,e,{exponent:n=1,...i}){return Wd(t,S3().exponent(n=+n),RP(n),e,{...i,type:"diverging-pow"})}function MP(t,e,{base:n=10,pivot:i=1,domain:r=Vu(e,i<0?Dd:ul),...s}){return Wd(t,w3().base(n=+n),FP,e,{domain:r,pivot:i,...s})}function NP(t,e,{constant:n=1,...i}){return Wd(t,x3().constant(n=+n),LP(n),e,i)}const OP={apply(t){return t},invert(t){return t}},FP={apply:Math.log,invert:Math.exp},DP={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function RP(t){return t===.5?DP:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function LP(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function FE(t,e,n,i){return ml(t,e,n,i)}function BP(t,e,n){return FE(t,cL(),e,n)}function PP(t,e,n){return FE(t,uL(),e,n)}const gl=Symbol("ordinal");function DE(t,e,n,{type:i,interval:r,domain:s,range:a,reverse:c,hint:u}){return r=dl(r,i),s===void 0&&(s=LE(n,r,t)),(i==="categorical"||i===gl)&&(i="ordinal"),c&&(s=Wf(s)),e.domain(s),a!==void 0&&(typeof a=="function"&&(a=a(s)),e.range(a)),{type:i,domain:s,range:a,scale:e,hint:u,interval:r}}function UP(t,e,{type:n,interval:i,domain:r,range:s,scheme:a,unknown:c,...u}){i=dl(i,n),r===void 0&&(r=LE(e,i,t));let l;if(De.get(t)===zd)l=jP(e),s=s===void 0?zP(l):an(s,gy);else if(De.get(t)===Es&&(s===void 0&&(n==="ordinal"||n===gl)&&(s=fP(r,a),s!==void 0&&(a=void 0)),a===void 0&&s===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(s!==void 0){const f=vy(a),h=s[0],d=s[1]-s[0];s=({length:p})=>Ji(m=>f(h+d*m),p)}else s=TE(a);if(c===Cm)throw new Error(`implicit unknown on ${t} scale is not supported`);return DE(t,ty().unknown(c),e,{...u,type:n,domain:r,range:s,hint:l})}function VP(t,e,{align:n=.5,padding:i=.5,...r}){return RE(jD().align(n).padding(i),e,r,t)}function $P(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=t==="fx"||t==="fy"?0:i,...a}){return RE(bd().align(n).paddingInner(r).paddingOuter(s),e,a,t)}function RE(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=DE(i,t,e,n),t.round=r,t}function LE(t,e,n){const i=new Og;for(const{value:r,domain:s}of t){if(s!==void 0)return s();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,s]=Wo(i).map(e.floor,e);return e.range(r,e.offset(s))}if(i.size>1e4&&De.get(n)===Ir)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return G0(i,Ja)}function vv(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function jP(t){return{fill:vv(t,"fill"),stroke:vv(t,"stroke")}}function zP(t){return Gn(t.fill)?LL:RL}function Vm(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:a=n,round:c,nice:u,clamp:l,zero:f,align:h,padding:d,projection:p,facet:{label:m=e}={},...g}={}){const y={};for(const[v,b]of t){const x=g[v],w=VE(v,b,{round:De.get(v)===Ir?c:void 0,nice:u,clamp:l,zero:f,align:h,padding:d,projection:p,...x});if(w){let{label:_=v==="fx"||v==="fy"?m:e,percent:E,transform:T,inset:C,insetTop:D=C!==void 0?C:v==="y"?i:0,insetRight:O=C!==void 0?C:v==="x"?r:0,insetBottom:k=C!==void 0?C:v==="y"?s:0,insetLeft:N=C!==void 0?C:v==="x"?a:0}=x||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");w.percent=!!E,w.label=_===void 0?WP(b,w):_,w.transform=T,v==="x"||v==="fx"?(w.insetLeft=+N,w.insetRight=+O):(v==="y"||v==="fy")&&(w.insetTop=+D,w.insetBottom=+k),y[v]=w}}return y}function wv(t){return Object.fromEntries(Object.entries(t).filter(([,{scale:e}])=>e).map(([e,{scale:n,type:i,interval:r,label:s}])=>(n.type=i,r!=null&&(n.interval=r),s!=null&&(n.label=s),[e,n])))}function qP(t,e){const{x:n,y:i,fx:r,fy:s}=t,a=r||s?Sy(e):e;r&&xv(r,a),s&&Sv(s,a);const c=r||s?BE(t,e):e;n&&xv(n,c),i&&Sv(i,c)}function WP(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!ro(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Sy(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:a,facet:{marginTop:c,marginRight:u,marginBottom:l,marginLeft:f}}=t;return{marginTop:Math.max(e,c),marginRight:Math.max(n,u),marginBottom:Math.max(i,l),marginLeft:Math.max(r,f),width:s,height:a}}function BE({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:c,height:u}=Sy(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:t?t.scale.bandwidth()+a+r:c,height:e?e.scale.bandwidth()+i+s:u,facet:{width:c,height:u}}}function xv(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:s=0,marginRight:a=0}=e,c=s+n,u=r-a-i;t.range=[c,Math.max(c,u)],ro(t)||(t.range=UE(t)),t.scale.range(t.range)}PE(t)}function Sv(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:s=0,marginBottom:a=0}=e,c=s+n,u=r-a-i;t.range=[Math.max(c,u),c],ro(t)?t.range.reverse():t.range=UE(t),t.scale.range(t.range)}PE(t)}function PE(t){t.round===void 0&&KP(t)&&HP(t)<=30&&t.scale.round(!0)}function HP({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,c=Math.abs(i-n)/Math.max(1,a+s*2);return(c-Math.floor(c))*a}function UE(t){const e=t.scale.domain().length+jE(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,s)=>n+s/(e-1)*(i-n))}function YP(t,e,n){return VE(t,n===void 0?void 0:[{hint:n}],{...e})}function VE(t,e=[],n={}){const i=GP(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&ro({type:i})){const r=e.map(({value:s})=>s).filter(s=>s!==void 0);r.some(tr)?Ro(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${yo(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`):r.some(IB)?Ro(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${yo(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`):r.some(AB)&&Ro(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${yo(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${yo(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Gl(e,n,Vs);break;case"identity":switch(De.get(t)){case Ir:n=Gl(e,n,Vs);break;case zd:n=Gl(e,n,XP);break}break;case"utc":case"time":n=Gl(e,n,mB);break}switch(i){case"diverging":return kP(t,e,n);case"diverging-sqrt":return CP(t,e,n);case"diverging-pow":return OE(t,e,n);case"diverging-log":return MP(t,e,n);case"diverging-symlog":return NP(t,e,n);case"categorical":case"ordinal":case gl:return UP(t,e,n);case"cyclical":case"sequential":case"linear":return mP(t,e,n);case"sqrt":return gP(t,e,n);case"threshold":return wy(t,e,n);case"quantile":return _P(t,e,n);case"quantize":return vP(t,e,n);case"pow":return ME(t,e,n);case"log":return yP(t,e,n);case"symlog":return bP(t,e,n);case"utc":return PP(t,e,n);case"time":return BP(t,e,n);case"point":return VP(t,e,n);case"band":return $P(t,e,n);case"identity":return De.get(t)===Ir?xP():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function yo(t){return typeof t=="symbol"?t.description:t}const Ev={toString:()=>"projection"};function GP(t,e,{type:n,domain:i,range:r,scheme:s,pivot:a,projection:c}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&c!=null&&(n=Ev);for(const{type:l}of e)if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}if(n===Ev)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:l})=>l!==void 0))return;const u=De.get(t);if(u===Vd)return"sqrt";if(u===jd||u===$d)return"linear";if(u===zd)return"ordinal";if((i||r||[]).length>2)return a0(u);if(i!==void 0){if(lv(i))return a0(u);if(tr(i))return"utc"}else{const l=e.map(({value:f})=>f).filter(f=>f!==void 0);if(l.some(lv))return a0(u);if(l.some(tr))return"utc"}if(u===Es){if(a!=null||dP(s))return"diverging";if(lP(s))return"categorical"}return"linear"}function a0(t){switch(t){case Ir:return"point";case Es:return gl;default:return"ordinal"}}function $E({type:t}){return t==="time"||t==="utc"}function ro({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===gl}function jE({type:t}){return t==="threshold"}function KP({type:t}){return t==="point"||t==="band"}function $s(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Gl(t,{domain:e,...n},i){for(const r of t)r.value!==void 0&&(r.value=i(r.value));return{domain:e===void 0?e:i(e),...n}}function XP(t){return an(t,gy)}function $m(t={}){let e;for(const n in t)if(De.has(n)&&Sh(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=zE(YP(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function JP(t){return e=>{if(!De.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return e in t?zE(t[e]):void 0}}function zE({scale:t,type:e,domain:n,range:i,interpolate:r,interval:s,transform:a,percent:c,pivot:u}){if(e==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const l=t.unknown?t.unknown():void 0;return{type:e,domain:Lm(n),...i!==void 0&&{range:Lm(i)},...a!==void 0&&{transform:a},...c&&{percent:c},...l!==void 0&&{unknown:l},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:f=>t(f),...t.invert&&{invert:f=>t.invert(f)}}}function QP(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,e=t(...i)),e)}const ZP=QP(t=>new Intl.NumberFormat(t));function tU(t="en-US"){const e=ZP(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function qE(t){return tB(t,"Invalid Date")}function eU(t="en-US"){const e=tU(t);return n=>(n instanceof Date?qE:typeof n=="number"?e:bn)(n)}const us=eU(),oi=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let nU=0;function Iv(){return`plot-clip-${++nU}`}function iU(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:a,fill:c,fillOpacity:u,stroke:l,strokeWidth:f,strokeOpacity:h,strokeLinejoin:d,strokeLinecap:p,strokeMiterlimit:m,strokeDasharray:g,strokeDashoffset:y,opacity:v,mixBlendMode:b,imageFilter:x,paintOrder:w,pointerEvents:_,shapeRendering:E},{ariaLabel:T,fill:C="currentColor",fillOpacity:D,stroke:O="none",strokeOpacity:k,strokeWidth:N,strokeLinecap:B,strokeLinejoin:z,strokeMiterlimit:I,paintOrder:j}){C===null&&(c=null,u=null),O===null&&(l=null,h=null),Gn(C)?!Gn(O)&&!Gn(c)&&(O="none"):Gn(O)&&!Gn(l)&&(C="none");const[F,P]=Qa(c,C),[W,J]=vn(u,D),[X,Q]=Qa(l,O),[ot,Ut]=vn(h,k),[dt,ut]=vn(v);Bu(Q)||(f===void 0&&(f=N),p===void 0&&(p=B),d===void 0&&(d=z),m===void 0&&!CB(d)&&(m=I),!Bu(P)&&w===void 0&&(w=j));const[rt,ct]=vn(f);return C!==null&&(t.fill=Ye(P,"currentColor"),t.fillOpacity=Gc(J,1)),O!==null&&(t.stroke=Ye(Q,"none"),t.strokeWidth=Gc(ct,1),t.strokeOpacity=Gc(Ut,1),t.strokeLinejoin=Ye(d,"miter"),t.strokeLinecap=Ye(p,"butt"),t.strokeMiterlimit=Gc(m,4),t.strokeDasharray=Ye(g,"none"),t.strokeDashoffset=Ye(y,"0")),t.target=bn(a),t.ariaLabel=bn(T),t.ariaDescription=bn(r),t.ariaHidden=bn(s),t.opacity=Gc(ut,1),t.mixBlendMode=Ye(b,"normal"),t.imageFilter=Ye(x,"none"),t.paintOrder=Ye(w,"normal"),t.pointerEvents=Ye(_,"auto"),t.shapeRendering=Ye(E,"auto"),{title:{value:e,optional:!0},href:{value:n,optional:!0},ariaLabel:{value:i,optional:!0},fill:{value:F,scale:"auto",optional:!0},fillOpacity:{value:W,scale:"auto",optional:!0},stroke:{value:X,scale:"auto",optional:!0},strokeOpacity:{value:ot,scale:"auto",optional:!0},strokeWidth:{value:rt,optional:!0},opacity:{value:dt,scale:"auto",optional:!0}}}function rU(t,e){e&&t.filter(n=>fy(e[n])).append("title").call(aU,e)}function sU(t,e){e&&t.filter(([n])=>fy(e[n])).append("title").call(oU,e)}function aU(t,e){e&&t.text(n=>us(e[n]))}function oU(t,e){e&&t.text(([n])=>us(e[n]))}function jr(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:c,strokeOpacity:u,strokeWidth:l,opacity:f,href:h}){i&&Et(t,"aria-label",d=>i[d]),s&&Et(t,"fill",d=>s[d]),a&&Et(t,"fill-opacity",d=>a[d]),c&&Et(t,"stroke",d=>c[d]),u&&Et(t,"stroke-opacity",d=>u[d]),l&&Et(t,"stroke-width",d=>l[d]),f&&Et(t,"opacity",d=>f[d]),h&&WE(t,d=>h[d],e),n||rU(t,r)}function cU(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:c,strokeOpacity:u,strokeWidth:l,opacity:f,href:h}){i&&Et(t,"aria-label",([d])=>i[d]),s&&Et(t,"fill",([d])=>s[d]),a&&Et(t,"fill-opacity",([d])=>a[d]),c&&Et(t,"stroke",([d])=>c[d]),u&&Et(t,"stroke-opacity",([d])=>u[d]),l&&Et(t,"stroke-width",([d])=>l[d]),f&&Et(t,"opacity",([d])=>f[d]),h&&WE(t,([d])=>h[d],e),n||sU(t,r)}function uU({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:a,opacity:c,href:u},{tip:l}){return[t,l?void 0:e,n,i,r,s,a,c,u].filter(f=>f!==void 0)}function lU(t,e,n){const i=Fg(t,r=>e[r]);return n===void 0&&i.size>t.length>>1&&Ro("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*fU(t,e,n,i){const{z:r}=n,{z:s}=i,a=uU(i,n),c=[...e,...a];for(const u of s?lU(t,s,r):[t]){let l,f;t:for(const h of u){for(const d of c)if(!Qs(d[h])){f&&f.push(-1);continue t}if(l===void 0){f&&(yield f),l=a.map(d=>Aa(d[h])),f=[h];continue}f.push(h);for(let d=0;d<a.length;++d)if(Aa(a[d][h])!==l[d]){yield f,l=a.map(m=>Aa(m[h])),f=[h];continue t}}f&&(yield f)}}function hU(t){return t===!0?t="frame":t===!1&&(t=null),Rd(t,"clip",["frame","sphere"])}function dU(t,e,n,i){let r;switch(e.clip){case"frame":{const{width:s,height:a,marginLeft:c,marginRight:u,marginTop:l,marginBottom:f}=n,h=Iv();r=`url(#${h})`,t=en("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",c).attr("y",l).attr("width",s-u-c).attr("height",a-l-f)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:s}=i;if(!s)throw new Error('the "sphere" clip option requires a projection');const a=Iv();r=`url(#${a})`,t.append("clipPath").attr("id",a).append("path").attr("d",sl(s)({type:"Sphere"}));break}}Et(t,"aria-label",e.ariaLabel),Et(t,"aria-description",e.ariaDescription),Et(t,"aria-hidden",e.ariaHidden),Et(t,"clip-path",r)}function Pi(t,e,n,i){dU(t,e,n,i),Et(t,"fill",e.fill),Et(t,"fill-opacity",e.fillOpacity),Et(t,"stroke",e.stroke),Et(t,"stroke-width",e.strokeWidth),Et(t,"stroke-opacity",e.strokeOpacity),Et(t,"stroke-linejoin",e.strokeLinejoin),Et(t,"stroke-linecap",e.strokeLinecap),Et(t,"stroke-miterlimit",e.strokeMiterlimit),Et(t,"stroke-dasharray",e.strokeDasharray),Et(t,"stroke-dashoffset",e.strokeDashoffset),Et(t,"shape-rendering",e.shapeRendering),Et(t,"filter",e.imageFilter),Et(t,"paint-order",e.paintOrder),Et(t,"pointer-events",e.pointerEvents)}function Ui(t,e){pU(t,"mix-blend-mode",e.mixBlendMode),Et(t,"opacity",e.opacity)}function WE(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const s=this.ownerDocument.createElementNS(Ho.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Ho.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function Et(t,e,n){n!=null&&t.attr(e,n)}function pU(t,e,n){n!=null&&t.style(e,n)}function Vi(t,e,{x:n,y:i},r=oi,s=oi){r+=e.dx,s+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&t.attr("transform",`translate(${r},${s})`)}function Ye(t,e){if((t=bn(t))!==e)return t}function Gc(t,e){if((t=Ie(t))!==e)return t}const mU=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Ey(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!mU.test(t))throw new Error(`invalid class name: ${t}`);return t}function Iy(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function yl({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-s:(i+n-s)/2]}function gU(t,e,n={}){let i=.5-oi,r=.5+oi,s=.5+oi,a=.5-oi;for(const{marginTop:g,marginRight:y,marginBottom:v,marginLeft:b}of e)g>i&&(i=g),y>r&&(r=y),v>s&&(s=v),b>a&&(a=b);let{margin:c,marginTop:u=c!==void 0?c:i,marginRight:l=c!==void 0?c:r,marginBottom:f=c!==void 0?c:s,marginLeft:h=c!==void 0?c:a}=n;u=+u,l=+l,f=+f,h=+h;let{width:d=640,height:p=yU(t,e,n,{width:d,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:a})+Math.max(0,u-i+f-s)}=n;d=+d,p=+p;const m={width:d,height:p,marginTop:u,marginRight:l,marginBottom:f,marginLeft:h};if(t.fx||t.fy){let{margin:g,marginTop:y=g!==void 0?g:u,marginRight:v=g!==void 0?g:l,marginBottom:b=g!==void 0?g:f,marginLeft:x=g!==void 0?g:h}=n.facet??{};y=+y,v=+v,b=+b,x=+x,m.facet={marginTop:y,marginRight:v,marginBottom:b,marginLeft:x}}return m}function yU({x:t,y:e,fy:n,fx:i},r,{projection:s,aspectRatio:a},{width:c,marginTopDefault:u,marginRightDefault:l,marginBottomDefault:f,marginLeftDefault:h}){const d=n?n.scale.domain().length:1,p=cP(s,r);if(p){const g=i?i.scale.domain().length:1,y=(1.1*d-.1)/(1.1*g-.1)*p,v=Math.max(.1,Math.min(10,y));return Math.round((c-h-l)*v+u+f)}const m=e?ro(e)?e.scale.domain().length:Math.max(7,17/d):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const g=Av("y",e)/(Av("x",t)*a),y=i?i.scale.bandwidth():1,v=n?n.scale.bandwidth():1,b=y*(c-h-l)-t.insetLeft-t.insetRight;return(g*b+e.insetTop+e.insetBottom)/v+u+f}return!!(e||n)*Math.max(1,Math.min(60,m*d))*20+!!i*30+60}function Av(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const c=e.scale.exponent();r=u=>Math.pow(u,c);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,a]=Wo(i);return Math.abs(r(a)-r(s))}function bU(t,e){const{fx:n,fy:i}=Vm(t,e),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?yN(r,s).map(([a,c],u)=>({x:a,y:c,i:u})):r?r.map((a,c)=>({x:a,i:c})):s?s.map((a,c)=>({y:a,i:c})):void 0}function _U(t,{x:e,y:n}){return e&&(e=jm(e)),n&&(n=jm(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Ay(t,{fx:e,fy:n}){const i=fa(t),r=e==null?void 0:e.value,s=n==null?void 0:n.value;return e&&n?hu(i,a=>(a.fx=r[a[0]],a.fy=s[a[0]],a),a=>r[a],a=>s[a]):e?hu(i,a=>(a.fx=r[a[0]],a),a=>r[a]):hu(i,a=>(a.fy=s[a[0]],a),a=>s[a])}function vU(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:s})=>`translate(${t(r)-i},${e(s)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function wU(t){const e=[],n=new Uint32Array(qa(t,i=>i.length));for(const i of t){let r=0;for(const s of t)i!==s&&(n.set(s,r),r+=s.length);e.push(n.slice(0,r))}return e}const xU=new Map([["top",o0],["right",l0],["bottom",c0],["left",u0],["top-left",Kl(o0,u0)],["top-right",Kl(o0,l0)],["bottom-left",Kl(c0,u0)],["bottom-right",Kl(c0,l0)],["top-empty",IU],["right-empty",kU],["bottom-empty",AU],["left-empty",TU],["empty",CU]]);function SU(t){if(t==null)return null;const e=xU.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Tv=new WeakMap;function jm(t){let e=Tv.get(t);return e||Tv.set(t,e=new za(an(t,(n,i)=>[n,i]))),e}function da(t,e){return jm(t).get(e)}function EU(t,e,n){return e=Aa(e),n=Aa(n),t.find(i=>Object.is(Aa(i.x),e)&&Object.is(Aa(i.y),n))}function Hd(t,e,n){var i;return(i=EU(t,e,n))==null?void 0:i.empty}function o0(t,{y:e},{y:n}){return e?da(e,n)===0:!0}function c0(t,{y:e},{y:n}){return e?da(e,n)===e.length-1:!0}function u0(t,{x:e},{x:n}){return e?da(e,n)===0:!0}function l0(t,{x:e},{x:n}){return e?da(e,n)===e.length-1:!0}function IU(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,i);if(s>0)return Hd(t,n,e[s-1])}function AU(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,i);if(s<e.length-1)return Hd(t,n,e[s+1])}function TU(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,n);if(s>0)return Hd(t,e[s-1],i)}function kU(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=da(e,n);if(s<e.length-1)return Hd(t,e[s+1],i)}function CU(t,e,{empty:n}){return n}function Kl(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function f0(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:s})=>{var a;return((a=i.get(r))==null?void 0:a.get(s))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class Rn{constructor(e,n={},i={},r){const{facet:s="auto",facetAnchor:a,fx:c,fy:u,sort:l,dx:f=0,dy:h=0,margin:d=0,marginTop:p=d,marginRight:m=d,marginBottom:g=d,marginLeft:y=d,clip:v,channels:b,tip:x,render:w}=i;if(this.data=e,this.sort=ec(l)?l:null,this.initializer=pl(i).initializer,this.transform=this.initializer?i.transform:yy(i).transform,s===null||s===!1?this.facet=null:(this.facet=Ss(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=e===Sf&&typeof c=="string"?[c]:c,this.fy=e===Sf&&typeof u=="string"?[u]:u),this.facetAnchor=SU(a),n=yE(n),b!==void 0&&(n={...MU(b),...n}),r!==void 0&&(n={...iU(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,E])=>{if(Ld(E.value)){const{value:T,scale:C=E.scale}=E.value;E={...E,scale:C,value:T}}if(e===Sf&&typeof E.value=="string"){const{value:T}=E;E={...E,value:[T]}}return[_,E]}).filter(([_,{value:E,optional:T}])=>{if(E!=null)return!0;if(T)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+f,this.dy=+h,this.marginTop=+p,this.marginRight=+m,this.marginBottom=+g,this.marginLeft=+y,this.clip=hU(v),this.tip=NU(x),this.facet==="super"){if(c||u)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:E}=n[_];if(!(E!=="x"&&E!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=YE(w,this.render))}initialize(e,n,i){let r=Dr(this.data);e===void 0&&r!=null&&(e=[fa(r)]);const s=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Dr(r)),e!==void 0&&(e.original=s);const a=XB(this.channels,r);return this.sort!=null&&QB(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:s=Qs}=n[r];if(s!==null){const a=i[r];e=e.filter(c=>s(a[c]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in e&&e[s].scale==="y"&&oP(r,s,n,i.projection)}}scale(e,n,i){const r=JB(e,n);return i.projection&&this.project(e,r,i),r}}function HE(...t){return t.plot=Rn.prototype.plot,t}function YE(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,s,a,c){return t.call(this,n,i,r,s,a,(u,l,f,h,d)=>e.call(this,u,l,f,h,d,c))}}function MU(t){return Object.fromEntries(Object.entries(yE(t)).map(([e,n])=>(n=Bd(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function NU(t){return t===!0?"xy":t===!1?null:Rd(t,"tip",["x","y","xy"])}function Ty(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:t}const kv=new WeakMap;function ky(t,e,{x:n,y:i,px:r,py:s,maxRadius:a=40,channels:c,render:u,...l}={}){return a=+a,r!=null&&(n??(n=null),c={...c,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),c={...c,py:{value:s,scale:"y"}}),{x:n,y:i,channels:c,...l,render:YE(function(f,h,d,p,m,g){const y=m.ownerSVGElement,{data:v}=m.getMarkState(this);let b=kv.get(y);b||kv.set(y,b={sticky:!1,roots:[],renders:[]});let x=b.renders.push(Q)-1;const{x:w,y:_,fx:E,fy:T}=h;let C=E?E(f.fx)-p.marginLeft:0,D=T?T(f.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(C+=w.bandwidth()/2),_!=null&&_.bandwidth&&(D+=_.bandwidth()/2);const O=f.fi!=null;let k;if(O){let ut=b.facetStates;ut||(b.facetStates=ut=new Map),k=ut.get(this),k||ut.set(this,k=new Map)}const[N,B]=yl(this,p),{px:z,py:I}=d,j=z?ut=>z[ut]:GE(d,N),F=I?ut=>I[ut]:KE(d,B);let P,W,J;function X(ut,rt){if(O)if(J&&(J=cancelAnimationFrame(J)),ut==null)k.delete(f.fi);else{k.set(f.fi,rt),J=requestAnimationFrame(()=>{J=null;for(const ct of k.values())if(ct<rt){ut=null;break}Q(ut)});return}Q(ut)}function Q(ut){if(P===ut)return;P=ut;const rt=P==null?[]:[P];O&&(rt.fx=f.fx,rt.fy=f.fy,rt.fi=f.fi);const ct=g(rt,h,d,p,m);if(W){if(O){const M=W.parentNode,H=W.getAttribute("transform"),K=ct.getAttribute("transform");H?ct.setAttribute("transform",H):ct.removeAttribute("transform"),K?M.setAttribute("transform",K):M.removeAttribute("transform"),ct.removeAttribute("aria-label"),ct.removeAttribute("aria-description"),ct.removeAttribute("aria-hidden")}W.replaceWith(ct)}return b.roots[x]=W=ct,m.dispatchValue(P==null?null:v[P]),ct}function ot(ut){if(b.sticky||ut.pointerType==="mouse"&&ut.buttons===1)return;let[rt,ct]=em(ut);rt-=C,ct-=D;let M=null,H=a*a;for(const K of f){const U=t*(j(K)-rt),st=e*(F(K)-ct),pt=U*U+st*st;pt<=H&&(M=K,H=pt)}X(M,H)}function Ut(ut){ut.pointerType==="mouse"&&P!=null&&(b.sticky&&b.roots.some(rt=>rt==null?void 0:rt.contains(ut.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(rt=>rt(null))):b.sticky=!0,ut.stopImmediatePropagation()))}function dt(ut){ut.pointerType==="mouse"&&(b.sticky||X(null))}return y.addEventListener("pointerenter",ot),y.addEventListener("pointermove",ot),y.addEventListener("pointerdown",Ut),y.addEventListener("pointerleave",dt),Q(null)},u)}}function OU(t){return ky(1,1,t)}function FU(t){return ky(1,.01,t)}function DU(t){return ky(.01,1,t)}function GE({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function KE({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function XE(t){return ro(t)&&t.interval===void 0?void 0:"tabular-nums"}function RU(t,e){return t===void 0?tr(e)?qE:bn:typeof t=="function"?t:(typeof t=="string"?tr(e)?Du:xc:Ic)(t)}function LU(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:a=18,marginRight:c=0,marginBottom:u=16+i,marginLeft:l=0,style:f,ticks:h=(r-l-c)/64,tickFormat:d,fontVariant:p=XE(t),round:m=!0,opacity:g,className:y}=e;const v=_y(e);y=Ey(y),g=vn(g)[1],d===null&&(d=()=>null);const b=en("svg",v).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(N=>N.append("style").text(`.${y}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${y}-ramp text {
  white-space: pre;
}`)).call(Iy,f);let x=N=>N.selectAll(".tick line").attr("y1",a+u-s),w;const _=m?(N,B)=>N.rangeRound(B):(N,B)=>N.range(B),{type:E,domain:T,range:C,interpolate:D,scale:O,pivot:k}=t;if(D){const N=C===void 0?D:Wg(D.length===1?xy(D):D,C);w=_(O.copy(),Ji(yn(l,r-c),Math.min(T.length+(k!==void 0),C===void 0?1/0:C.length)));const B=256,z=v.document.createElement("canvas");z.width=B,z.height=1;const I=z.getContext("2d");for(let j=0,F=B-1;j<B;++j)I.fillStyle=N(j/F),I.fillRect(j,0,1,1);b.append("image").attr("opacity",g).attr("x",l).attr("y",a).attr("width",r-l-c).attr("height",s-a-u).attr("preserveAspectRatio","none").attr("xlink:href",z.toDataURL())}else if(E==="threshold"){const N=T,B=d===void 0?z=>z:typeof d=="string"?xc(d):d;w=_(ey().domain([-1,C.length-1]),[l,r-c]),b.append("g").attr("fill-opacity",g).selectAll().data(C).enter().append("rect").attr("x",(z,I)=>w(I-1)).attr("y",a).attr("width",(z,I)=>w(I)-w(I-1)).attr("height",s-a-u).attr("fill",z=>z),h=an(N,(z,I)=>I),d=z=>B(N[z],z)}else w=_(bd().domain(T),[l,r-c]),b.append("g").attr("fill-opacity",g).selectAll().data(T).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-a-u).attr("fill",O),x=()=>{};return b.append("g").attr("transform",`translate(0,${s-u})`).call(PN(w).ticks(Array.isArray(h)?null:h,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ye(p,"normal")).call(x).call(N=>N.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}function Cv(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function BU(t,{opacity:e,...n}={}){if(!ro(t)&&!jE(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return JE(t,n,(i,r,s,a)=>i.append("svg").attr("width",s).attr("height",a).attr("fill",r.scale).attr("fill-opacity",vn(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function PU(t,{fill:e=(l=>(l=t.hint)==null?void 0:l.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(f=>(f=t.hint)==null?void 0:f.stroke)()!==void 0?t.hint.stroke:Gn(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:a=4.5,...c}={},u){const[h,d]=Qa(e),[p,m]=Qa(i),g=Cv(u,h),y=Cv(u,p),v=a*a*Math.PI;return n=vn(n)[1],r=vn(r)[1],s=vn(s)[1],JE(t,c,(b,x,w,_)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",_).attr("fill",h==="color"?E=>g.scale(E):d).attr("fill-opacity",n).attr("stroke",p==="color"?E=>y.scale(E):m).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",E=>{const T=Us();return t.scale(E).draw(T,v),T}))}function JE(t,e={},n){let{columns:i,tickFormat:r,fontVariant:s=XE(t),swatchSize:a=15,swatchWidth:c=a,swatchHeight:u=a,marginLeft:l=0,className:f,style:h,width:d}=e;const p=_y(e);f=Ey(f),r=RU(r,t.domain);const m=en("div",p).attr("class",`${f}-swatches ${f}-swatches-${i!=null?"columns":"wrap"}`);let g;return i!=null?(g=`.${f}-swatches-columns .${f}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${f}-swatches-columns .${f}-swatch::before {
  flex-shrink: 0;
}
.${f}-swatches-columns .${f}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,t,c,u).call(y=>y.append("div").attr("class",`${f}-swatch-label`).attr("title",r).text(r))):(g=`.${f}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${f}-swatches-wrap .${f}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(t.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,t,c,u).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),m.call(y=>y.insert("style","*").text(`.${f}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${f}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",l?`${+l}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ye(s,"normal")).call(Iy,h).node()}const zm=new Map([["symbol",PU],["color",ZE],["opacity",VU]]);function UU(t,e,n={}){return(i,r)=>{if(!zm.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return zm.get(i)(t[i],QE(e,n[i],r),s=>t[s])}}function QE({className:t,...e},{label:n,ticks:i,tickFormat:r}={},s){return MB(s,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function ZE(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return BU(t,n);case"ramp":return LU(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function VU({type:t,interpolate:e,...n},{legend:i=!0,color:r=Xs(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return ZE({type:t,...n,interpolate:$U(r)},{legend:i,...s})}function $U(t){const{r:e,g:n,b:i}=Xs(t)||Xs(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function jU(t,e,n){const i=[];for(const[r,s]of zm){const a=n[r];if(a!=null&&a.legend&&r in t){const c=s(t[r],QE(e,t[r],a),u=>t[u]);c!=null&&i.push(c)}}return i}const tI=Math.PI/180;function Yd(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=h0(n),t.markerMid=h0(i),t.markerEnd=h0(r)}function h0(t){if(t==null||t===!1)return null;if(t===!0)return Nv;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Mv("auto");case"arrow-reverse":return Mv("auto-start-reverse");case"dot":return zU;case"circle":case"circle-fill":return Nv;case"circle-stroke":return qU}throw new Error(`invalid marker: ${t}`)}function Mv(t){return(e,n)=>en("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function zU(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Nv(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function qU(t,e){return en("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let WU=0;function Cy(t,e,{stroke:n},i){return eI(t,e,n&&(r=>n[r]),i)}function HU(t,e,{stroke:n},i){return eI(t,e,n&&(([r])=>n[r]),i)}function eI(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},s=()=>r,a){const c=new Map;function u(l){return function(f){const h=s(f);let d=c.get(l);d||c.set(l,d=new Map);let p=d.get(h);if(!p){const m=this.parentNode.insertBefore(l(h,a),this),g=`plot-marker-${++WU}`;m.setAttribute("id",g),d.set(h,p=`url(#${g})`)}return p}}e&&t.attr("marker-start",u(e)),n&&t.attr("marker-mid",u(n)),i&&t.attr("marker-end",u(i))}function My({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=nI(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function Ny({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=nI(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function nI(t,e,n){return t===void 0&&e===void 0&&n===void 0?oi?[1,0]:[.5,.5]:[e,n]}function iI(t,{interval:e}){return t={...Bd(t)},t.interval=dy(t.interval===void 0?e:t.interval),t}function Gd(t,e,n,i){const{[t]:r,[`${t}1`]:s,[`${t}2`]:a}=n,{value:c,interval:u}=iI(r,n);if(c==null||u==null&&!i)return n;const l=hl(r);if(u==null){let p;const m={transform:g=>p||(p=Fi(g,c)),label:l};return{...n,[t]:void 0,[`${t}1`]:s===void 0?m:s,[`${t}2`]:a===void 0?m:a}}let f,h;function d(p){return h!==void 0&&p===f?h:h=an(Fi(f=p,c),m=>u.floor(m))}return e({...n,[t]:void 0,[`${t}1`]:s===void 0?{transform:d,label:l}:s,[`${t}2`]:a===void 0?{transform:p=>d(p).map(m=>u.offset(m)),label:l}:a})}function rI(t,e,n){const{[t]:i}=n,{value:r,interval:s}=iI(i,n);return r==null||s==null?n:e({...n,[t]:{label:hl(i),transform:a=>{const c=an(Fi(a,r),l=>s.floor(l)),u=c.map(l=>s.offset(l));return c.map(tr(c)?(l,f)=>l==null||isNaN(l=+l)||(f=u[f],f==null)||isNaN(f=+f)?void 0:new Date((l+f)/2):(l,f)=>l==null||(f=u[f],f==null)?NaN:(+l+ +f)/2)}}})}function YU(t={}){return Gd("x",My,t,!0)}function sI(t={}){return Gd("y",Ny,t,!0)}function GU(t={}){return Gd("x",My,t)}function KU(t={}){return Gd("y",Ny,t)}function XU(t={}){return rI("x",My,t)}function JU(t={}){return rI("y",Ny,t)}const aI={ariaLabel:"rule",fill:null,stroke:"currentColor"};class QU extends Rn{constructor(e,n={}){const{x:i,y1:r,y2:s,inset:a=0,insetTop:c=a,insetBottom:u=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},Ty(n,"x"),aI),this.insetTop=Ie(c),this.insetBottom=Ie(u),Yd(this,n)}render(e,n,i,r,s){const{x:a,y:c}=n,{x:u,y1:l,y2:f}=i,{width:h,height:d,marginTop:p,marginRight:m,marginLeft:g,marginBottom:y}=r,{insetTop:v,insetBottom:b}=this;return en("svg:g",s).call(Pi,this,r).call(Vi,this,{x:u&&a},oi,0).call(x=>x.selectAll().data(e).enter().append("line").call(Ui,this).attr("x1",u?w=>u[w]:(g+h-m)/2).attr("x2",u?w=>u[w]:(g+h-m)/2).attr("y1",l&&!$s(c)?w=>l[w]+v:p+v).attr("y2",f&&!$s(c)?c.bandwidth?w=>f[w]+c.bandwidth()-b:w=>f[w]-b:d-y-b).call(jr,this,i).call(Cy,this,i,s)).node()}}class ZU extends Rn{constructor(e,n={}){const{x1:i,x2:r,y:s,inset:a=0,insetRight:c=a,insetLeft:u=a}=n;super(e,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Ty(n,"y"),aI),this.insetRight=Ie(c),this.insetLeft=Ie(u),Yd(this,n)}render(e,n,i,r,s){const{x:a,y:c}=n,{y:u,x1:l,x2:f}=i,{width:h,height:d,marginTop:p,marginRight:m,marginLeft:g,marginBottom:y}=r,{insetLeft:v,insetRight:b}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{y:u&&c},0,oi).call(x=>x.selectAll().data(e).enter().append("line").call(Ui,this).attr("x1",l&&!$s(a)?w=>l[w]+v:g+v).attr("x2",f&&!$s(a)?a.bandwidth?w=>f[w]+a.bandwidth()-b:w=>f[w]-b:h-m-b).attr("y1",u?w=>u[w]:(p+d-y)/2).attr("y2",u?w=>u[w]:(p+d-y)/2).call(jr,this,i).call(Cy,this,i,s)).node()}}function Oy(t,e){let{x:n=di,y:i,y1:r,y2:s,...a}=KU(e);return[r,s]=oI(i,r,s),new QU(t,{...a,x:n,y1:r,y2:s})}function Fy(t,e){let{y:n=di,x:i,x1:r,x2:s,...a}=GU(e);return[r,s]=oI(i,r,s),new ZU(t,{...a,y:n,x1:r,x2:s})}function oI(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Dy(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let s=0;s<n;++s)r+=e[s](i)+t[s+1];return r}}const tV={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},cI="­";class Ry extends Rn{constructor(e,n={}){const{x:i,y:r,text:s=ha(e)&&mE(e)?di:uE,frameAnchor:a,textAnchor:c=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:u=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:l=1,lineWidth:f=1/0,textOverflow:h,monospace:d,fontFamily:p=d?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:g,fontVariant:y,fontWeight:v,rotate:b}=n,[x,w]=vn(b,0),[_,E]=aV(m);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:EB(x),optional:!0},text:{value:s,filter:fy,optional:!0}},n,tV),this.rotate=w,this.textAnchor=Ye(c,"middle"),this.lineAnchor=Ss(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+f,this.textOverflow=uI(h),this.monospace=!!d,this.fontFamily=bn(p),this.fontSize=E,this.fontStyle=bn(g),this.fontVariant=bn(y),this.fontWeight=bn(v),this.frameAnchor=Ud(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=fI(this),this.clipLine=hI(this)}render(e,n,i,r,s){const{x:a,y:c}=n,{x:u,y:l,rotate:f,text:h,title:d,fontSize:p}=i,{rotate:m}=this,[g,y]=yl(this,r);return en("svg:g",s).call(Pi,this,r,s).call(lI,this,h,r).call(Vi,this,{x:u&&a,y:l&&c}).call(v=>v.selectAll().data(e).enter().append("text").call(Ui,this).call(eV,this,h,d).attr("transform",Dy`translate(${u?b=>u[b]:g},${l?b=>l[b]:y})${f?b=>` rotate(${f[b]})`:m?` rotate(${m})`:""}`).call(Et,"font-size",p&&(b=>p[b])).call(jr,this,i)).node()}}function uI(t){return t==null?null:Ss(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function eV(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:a,splitLines:c,clipLine:u}=e;t.each(function(l){const f=c(us(n[l])??"").map(u),h=f.length,d=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let p=0;for(let m=0;m<h;++m){if(++p,!f[m])continue;const g=this.ownerDocument.createElementNS(Ho.svg,"tspan");g.setAttribute("x",0),m===p-1?g.setAttribute("y",`${(d+m)*s}em`):g.setAttribute("dy",`${p*s}em`),g.textContent=f[m],this.appendChild(g),p=0}}else d&&this.setAttribute("y",`${d*s}em`),this.textContent=f[0];if(a&&!i&&f[0]!==n[l]){const p=this.ownerDocument.createElementNS(Ho.svg,"title");p.textContent=n[l],this.appendChild(p)}})}function bl(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new Ry(t,{...i,x:e,y:n})}function nV(t,{x:e=di,...n}={}){return new Ry(t,JU({...n,x:e}))}function iV(t,{y:e=di,...n}={}){return new Ry(t,XU({...n,y:e}))}function lI(t,e,n){Et(t,"text-anchor",e.textAnchor),Et(t,"font-family",e.fontFamily),Et(t,"font-size",e.fontSize),Et(t,"font-style",e.fontStyle),Et(t,"font-variant",e.fontVariant===void 0?rV(n):e.fontVariant),Et(t,"font-weight",e.fontWeight)}function rV(t){return t&&(TB(t)||tr(t))?"tabular-nums":void 0}const sV=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function aV(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),sV.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function oV(t,e,n){const i=[];let r,s=0;for(const[a,c,u]of cV(t)){if(r===void 0&&(r=a),s>r&&n(t,r,c)>e&&(i.push(t.slice(r,s)+(t[s-1]===cI?"-":"")),r=a),u){i.push(t.slice(r,c)),r=void 0;continue}s=c}return i}function*cV(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case cI:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Ov={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Ly(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=Ac(t,r))i+=Ov[t[r]]??(pI(t,r)?120:Ov.e);return i}function By(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=Ac(t,r))i+=pI(t,r)?200:100;return i}function fI({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return s=>s.split(/\r\n?|\n/g);const i=t?By:Ly,r=e*100;return s=>oV(s,r,i)}function hI({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return s=>s;const i=t?By:Ly,r=e*100;switch(n){case"clip-start":return s=>Dv(s,r,i,"");case"clip-end":return s=>Fv(s,r,i,"");case"ellipsis-start":return s=>Dv(s,r,i,Lo);case"ellipsis-middle":return s=>uV(s,r,i,Lo);case"ellipsis-end":return s=>Fv(s,r,i,Lo)}}const Lo="…";function nc(t,e,n,i){const r=[];let s=0;for(let a=0,c=0,u=t.length;a<u;a=c){c=Ac(t,a);const l=n(t,a,c);if(s+l>e){for(s+=i;s>e&&a>0;)c=a,a=r.pop(),s-=n(t,a,c);return[a,e-s]}s+=l,r.push(a)}return[-1,0]}function Fv(t,e,n,i){t=t.trim();const r=n(i),[s]=nc(t,e,n,r);return s<0?t:t.slice(0,s).trimEnd()+i}function uV(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i)/2,[a,c]=nc(t,e/2,n,s),[u]=nc(t,r-e/2-c+s,n,-s);return u<0?i:t.slice(0,a).trimEnd()+i+t.slice(Ac(t,u)).trimStart()}function Dv(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i),[a]=nc(t,r-e+s,n,-s);return a<0?i:i+t.slice(Ac(t,a)).trimStart()}const qm=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Rv=/\p{Extended_Pictographic}/uy;function Ac(t,e){return e+=lV(t,e)?2:1,hV(t,e)&&(e=qm.lastIndex),fV(t,e)?Ac(t,e+1):e}function dI(t,e){return t.charCodeAt(e)<128}function lV(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function fV(t,e){return t.charCodeAt(e)===8205}function hV(t,e){return dI(t,e)?!1:(qm.lastIndex=e,qm.test(t))}function pI(t,e){return dI(t,e)?!1:(Rv.lastIndex=e,Rv.test(t))}const dV={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},mI=3.5,pV=mI*5,gI={draw(t,e,n){const i=e*n/pV;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},mV={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},gV=new Map([["arrow",gI],["spike",mV]]);function yV(t){return t&&typeof t.draw=="function"}function bV(t){if(yV(t))return t;const e=gV.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let yI=class extends Rn{constructor(e,n={}){const{x:i,y:r,r:s=mI,length:a,rotate:c,shape:u=gI,anchor:l="middle",frameAnchor:f}=n,[h,d]=vn(a,12),[p,m]=vn(c,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,dV),this.r=+s,this.length=d,this.rotate=m,this.shape=bV(u),this.anchor=Ss(l,"anchor",["start","middle","end"]),this.frameAnchor=Ud(f)}render(e,n,i,r,s){const{x:a,y:c}=n,{x:u,y:l,length:f,rotate:h}=i,{length:d,rotate:p,anchor:m,shape:g,r:y}=this,[v,b]=yl(this,r);return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:u&&a,y:l&&c}).call(x=>x.selectAll().data(e).enter().append("path").call(Ui,this).attr("transform",Dy`translate(${u?w=>u[w]:v},${l?w=>l[w]:b})${h?w=>` rotate(${h[w]})`:p?` rotate(${p})`:""}${m==="start"?"":m==="end"?f?w=>` translate(0,${f[w]})`:` translate(0,${d})`:f?w=>` translate(0,${f[w]/2})`:` translate(0,${d/2})`}`).attr("d",f?w=>{const _=Us();return g.draw(_,f[w],y),_}:(()=>{const w=Us();return g.draw(w,d,y),w})()).call(jr,this,i)).node()}};function _V(t,e={}){const{x:n=di,...i}=e;return new yI(t,{...i,x:n})}function vV(t,e={}){const{y:n=di,...i}=e;return new yI(t,{...i,y:n})}function pa(t,e){return arguments.length<2&&!ha(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Kd({anchor:t}={},e){return t===void 0?e[0]:Ss(t,"anchor",e)}function bI(t){return Kd(t,["left","right"])}function _I(t){return Kd(t,["right","left"])}function vI(t){return Kd(t,["bottom","top"])}function wI(t){return Kd(t,["top","bottom"])}function Tc(){const[t,e]=pa(...arguments);return xI("y",bI(e),t,e)}function wV(){const[t,e]=pa(...arguments);return xI("fy",_I(e),t,e)}function so(){const[t,e]=pa(...arguments);return SI("x",vI(e),t,e)}function xV(){const[t,e]=pa(...arguments);return SI("fx",wI(e),t,e)}function xI(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:c=1,fill:u=i,fillOpacity:l=r,textAnchor:f,textStroke:h,textStrokeOpacity:d,textStrokeWidth:p,tickSize:m=t==="y"?6:0,tickPadding:g,tickRotate:y,x:v,margin:b,marginTop:x=b===void 0?20:b,marginRight:w=b===void 0?e==="right"?40:0:b,marginBottom:_=b===void 0?20:b,marginLeft:E=b===void 0?e==="left"?40:0:b,label:T,labelAnchor:C,labelArrow:D,labelOffset:O,...k}){return m=Ie(m),g=Ie(g),y=Ie(y),C!==void 0&&(C=Ss(C,"labelAnchor",["center","top","bottom"])),D=NI(D),HE(m&&!Gn(s)?SV(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:c,tickSize:m,tickPadding:g,tickRotate:y,x:v,...k}):null,Gn(u)?null:IV(t,e,n,{fill:u,fillOpacity:l,stroke:h,strokeOpacity:d,strokeWidth:p,textAnchor:f,tickSize:m,tickPadding:g,tickRotate:y,x:v,marginTop:x,marginRight:w,marginBottom:_,marginLeft:E,...k}),!Gn(u)&&T!==null?bl([],TI({fill:u,fillOpacity:l,...k},function(N,B,z,I,j){const F=I[t],{marginTop:P,marginRight:W,marginBottom:J,marginLeft:X}=t==="y"&&j.inset||j,Q=C??(F.bandwidth?"center":"top"),ot=O??(e==="right"?W:X)-3;return Q==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Q,this.frameAnchor=`${Q}-${e}`,this.rotate=0),this.dy=Q==="top"?3-P:Q==="bottom"?J-3:0,this.dx=e==="right"?ot:-ot,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[MI(t,F,{anchor:e,label:T,labelAnchor:Q,labelArrow:D})]}}}})):null)}function SI(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:c=1,fill:u=i,fillOpacity:l=r,textAnchor:f,textStroke:h,textStrokeOpacity:d,textStrokeWidth:p,tickSize:m=t==="x"?6:0,tickPadding:g,tickRotate:y,y:v,margin:b,marginTop:x=b===void 0?e==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:_=b===void 0?e==="bottom"?30:0:b,marginLeft:E=b===void 0?20:b,label:T,labelAnchor:C,labelArrow:D,labelOffset:O,...k}){return m=Ie(m),g=Ie(g),y=Ie(y),C!==void 0&&(C=Ss(C,"labelAnchor",["center","left","right"])),D=NI(D),HE(m&&!Gn(s)?EV(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:c,tickSize:m,tickPadding:g,tickRotate:y,y:v,...k}):null,Gn(u)?null:AV(t,e,n,{fill:u,fillOpacity:l,stroke:h,strokeOpacity:d,strokeWidth:p,textAnchor:f,tickSize:m,tickPadding:g,tickRotate:y,y:v,marginTop:x,marginRight:w,marginBottom:_,marginLeft:E,...k}),!Gn(u)&&T!==null?bl([],TI({fill:u,fillOpacity:l,...k},function(N,B,z,I,j){const F=I[t],{marginTop:P,marginRight:W,marginBottom:J,marginLeft:X}=t==="x"&&j.inset||j,Q=C??(F.bandwidth?"center":"right"),ot=O??(e==="top"?P:J)-3;return Q==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Q}`,this.textAnchor=Q==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-ot:ot,this.dx=Q==="right"?W-3:Q==="left"?3-X:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[MI(t,F,{anchor:e,label:T,labelAnchor:Q,labelArrow:D})]}}}})):null)}function SV(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:c=e,tickSize:u,inset:l=0,insetLeft:f=l,insetRight:h=l,dx:d=0,y:p=t==="y"?void 0:null,...m}){return kc(vV,t,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:a,frameAnchor:c,y:p,...m,dx:e==="left"?+d-oi+ +f:+d+oi-h,anchor:"start",length:u,shape:e==="left"?FV:DV})}function EV(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:c=e,tickSize:u,inset:l=0,insetTop:f=l,insetBottom:h=l,dy:d=0,x:p=t==="x"?void 0:null,...m}){return kc(_V,t,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:a,frameAnchor:c,x:p,...m,dy:e==="bottom"?+d-oi-h:+d+oi+ +f,anchor:"start",length:u,shape:e==="bottom"?NV:OV})}function IV(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:c=Math.max(3,9-s)+(Math.abs(a)>60?4*Math.cos(a*tI):0),tickFormat:u,text:l=typeof u=="function"?u:void 0,textAnchor:f=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:h=a>60?"top":a<-60?"bottom":"middle",fontVariant:d,inset:p=0,insetLeft:m=p,insetRight:g=p,dx:y=0,y:v=t==="y"?void 0:null,...b}){return kc(iV,t,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:f,lineAnchor:h,fontVariant:d,rotate:a,y:v,...b,dx:e==="left"?+y-s-c+ +m:+y+ +s+ +c-g},function(x,w,_){d===void 0&&(this.fontVariant=CI(x)),l===void 0&&(_.text=kI(x,w,u))})}function AV(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:c=Math.max(3,9-s)+(Math.abs(a)>=10?4*Math.cos(a*tI):0),tickFormat:u,text:l=typeof u=="function"?u:void 0,textAnchor:f=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:h=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:d,inset:p=0,insetTop:m=p,insetBottom:g=p,dy:y=0,x:v=t==="x"?void 0:null,...b}){return kc(nV,t,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:f,lineAnchor:h,fontVariant:d,rotate:a,x:v,...b,dy:e==="bottom"?+y+ +s+ +c-g:+y-s-c+ +m},function(x,w,_){d===void 0&&(this.fontVariant=CI(x)),l===void 0&&(_.text=kI(x,w,u))})}function TV(){const[t,e]=pa(...arguments);return EI("y",bI(e),t,e)}function kV(){const[t,e]=pa(...arguments);return EI("fy",_I(e),t,e)}function CV(){const[t,e]=pa(...arguments);return II("x",vI(e),t,e)}function MV(){const[t,e]=pa(...arguments);return II("fx",wI(e),t,e)}function EI(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:s=e==="left"?r:null,x2:a=e==="right"?r:null,...c}){return kc(Fy,t,`${t}-grid`,n,{y:i,x1:s,x2:a,...AI(c)})}function II(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:s=e==="top"?r:null,y2:a=e==="bottom"?r:null,...c}){return kc(Oy,t,`${t}-grid`,n,{x:i,y1:s,y2:a,...AI(c)})}function AI({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function TI({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:u},l){return[,t]=Qa(t),[,e]=vn(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:u,initializer:l}}function kc(t,e,n,i,r,s){let a;const c=t(i,pl(r,function(u,l,f,h,d,p){const m=u==null&&(e==="fx"||e==="fy"),{[e]:g}=h;if(!g)throw new Error(`missing scale: ${e}`);let{ticks:y,tickSpacing:v,interval:b}=r;if($E(g)&&typeof y=="string"&&(b=y,y=void 0),u==null){if(ha(y))u=Dr(y);else if(g.ticks)if(y!==void 0)u=g.ticks(y);else if(b=dl(b===void 0?g.interval:b,g.type),b!==void 0){const[w,_]=Wo(g.domain());u=b.range(w,b.offset(b.floor(_)))}else{const[w,_]=Wo(g.range());y=(_-w)/(v===void 0?e==="x"?80:35:v),u=g.ticks(y)}else u=g.domain();e==="y"||e==="x"?l=[fa(u)]:a[e]={scale:e,value:di}}s==null||s.call(this,g,y,a);const x=Object.fromEntries(Object.entries(a).map(([w,_])=>[w,{..._,value:Fi(u,_.value)}]));return m&&(l=p.filterFacets(u,x)),{data:u,facets:l,channels:x}}));return i==null?(a=c.channels,c.channels={}):a={},c.ariaLabel=n,c}function kI(t,e,n){return{value:Wm(t,e,n)}}function Wm(t,e,n){return t.tickFormat?t.tickFormat(ha(e)?null:e,n):n===void 0?oB(t.interval)?Du("%Y"):cB(t.interval)?ry("%Y"):us:typeof n=="string"?(tr(t.domain())?Du:xc)(n):Ic(n)}const NV={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},OV={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},FV={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},DV={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function CI(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function RV(t){return Math.sign(Pu(t.domain()))*Math.sign(Pu(t.range()))}function MI(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&LV(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const a=RV(e);a&&(s=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function NI(t="auto"){return Gn(t)?!1:typeof t=="boolean"?t:Ss(t,"labelArrow",["auto","up","right","down","left"])}function LV(t){return $E(t)||t.interval!=null}const BV={ariaLabel:"frame",fill:"none",stroke:"currentColor"},PV={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class UV extends Rn{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:a=i,insetLeft:c=i,rx:u,ry:l}=e;super(Sf,void 0,e,n==null?BV:PV),this.anchor=Rd(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ie(r),this.insetRight=Ie(s),this.insetBottom=Ie(a),this.insetLeft=Ie(c),this.rx=Ie(u),this.ry=Ie(l)}render(e,n,i,r,s){const{marginTop:a,marginRight:c,marginBottom:u,marginLeft:l,width:f,height:h}=r,{anchor:d,insetTop:p,insetRight:m,insetBottom:g,insetLeft:y,rx:v,ry:b}=this,x=l+y,w=f-c-m,_=a+p,E=h-u-g;return en(d?"svg:line":"svg:rect",s).datum(0).call(Pi,this,r,s).call(Ui,this).call(jr,this,i).call(Vi,this,{}).call(d==="left"?T=>T.attr("x1",x).attr("x2",x).attr("y1",_).attr("y2",E):d==="right"?T=>T.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",E):d==="top"?T=>T.attr("x1",x).attr("x2",w).attr("y1",_).attr("y2",_):d==="bottom"?T=>T.attr("x1",x).attr("x2",w).attr("y1",E).attr("y2",E):T=>T.attr("x",x).attr("y",_).attr("width",w-x).attr("height",E-_).attr("rx",v).attr("ry",b)).node()}}function VV(t){return new UV(t)}const d0={ariaLabel:"tip",fill:"white",stroke:"currentColor"},$V=new Set(["geometry","href","src","ariaLabel"]);class jV extends Rn{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ha(e)&&mE(e)&&(n={...n,title:di});const{x:i,y:r,x1:s,x2:a,y1:c,y2:u,anchor:l,monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:g,lineHeight:y=1,lineWidth:v=20,frameAnchor:b,textAnchor:x="start",textOverflow:w,textPadding:_=8,pointerSize:E=12,pathFilter:T="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:s!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:c!=null&&u!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:a==null},y1:{value:c,scale:"y",optional:u==null},x2:{value:a,scale:"x",optional:s==null},y2:{value:u,scale:"y",optional:c==null}},n,d0),this.anchor=gE(l,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Ud(b),this.textAnchor=Ye(x,"middle"),this.textPadding=+_,this.pointerSize=+E,this.pathFilter=bn(T),this.lineHeight=+y,this.lineWidth=+v,this.textOverflow=uI(w),this.monospace=!!f,this.fontFamily=bn(h),this.fontSize=Ie(d),this.fontStyle=bn(p),this.fontVariant=bn(m),this.fontWeight=bn(g);for(const C in d0)C in this.channels&&(this[C]=d0[C]);this.splitLines=fI(this),this.clipLine=hI(this)}render(e,n,i,r,s){const a=this,{x:c,y:u,fx:l,fy:f}=n,{ownerSVGElement:h,document:d}=s,{anchor:p,monospace:m,lineHeight:g,lineWidth:y}=this,{textPadding:v,pointerSize:b,pathFilter:x}=this,{marginTop:w,marginLeft:_}=r,E=YV(i),{x1:T,y1:C,x2:D,y2:O,x:k=T??D,y:N=C??O}=i,B=l?l(e.fx)-_:0,z=f?f(e.fy)-w:0,[I,j]=yl(this,r),F=GE(i,I),P=KE(i,j),W=m?By:Ly,J=W(Lo),X=l&&Wm(l),Q=f&&Wm(f);function*ot(rt,ct){if("title"in rt){const M=rt.title.value[ct];for(const H of a.splitLines(us(M)))yield{name:"",value:a.clipLine(H)};return}for(const M in rt){if(M==="x1"&&"x2"in rt||M==="y1"&&"y2"in rt)continue;const H=rt[M],K=H.value[ct];if(!(!Qs(K)&&H.scale==null))if(M==="x2"&&"x1"in rt)yield{name:p0(n,H,"x"),value:Lv(rt.x1,H,ct)};else if(M==="y2"&&"y1"in rt)yield{name:p0(n,H,"y"),value:Lv(rt.y1,H,ct)};else{const U=H.scale,st={name:p0(n,H,M),value:us(K)};(U==="color"||U==="opacity")&&(st[U]=i[M][ct]),yield st}}e.fi!=null&&l&&(yield{name:String(l.label??"fx"),value:X(e.fx)}),e.fi!=null&&f&&(yield{name:String(f.label??"fy"),value:Q(e.fy)})}const Ut=en("svg:g",s).call(Pi,this,r,s).call(lI,this).call(Vi,this,{x:k&&c,y:N&&u}).call(rt=>rt.selectAll().data(e).enter().append("g").attr("transform",ct=>`translate(${Math.round(F(ct))},${Math.round(P(ct))})`).call(Ui,this).call(ct=>ct.append("path").attr("filter",x)).call(ct=>ct.append("text").each(function(M){const H=Yn(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const K=new Set;for(const U of ot(E,M)){const st=U.name;st&&K.has(st)||(K.add(st),dt(H,U))}})));function dt(rt,{name:ct,value:M,color:H,opacity:K}){const U=H!=null||K!=null;let st,pt=y*100;const[bt]=nc(ct,pt,W,J);if(bt>=0)ct=ct.slice(0,bt).trimEnd()+Lo,st=M.trim(),M="";else{(ct||!M&&!U)&&(M=" "+M);const[G]=nc(M,pt-W(ct),W,J);G>=0&&(M=M.slice(0,G).trimEnd()+Lo,st=M.trim())}const mt=rt.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");ct&&mt.append("tspan").attr("font-weight","bold").text(ct),M&&mt.append(()=>d.createTextNode(M)),U&&mt.append("tspan").text(" ■").attr("fill",H).attr("fill-opacity",K).style("user-select","none"),st&&mt.append("title").text(st)}function ut(){const{width:rt,height:ct}=r.facet??r;Ut.selectChildren().each(function(M){let{x:H,width:K,height:U}=this.getBBox();K=Math.round(K),U=Math.round(U);let st=p;if(st===void 0){st=a.previousAnchor;const mt=F(M)+B,G=P(M)+z,St=mt+K+v*2<rt,re=mt-K-v*2>0,_e=G+U+b+v*2+7<ct,ge=G-U-b-v*2>0,Bn=(/-left$/.test(st)?St||!re:St&&!re)?"left":"right",$e=(/^top-/.test(st)?_e||!ge:_e&&!ge)?"top":"bottom";st=a.previousAnchor=`${$e}-${Bn}`}const pt=this.firstChild,bt=this.lastChild;if(pt.setAttribute("d",HV(st,b,v,K,U)),H)for(const mt of bt.childNodes)mt.setAttribute("x",-H);bt.setAttribute("y",`${+qV(st,bt.childNodes.length,g).toFixed(6)}em`),bt.setAttribute("transform",`translate(${WV(st,b,v,K,U)})`)})}return h.isConnected?Promise.resolve().then(ut):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ut),Ut.node()}}function zV(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new jV(t,{...i,x:e,y:n})}function qV(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function WV(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function HV(t,e,n,i,r){const s=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-s/2},${-a/2}h${s}v${a}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${a}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${a}h${-s}v${-a}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${a}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-s}v${a}h${s}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-a}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-a}h${-s}v${a}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-a}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${s}v${a}h${-s}v${e/2-a/2}z`}}function YV({channels:t}){const e={};for(const n in t){if($V.has(n))continue;const i=nP(t,n);i&&(e[n]=i)}return e}function Lv(t,e,n){var i;return(i=e.hint)!=null&&i.length?`${us(e.value[n]-t.value[n])}`:`${us(t.value[n])}–${us(e.value[n])}`}function p0(t,e,n){var i;return String(((i=t[e.scale])==null?void 0:i.label)??(e==null?void 0:e.label)??n)}function Py(t={}){var j;const{facet:e,style:n,caption:i,ariaLabel:r,ariaDescription:s}=t,a=Ey(t.className),c=t.marks===void 0?[]:Bv(t.marks);c.push(...t$(c));const u=QV(e,t),l=new Map;for(const F of c){const P=Pv(F,u,t);P&&l.set(F,P)}const f=new Map;u&&Kc(f,[u]),Kc(f,l);const h=Bv(e$(c,f,t));for(const F of h){const P=Pv(F,u,t);P&&l.set(F,P)}c.unshift(...h);let d=bU(f,t);if(d!==void 0){const F=u?f0(d,u):void 0;for(const W of c){if(W.facet===null||W.facet==="super")continue;const J=l.get(W);J!==void 0&&(J.facetsIndex=W.fx!=null||W.fy!=null?f0(d,J):F)}const P=new Set;for(const{facetsIndex:W}of l.values())W==null||W.forEach((J,X)=>{(J==null?void 0:J.length)>0&&P.add(X)});d.forEach(0<P.size&&P.size<d.length?(W,J)=>W.empty=!P.has(J):W=>W.empty=!1);for(const W of c)if(W.facet==="exclude"){const J=l.get(W);J!==void 0&&(J.facetsIndex=wU(J.facetsIndex))}}for(const F of De.keys())Sh(t[F])&&F!=="fx"&&F!=="fy"&&f.set(F,[]);const p=new Map;for(const F of c){if(p.has(F))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:W}=l.get(F)??{},{data:J,facets:X,channels:Q}=F.initialize(P,W,t);Uy(Q,t),p.set(F,{data:J,facets:X,channels:Q})}const m=Vm(Kc(f,p),t),g=wv(m),y=gU(m,c,t);qP(m,y);const{fx:v,fy:b}=g,x=v||b?BE(m,y):y,w=v||b?c$(g,y):y,_=_y(t),E=_.document,T=ld("svg").call(E.documentElement);let C=T;_.ownerSVGElement=T,_.className=a,_.projection=rP(t,x),_.filterFacets=(F,P)=>f0(d,{channels:P,groups:Ay(F,P)}),_.getMarkState=F=>{const P=p.get(F),W=l.get(F);return{...P,channels:{...P.channels,...W==null?void 0:W.channels}}},_.dispatchValue=F=>{C.value!==F&&(C.value=F,C.dispatchEvent(new Event("input",{bubbles:!0})))};const D=new Set;for(const[F,P]of p)if(F.initializer!=null){const W=F.facet==="super"?w:x,J=F.initializer(P.data,P.facets,P.channels,g,W,_);if(J.data!==void 0&&(P.data=J.data),J.facets!==void 0&&(P.facets=J.facets),J.channels!==void 0){const{fx:X,fy:Q,...ot}=J.channels;JV(ot),Object.assign(P.channels,ot);for(const Ut of Object.values(ot)){const{scale:dt}=Ut;dt!=null&&De.get(dt)!==Ir&&(OI(Ut,t),D.add(dt))}(X!=null||Q!=null)&&l.set(F,!0)}}if(D.size){const F=new Map;Kc(F,p,J=>D.has(J)),Kc(f,p,J=>D.has(J));const P=o$(Vm(F,t),m),W=wv(P);Object.assign(m,P),Object.assign(g,W)}let O,k;d!==void 0&&(O={x:v==null?void 0:v.domain(),y:b==null?void 0:b.domain()},d=_U(d,O),k=vU(v,b,y));for(const[F,P]of p)P.values=F.scale(P.channels,g,_);const{width:N,height:B}=y;Yn(T).attr("class",a).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",B).attr("viewBox",`0 0 ${N} ${B}`).attr("aria-label",r).attr("aria-description",s).call(F=>F.append("style").text(`.${a} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${a} text,
.${a} tspan {
  white-space: pre;
}`)).call(Iy,n);for(const F of c){const{channels:P,values:W,facets:J}=p.get(F);if(d===void 0||F.facet==="super"){let X=null;if(J&&(X=J[0],X=F.filter(X,P,W),X.length===0))continue;const Q=F.render(X,g,W,w,_);if(Q==null)continue;T.appendChild(Q)}else{let X;for(const Q of d){if(!(((j=F.facetAnchor)==null?void 0:j.call(F,d,O,Q))??!Q.empty))continue;let ot=null;if(J){const dt=l.has(F);if(ot=J[dt?Q.i:0],ot=F.filter(ot,P,W),ot.length===0)continue;dt&&(ot.fx=Q.x,ot.fy=Q.y,ot.fi=Q.i)}const Ut=F.render(ot,g,W,x,_);if(Ut!=null){(X??(X=Yn(T).append("g"))).append(()=>Ut).datum(Q);for(const dt of["aria-label","aria-description","aria-hidden","transform"])Ut.hasAttribute(dt)&&(X.attr(dt,Ut.getAttribute(dt)),Ut.removeAttribute(dt))}}X==null||X.selectChildren().attr("transform",k)}}const z=jU(m,_,t);if(i!=null||z.length>0){C=E.createElement("figure"),C.style.maxWidth="initial";for(const F of z)C.appendChild(F);if(C.appendChild(T),i!=null){const F=E.createElement("figcaption");F.appendChild(i!=null&&i.ownerDocument?i:E.createTextNode(i)),C.appendChild(F)}}C.scale=JP(m),C.legend=UU(m,_,t);const I=iP();return I>0&&Yn(T).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${I.toLocaleString("en-US")} warning${I===1?"":"s"}. Please check the console.`),C}function GV({marks:t=[],...e}={}){return Py({...e,marks:[...t,this]})}Rn.prototype.plot=GV;function Bv(t){return t.flat(1/0).filter(e=>e!=null).map(KV)}function KV(t){return typeof t.render=="function"?t:new XV(t)}class XV extends Rn{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Uy(t,e){for(const n in t)OI(t[n],e);return t}function OI(t,e){const{scale:n}=t;if(n==null)return;const{type:i,percent:r,interval:s,transform:a=r?c=>c*100:pE(s,i)}=e[n]??{};a!=null&&(t.value=an(t.value,a))}function JV(t){for(const e in t)vE(e,t[e])}function Kc(t,e,n=hB){for(const{channels:i}of e.values())for(const r in i){const s=i[r],{scale:a}=s;if(a!=null&&n(a)){const c=t.get(a);c!==void 0?c.push(s):t.set(a,[s])}}return t}function QV(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Dr(t.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Uu(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Uu(r,{value:i,scale:"fy"})),Uy(s,e);const a=Ay(r,s);return{channels:s,groups:a,data:t.data}}function Pv(t,e,n){var u;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const l=Dr(t.data??i??r);if(l===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(l===null)return;const f={};return i!=null&&(f.fx=Uu(l,{value:i,scale:"fx"})),r!=null&&(f.fy=Uu(l,{value:r,scale:"fy"})),Uy(f,n),{channels:f,groups:Ay(l,f)}}if(e===void 0)return;const{channels:s,groups:a,data:c}=e;if(t.facet!=="auto"||t.data===c)return{channels:s,groups:a};c.length>0&&(a.size>1||a.size===1&&s.fx&&s.fy&&[...a][0][1].size>1)&&((u=Dr(t.data))==null?void 0:u.length)===c.length&&Ro(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function ZV(t,e={}){return pl({...e,x:null,y:null},(n,i,r,s,a,c)=>c.getMarkState(t))}function t$(t){const e=[];for(const n of t){const i=n.tip;if(i){const r=i==="x"?FU:i==="y"?DU:OU;e.push(zV(n.data,r(ZV(n))))}}return e}function e$(t,e,n){let{projection:i,x:r={},y:s={},fx:a={},fy:c={},axis:u,grid:l,facet:f={},facet:{axis:h=u,grid:d}=f,x:{axis:p=u,grid:m=p===null?null:l}=r,y:{axis:g=u,grid:y=g===null?null:l}=s,fx:{axis:v=h,grid:b=v===null?null:d}=a,fy:{axis:x=h,grid:w=x===null?null:d}=c}=n;(i||!Sh(r)&&!Uv("x",t))&&(p=m=null),(i||!Sh(s)&&!Uv("y",t))&&(g=y=null),e.has("fx")||(v=b=null),e.has("fy")||(x=w=null),p===void 0&&(p=!Ql(t,"x")),g===void 0&&(g=!Ql(t,"y")),v===void 0&&(v=!Ql(t,"fx")),x===void 0&&(x=!Ql(t,"fy")),p===!0&&(p="bottom"),g===!0&&(g="left"),v===!0&&(v=p==="top"||p===null?"bottom":"top"),x===!0&&(x=g==="right"||g===null?"left":"right");const _=[];return Jl(_,w,kV,c),Xl(_,x,wV,"right","left",f,c),Jl(_,b,MV,a),Xl(_,v,xV,"top","bottom",f,a),Jl(_,y,TV,s),Xl(_,g,Tc,"left","right",n,s),Jl(_,m,CV,r),Xl(_,p,so,"bottom","top",n,r),_}function Xl(t,e,n,i,r,s,a){if(!e)return;const c=n$(e);a=i$(c?i:e,s,a);const{line:u}=a;(n===Tc||n===so)&&u&&!Bu(u)&&t.push(VV(r$(a))),t.push(n(a)),c&&t.push(n({...a,anchor:r,label:null}))}function Jl(t,e,n,i){!e||Bu(e)||t.push(n(s$(e,i)))}function n$(t){return/^\s*both\s*$/i.test(t)}function i$(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:c,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:h,label:d=e.label,labelAnchor:p,labelArrow:m=e.labelArrow,labelOffset:g}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:c,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:h,label:d,labelAnchor:p,labelArrow:m,labelOffset:g}}function r$(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function s$(t,{stroke:e=Pd(t)?t:void 0,ticks:n=a$(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function a$(t){switch(typeof t){case"number":return!0;case"string":return!Pd(t)}return ha(t)||typeof(t==null?void 0:t.range)=="function"}function Ql(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Uv(t,e){for(const n of e)for(const i in n.channels)if(n.channels[i].scale===t)return!0;return!1}function o$(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function c$({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:c,height:u}=Sy(n),l=t&&Vv(t),f=e&&Vv(e);return{marginTop:e?f[0]:i,marginRight:t?c-l[1]:r,marginBottom:e?u-f[1]:s,marginLeft:t?l[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:c,height:u}}function Vv(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const u$=new Map([["basis",BL],["basis-closed",PL],["basis-open",UL],["bundle",VL],["bump-x",AL],["bump-y",TL],["cardinal",$L],["cardinal-closed",jL],["cardinal-open",zL],["catmull-rom",qL],["catmull-rom-closed",WL],["catmull-rom-open",HL],["linear",Nd],["linear-closed",YL],["monotone-x",GL],["monotone-y",KL],["natural",XL],["step",JL],["step-after",ZL],["step-before",QL]]);function l$(t=Nd,e){if(typeof t=="function")return t;const n=u$.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function FI(t=ic,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?ic:l$(t,e)}function ic(t){return Nd(t)}function f$(t={}){return fE(t)?t:{...t,x:di}}function h$(t={},e={}){arguments.length===1&&([t,e]=p$(t));const{y1:n,y:i=n,x:r,...s}=e,[a,c,u,l]=g$(i,r,"y","x",t,s);return{...a,y1:n,y:c,x1:u,x2:l,x:wB(u,l)}}function d$({x:t,x1:e,x2:n,...i}={}){return i=Ty(i,"y"),e===void 0&&n===void 0?h$({x:t,...i}):([e,n]=_B(t,e,n),{...i,x1:e,x2:n})}function p$(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const m$={length:!0};function g$(t,e=fB,n,i,{offset:r,order:s,reverse:a},c){const u=hE(c),[l,f]=vB(t),[h,d]=Bm(e),[p,m]=Bm(e);return h.hint=p.hint=m$,r=y$(r),s=v$(s,r,i),[yy(c,(g,y,v)=>{const b=t==null?void 0:f(xB(Fi(g,t),v==null?void 0:v[n])),x=Fi(g,e,Float64Array),w=Fi(g,u),_=s&&s(g,b,x,w),E=g.length,T=d(new Float64Array(E)),C=m(new Float64Array(E)),D=[];for(const O of y){const k=b?Array.from(Fg(O,N=>b[N]).values()):[O];_&&A$(k,_);for(const N of k){let B=0,z=0;a&&N.reverse();for(const I of N){const j=x[I];j<0?B=C[I]=(T[I]=B)+j:j>0?z=C[I]=(T[I]=z)+j:C[I]=T[I]=z}}D.push(k)}return r&&r(D,T,C,w),{data:g,facets:y}}),l,h,p]}function y$(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return b$;case"center":case"silhouette":return _$;case"wiggle":return RI}throw new Error(`unknown offset: ${t}`)}}function DI(t,e){let n=0,i=0;for(const r of t){const s=e[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function b$(t,e,n){for(const i of t)for(const r of i){const[s,a]=DI(r,n);for(const c of r){const u=1/(a-s||1);e[c]=u*(e[c]-s),n[c]=u*(n[c]-s)}}}function _$(t,e,n){for(const i of t){for(const r of i){const[s,a]=DI(r,n);for(const c of r){const u=(a+s)/2;e[c]-=u,n[c]-=u}}LI(i,e,n)}BI(t,e,n)}function RI(t,e,n,i){for(const r of t){const s=new za;let a=0;for(const c of r){let u=-1;const l=c.map(p=>Math.abs(n[p]-e[p])),f=c.map(p=>{u=i?i[p]:++u;const m=n[p]-e[p],g=s.has(u)?m-s.get(u):0;return s.set(u,m),g}),h=[0,...bN(f)];for(const p of c)e[p]+=a,n[p]+=a;const d=qa(l);d&&(a-=qa(l,(p,m)=>(f[m]/2+h[m])*p)/d)}LI(r,e,n)}BI(t,e,n)}function LI(t,e,n){const i=Or(t,r=>Or(r,s=>e[s]));for(const r of t)for(const s of r)e[s]-=i,n[s]-=i}function BI(t,e,n){const i=t.length;if(i===1)return;const r=t.map(c=>c.flat()),s=r.map(c=>(Or(c,u=>e[u])+Ri(c,u=>n[u]))/2),a=Or(s);for(let c=0;c<i;c++){const u=a-s[c];for(const l of r[c])e[l]+=u,n[l]+=u}}function v$(t,e,n){if(t===void 0&&e===RI)return $v;if(t!=null){if(typeof t=="string"){switch(t.toLowerCase()){case"value":case n:return w$;case"z":return x$;case"sum":return S$;case"appearance":return E$;case"inside-out":return $v}return jv(cE(t))}if(typeof t=="function")return jv(t);if(Array.isArray(t))return I$(t);throw new Error(`invalid order: ${t}`)}}function w$(t,e,n){return n}function x$(t,e,n,i){return i}function S$(t,e,n,i){return Xd(i,Rg(fa(t),r=>qa(r,s=>n[s]),r=>i[r]))}function E$(t,e,n,i){return Xd(i,Rg(fa(t),r=>e[Cx(r,s=>n[s])],r=>i[r]))}function $v(t,e,n,i){const r=fa(t),s=Rg(r,f=>e[Cx(f,h=>n[h])],f=>i[f]),a=hu(r,f=>qa(f,h=>n[h]),f=>i[f]),c=[],u=[];let l=0;for(const f of s)l<0?(l+=a.get(f),c.push(f)):(l-=a.get(f),u.push(f));return Xd(i,u.reverse().concat(c))}function jv(t){return e=>Fi(e,t)}function I$(t){return(e,n,i,r)=>Xd(r,t)}function Xd(t,e){if(!t)throw new Error("missing channel: z");return e=new za(e.map((n,i)=>[n,i])),t.map(n=>e.get(n))}function A$(t,e){for(const n of t)n.sort((i,r)=>Ja(e[i],e[r]))}const T$={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class k$ extends Rn{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:a,curve:c,tension:u}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,T$),this.curve=FI(c,u),Yd(this,n)}project(e,n,i){this.curve!==ic&&super.project(e,n,i)}render(e,n,i,r,s){const{x1:a,y1:c,x2:u=a,y2:l=c}=i,{curve:f}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ui,this).attr("d",f===ic&&s.projection?C$(s.projection,a,c,u,l):d=>{const p=Us(),m=f(p);return m.lineStart(),m.point(a[d],c[d]),m.point(u[d],l[d]),m.lineEnd(),p}).call(jr,this,i).call(Cy,this,i,s)).node()}}function C$(t,e,n,i,r){const s=sl(t);return e=Vs(e),n=Vs(n),i=Vs(i),r=Vs(r),a=>s({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Eh(t,{x:e,x1:n,x2:i,y:r,y1:s,y2:a,...c}={}){return[n,i]=zv(e,n,i),[s,a]=zv(r,s,a),new k$(t,{...c,x1:n,x2:i,y1:s,y2:a})}function zv(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class M$ extends Rn{constructor(e,n,i={},r){super(e,n,i,r);const{inset:s=0,insetTop:a=s,insetRight:c=s,insetBottom:u=s,insetLeft:l=s,rx:f,ry:h}=i;this.insetTop=Ie(a),this.insetRight=Ie(c),this.insetBottom=Ie(u),this.insetLeft=Ie(l),this.rx=Ye(f,"auto"),this.ry=Ye(h,"auto")}render(e,n,i,r,s){const{rx:a,ry:c}=this;return en("svg:g",s).call(Pi,this,r,s).call(this._transform,this,n).call(u=>u.selectAll().data(e).enter().append("rect").call(Ui,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(Et,"rx",a).call(Et,"ry",c).call(jr,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:a,insetRight:c}=this,u=n&&e?e.bandwidth():s-i-r;return Math.max(0,u-a-c)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:a,insetBottom:c}=this,u=n&&e?e.bandwidth():s-i-r;return Math.max(0,u-a-c)}}const N$={ariaLabel:"cell"};class O$ extends M${constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,N$)}_transform(e,n){e.call(Vi,n,{},0,0)}}function F$(t,{x:e,y:n,...i}={}){return[e,n]=fl(e,n),new O$(t,{...i,x:e,y:n})}const D$={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function PI(t){return t.sort===void 0&&t.reverse===void 0?PB({channel:"-r"},t):t}class R$ extends Rn{constructor(e,n={}){const{x:i,y:r,r:s,rotate:a,symbol:c=Ru,frameAnchor:u}=n,[l,f]=vn(a,0),[h,d]=LB(c),[p,m]=vn(s,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:ul,optional:!0},rotate:{value:l,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},PI(n),D$),this.r=m,this.rotate=f,this.symbol=d,this.frameAnchor=Ud(u);const{channels:g}=this,{symbol:y}=g;if(y){const{fill:v,stroke:b}=g;y.hint={fill:v?v.value===y.value?"color":"currentColor":this.fill,stroke:b?b.value===y.value?"color":"currentColor":this.stroke}}}render(e,n,i,r,s){const{x:a,y:c}=n,{x:u,y:l,r:f,rotate:h,symbol:d}=i,{r:p,rotate:m,symbol:g}=this,[y,v]=yl(this,r),b=g===Ru,x=f?void 0:p*p*Math.PI;return Dd(p)&&(e=[]),en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:u&&a,y:l&&c}).call(w=>w.selectAll().data(e).enter().append(b?"circle":"path").call(Ui,this).call(b?_=>{_.attr("cx",u?E=>u[E]:y).attr("cy",l?E=>l[E]:v).attr("r",f?E=>f[E]:p)}:_=>{_.attr("transform",Dy`translate(${u?E=>u[E]:y},${l?E=>l[E]:v})${h?E=>` rotate(${h[E]})`:m?` rotate(${m})`:""}`).attr("d",f&&d?E=>{const T=Us();return d[E].draw(T,f[E]*f[E]*Math.PI),T}:f?E=>{const T=Us();return g.draw(T,f[E]*f[E]*Math.PI),T}:d?E=>{const T=Us();return d[E].draw(T,x),T}:(()=>{const E=Us();return g.draw(E,x),E})())}).call(jr,this,i)).node()}}function L$(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=fl(e,n)),new R$(t,{...i,x:e,y:n})}function B$(t,e){return L$(t,{...e,symbol:"circle"})}const P$={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let U$=class extends Rn{constructor(e,n={}){const{x:i,y:r,z:s,curve:a,tension:c}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:hE(n),optional:!0}},n,P$),this.z=s,this.curve=FI(a,c),Yd(this,n)}filter(e){return e}project(e,n,i){this.curve!==ic&&super.project(e,n,i)}render(e,n,i,r,s){const{x:a,y:c}=i,{curve:u}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(l=>l.selectAll().data(fU(e,[a,c],this,i)).enter().append("path").call(Ui,this).call(cU,this,i).call(HU,this,i,s).attr("d",u===ic&&s.projection?V$(s.projection,a,c):IL().curve(u).defined(f=>f>=0).x(f=>a[f]).y(f=>c[f]))).node()}};function V$(t,e,n){const i=sl(t);return e=Vs(e),n=Vs(n),r=>{let s=[];const a=[s];for(const c of r)c===-1?(s=[],a.push(s)):s.push([e[c],n[c]]);return i({type:"MultiLineString",coordinates:a})}}function $$(t,{x:e,y:n,...i}={}){return[e,n]=fl(e,n),new U$(t,{...i,x:e,y:n})}const j$={ariaLabel:"rect"};class UI extends Rn{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:a,inset:c=0,insetTop:u=c,insetRight:l=c,insetBottom:f=c,insetLeft:h=c,rx:d,ry:p}=n;super(e,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,j$),this.insetTop=Ie(u),this.insetRight=Ie(l),this.insetBottom=Ie(f),this.insetLeft=Ie(h),this.rx=Ye(d,"auto"),this.ry=Ye(p,"auto")}render(e,n,i,r,s){const{x:a,y:c}=n,{x1:u,y1:l,x2:f,y2:h}=i,{marginTop:d,marginRight:p,marginBottom:m,marginLeft:g,width:y,height:v}=r,{projection:b}=s,{insetTop:x,insetRight:w,insetBottom:_,insetLeft:E,rx:T,ry:C}=this;return en("svg:g",s).call(Pi,this,r,s).call(Vi,this,{x:u&&f&&a,y:l&&h&&c},0,0).call(D=>D.selectAll().data(e).enter().append("rect").call(Ui,this).attr("x",u&&f&&(b||!$s(a))?O=>Math.min(u[O],f[O])+E:g+E).attr("y",l&&h&&(b||!$s(c))?O=>Math.min(l[O],h[O])+x:d+x).attr("width",u&&f&&(b||!$s(a))?O=>Math.max(0,Math.abs(f[O]-u[O])-E-w):y-p-g-w-E).attr("height",l&&h&&(b||!$s(c))?O=>Math.max(0,Math.abs(l[O]-h[O])-x-_):v-d-m-x-_).call(Et,"rx",T).call(Et,"ry",C).call(jr,this,i)).node()}}function z$(t,e){return new UI(t,YU(sI(e)))}function Jd(t,e={}){return bB(e)||(e={...e,y:uE,x2:di,interval:1}),new UI(t,d$(sI(f$(e))))}const q$={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class W$ extends Rn{constructor(e,n={}){const[i,r]=vn(n.r,3);super(e,{geometry:{value:n.geometry},r:{value:i,scale:"r",filter:ul,optional:!0}},PI(n),q$),this.r=r}render(e,n,i,r,s){const{geometry:a,r:c}=i,u=sl(s.projection??H$(n)),{r:l}=this;return Dd(l)?e=[]:l!==void 0&&u.pointRadius(l),en("svg:g",s).call(Pi,this,r,s).call(Vi,this,n).call(f=>{f.selectAll().data(e).enter().append("path").call(Ui,this).attr("d",c?h=>u.pointRadius(c[h])(a[h]):h=>u(a[h])).call(jr,this,i)}).node()}}function H$({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),fh({point(n,i){this.stream.point(t(n),e(i))}})}function Y$(t,{geometry:e=di,...n}={}){switch(t==null?void 0:t.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t];break}return new W$(t,{geometry:e,...n})}function G$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mZ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}function K$(t,e={}){if(!t||t.length===0)return[];let n=ci(t[0]),i=e.include?e.include:n;i=Iu(e.include||n,e.exclude||[]);let r=Iu(n,i);return console.log(i,r),Z2(s=>i.map(a=>{let c=cx(r,s);return c[e.key||"key"]=a,c[e.value||"value"]=s[a],c}),t)}let Hm=On(null);const X$=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));let J$=0;class Q${constructor(){this.listeners={}}on(e,n){let i=J$++;return this.listeners[e]=this.listeners[e]||{},this.listeners[e][i]=n,()=>{delete this.listeners[e][i]}}emit(e,...n){(Hn(this.listeners[e])??[]).forEach(r=>{r(...n)})}}Bf(void 0);class sr extends Q${constructor(){super(),this.registeredViews=[],this.on("data",(e,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(Ht(i))return;let a=u5(...r)(e);i instanceof Function?i(a,...n):i.render(a,...n)})})}snapshot(){}restoreSnapshot(e){}async init(){}registerView(e,n){console.log("Backend.registerView",e,n),n=N5([n??Rf]),this.registeredViews.push({view:e,postprocessFuncs:n})}addPostprocessing(e,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==e&&r.push(n)})}async execute(e,n){return Ht(e)&&(e=[]),we(Array,e)||(e=[e]),this._execute(e,n)}async _execute(e,n){}}class Z$ extends sr{constructor(e){super(),this.data=e.data||[]}async _execute(e,...n){this.emit("data",this.data,...n)}}class tj extends sr{constructor(e){super(),this.data=null,this.promise=null,this.promise=PF(e.url,FF)}async _execute(e,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function vt(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(h){a(h)}}function u(f){try{l(i.throw(f))}catch(h){a(h)}}function l(f){f.done?s(f.value):r(f.value).then(c,u)}l((i=i.apply(t,e||[])).next())})}function qv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(t){return this instanceof Rt?(this.v=t,this):new Rt(t)}function Ar(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(d){i[d]&&(r[d]=function(p){return new Promise(function(m,g){s.push([d,p,m,g])>1||c(d,p)})})}function c(d,p){try{u(i[d](p))}catch(m){h(s[0][3],m)}}function u(d){d.value instanceof Rt?Promise.resolve(d.value.v).then(l,f):h(s[0][2],d)}function l(d){c("next",d)}function f(d){c("throw",d)}function h(d,p){d(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ef(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=t[r]?function(a){return(n=!n)?{value:Rt(t[r](a)),done:!1}:s?s(a):a}:s}}function Pa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qv=="function"?qv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(c,u){a=t[s](a),r(c,u,a.done,a.value)})}}function r(s,a,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},a)}}const ej=new TextDecoder("utf-8"),Ym=t=>ej.decode(t),nj=new TextEncoder,Qd=t=>nj.encode(t),[gZ,VI]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[ao,yZ]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[oo,bZ]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),ij=t=>typeof t=="number",$I=t=>typeof t=="boolean",Ge=t=>typeof t=="function",Qn=t=>t!=null&&Object(t)===t,Za=t=>Qn(t)&&Ge(t.then),_l=t=>Qn(t)&&Ge(t[Symbol.iterator]),Cc=t=>Qn(t)&&Ge(t[Symbol.asyncIterator]),Gm=t=>Qn(t)&&Qn(t.schema),jI=t=>Qn(t)&&"done"in t&&"value"in t,zI=t=>Qn(t)&&Ge(t.stat)&&ij(t.fd),qI=t=>Qn(t)&&Vy(t.body),Zd=t=>"_getDOMStream"in t&&"_getNodeStream"in t,rj=t=>Qn(t)&&Ge(t.abort)&&Ge(t.getWriter)&&!Zd(t),Vy=t=>Qn(t)&&Ge(t.cancel)&&Ge(t.getReader)&&!Zd(t),sj=t=>Qn(t)&&Ge(t.end)&&Ge(t.write)&&$I(t.writable)&&!Zd(t),WI=t=>Qn(t)&&Ge(t.read)&&Ge(t.pipe)&&$I(t.readable)&&!Zd(t),aj=t=>Qn(t)&&Ge(t.clear)&&Ge(t.bytes)&&Ge(t.position)&&Ge(t.setPosition)&&Ge(t.capacity)&&Ge(t.getBufferIdentifier)&&Ge(t.createLong),$y=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function oj(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,c,u=0,l=0,f=t.length;++u<f;){if(a=e[l],c=t[u],!a||!c||a.buffer!==c.buffer||c.byteOffset<a.byteOffset){c&&(e[++l]=c);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=c,n+r<i||i+s<n){c&&(e[++l]=c);continue}e[l]=new Uint8Array(a.buffer,n,i-n+s)}return e}function Ih(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function Rr(t,e){const n=oj(t),i=n.reduce((f,h)=>f+h.byteLength,0);let r,s,a,c=0,u=-1;const l=Math.min(e||Number.POSITIVE_INFINITY,i);for(const f=n.length;++u<f;){if(r=n[u],s=r.subarray(0,Math.min(r.length,l-c)),l<=c+s.length){s.length<r.length?n[u]=r.subarray(s.length):s.length===r.length&&u++,a?Ih(a,s,c):a=s;break}Ih(a||(a=new Uint8Array(l)),s,c),c+=s.length}return[a||new Uint8Array(0),n.slice(u),i-(a?a.byteLength:0)]}function ve(t,e){let n=jI(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Qd(n)),n instanceof ArrayBuffer?new t(n):n instanceof $y?new t(n):aj(n)?ve(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Xc=t=>ve(Int32Array,t),oe=t=>ve(Uint8Array,t),Km=t=>(t.next(),t);function*cj(t,e){const n=function*(r){yield r},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof $y?n(e):_l(e)?e:n(e);return yield*Km(function*(r){let s=null;do s=r.next(yield ve(t,s));while(!s.done)}(i[Symbol.iterator]())),new t}const uj=t=>cj(Uint8Array,t);function HI(t,e){return Ar(this,arguments,function*(){if(Za(e))return yield Rt(yield Rt(yield*Ef(Pa(HI(t,yield Rt(e))))));const i=function(a){return Ar(this,arguments,function*(){yield yield Rt(yield Rt(a))})},r=function(a){return Ar(this,arguments,function*(){yield Rt(yield*Ef(Pa(Km(function*(c){let u=null;do u=c.next(yield u==null?void 0:u.value);while(!u.done)}(a[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof $y?i(e):_l(e)?r(e):Cc(e)?e:i(e);return yield Rt(yield*Ef(Pa(Km(function(a){return Ar(this,arguments,function*(){let c=null;do c=yield Rt(a.next(yield yield Rt(ve(t,c))));while(!c.done)})}(s[Symbol.asyncIterator]()))))),yield Rt(new t)})}const lj=t=>HI(Uint8Array,t);function jy(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function fj(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const Ii={fromIterable(t){return Zl(hj(t))},fromAsyncIterable(t){return Zl(dj(t))},fromDOMStream(t){return Zl(pj(t))},fromNodeStream(t){return Zl(gj(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Zl=t=>(t.next(),t);function*hj(t){let e,n=!1,i=[],r,s,a,c=0;function u(){return s==="peek"?Rr(i,a)[0]:([r,i,c]=Rr(i,a),r)}({cmd:s,size:a}=yield null);const l=uj(t)[Symbol.iterator]();try{do if({done:e,value:r}=Number.isNaN(a-c)?l.next():l.next(a-c),!e&&r.byteLength>0&&(i.push(r),c+=r.byteLength),e||a<=c)do({cmd:s,size:a}=yield u());while(a<c);while(!e)}catch(f){(n=!0)&&typeof l.throw=="function"&&l.throw(f)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function dj(t){return Ar(this,arguments,function*(){let n,i=!1,r=[],s,a,c,u=0;function l(){return a==="peek"?Rr(r,c)[0]:([s,r,u]=Rr(r,c),s)}({cmd:a,size:c}=yield yield Rt(null));const f=lj(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(c-u)?yield Rt(f.next()):yield Rt(f.next(c-u)),!n&&s.byteLength>0&&(r.push(s),u+=s.byteLength),n||c<=u)do({cmd:a,size:c}=yield yield Rt(l()));while(c<u);while(!n)}catch(h){(i=!0)&&typeof f.throw=="function"&&(yield Rt(f.throw(h)))}finally{i===!1&&typeof f.return=="function"&&(yield Rt(f.return(new Uint8Array(0))))}return yield Rt(null)})}function pj(t){return Ar(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,c,u=0;function l(){return a==="peek"?Rr(r,c)[0]:([s,r,u]=Rr(r,c),s)}({cmd:a,size:c}=yield yield Rt(null));const f=new mj(t);try{do if({done:n,value:s}=Number.isNaN(c-u)?yield Rt(f.read()):yield Rt(f.read(c-u)),!n&&s.byteLength>0&&(r.push(oe(s)),u+=s.byteLength),n||c<=u)do({cmd:a,size:c}=yield yield Rt(l()));while(c<u);while(!n)}catch(h){(i=!0)&&(yield Rt(f.cancel(h)))}finally{i===!1?yield Rt(f.cancel()):t.locked&&f.releaseLock()}return yield Rt(null)})}class mj{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return vt(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return vt(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=oe(n)),n})}}const m0=(t,e)=>{const n=r=>i([e,r]);let i;return[e,n,new Promise(r=>(i=r)&&t.once(e,n))]};function gj(t){return Ar(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,c,u=0,l=[],f;function h(){return a==="peek"?Rr(l,c)[0]:([f,l,u]=Rr(l,c),f)}if({cmd:a,size:c}=yield yield Rt(null),t.isTTY)return yield yield Rt(new Uint8Array(0)),yield Rt(null);try{n[0]=m0(t,"end"),n[1]=m0(t,"error");do{if(n[2]=m0(t,"readable"),[i,s]=yield Rt(Promise.race(n.map(p=>p[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(c-u)?(f=oe(t.read(c-u)),f.byteLength<c-u&&(f=oe(t.read()))):f=oe(t.read()),f.byteLength>0&&(l.push(f),u+=f.byteLength)),r||c<=u)do({cmd:a,size:c}=yield yield Rt(h()));while(c<u)}while(!r)}finally{yield Rt(d(n,i==="error"?s:null))}return yield Rt(null);function d(p,m){return f=l=null,new Promise((g,y)=>{for(const[v,b]of p)t.off(v,b);try{const v=t.destroy;v&&v.call(t,m),m=void 0}catch(v){m=v||m}finally{m!=null?y(m):g()}})}})}var ai;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(ai||(ai={}));var fi;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(fi||(fi={}));var ln;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(ln||(ln={}));var er;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(er||(er={}));var Qt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Qt||(Qt={}));var Lr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Lr||(Lr={}));var he;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(he||(he={}));var A;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(A||(A={}));var Jr;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Jr||(Jr={}));const yj=void 0;function zs(t){if(t===null)return"null";if(t===yj)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof ao||t instanceof oo?`[${[...t].map(e=>zs(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const bj=Symbol.for("isArrowBigNum");function ar(t,...e){return e.length===0?Object.setPrototypeOf(ve(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}ar.prototype[bj]=!0;ar.prototype.toJSON=function(){return`"${Ua(this)}"`};ar.prototype.valueOf=function(){return YI(this)};ar.prototype.toString=function(){return Ua(this)};ar.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return YI(this);case"string":return Ua(this);case"default":return Xm(this)}return Ua(this)};function Bo(...t){return ar.apply(this,t)}function Po(...t){return ar.apply(this,t)}function $u(...t){return ar.apply(this,t)}Object.setPrototypeOf(Bo.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Po.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf($u.prototype,Object.create(Uint32Array.prototype));Object.assign(Bo.prototype,ar.prototype,{constructor:Bo,signed:!0,TypedArray:Int32Array,BigIntArray:ao});Object.assign(Po.prototype,ar.prototype,{constructor:Po,signed:!1,TypedArray:Uint32Array,BigIntArray:oo});Object.assign($u.prototype,ar.prototype,{constructor:$u,signed:!0,TypedArray:Uint32Array,BigIntArray:oo});function YI(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new oo(e,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let c=BigInt(a?1:0),u=BigInt(0);if(a){for(const l of s)c+=~l*(BigInt(1)<<BigInt(32)*u++);c*=BigInt(-1)}else for(const l of s)c+=l*(BigInt(1)<<BigInt(32)*u++);return c}let Ua,Xm;VI?(Xm=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:g0(t),Ua=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:g0(t)):(Ua=g0,Xm=Ua);function g0(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}class zy{static new(e,n){switch(n){case!0:return new Bo(e);case!1:return new Po(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case ao:return new Bo(e)}return e.byteLength===16?new $u(e):new Po(e)}static signed(e){return new Bo(e)}static unsigned(e){return new Po(e)}static decimal(e){return new $u(e)}constructor(e,n){return zy.new(e,n)}}var GI,KI,XI,JI,QI,ZI,tA,eA,nA,iA,rA,sA,aA,oA,cA,uA,lA,fA,hA;class wt{static isNull(e){return(e==null?void 0:e.typeId)===A.Null}static isInt(e){return(e==null?void 0:e.typeId)===A.Int}static isFloat(e){return(e==null?void 0:e.typeId)===A.Float}static isBinary(e){return(e==null?void 0:e.typeId)===A.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===A.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===A.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===A.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===A.Date}static isTime(e){return(e==null?void 0:e.typeId)===A.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===A.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===A.Interval}static isList(e){return(e==null?void 0:e.typeId)===A.List}static isStruct(e){return(e==null?void 0:e.typeId)===A.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===A.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===A.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===A.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===A.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===A.Dictionary}static isDenseUnion(e){return wt.isUnion(e)&&e.mode===fi.Dense}static isSparseUnion(e){return wt.isUnion(e)&&e.mode===fi.Sparse}get typeId(){return A.NONE}}GI=Symbol.toStringTag;wt[GI]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(wt.prototype);let ys=class extends wt{toString(){return"Null"}get typeId(){return A.Null}};KI=Symbol.toStringTag;ys[KI]=(t=>t[Symbol.toStringTag]="Null")(ys.prototype);class Fn extends wt{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return A.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?ao:oo}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}XI=Symbol.toStringTag;Fn[XI]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Fn.prototype);class qy extends Fn{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Wy extends Fn{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Zs extends Fn{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let Hy=class extends Fn{constructor(){super(!0,64)}get ArrayType(){return ao}};class Yy extends Fn{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Gy extends Fn{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Ky extends Fn{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let Xy=class extends Fn{constructor(){super(!1,64)}get ArrayType(){return oo}};Object.defineProperty(qy.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Wy.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Zs.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Hy.prototype,"ArrayType",{value:ao});Object.defineProperty(Yy.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Gy.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Ky.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Xy.prototype,"ArrayType",{value:oo});class ta extends wt{constructor(e){super(),this.precision=e}get typeId(){return A.Float}get ArrayType(){switch(this.precision){case ln.HALF:return Uint16Array;case ln.SINGLE:return Float32Array;case ln.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}JI=Symbol.toStringTag;ta[JI]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(ta.prototype);class dA extends ta{constructor(){super(ln.HALF)}}class Jy extends ta{constructor(){super(ln.SINGLE)}}class Qy extends ta{constructor(){super(ln.DOUBLE)}}Object.defineProperty(dA.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Jy.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Qy.prototype,"ArrayType",{value:Float64Array});let ju=class extends wt{constructor(){super()}get typeId(){return A.Binary}toString(){return"Binary"}};QI=Symbol.toStringTag;ju[QI]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ju.prototype);let rc=class extends wt{constructor(){super()}get typeId(){return A.Utf8}toString(){return"Utf8"}};ZI=Symbol.toStringTag;rc[ZI]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(rc.prototype);let zu=class extends wt{constructor(){super()}get typeId(){return A.Bool}toString(){return"Bool"}};tA=Symbol.toStringTag;zu[tA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(zu.prototype);let Ah=class extends wt{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return A.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};eA=Symbol.toStringTag;Ah[eA]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Ah.prototype);class sc extends wt{constructor(e){super(),this.unit=e}get typeId(){return A.Date}toString(){return`Date${(this.unit+1)*32}<${er[this.unit]}>`}}nA=Symbol.toStringTag;sc[nA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(sc.prototype);class _j extends sc{constructor(){super(er.DAY)}}class vj extends sc{constructor(){super(er.MILLISECOND)}}class bs extends wt{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return A.Time}toString(){return`Time${this.bitWidth}<${Qt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return ao}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}iA=Symbol.toStringTag;bs[iA]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(bs.prototype);class wj extends bs{constructor(){super(Qt.SECOND,32)}}class xj extends bs{constructor(){super(Qt.MILLISECOND,32)}}class Sj extends bs{constructor(){super(Qt.MICROSECOND,64)}}class Ej extends bs{constructor(){super(Qt.NANOSECOND,64)}}class Th extends wt{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return A.Timestamp}toString(){return`Timestamp<${Qt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}rA=Symbol.toStringTag;Th[rA]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Th.prototype);class ac extends wt{constructor(e){super(),this.unit=e}get typeId(){return A.Interval}toString(){return`Interval<${Lr[this.unit]}>`}}sA=Symbol.toStringTag;ac[sA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(ac.prototype);class Ij extends ac{constructor(){super(Lr.DAY_TIME)}}class Aj extends ac{constructor(){super(Lr.YEAR_MONTH)}}let oc=class extends wt{constructor(e){super(),this.children=[e]}get typeId(){return A.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};aA=Symbol.toStringTag;oc[aA]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(oc.prototype);class un extends wt{constructor(e){super(),this.children=e}get typeId(){return A.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}oA=Symbol.toStringTag;un[oA]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(un.prototype);class qu extends wt{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return A.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}cA=Symbol.toStringTag;qu[cA]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(qu.prototype);let kh=class extends wt{constructor(e){super(),this.byteWidth=e}get typeId(){return A.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};uA=Symbol.toStringTag;kh[uA]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(kh.prototype);let cc=class extends wt{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return A.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};lA=Symbol.toStringTag;cc[lA]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(cc.prototype);class Wu extends wt{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return A.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}fA=Symbol.toStringTag;Wu[fA]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Wu.prototype);const Tj=(t=>()=>++t)(-1);let ea=class extends wt{constructor(e,n,i,r){super(),this.indices=n,this.dictionary=e,this.isOrdered=r||!1,this.id=i==null?Tj():typeof i=="number"?i:i.low}get typeId(){return A.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};hA=Symbol.toStringTag;ea[hA]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(ea.prototype);function mr(t){const e=t;switch(t.typeId){case A.Decimal:return t.bitWidth/32;case A.Timestamp:return 2;case A.Date:return 1+e.unit;case A.Interval:return 1+e.unit;case A.FixedSizeList:return e.listSize;case A.FixedSizeBinary:return e.byteWidth;default:return 1}}class Kt{visitMany(e,...n){return e.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return kj(this,e,n)}getVisitFnByTypeId(e,n=!0){return wo(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function kj(t,e,n=!0){return typeof e=="number"?wo(t,e,n):typeof e=="string"&&e in A?wo(t,A[e],n):e&&e instanceof wt?wo(t,Wv(e),n):e!=null&&e.type&&e.type instanceof wt?wo(t,Wv(e.type),n):wo(t,A.NONE,n)}function wo(t,e,n=!0){let i=null;switch(e){case A.Null:i=t.visitNull;break;case A.Bool:i=t.visitBool;break;case A.Int:i=t.visitInt;break;case A.Int8:i=t.visitInt8||t.visitInt;break;case A.Int16:i=t.visitInt16||t.visitInt;break;case A.Int32:i=t.visitInt32||t.visitInt;break;case A.Int64:i=t.visitInt64||t.visitInt;break;case A.Uint8:i=t.visitUint8||t.visitInt;break;case A.Uint16:i=t.visitUint16||t.visitInt;break;case A.Uint32:i=t.visitUint32||t.visitInt;break;case A.Uint64:i=t.visitUint64||t.visitInt;break;case A.Float:i=t.visitFloat;break;case A.Float16:i=t.visitFloat16||t.visitFloat;break;case A.Float32:i=t.visitFloat32||t.visitFloat;break;case A.Float64:i=t.visitFloat64||t.visitFloat;break;case A.Utf8:i=t.visitUtf8;break;case A.Binary:i=t.visitBinary;break;case A.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case A.Date:i=t.visitDate;break;case A.DateDay:i=t.visitDateDay||t.visitDate;break;case A.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case A.Timestamp:i=t.visitTimestamp;break;case A.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case A.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case A.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case A.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case A.Time:i=t.visitTime;break;case A.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case A.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case A.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case A.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case A.Decimal:i=t.visitDecimal;break;case A.List:i=t.visitList;break;case A.Struct:i=t.visitStruct;break;case A.Union:i=t.visitUnion;break;case A.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case A.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case A.Dictionary:i=t.visitDictionary;break;case A.Interval:i=t.visitInterval;break;case A.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case A.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case A.FixedSizeList:i=t.visitFixedSizeList;break;case A.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${A[e]}'`)}function Wv(t){switch(t.typeId){case A.Null:return A.Null;case A.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?A.Int8:A.Uint8;case 16:return n?A.Int16:A.Uint16;case 32:return n?A.Int32:A.Uint32;case 64:return n?A.Int64:A.Uint64}return A.Int}case A.Float:switch(t.precision){case ln.HALF:return A.Float16;case ln.SINGLE:return A.Float32;case ln.DOUBLE:return A.Float64}return A.Float;case A.Binary:return A.Binary;case A.Utf8:return A.Utf8;case A.Bool:return A.Bool;case A.Decimal:return A.Decimal;case A.Time:switch(t.unit){case Qt.SECOND:return A.TimeSecond;case Qt.MILLISECOND:return A.TimeMillisecond;case Qt.MICROSECOND:return A.TimeMicrosecond;case Qt.NANOSECOND:return A.TimeNanosecond}return A.Time;case A.Timestamp:switch(t.unit){case Qt.SECOND:return A.TimestampSecond;case Qt.MILLISECOND:return A.TimestampMillisecond;case Qt.MICROSECOND:return A.TimestampMicrosecond;case Qt.NANOSECOND:return A.TimestampNanosecond}return A.Timestamp;case A.Date:switch(t.unit){case er.DAY:return A.DateDay;case er.MILLISECOND:return A.DateMillisecond}return A.Date;case A.Interval:switch(t.unit){case Lr.DAY_TIME:return A.IntervalDayTime;case Lr.YEAR_MONTH:return A.IntervalYearMonth}return A.Interval;case A.Map:return A.Map;case A.List:return A.List;case A.Struct:return A.Struct;case A.Union:switch(t.mode){case fi.Dense:return A.DenseUnion;case fi.Sparse:return A.SparseUnion}return A.Union;case A.FixedSizeBinary:return A.FixedSizeBinary;case A.FixedSizeList:return A.FixedSizeList;case A.Dictionary:return A.Dictionary}throw new Error(`Unrecognized type '${A[t.typeId]}'`)}Kt.prototype.visitInt8=null;Kt.prototype.visitInt16=null;Kt.prototype.visitInt32=null;Kt.prototype.visitInt64=null;Kt.prototype.visitUint8=null;Kt.prototype.visitUint16=null;Kt.prototype.visitUint32=null;Kt.prototype.visitUint64=null;Kt.prototype.visitFloat16=null;Kt.prototype.visitFloat32=null;Kt.prototype.visitFloat64=null;Kt.prototype.visitDateDay=null;Kt.prototype.visitDateMillisecond=null;Kt.prototype.visitTimestampSecond=null;Kt.prototype.visitTimestampMillisecond=null;Kt.prototype.visitTimestampMicrosecond=null;Kt.prototype.visitTimestampNanosecond=null;Kt.prototype.visitTimeSecond=null;Kt.prototype.visitTimeMillisecond=null;Kt.prototype.visitTimeMicrosecond=null;Kt.prototype.visitTimeNanosecond=null;Kt.prototype.visitDenseUnion=null;Kt.prototype.visitSparseUnion=null;Kt.prototype.visitIntervalDayTime=null;Kt.prototype.visitIntervalYearMonth=null;const pA=new Float64Array(1),bo=new Uint32Array(pA.buffer);function mA(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function gA(t){if(t!==t)return 32256;pA[0]=t;const e=(bo[1]&2147483648)>>16&65535;let n=bo[1]&2146435072,i=0;return n>=1089470464?bo[0]>0?n=31744:(n=(n&2080374784)>>16,i=(bo[1]&1048575)>>10):n<=1056964608?(i=1048576+(bo[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(bo[1]&1048575)+512>>10),e|n|i&65535}class Ct extends Kt{}function Dt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const Cj=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},Zy=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},Mj=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},Nj=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},yA=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},Oj=({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},Is=({values:t},e,n)=>{t[e]=n},t1=({values:t},e,n)=>{t[e]=n},bA=({values:t},e,n)=>{t[e]=gA(n)},Fj=(t,e,n)=>{switch(t.type.precision){case ln.HALF:return bA(t,e,n);case ln.SINGLE:case ln.DOUBLE:return t1(t,e,n)}},e1=({values:t},e,n)=>{Cj(t,e,n.valueOf())},n1=({values:t},e,n)=>{Zy(t,e*2,n.valueOf())},_A=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Dj=({values:t,valueOffsets:e},n,i)=>yA(t,e,n,i),Rj=({values:t,valueOffsets:e},n,i)=>{yA(t,e,n,Qd(i))},vA=(t,e,n)=>{t.type.unit===er.DAY?e1(t,e,n):n1(t,e,n)},i1=({values:t},e,n)=>Zy(t,e*2,n/1e3),r1=({values:t},e,n)=>Zy(t,e*2,n),s1=({values:t},e,n)=>Mj(t,e*2,n),a1=({values:t},e,n)=>Nj(t,e*2,n),wA=(t,e,n)=>{switch(t.type.unit){case Qt.SECOND:return i1(t,e,n);case Qt.MILLISECOND:return r1(t,e,n);case Qt.MICROSECOND:return s1(t,e,n);case Qt.NANOSECOND:return a1(t,e,n)}},o1=({values:t},e,n)=>{t[e]=n},c1=({values:t},e,n)=>{t[e]=n},u1=({values:t},e,n)=>{t[e]=n},l1=({values:t},e,n)=>{t[e]=n},xA=(t,e,n)=>{switch(t.type.unit){case Qt.SECOND:return o1(t,e,n);case Qt.MILLISECOND:return c1(t,e,n);case Qt.MICROSECOND:return u1(t,e,n);case Qt.NANOSECOND:return l1(t,e,n)}},SA=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},Lj=(t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=Bi.getVisitFn(i);if(Array.isArray(n))for(let a=-1,c=r[e],u=r[e+1];c<u;)s(i,c++,n[++a]);else for(let a=-1,c=r[e],u=r[e+1];c<u;)s(i,c++,n.get(++a))},Bj=(t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=Bi.getVisitFn(i);let{[e]:a,[e+1]:c}=r;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(i,a,l),++a>=c)break},Pj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]),Uj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)),Vj=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(r.name)),$j=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]),jj=(t,e,n)=>{const i=t.type.children.map(s=>Bi.getVisitFn(s.type)),r=n instanceof Map?Vj(e,n):n instanceof ee?Uj(e,n):Array.isArray(n)?Pj(e,n):$j(e,n);t.type.children.forEach((s,a)=>r(i[a],t.children[a],s,a))},zj=(t,e,n)=>{t.type.mode===fi.Dense?EA(t,e,n):IA(t,e,n)},EA=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Bi.visit(r,t.valueOffsets[e],n)},IA=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Bi.visit(r,e,n)},qj=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},AA=(t,e,n)=>{t.type.unit===Lr.DAY_TIME?f1(t,e,n):h1(t,e,n)},f1=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},h1=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},Wj=(t,e,n)=>{const{stride:i}=t,r=t.children[0],s=Bi.getVisitFn(r);if(Array.isArray(n))for(let a=-1,c=e*i;++a<i;)s(r,c+a,n[a]);else for(let a=-1,c=e*i;++a<i;)s(r,c+a,n.get(a))};Ct.prototype.visitBool=Dt(Oj);Ct.prototype.visitInt=Dt(Is);Ct.prototype.visitInt8=Dt(Is);Ct.prototype.visitInt16=Dt(Is);Ct.prototype.visitInt32=Dt(Is);Ct.prototype.visitInt64=Dt(Is);Ct.prototype.visitUint8=Dt(Is);Ct.prototype.visitUint16=Dt(Is);Ct.prototype.visitUint32=Dt(Is);Ct.prototype.visitUint64=Dt(Is);Ct.prototype.visitFloat=Dt(Fj);Ct.prototype.visitFloat16=Dt(bA);Ct.prototype.visitFloat32=Dt(t1);Ct.prototype.visitFloat64=Dt(t1);Ct.prototype.visitUtf8=Dt(Rj);Ct.prototype.visitBinary=Dt(Dj);Ct.prototype.visitFixedSizeBinary=Dt(_A);Ct.prototype.visitDate=Dt(vA);Ct.prototype.visitDateDay=Dt(e1);Ct.prototype.visitDateMillisecond=Dt(n1);Ct.prototype.visitTimestamp=Dt(wA);Ct.prototype.visitTimestampSecond=Dt(i1);Ct.prototype.visitTimestampMillisecond=Dt(r1);Ct.prototype.visitTimestampMicrosecond=Dt(s1);Ct.prototype.visitTimestampNanosecond=Dt(a1);Ct.prototype.visitTime=Dt(xA);Ct.prototype.visitTimeSecond=Dt(o1);Ct.prototype.visitTimeMillisecond=Dt(c1);Ct.prototype.visitTimeMicrosecond=Dt(u1);Ct.prototype.visitTimeNanosecond=Dt(l1);Ct.prototype.visitDecimal=Dt(SA);Ct.prototype.visitList=Dt(Lj);Ct.prototype.visitStruct=Dt(jj);Ct.prototype.visitUnion=Dt(zj);Ct.prototype.visitDenseUnion=Dt(EA);Ct.prototype.visitSparseUnion=Dt(IA);Ct.prototype.visitDictionary=Dt(qj);Ct.prototype.visitInterval=Dt(AA);Ct.prototype.visitIntervalDayTime=Dt(f1);Ct.prototype.visitIntervalYearMonth=Dt(h1);Ct.prototype.visitFixedSizeList=Dt(Wj);Ct.prototype.visitMap=Dt(Bj);const Bi=new Ct,Wi=Symbol.for("parent"),Uo=Symbol.for("rowIndex");class d1{constructor(e,n){return this[Wi]=e,this[Uo]=n,new Proxy(this,new Yj)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Uo],n=this[Wi],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=Zn.visit(n.children[s],e);return r}toString(){return`{${[...this].map(([e,n])=>`${zs(e)}: ${zs(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Hj(this[Wi],this[Uo])}}class Hj{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Zn.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(d1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Uo]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Yj{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Wi].type.children.map(n=>n.name)}has(e,n){return e[Wi].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[Wi].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[Wi].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=Zn.visit(e[Wi].children[i],e[Uo]);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[Wi].type.children.findIndex(s=>s.name===n);return r!==-1?(Bi.visit(e[Wi].children[r],e[Uo],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class It extends Kt{}function Mt(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Gj=(t,e)=>864e5*t[e],p1=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Kj=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,Xj=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,TA=t=>new Date(t),Jj=(t,e)=>TA(Gj(t,e)),Qj=(t,e)=>TA(p1(t,e)),Zj=(t,e)=>null,kA=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},tz=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},CA=({values:t},e)=>Jj(t,e),MA=({values:t},e)=>Qj(t,e*2),ma=({stride:t,values:e},n)=>e[t*n],ez=({stride:t,values:e},n)=>mA(e[t*n]),NA=({values:t},e)=>t[e],nz=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),iz=({values:t,valueOffsets:e},n)=>kA(t,e,n),rz=({values:t,valueOffsets:e},n)=>{const i=kA(t,e,n);return i!==null?Ym(i):null},sz=({values:t},e)=>t[e],az=({type:t,values:e},n)=>t.precision!==ln.HALF?e[n]:mA(e[n]),oz=(t,e)=>t.type.unit===er.DAY?CA(t,e):MA(t,e),OA=({values:t},e)=>1e3*p1(t,e*2),FA=({values:t},e)=>p1(t,e*2),DA=({values:t},e)=>Kj(t,e*2),RA=({values:t},e)=>Xj(t,e*2),cz=(t,e)=>{switch(t.type.unit){case Qt.SECOND:return OA(t,e);case Qt.MILLISECOND:return FA(t,e);case Qt.MICROSECOND:return DA(t,e);case Qt.NANOSECOND:return RA(t,e)}},LA=({values:t},e)=>t[e],BA=({values:t},e)=>t[e],PA=({values:t},e)=>t[e],UA=({values:t},e)=>t[e],uz=(t,e)=>{switch(t.type.unit){case Qt.SECOND:return LA(t,e);case Qt.MILLISECOND:return BA(t,e);case Qt.MICROSECOND:return PA(t,e);case Qt.NANOSECOND:return UA(t,e)}},lz=({values:t,stride:e},n)=>zy.decimal(t.subarray(e*n,e*(n+1))),fz=(t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,u=r[0].slice(s,a-s);return new ee([u])},hz=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new tp(a.slice(r,s-r))},dz=(t,e)=>new d1(t,e),pz=(t,e)=>t.type.mode===fi.Dense?VA(t,e):$A(t,e),VA=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Zn.visit(i,t.valueOffsets[e])},$A=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Zn.visit(i,e)},mz=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},gz=(t,e)=>t.type.unit===Lr.DAY_TIME?jA(t,e):zA(t,e),jA=({values:t},e)=>t.subarray(2*e,2*(e+1)),zA=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},yz=(t,e)=>{const{stride:n,children:i}=t,s=i[0].slice(e*n,n);return new ee([s])};It.prototype.visitNull=Mt(Zj);It.prototype.visitBool=Mt(tz);It.prototype.visitInt=Mt(sz);It.prototype.visitInt8=Mt(ma);It.prototype.visitInt16=Mt(ma);It.prototype.visitInt32=Mt(ma);It.prototype.visitInt64=Mt(NA);It.prototype.visitUint8=Mt(ma);It.prototype.visitUint16=Mt(ma);It.prototype.visitUint32=Mt(ma);It.prototype.visitUint64=Mt(NA);It.prototype.visitFloat=Mt(az);It.prototype.visitFloat16=Mt(ez);It.prototype.visitFloat32=Mt(ma);It.prototype.visitFloat64=Mt(ma);It.prototype.visitUtf8=Mt(rz);It.prototype.visitBinary=Mt(iz);It.prototype.visitFixedSizeBinary=Mt(nz);It.prototype.visitDate=Mt(oz);It.prototype.visitDateDay=Mt(CA);It.prototype.visitDateMillisecond=Mt(MA);It.prototype.visitTimestamp=Mt(cz);It.prototype.visitTimestampSecond=Mt(OA);It.prototype.visitTimestampMillisecond=Mt(FA);It.prototype.visitTimestampMicrosecond=Mt(DA);It.prototype.visitTimestampNanosecond=Mt(RA);It.prototype.visitTime=Mt(uz);It.prototype.visitTimeSecond=Mt(LA);It.prototype.visitTimeMillisecond=Mt(BA);It.prototype.visitTimeMicrosecond=Mt(PA);It.prototype.visitTimeNanosecond=Mt(UA);It.prototype.visitDecimal=Mt(lz);It.prototype.visitList=Mt(fz);It.prototype.visitStruct=Mt(dz);It.prototype.visitUnion=Mt(pz);It.prototype.visitDenseUnion=Mt(VA);It.prototype.visitSparseUnion=Mt($A);It.prototype.visitDictionary=Mt(mz);It.prototype.visitInterval=Mt(gz);It.prototype.visitIntervalDayTime=Mt(jA);It.prototype.visitIntervalYearMonth=Mt(zA);It.prototype.visitFixedSizeList=Mt(yz);It.prototype.visitMap=Mt(hz);const Zn=new It,Gi=Symbol.for("keys"),Vo=Symbol.for("vals");class tp{constructor(e){return this[Gi]=new ee([e.children[0]]).memoize(),this[Vo]=e.children[1],new Proxy(this,new _z)}[Symbol.iterator](){return new bz(this[Gi],this[Vo])}get size(){return this[Gi].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Gi],n=this[Vo],i={};for(let r=-1,s=e.length;++r<s;)i[e.get(r)]=Zn.visit(n,r);return i}toString(){return`{${[...this].map(([e,n])=>`${zs(e)}: ${zs(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class bz{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Zn.visit(this.vals,e)]})}}class _z{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Gi].toArray().map(String)}has(e,n){return e[Gi].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Gi].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[Gi].indexOf(n);if(i!==-1){const r=Zn.visit(Reflect.get(e,Vo),i);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[Gi].indexOf(n);return r!==-1?(Bi.visit(Reflect.get(e,Vo),r,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(tp.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Gi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vo]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Hv;function qA(t,e,n,i){const{length:r=0}=t;let s=typeof e!="number"?0:e,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Hv=s,s=a,a=Hv),a>r&&(a=r),i?i(t,s,a):[s,a]}const Yv=t=>t!==t;function Mc(t){if(typeof t!=="object"||t===null)return Yv(t)?Yv:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?fj(t,n):!1:t instanceof Map?wz(t):Array.isArray(t)?vz(t):t instanceof ee?xz(t):Sz(t,!0)}function vz(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Mc(t[n]);return ep(e)}function wz(t){let e=-1;const n=[];for(const i of t.values())n[++e]=Mc(i);return ep(n)}function xz(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Mc(t.get(n));return ep(e)}function Sz(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Mc(t[n[r]]);return ep(i,n)}function ep(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Ez(t,n);case Map:return Gv(t,n,n.keys());case tp:case d1:case Object:case void 0:return Gv(t,n,e||Object.keys(n))}return n instanceof ee?Iz(t,n):!1}}function Ez(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function Iz(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function Gv(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const c=t.length;let u=s.next(),l=i.next(),f=r.next();for(;a<c&&!l.done&&!f.done&&!u.done&&!(l.value!==f.value||!t[a](u.value));++a,l=i.next(),f=r.next(),u=s.next());return a===c&&l.done&&f.done&&u.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function WA(t,e,n,i){return(n&1<<i)!==0}function Az(t,e,n,i){return(n&1<<i)>>i}function m1(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8===0?n.subarray(t>>3):Ch(new g1(n,t,e,null,WA)).subarray(0,i)),r}return n}function Ch(t){const e=[];let n=0,i=0,r=0;for(const a of t)a&&(r|=1<<i),++i===8&&(e[n++]=r,r=i=0);(n===0||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class g1{constructor(e,n,i,r,s){this.bytes=e,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Jm(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const a of new g1(t,e,n-e,t,Az))s+=a;return s}const i=n>>3<<3,r=e+(e%8===0?0:8-e%8);return Jm(t,e,r)+Jm(t,i,n)+Tz(t,r>>3,i-r>>3)}function Tz(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=n===void 0?t.byteLength:r+n;for(;a-r>=4;)i+=y0(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=y0(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=y0(s.getUint8(r)),r+=1;return i}function y0(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const kz=-1;class be{constructor(e,n,i,r,s,a=[],c){this.type=e,this.children=a,this.dictionary=c,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let u;s instanceof be?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=mr(e),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((a,c)=>a+c.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=kz&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-Jm(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+e>>3,a=(r+e)%8,c=i[s]>>a&1;return n?c===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):c===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new be(e,n,i,r,s,a,this.dictionary)}slice(e,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,c=r===16?i:1,u=this._sliceBuffers(e,n,i,r);return this.clone(this.type,this.offset+e,n,a,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,c*e,c*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===A.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(m1(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jr.VALIDITY]=r,this.clone(this.type,0,e,i+(e-n),s)}_sliceBuffers(e,n,i,r){let s;const{buffers:a}=this;return(s=a[Jr.TYPE])&&(a[Jr.TYPE]=s.subarray(e,e+n)),(s=a[Jr.OFFSET])&&(a[Jr.OFFSET]=s.subarray(e,e+n+1))||(s=a[Jr.DATA])&&(a[Jr.DATA]=r===6?s:s.subarray(i*e,i*(e+n))),a}_sliceChildren(e,n,i){return e.map(r=>r.slice(n,i))}}be.prototype.children=Object.freeze([]);class yu extends Kt{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=e;return new be(n,i,r,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length>>3,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.data),s=oe(e.nullBitmap),a=Xc(e.valueOffsets),{["length"]:c=a.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new be(n,i,c,u,[a,r,s])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.data),s=oe(e.nullBitmap),a=Xc(e.valueOffsets),{["length"]:c=a.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new be(n,i,c,u,[a,r,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:r}=e,s=oe(e.nullBitmap),a=Xc(e.valueOffsets),{["length"]:c=a.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new be(n,i,c,u,[a,void 0,s],[r])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=oe(e.nullBitmap),{length:a=r.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,void 0,s],r)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=oe(e.nullBitmap),a=ve(n.ArrayType,e.typeIds),{["length"]:c=a.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;if(wt.isSparseUnion(n))return new be(n,i,c,u,[void 0,void 0,s,a],r);const l=Xc(e.valueOffsets);return new be(n,i,c,u,[l,void 0,s,a],r)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.indices.ArrayType,e.data),{["dictionary"]:a=new ee([new yu().visit({type:n.dictionary})])}=e,{["length"]:c=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new be(n,i,c,u,[void 0,s,r],[],a)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,r=oe(e.nullBitmap),s=ve(n.ArrayType,e.data),{["length"]:a=s.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,s,r])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new yu().visit({type:n.valueType})}=e,s=oe(e.nullBitmap),{["length"]:a=r.length/mr(n),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new be(n,i,a,c,[void 0,void 0,s],[r])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new yu().visit({type:n.childType})}=e,s=oe(e.nullBitmap),a=Xc(e.valueOffsets),{["length"]:c=a.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new be(n,i,c,u,[a,void 0,s],[r])}}function Gt(t){return new yu().visit(t)}class Kv{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function HA(t){return t.reduce((e,n)=>e+n.nullCount,0)}function YA(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function GA(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const c=t[s],u=e[s],{length:l}=c;if(u>=i)break;if(n>=u+l)continue;if(u>=n&&u+l<=i){r.push(c);continue}const f=Math.max(0,n-u),h=Math.min(i-u,l);r.push(c.slice(f,h-f))}return r.length===0&&r.push(t[0].slice(0,0)),r}function y1(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc((a-r)*.5),n<e[s]?a=s:r=s}while(r<a)}function b1(t,e){return t.getValid(e)}function $o(t){function e(n,i,r){return t(n[i],r)}return function(n){const i=this.data;return y1(i,this._offsets,n,e)}}function KA(t){let e;function n(i,r,s){return t(i[r],s,e)}return function(i,r){const s=this.data;e=r;const a=y1(s,this._offsets,i,n);return e=void 0,a}}function XA(t){let e;function n(i,r,s){let a=s,c=0,u=0;for(let l=r-1,f=i.length;++l<f;){const h=i[l];if(~(c=t(h,e,a)))return u+c;a=0,u+=h.length}return-1}return function(i,r){e=i;const s=this.data,a=typeof r!="number"?n(s,0,0):y1(s,this._offsets,r,n);return e=void 0,a}}class At extends Kt{}function Cz(t,e){return e===null&&t.length>0?0:-1}function Mz(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new g1(n,t.offset+(e||0),t.length,n,WA)){if(!r)return i;++i}return-1}function $t(t,e,n){if(e===void 0)return-1;if(e===null)return Mz(t,n);const i=Zn.getVisitFn(t),r=Mc(e);for(let s=(n||0)-1,a=t.length;++s<a;)if(r(i(t,s)))return s;return-1}function JA(t,e,n){const i=Zn.getVisitFn(t),r=Mc(e);for(let s=(n||0)-1,a=t.length;++s<a;)if(r(i(t,s)))return s;return-1}At.prototype.visitNull=Cz;At.prototype.visitBool=$t;At.prototype.visitInt=$t;At.prototype.visitInt8=$t;At.prototype.visitInt16=$t;At.prototype.visitInt32=$t;At.prototype.visitInt64=$t;At.prototype.visitUint8=$t;At.prototype.visitUint16=$t;At.prototype.visitUint32=$t;At.prototype.visitUint64=$t;At.prototype.visitFloat=$t;At.prototype.visitFloat16=$t;At.prototype.visitFloat32=$t;At.prototype.visitFloat64=$t;At.prototype.visitUtf8=$t;At.prototype.visitBinary=$t;At.prototype.visitFixedSizeBinary=$t;At.prototype.visitDate=$t;At.prototype.visitDateDay=$t;At.prototype.visitDateMillisecond=$t;At.prototype.visitTimestamp=$t;At.prototype.visitTimestampSecond=$t;At.prototype.visitTimestampMillisecond=$t;At.prototype.visitTimestampMicrosecond=$t;At.prototype.visitTimestampNanosecond=$t;At.prototype.visitTime=$t;At.prototype.visitTimeSecond=$t;At.prototype.visitTimeMillisecond=$t;At.prototype.visitTimeMicrosecond=$t;At.prototype.visitTimeNanosecond=$t;At.prototype.visitDecimal=$t;At.prototype.visitList=$t;At.prototype.visitStruct=$t;At.prototype.visitUnion=$t;At.prototype.visitDenseUnion=JA;At.prototype.visitSparseUnion=JA;At.prototype.visitDictionary=$t;At.prototype.visitInterval=$t;At.prototype.visitIntervalDayTime=$t;At.prototype.visitIntervalYearMonth=$t;At.prototype.visitFixedSizeList=$t;At.prototype.visitMap=$t;const Mh=new At;class Tt extends Kt{}function Nt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===A.Timestamp||e instanceof Fn&&e.bitWidth!==64||e instanceof bs&&e.bitWidth!==64||e instanceof ta&&e.precision!==ln.HALF))return new Kv(t.data.length,i=>{const r=t.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Kv(t.data.length,i=>{const s=t.data[i].length,a=t.slice(n,n+s);return n+=s,new Nz(a)})}class Nz{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Tt.prototype.visitNull=Nt;Tt.prototype.visitBool=Nt;Tt.prototype.visitInt=Nt;Tt.prototype.visitInt8=Nt;Tt.prototype.visitInt16=Nt;Tt.prototype.visitInt32=Nt;Tt.prototype.visitInt64=Nt;Tt.prototype.visitUint8=Nt;Tt.prototype.visitUint16=Nt;Tt.prototype.visitUint32=Nt;Tt.prototype.visitUint64=Nt;Tt.prototype.visitFloat=Nt;Tt.prototype.visitFloat16=Nt;Tt.prototype.visitFloat32=Nt;Tt.prototype.visitFloat64=Nt;Tt.prototype.visitUtf8=Nt;Tt.prototype.visitBinary=Nt;Tt.prototype.visitFixedSizeBinary=Nt;Tt.prototype.visitDate=Nt;Tt.prototype.visitDateDay=Nt;Tt.prototype.visitDateMillisecond=Nt;Tt.prototype.visitTimestamp=Nt;Tt.prototype.visitTimestampSecond=Nt;Tt.prototype.visitTimestampMillisecond=Nt;Tt.prototype.visitTimestampMicrosecond=Nt;Tt.prototype.visitTimestampNanosecond=Nt;Tt.prototype.visitTime=Nt;Tt.prototype.visitTimeSecond=Nt;Tt.prototype.visitTimeMillisecond=Nt;Tt.prototype.visitTimeMicrosecond=Nt;Tt.prototype.visitTimeNanosecond=Nt;Tt.prototype.visitDecimal=Nt;Tt.prototype.visitList=Nt;Tt.prototype.visitStruct=Nt;Tt.prototype.visitUnion=Nt;Tt.prototype.visitDenseUnion=Nt;Tt.prototype.visitSparseUnion=Nt;Tt.prototype.visitDictionary=Nt;Tt.prototype.visitInterval=Nt;Tt.prototype.visitIntervalDayTime=Nt;Tt.prototype.visitIntervalYearMonth=Nt;Tt.prototype.visitFixedSizeList=Nt;Tt.prototype.visitMap=Nt;const _1=new Tt,Oz=(t,e)=>t+e;class ga extends Kt{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===Qt.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,r)=>i+Br.visit(r,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,r)=>i+Br.visit(r,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const Fz=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Dz=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Rz=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,c=Br.getVisitFn(r.type),u=r.slice(s,a-s);let l=8;for(let f=-1,h=a-s;++f<h;)l+=c(u,f);return l},Lz=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=Br.getVisitFn(i.type);let a=0;for(let c=-1,u=r.length;++c<u;)a+=s(r,c);return a},Bz=(t,e)=>t.type.mode===fi.Dense?QA(t,e):ZA(t,e),QA=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+Br.visit(e[s],i[r])},ZA=({children:t},e)=>4+Br.visitMany(t,t.map(()=>e)).reduce(Oz,0);ga.prototype.visitUtf8=Fz;ga.prototype.visitBinary=Dz;ga.prototype.visitList=Rz;ga.prototype.visitFixedSizeList=Lz;ga.prototype.visitUnion=Bz;ga.prototype.visitDenseUnion=QA;ga.prototype.visitSparseUnion=ZA;const Br=new ga;var t4;const e4={},n4={};class ee{constructor(e){var n,i,r;const s=e[0]instanceof ee?e.flatMap(c=>c.data):e;if(s.length===0||s.some(c=>!(c instanceof be)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:c,set:u,indexOf:l,byteLength:f}=e4[a.typeId],h=s[0];this.isValid=d=>b1(h,d),this.get=d=>c(h,d),this.set=(d,p)=>u(h,d,p),this.indexOf=d=>l(h,d),this.getByteLength=d=>f(h,d),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,n4[a.typeId]),this._offsets=YA(s);break}this.data=s,this.type=a,this.stride=mr(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=HA(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${A[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return _1.visit(this)}concat(...e){return new ee(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new ee(qA(this,e,n,({data:i,_offsets:r},s,a)=>GA(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:r,ArrayType:s}=this;switch(e.typeId){case A.Int:case A.Float:case A.Decimal:case A.Time:case A.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:c,length:u})=>(a.array.set(c.subarray(0,u*r),a.offset),a.offset+=u*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new ee(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return wt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(wt.isDictionary(this.type)){const e=new Nh(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new ee(n)}return new Nh(this)}unmemoize(){if(wt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new ee(n)}return this}}t4=Symbol.toStringTag;ee[t4]=(t=>{t.type=wt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(A).map(n=>A[n]).filter(n=>typeof n=="number"&&n!==A.NONE);for(const n of e){const i=Zn.getVisitFnByTypeId(n),r=Bi.getVisitFnByTypeId(n),s=Mh.getVisitFnByTypeId(n),a=Br.getVisitFnByTypeId(n);e4[n]={get:i,set:r,indexOf:s,byteLength:a},n4[n]=Object.create(t,{isValid:{value:$o(b1)},get:{value:$o(Zn.getVisitFnByTypeId(n))},set:{value:KA(Bi.getVisitFnByTypeId(n))},indexOf:{value:XA(Mh.getVisitFnByTypeId(n))},getByteLength:{value:$o(Br.getVisitFnByTypeId(n))}})}return"Vector"})(ee.prototype);class Nh extends ee{constructor(e){super(e.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const c=s[a];if(c!==void 0)return c;const u=n.call(this,a);return s[a]=u,u}}),Object.defineProperty(this,"set",{value(a,c){i.call(this,a,c),s[a]=c}}),Object.defineProperty(this,"slice",{value:(a,c)=>new Nh(r.call(this,a,c))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ee(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Pz(t){if(!t||t.length<=0)return function(r){return!0};let e="";const n=t.filter(i=>i===i);return n.length>0&&(e=`
    switch (x) {${n.map(i=>`
        case ${Uz(i)}:`).join("")}
            return false;
    }`),t.length!==n.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function Uz(t){return typeof t!="bigint"?zs(t):VI?`${zs(t)}n`:`"${zs(t)}"`}const b0=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e,Vz=(t,e=0)=>t.length>=e?t.subarray(0,e):Ih(new t.constructor(e),t,0);class np{constructor(e,n=1){this.buffer=e,this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e.constructor,this._resize(this.length=Math.ceil(e.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,n){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?b0(i*1,this.BYTES_PER_ELEMENT):b0(i*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=b0(e*this.stride,this.BYTES_PER_ELEMENT);const n=Vz(this.buffer,e);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(e){return this.buffer=Ih(new this.ArrayType(e),this.buffer)}}np.prototype.offset=0;class vl extends np{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,n){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=n,this}}class i4 extends vl{constructor(e=new Uint8Array(0)){super(e,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,n){const{buffer:i}=this.reserve(e-this.length+1),r=e>>3,s=e%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class r4 extends vl{constructor(e=new Int32Array(1)){super(e,1)}append(e){return this.set(this.length-1,e)}set(e,n){const i=this.length-1,r=this.reserve(e-i+1).buffer;return i<e++&&r.fill(r[i],i,e),r[e]=r[e-1]+n,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,0),super.flush(e+1)}}let ni=class{constructor({type:e,nullValues:n}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=mr(e),this._nulls=new i4,n&&n.length>0&&(this._isValid=Pz(n))}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}toVector(){return new ee([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),a.reduce((c,u)=>c+u.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,n){return this.setValid(e,this.isValid(n))&&this.setValue(e,n),this}setValue(e,n){this._setValue(this,e,n)}setValid(e,n){return this.length=this._nulls.set(e,+n).length,n}addChild(e,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,n,i,r;const{type:s,length:a,nullCount:c,_typeIds:u,_offsets:l,_values:f,_nulls:h}=this;(n=u==null?void 0:u.flush(a))?r=l==null?void 0:l.flush(a):(r=l==null?void 0:l.flush(a))?e=f==null?void 0:f.flush(l.last()):e=f==null?void 0:f.flush(a),c>0&&(i=h==null?void 0:h.flush(a));const d=this.children.map(p=>p.flush());return this.clear(),Gt({type:s,length:a,nullCount:c,children:d,child:d[0],data:e,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,n,i,r;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};ni.prototype.length=1;ni.prototype.stride=1;ni.prototype.children=null;ni.prototype.finished=!1;ni.prototype.nullValues=null;ni.prototype._isValid=()=>!0;class ya extends ni{constructor(e){super(e),this._values=new vl(new this.ArrayType(0),this.stride)}setValue(e,n){const i=this._values;return i.reserve(e-i.length+1),super.setValue(e,n)}}class ip extends ni{constructor(e){super(e),this._pendingLength=0,this._offsets=new r4}setValue(e,n){const i=this._pending||(this._pending=new Map),r=i.get(e);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof tp?n[Gi].length:n.length,i.set(e,n)}setValid(e,n){return super.setValid(e,n)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,n),this}}class Qm{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,r){return e.prep(8,24),e.writeInt64(r),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}const _0=2,br=4,ns=4,Se=4,Ds=new Int32Array(2),Xv=new Float32Array(Ds.buffer),Jv=new Float64Array(Ds.buffer),tf=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let ls=class Zm{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?Zm.ZERO:new Zm(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};ls.ZERO=new ls(0,0);var tg;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(tg||(tg={}));let uc=class s4{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new s4(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new ls(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new ls(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return Ds[0]=this.readInt32(e),Xv[0]}readFloat64(e){return Ds[tf?0:1]=this.readInt32(e),Ds[tf?1:0]=this.readInt32(e+4),Jv[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){Xv[0]=n,this.writeInt32(e,Ds[0])}writeFloat64(e,n){Jv[0]=n,this.writeInt32(e,Ds[tf?0:1]),this.writeInt32(e+4,Ds[tf?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+br+ns)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<ns;n++)e+=String.fromCharCode(this.readInt8(this.position_+br+n));return e}__offset(e,n){const i=e-this.readInt32(e);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const i=this.readInt32(e);let r="",s=0;if(e+=br,n===tg.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;s<i;){let a;const c=this.readUint8(e+s++);if(c<192)a=c;else{const u=this.readUint8(e+s++);if(c<224)a=(c&31)<<6|u&63;else{const l=this.readUint8(e+s++);if(c<240)a=(c&15)<<12|(u&63)<<6|l&63;else{const f=this.readUint8(e+s++);a=(c&7)<<18|(u&63)<<12|(l&63)<<6|f&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&1024-1)+56320))}return r}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+br}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ns)throw new Error("FlatBuffers: file identifier must be length "+ns);for(let n=0;n<ns;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+br+n))return!1;return!0}createLong(e,n){return ls.create(e,n)}createScalarList(e,n){const i=[];for(let r=0;r<n;++r)e(r)!==null&&i.push(e(r));return i}createObjList(e,n){const i=[];for(let r=0;r<n;++r){const s=e(r);s!==null&&i.push(s.unpack())}return i}},a4=class o4{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=uc.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<i+e+n;){const r=this.bb.capacity();this.bb=o4.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,i){n!=i&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=uc.allocate(i);return r.setPosition(i-n),r.bytes().set(e.bytes(),i-n),r}addOffset(e){this.prep(br,0),this.writeInt32(this.offset()-e+br)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*_0;this.addInt16(s);let a=0;const c=this.space;t:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=_0;l<s;l+=_0)if(this.bb.readInt16(c+l)!=this.bb.readInt16(u+l))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,a-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,i){const r=i?Se:0;if(n){const s=n;if(this.prep(this.minalign,br+ns+r),s.length!=ns)throw new Error("FlatBuffers: file identifier must be length "+ns);for(let a=ns-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,br+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,i){this.notNested(),this.vector_num_elems=n,this.prep(br,e*n),this.prep(i,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let i=0;for(;i<e.length;){let r;const s=e.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=e.charCodeAt(i++);r=(s<<10)+a+(65536-56623104-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(e,n){return ls.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let i=0;i<e.length;++i){const r=e[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class Ke{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Ke).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Se),(n||new Ke).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Ke.startKeyValue(e),Ke.addKey(e,n),Ke.addValue(e,i),Ke.endKeyValue(e)}}var lc;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(lc||(lc={}));var fc;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(fc||(fc={}));var Oh;(function(t){t[t.DenseArray=0]="DenseArray"})(Oh||(Oh={}));class si{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new si).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Se),(n||new si).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return si.startInt(e),si.addBitWidth(e,n),si.addIsSigned(e,i),si.endInt(e)}}class is{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new is).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Se),(n||new is).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new si).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Oh.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,Oh.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Ta{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Ta).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Se),(n||new Ta).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Ta.startBinary(e),Ta.endBinary(e)}}class ka{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Se),(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return ka.startBool(e),ka.endBool(e)}}var Fh;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Fh||(Fh={}));let If=class xo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new xo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Se),(n||new xo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Fh.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Fh.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return xo.startDate(e),xo.addUnit(e,n),xo.endDate(e)}};class zn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new zn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Se),(n||new zn).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,r){return zn.startDecimal(e),zn.addPrecision(e,n),zn.addScale(e,i),zn.addBitWidth(e,r),zn.endDecimal(e)}}var hc;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(hc||(hc={}));class _r{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Se),(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return _r.startFixedSizeBinary(e),_r.addByteWidth(e,n),_r.endFixedSizeBinary(e)}}class vr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Se),(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return vr.startFixedSizeList(e),vr.addListSize(e,n),vr.endFixedSizeList(e)}}var Dh;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Dh||(Dh={}));class wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Se),(n||new wr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Dh.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Dh.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return wr.startFloatingPoint(e),wr.addPrecision(e,n),wr.endFloatingPoint(e)}}var Rh;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Rh||(Rh={}));class xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Se),(n||new xr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Rh.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Rh.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return xr.startInterval(e),xr.addUnit(e,n),xr.endInterval(e)}}class Ca{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Ca).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Se),(n||new Ca).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Ca.startList(e),Ca.endList(e)}}let Af=class So{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new So).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Se),(n||new So).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return So.startMap(e),So.addKeysSorted(e,n),So.endMap(e)}};class Ma{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Se),(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Ma.startNull(e),Ma.endNull(e)}}class Na{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Se),(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Na.startStruct_(e),Na.endStruct_(e)}}class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Ai).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Se),(n||new Ai).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hc.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,hc.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Ai.startTime(e),Ai.addUnit(e,n),Ai.addBitWidth(e,i),Ai.endTime(e)}}class Ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Se),(n||new Ti).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hc.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,hc.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return Ti.startTimestamp(e),Ti.addUnit(e,n),Ti.addTimezone(e,i),Ti.endTimestamp(e)}}var Lh;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Lh||(Lh={}));class qn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Se),(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Lh.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Lh.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return qn.startUnion(e),qn.addMode(e,n),qn.addTypeIds(e,i),qn.endUnion(e)}}class Oa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Oa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Se),(n||new Oa).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Oa.startUtf8(e),Oa.endUtf8(e)}}var Fe;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(Fe||(Fe={}));let xi=class Tf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Tf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Se),(n||new Tf).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Fe.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new is).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Tf).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Fe.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},fr=class Xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Se),(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fc.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new xi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,fc.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,r,s){return Xr.startSchema(e),Xr.addEndianness(e,n),Xr.addFields(e,i),Xr.addCustomMetadata(e,r),Xr.addFeatures(e,s),Xr.endSchema(e)}};class ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Se),(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lc.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new fr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Qm).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Qm).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,lc.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class de{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=eg(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(r=>n.has(r.name));return new de(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new de(n,this.metadata)}assign(...e){const n=e[0]instanceof de?e[0]:Array.isArray(e[0])?new de(e[0]):new de(e),i=[...this.fields],r=ef(ef(new Map,this.metadata),n.metadata),s=n.fields.filter(c=>{const u=i.findIndex(l=>l.name===c.name);return~u?(i[u]=c.clone({metadata:ef(ef(new Map,i[u].metadata),c.metadata)}))&&!1:!0}),a=eg(s,new Map);return new de([...i,...s],r,new Map([...this.dictionaries,...a]))}}de.prototype.fields=null;de.prototype.metadata=null;de.prototype.dictionaries=null;class ue{constructor(e,n,i=!1,r){this.name=e,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...e){let[n,i,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new ue(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,r,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],ue.new(n,i,r,s)}}ue.prototype.type=null;ue.prototype.name=null;ue.prototype.nullable=null;ue.prototype.metadata=null;function ef(t,e){return new Map([...t||new Map,...e||new Map])}function eg(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const s=t[n].type;if(wt.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&eg(s.children,e)}return e}var Qv=ls,$z=a4,jz=uc;class Hu{constructor(e,n=ai.V4,i,r){this.schema=e,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(e){e=new jz(oe(e));const n=ri.getRootAsFooter(e),i=de.decode(n.schema());return new zz(i,n)}static encode(e){const n=new $z,i=de.encode(n,e.schema);ri.startRecordBatchesVector(n,e.numRecordBatches);for(const a of[...e.recordBatches()].slice().reverse())na.encode(n,a);const r=n.endVector();ri.startDictionariesVector(n,e.numDictionaries);for(const a of[...e.dictionaryBatches()].slice().reverse())na.encode(n,a);const s=n.endVector();return ri.startFooter(n),ri.addSchema(n,i),ri.addVersion(n,ai.V4),ri.addRecordBatches(n,r),ri.addDictionaries(n,s),ri.finishFooterBuffer(n,ri.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class zz extends Hu{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return na.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return na.decode(n)}return null}}class na{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new na(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,r=new Qv(n.offset,0),s=new Qv(n.bodyLength,0);return Qm.createBlock(e,r,i,s)}}const Re=Object.freeze({done:!0,value:void 0});class Zv{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class v1{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class qz extends v1{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return vt(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Re);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Ii.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Ii.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return vt(this,void 0,void 0,function*(){return yield this.abort(e),Re})}return(e){return vt(this,void 0,void 0,function*(){return yield this.close(),Re})}read(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Re)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class kf extends qz{write(e){if((e=oe(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Ym(this.toUint8Array(!0)):this.toUint8Array(!1).then(Ym)}toUint8Array(e=!1){return e?Rr(this._values)[0]:(()=>vt(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=Pa(this),c;c=yield a.next(),!c.done;){const u=c.value;r.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return Rr(r,s)[0]}))()}}class Bh{constructor(e){e&&(this.source=new Wz(Ii.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class dc{constructor(e){e instanceof dc?this.source=e.source:e instanceof kf?this.source=new va(Ii.fromAsyncIterable(e)):WI(e)?this.source=new va(Ii.fromNodeStream(e)):Vy(e)?this.source=new va(Ii.fromDOMStream(e)):qI(e)?this.source=new va(Ii.fromDOMStream(e.body)):_l(e)?this.source=new va(Ii.fromIterable(e)):Za(e)?this.source=new va(Ii.fromAsyncIterable(e)):Cc(e)&&(this.source=new va(Ii.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Wz{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Re)}return(e){return Object.create(this.source.return&&this.source.return(e)||Re)}}class va{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return vt(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return vt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return vt(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return vt(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return vt(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Re;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class tw extends Bh{constructor(e,n){super(),this.position=0,this.buffer=oe(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),n.subarray(r,this.position)):null}readAt(e,n){const i=this.buffer,r=Math.min(this.size,e+n);return i?i.subarray(e,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Ph extends dc{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>vt(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return vt(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return vt(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return vt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=r,a=0,c=0;const u=Math.min(i,s+Math.min(i-s,e)),l=new Uint8Array(Math.max(0,(this.position=u)-s));for(;(s+=c)<u&&(a+=c)<l.byteLength;)({bytesRead:c}=yield n.read(l,a,l.byteLength-a,s));return l}return null})}readAt(e,n){return vt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&e+n<r){const s=Math.min(r,e+n),a=new Uint8Array(s-e);return(yield i.read(a,0,n,e)).buffer}return new Uint8Array(n)})}close(){return vt(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return vt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return vt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const Hz=65536;function Co(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const pc=8,w1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class c4{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?Hz:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Co(this.buffer[1])} ${Co(this.buffer[0])}`}}class pe extends c4{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return pe.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return pe.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,r=new pe(n);for(let s=0;s<i;){const a=pc<i-s?pc:i-s,c=new pe(new Uint32Array([Number.parseInt(e.slice(s,s+a),10),0])),u=new pe(new Uint32Array([w1[a],0]));r.times(u),r.plus(c),s+=a}return r}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)pe.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new pe(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new pe(new Uint32Array(e.buffer)).plus(n)}}class jn extends c4{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return jn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return jn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),r=e.length,s=new jn(n);for(let a=i?1:0;a<r;){const c=pc<r-a?pc:r-a,u=new jn(new Uint32Array([Number.parseInt(e.slice(a,a+c),10),0])),l=new jn(new Uint32Array([w1[c],0]));s.times(l),s.plus(u),a+=c}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)jn.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new jn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new jn(new Uint32Array(e.buffer)).plus(n)}}class hr{constructor(e){this.buffer=e}high(){return new jn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new jn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new pe(new Uint32Array([this.buffer[3],0])),i=new pe(new Uint32Array([this.buffer[2],0])),r=new pe(new Uint32Array([this.buffer[1],0])),s=new pe(new Uint32Array([this.buffer[0],0])),a=new pe(new Uint32Array([e.buffer[3],0])),c=new pe(new Uint32Array([e.buffer[2],0])),u=new pe(new Uint32Array([e.buffer[1],0])),l=new pe(new Uint32Array([e.buffer[0],0]));let f=pe.multiply(s,l);this.buffer[0]=f.low();const h=new pe(new Uint32Array([f.high(),0]));return f=pe.multiply(r,l),h.plus(f),f=pe.multiply(s,u),h.plus(f),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(f)?1:0,this.buffer[2]=h.high(),new pe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(pe.multiply(i,l)).plus(pe.multiply(r,u)).plus(pe.multiply(s,c)),this.buffer[3]+=pe.multiply(n,l).plus(pe.multiply(i,u)).plus(pe.multiply(r,c)).plus(pe.multiply(s,a)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Co(this.buffer[3])} ${Co(this.buffer[2])} ${Co(this.buffer[1])} ${Co(this.buffer[0])}`}static multiply(e,n){return new hr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new hr(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return hr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return hr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),r=e.length,s=new hr(n);for(let a=i?1:0;a<r;){const c=pc<r-a?pc:r-a,u=new hr(new Uint32Array([Number.parseInt(e.slice(a,a+c),10),0,0,0])),l=new hr(new Uint32Array([w1[c],0,0,0]));s.times(l),s.plus(u),a+=c}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,r=e.length;++i<r;)hr.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class u4 extends Kt{constructor(e,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(e){return super.visit(e instanceof ue?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Gt({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===fi.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Gt({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class Yz extends u4{constructor(e,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Ch(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return ve(Uint8Array,ve(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return wt.isTimestamp(e)||(wt.isInt(e)||wt.isTime(e))&&e.bitWidth===64||wt.isDate(e)&&e.unit===er.MILLISECOND?ve(Uint8Array,jn.convertArray(i[n])):wt.isDecimal(e)?ve(Uint8Array,hr.convertArray(i[n])):wt.isBinary(e)||wt.isFixedSizeBinary(e)?Gz(i[n]):wt.isBool(e)?Ch(i[n]):wt.isUtf8(e)?Qd(i[n].join("")):ve(Uint8Array,ve(e.ArrayType,i[n].map(r=>+r)))}}function Gz(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class l4 extends ip{constructor(e){super(e),this._values=new np(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,oe(n))}_flushPending(e,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,c]of e)if(c===void 0)i.set(a,0);else{const u=c.length;r.set(c,s),i.set(a,u),s+=u}}}class Kz extends ni{constructor(e){super(e),this._values=new i4}setValue(e,n){this._values.set(e,+n)}}class rp extends ya{}rp.prototype._setValue=vA;class f4 extends rp{}f4.prototype._setValue=e1;class h4 extends rp{}h4.prototype._setValue=n1;class d4 extends ya{}d4.prototype._setValue=SA;class Xz extends ni{constructor({type:e,nullValues:n,dictionaryHashFunction:i}){super({type:new ea(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Uh({type:this.type.indices,nullValues:n}),this.dictionary=Uh({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,n){const i=this.indices;return n=i.setValid(e,n),this.length=i.length,n}setValue(e,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(e,s)}flush(){const e=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(e);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return typeof e=="string"?e:`${e}`}}class p4 extends ya{}p4.prototype._setValue=_A;class Jz extends ni{setValue(e,n){const[i]=this.children,r=e*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(e,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(e);return this.type=new cc(this.type.listSize,new ue(n,e.type,!0)),i}}class sp extends ya{setValue(e,n){this._values.set(e,n)}}class Qz extends sp{setValue(e,n){super.setValue(e,gA(n))}}class Zz extends sp{}class tq extends sp{}class ap extends ya{}ap.prototype._setValue=AA;class m4 extends ap{}m4.prototype._setValue=f1;class g4 extends ap{}g4.prototype._setValue=h1;class As extends ya{setValue(e,n){this._values.set(e,n)}}class eq extends As{}class nq extends As{}class iq extends As{}class rq extends As{}class sq extends As{}class aq extends As{}class oq extends As{}class cq extends As{}class uq extends ip{constructor(e){super(e),this._offsets=new r4}addChild(e,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new oc(new ue(n,e.type,!0)),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[r,s]of e)if(typeof s>"u")n.set(r,0);else{const a=s.length,c=n.set(r,a).buffer[r];for(let u=-1;++u<a;)i.set(c+u,s[u])}}}class lq extends ip{set(e,n){return super.set(e,n)}setValue(e,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(e);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(e,i)}addChild(e,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new Wu(new ue(n,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[r,s]of e)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:c}=n.set(r,s.size).buffer;for(const u of s.entries())if(i.set(a,u),++a>=c)break}}}class fq extends ni{setValue(e,n){}setValid(e,n){return this.length=Math.max(e+1,this.length),n}}class hq extends ni{setValue(e,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(e,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(e,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(e,n[s.name]))}}setValid(e,n){return super.setValid(e,n)||this.children.forEach(i=>i.setValid(e,n)),n}addChild(e,n=`${this.numChildren}`){const i=this.children.push(e);return this.type=new un([...this.type.children,new ue(n,e.type,!0)]),i}}class Nc extends ya{}Nc.prototype._setValue=wA;class y4 extends Nc{}y4.prototype._setValue=i1;class b4 extends Nc{}b4.prototype._setValue=r1;class _4 extends Nc{}_4.prototype._setValue=s1;class v4 extends Nc{}v4.prototype._setValue=a1;class Oc extends ya{}Oc.prototype._setValue=xA;class w4 extends Oc{}w4.prototype._setValue=o1;class x4 extends Oc{}x4.prototype._setValue=c1;class S4 extends Oc{}S4.prototype._setValue=u1;class E4 extends Oc{}E4.prototype._setValue=l1;class x1 extends ni{constructor(e){super(e),this._typeIds=new vl(new Int8Array(0),1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,n){return this.set(this.length,e,n)}set(e,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,e)),this.setValid(e,this.isValid(n))&&this.setValue(e,n,i),this}setValue(e,n,i){this._typeIds.set(e,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(e,n)}addChild(e,n=`${this.children.length}`){const i=this.children.push(e),{type:{children:r,mode:s,typeIds:a}}=this,c=[...r,new ue(n,e.type)];return this.type=new qu(s,[...a,i],c),i}_valueToChildTypeId(e,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class dq extends x1{}class pq extends x1{constructor(e){super(e),this._offsets=new vl(new Int32Array(0))}setValue(e,n,i){const r=this._typeIds.set(e,i).buffer[e],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(e,s.length).buffer[e];s==null||s.set(a,n)}}class I4 extends ip{constructor(e){super(e),this._values=new np(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,Qd(n))}_flushPending(e,n){}}I4.prototype._flushPending=l4.prototype._flushPending;class mq extends Kt{visitNull(){return fq}visitBool(){return Kz}visitInt(){return As}visitInt8(){return eq}visitInt16(){return nq}visitInt32(){return iq}visitInt64(){return rq}visitUint8(){return sq}visitUint16(){return aq}visitUint32(){return oq}visitUint64(){return cq}visitFloat(){return sp}visitFloat16(){return Qz}visitFloat32(){return Zz}visitFloat64(){return tq}visitUtf8(){return I4}visitBinary(){return l4}visitFixedSizeBinary(){return p4}visitDate(){return rp}visitDateDay(){return f4}visitDateMillisecond(){return h4}visitTimestamp(){return Nc}visitTimestampSecond(){return y4}visitTimestampMillisecond(){return b4}visitTimestampMicrosecond(){return _4}visitTimestampNanosecond(){return v4}visitTime(){return Oc}visitTimeSecond(){return w4}visitTimeMillisecond(){return x4}visitTimeMicrosecond(){return S4}visitTimeNanosecond(){return E4}visitDecimal(){return d4}visitList(){return uq}visitStruct(){return hq}visitUnion(){return x1}visitDenseUnion(){return pq}visitSparseUnion(){return dq}visitDictionary(){return Xz}visitInterval(){return ap}visitIntervalDayTime(){return m4}visitIntervalYearMonth(){return g4}visitFixedSizeList(){return Jz}visitMap(){return lq}}const gq=new mq;class kt extends Kt{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,r)=>this.compareFields(i,n[r]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function ii(t,e){return e instanceof t.constructor}function wl(t,e){return t===e||ii(t,e)}function Ts(t,e){return t===e||ii(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function op(t,e){return t===e||ii(t,e)&&t.precision===e.precision}function yq(t,e){return t===e||ii(t,e)&&t.byteWidth===e.byteWidth}function S1(t,e){return t===e||ii(t,e)&&t.unit===e.unit}function xl(t,e){return t===e||ii(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Sl(t,e){return t===e||ii(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function bq(t,e){return t===e||ii(t,e)&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function _q(t,e){return t===e||ii(t,e)&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function E1(t,e){return t===e||ii(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&ia.compareManyFields(t.children,e.children)}function vq(t,e){return t===e||ii(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&ia.visit(t.indices,e.indices)&&ia.visit(t.dictionary,e.dictionary)}function I1(t,e){return t===e||ii(t,e)&&t.unit===e.unit}function wq(t,e){return t===e||ii(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}function xq(t,e){return t===e||ii(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&ia.compareManyFields(t.children,e.children)}kt.prototype.visitNull=wl;kt.prototype.visitBool=wl;kt.prototype.visitInt=Ts;kt.prototype.visitInt8=Ts;kt.prototype.visitInt16=Ts;kt.prototype.visitInt32=Ts;kt.prototype.visitInt64=Ts;kt.prototype.visitUint8=Ts;kt.prototype.visitUint16=Ts;kt.prototype.visitUint32=Ts;kt.prototype.visitUint64=Ts;kt.prototype.visitFloat=op;kt.prototype.visitFloat16=op;kt.prototype.visitFloat32=op;kt.prototype.visitFloat64=op;kt.prototype.visitUtf8=wl;kt.prototype.visitBinary=wl;kt.prototype.visitFixedSizeBinary=yq;kt.prototype.visitDate=S1;kt.prototype.visitDateDay=S1;kt.prototype.visitDateMillisecond=S1;kt.prototype.visitTimestamp=xl;kt.prototype.visitTimestampSecond=xl;kt.prototype.visitTimestampMillisecond=xl;kt.prototype.visitTimestampMicrosecond=xl;kt.prototype.visitTimestampNanosecond=xl;kt.prototype.visitTime=Sl;kt.prototype.visitTimeSecond=Sl;kt.prototype.visitTimeMillisecond=Sl;kt.prototype.visitTimeMicrosecond=Sl;kt.prototype.visitTimeNanosecond=Sl;kt.prototype.visitDecimal=wl;kt.prototype.visitList=bq;kt.prototype.visitStruct=_q;kt.prototype.visitUnion=E1;kt.prototype.visitDenseUnion=E1;kt.prototype.visitSparseUnion=E1;kt.prototype.visitDictionary=vq;kt.prototype.visitInterval=I1;kt.prototype.visitIntervalDayTime=I1;kt.prototype.visitIntervalYearMonth=I1;kt.prototype.visitFixedSizeList=wq;kt.prototype.visitMap=xq;const ia=new kt;function ng(t,e){return ia.compareSchemas(t,e)}function Uh(t){const e=t.type,n=new(gq.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(a,c)=>i[c]||r:({name:a})=>i[a]||r;for(const[a,c]of e.children.entries()){const{type:u}=c,l=s(c,a);n.children.push(Uh(Object.assign(Object.assign({},l),{type:u})))}}return n}function v0(t,e){return Sq(t,e.map(n=>n.data.concat()))}function Sq(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,c=-1;const u=e.length;let l,f=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,c=-1;++c<u;)f[c]=l=e[c].shift(),a=Math.min(a,l?l.length:a);Number.isFinite(a)&&(f=Eq(n,a,f,e,r),a>0&&(i[s++]=Gt({type:new un(n),length:a,nullCount:0,children:f.slice()})))}return[t=t.assign(n),i.map(h=>new Wn(t,h))]}function Eq(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let c=-1,u=i.length;++c<u;){const l=n[c],f=l==null?void 0:l.length;if(f>=e)f===e?n[c]=l:(n[c]=l.slice(0,e),r.numBatches=Math.max(r.numBatches,i[c].unshift(l.slice(e,f-e))));else{const h=t[c];t[c]=h.clone({nullable:!0}),n[c]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Gt({type:h.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var A4;let _s=class xa{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new de([]),this._offsets=[0],this;let r,s;e[0]instanceof de&&(r=e.shift()),e[e.length-1]instanceof Uint32Array&&(s=e.pop());const a=u=>{if(u){if(u instanceof Wn)return[u];if(u instanceof xa)return u.batches;if(u instanceof be){if(u.type instanceof un)return[new Wn(new de(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>a(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>a(l));if(typeof u=="object"){const l=Object.keys(u),f=l.map(p=>new ee([u[p]])),h=new de(l.map((p,m)=>new ue(String(p),f[m].type))),[,d]=v0(h,f);return d.length===0?[new Wn(u)]:d}}}return[]},c=e.flatMap(u=>a(u));if(r=(i=r??((n=c[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new de([]),!(r instanceof de))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of c){if(!(u instanceof Wn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!ng(r,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=c,this._offsets=s??YA(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=HA(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?_1.visit(new ee(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:r})=>r));return new xa(n,i.map(r=>new Wn(n,r)))}slice(e,n){const i=this.schema;[e,n]=qA({length:this.numRows},e,n);const r=GA(this.data,this._offsets,e,n);return new xa(i,r.map(s=>new Wn(i,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],r=Gt({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new ee(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new ee([Gt({type:new ys,length:this.numRows})]));const s=i.fields.slice(),a=s[e].clone({type:n.type}),c=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[e],c[e]]=[a,n],[i,r]=v0(i,c)}return new xa(i,r)}select(e){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(r=>r.selectAt(e));return new xa(n,i)}assign(e){const n=this.schema.fields,[i,r]=e.schema.fields.reduce((c,u,l)=>{const[f,h]=c,d=n.findIndex(p=>p.name===u.name);return~d?h[d]=l:f.push(l),c},[[],[]]),s=this.schema.assign(e.schema),a=[...n.map((c,u)=>[u,r[u]]).map(([c,u])=>u===void 0?this.getChildAt(c):e.getChildAt(u)),...i.map(c=>e.getChildAt(c))].filter(Boolean);return new xa(...v0(s,a))}};A4=Symbol.toStringTag;_s[A4]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=$o(b1),t.get=$o(Zn.getVisitFn(A.Struct)),t.set=KA(Bi.getVisitFn(A.Struct)),t.indexOf=XA(Mh.getVisitFn(A.Struct)),t.getByteLength=$o(Br.getVisitFn(A.Struct)),"Table"))(_s.prototype);var T4;let Wn=class uu{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof de))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Gt({nullCount:0,type:new un(this.schema.fields),children:this.schema.fields.map(n=>Gt({type:n.type,nullCount:0}))})]=e,!(this.data instanceof be))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ew(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:r,length:s}=Object.keys(n).reduce((u,l,f)=>(u.children[f]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[f]=ue.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),a=new de(i),c=Gt({type:new un(i),length:s,children:r,nullCount:0});[this.schema,this.data]=ew(a,c.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=k4(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Zn.visit(this.data,e)}set(e,n){return Bi.visit(this.data,e,n)}indexOf(e,n){return Mh.visit(this.data,e,n)}getByteLength(e){return Br.visit(this.data,e)}[Symbol.iterator](){return _1.visit(new ee([this.data]))}toArray(){return[...this]}concat(...e){return new _s(this.schema,[this,...e])}slice(e,n){const[i]=new ee([this.data]).slice(e,n).data;return new uu(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new ee([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new ee([Gt({type:new ys,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),c=s[e].clone({type:n.type});[s[e],a[e]]=[c,n.data[0]],i=new de(s,new Map(this.schema.metadata)),r=Gt({type:new un(s),children:a})}return new uu(i,r)}select(e){const n=this.schema.select(e),i=new un(n.fields),r=[];for(const s of e){const a=this.schema.fields.findIndex(c=>c.name===s);~a&&(r[a]=this.data.children[a])}return new uu(n,Gt({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(s=>this.data.children[s]).filter(Boolean),r=Gt({type:new un(n.fields),length:this.numRows,children:i});return new uu(n,r)}};T4=Symbol.toStringTag;Wn[T4]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Wn.prototype);function ew(t,e,n=e.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[c,u]of t.fields.entries()){const l=e[c];(!l||l.length!==n)&&(r[c]=u.clone({nullable:!0}),s[c]=(i=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Gt({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),Gt({type:new un(r),length:n,children:s})]}function k4(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const a=t[i].type,c=e[i];if(wt.isDictionary(a)){if(!n.has(a.id))c.dictionary&&n.set(a.id,c.dictionary);else if(n.get(a.id)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&k4(a.children,c.children,n)}return n}class A1 extends Wn{constructor(e){const n=e.fields.map(r=>Gt({type:r.type})),i=Gt({type:new un(e.fields),nullCount:0,children:n});super(e,i)}}var Vh;(function(t){t[t.BUFFER=0]="BUFFER"})(Vh||(Vh={}));var $h;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})($h||($h={}));class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Rs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Se),(n||new Rs).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):$h.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Vh.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,$h.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Vh.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return Rs.startBodyCompression(e),Rs.addCodec(e,n),Rs.addMethod(e,i),Rs.endBodyCompression(e)}}class C4{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}let M4=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}},Qr=class ig{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new ig).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Se),(n||new ig).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new M4).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new C4).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Rs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Eo=class rg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new rg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Se),(n||new rg).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Qr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var jh;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(jh||(jh={}));let Cs=class lr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Se),(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lc.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):jh.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Ke).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,lc.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,jh.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,r,s,a){return lr.startMessage(e),lr.addVersion(e,n),lr.addHeaderType(e,i),lr.addHeader(e,r),lr.addBodyLength(e,s),lr.addCustomMetadata(e,a),lr.endMessage(e)}};var Iq=ls;class Aq extends Kt{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Ma.startNull(n),Ma.endNull(n)}visitInt(e,n){return si.startInt(n),si.addBitWidth(n,e.bitWidth),si.addIsSigned(n,e.isSigned),si.endInt(n)}visitFloat(e,n){return wr.startFloatingPoint(n),wr.addPrecision(n,e.precision),wr.endFloatingPoint(n)}visitBinary(e,n){return Ta.startBinary(n),Ta.endBinary(n)}visitBool(e,n){return ka.startBool(n),ka.endBool(n)}visitUtf8(e,n){return Oa.startUtf8(n),Oa.endUtf8(n)}visitDecimal(e,n){return zn.startDecimal(n),zn.addScale(n,e.scale),zn.addPrecision(n,e.precision),zn.addBitWidth(n,e.bitWidth),zn.endDecimal(n)}visitDate(e,n){return If.startDate(n),If.addUnit(n,e.unit),If.endDate(n)}visitTime(e,n){return Ai.startTime(n),Ai.addUnit(n,e.unit),Ai.addBitWidth(n,e.bitWidth),Ai.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return Ti.startTimestamp(n),Ti.addUnit(n,e.unit),i!==void 0&&Ti.addTimezone(n,i),Ti.endTimestamp(n)}visitInterval(e,n){return xr.startInterval(n),xr.addUnit(n,e.unit),xr.endInterval(n)}visitList(e,n){return Ca.startList(n),Ca.endList(n)}visitStruct(e,n){return Na.startStruct_(n),Na.endStruct_(n)}visitUnion(e,n){qn.startTypeIdsVector(n,e.typeIds.length);const i=qn.createTypeIdsVector(n,e.typeIds);return qn.startUnion(n),qn.addMode(n,e.mode),qn.addTypeIds(n,i),qn.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return is.startDictionaryEncoding(n),is.addId(n,new Iq(e.id,0)),is.addIsOrdered(n,e.isOrdered),i!==void 0&&is.addIndexType(n,i),is.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return _r.startFixedSizeBinary(n),_r.addByteWidth(n,e.byteWidth),_r.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return vr.startFixedSizeList(n),vr.addListSize(n,e.listSize),vr.endFixedSizeList(n)}visitMap(e,n){return Af.startMap(n),Af.addKeysSorted(n,e.keysSorted),Af.endMap(n)}}const w0=new Aq;function Tq(t,e=new Map){return new de(Cq(t,e),Cf(t.customMetadata),e)}function N4(t){return new hi(t.count,O4(t.columns),F4(t.columns))}function kq(t){return new Pr(N4(t.data),t.id,t.isDelta)}function Cq(t,e){return(t.fields||[]).filter(Boolean).map(n=>ue.fromJSON(n,e))}function nw(t,e){return(t.children||[]).filter(Boolean).map(n=>ue.fromJSON(n,e))}function O4(t){return(t||[]).reduce((e,n)=>[...e,new co(n.count,Mq(n.VALIDITY)),...O4(n.children)],[])}function F4(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const r=t[n];r.VALIDITY&&e.push(new Tr(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new Tr(e.length,r.TYPE.length)),r.OFFSET&&e.push(new Tr(e.length,r.OFFSET.length)),r.DATA&&e.push(new Tr(e.length,r.DATA.length)),e=F4(r.children,e)}return e}function Mq(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function Nq(t,e){let n,i,r,s,a,c;return!e||!(s=t.dictionary)?(a=rw(t,nw(t,e)),r=new ue(t.name,a,t.nullable,Cf(t.customMetadata))):e.has(n=s.id)?(i=(i=s.indexType)?iw(i):new Zs,c=new ea(e.get(n),i,n,s.isOrdered),r=new ue(t.name,c,t.nullable,Cf(t.customMetadata))):(i=(i=s.indexType)?iw(i):new Zs,e.set(n,a=rw(t,nw(t,e))),c=new ea(a,i,n,s.isOrdered),r=new ue(t.name,c,t.nullable,Cf(t.customMetadata))),r||null}function Cf(t){return new Map(Object.entries(t||{}))}function iw(t){return new Fn(t.isSigned,t.bitWidth)}function rw(t,e){const n=t.type.name;switch(n){case"NONE":return new ys;case"null":return new ys;case"binary":return new ju;case"utf8":return new rc;case"bool":return new zu;case"list":return new oc((e||[])[0]);case"struct":return new un(e||[]);case"struct_":return new un(e||[])}switch(n){case"int":{const i=t.type;return new Fn(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new ta(ln[i.precision])}case"decimal":{const i=t.type;return new Ah(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new sc(er[i.unit])}case"time":{const i=t.type;return new bs(Qt[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new Th(Qt[i.unit],i.timezone)}case"interval":{const i=t.type;return new ac(Lr[i.unit])}case"union":{const i=t.type;return new qu(fi[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new kh(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new cc(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new Wu((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var to=ls,Oq=a4,Fq=uc;class Nn{constructor(e,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new Nn(0,ai.V4,n);return i._createHeader=Dq(e,n),i}static decode(e){e=new Fq(oe(e));const n=Cs.getRootAsMessage(e),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Nn(i,r,s);return a._createHeader=Rq(n,s),a}static encode(e){const n=new Oq;let i=-1;return e.isSchema()?i=de.encode(n,e.header()):e.isRecordBatch()?i=hi.encode(n,e.header()):e.isDictionaryBatch()&&(i=Pr.encode(n,e.header())),Cs.startMessage(n),Cs.addVersion(n,ai.V4),Cs.addHeader(n,i),Cs.addHeaderType(n,e.headerType),Cs.addBodyLength(n,new to(e.bodyLength,0)),Cs.finishMessageBuffer(n,Cs.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof de)return new Nn(0,ai.V4,he.Schema,e);if(e instanceof hi)return new Nn(n,ai.V4,he.RecordBatch,e);if(e instanceof Pr)return new Nn(n,ai.V4,he.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===he.Schema}isRecordBatch(){return this.headerType===he.RecordBatch}isDictionaryBatch(){return this.headerType===he.DictionaryBatch}}class hi{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Pr{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Tr{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class co{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Dq(t,e){return()=>{switch(e){case he.Schema:return de.fromJSON(t);case he.RecordBatch:return hi.fromJSON(t);case he.DictionaryBatch:return Pr.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${he[e]}, type: ${e} }`)}}function Rq(t,e){return()=>{switch(e){case he.Schema:return de.decode(t.header(new fr));case he.RecordBatch:return hi.decode(t.header(new Qr),t.version());case he.DictionaryBatch:return Pr.decode(t.header(new Eo),t.version())}throw new Error(`Unrecognized Message type: { name: ${he[e]}, type: ${e} }`)}}ue.encode=Hq;ue.decode=qq;ue.fromJSON=Nq;de.encode=Wq;de.decode=Lq;de.fromJSON=Tq;hi.encode=Yq;hi.decode=Bq;hi.fromJSON=N4;Pr.encode=Gq;Pr.decode=Pq;Pr.fromJSON=kq;co.encode=Kq;co.decode=Vq;Tr.encode=Xq;Tr.decode=Uq;function Lq(t,e=new Map){const n=zq(t,e);return new de(n,Mf(t),e)}function Bq(t,e=ai.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new hi(t.length(),$q(t),jq(t,e))}function Pq(t,e=ai.V4){return new Pr(hi.decode(t.data(),e),t.id(),t.isDelta())}function Uq(t){return new Tr(t.offset(),t.length())}function Vq(t){return new co(t.length(),t.nullCount())}function $q(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=co.decode(n));return e}function jq(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<ai.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Tr.decode(i));return n}function zq(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=ue.decode(i,e));return n}function sw(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=ue.decode(i,e));return n}function qq(t,e){let n,i,r,s,a,c;return!e||!(c=t.dictionary())?(r=ow(t,sw(t,e)),i=new ue(t.name(),r,t.nullable(),Mf(t))):e.has(n=c.id().low)?(s=(s=c.indexType())?aw(s):new Zs,a=new ea(e.get(n),s,n,c.isOrdered()),i=new ue(t.name(),a,t.nullable(),Mf(t))):(s=(s=c.indexType())?aw(s):new Zs,e.set(n,r=ow(t,sw(t,e))),a=new ea(r,s,n,c.isOrdered()),i=new ue(t.name(),a,t.nullable(),Mf(t))),i||null}function Mf(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&(i=n.key())!=null&&e.set(i,n.value());return e}function aw(t){return new Fn(t.isSigned(),t.bitWidth())}function ow(t,e){const n=t.typeType();switch(n){case Fe.NONE:return new ys;case Fe.Null:return new ys;case Fe.Binary:return new ju;case Fe.Utf8:return new rc;case Fe.Bool:return new zu;case Fe.List:return new oc((e||[])[0]);case Fe.Struct_:return new un(e||[])}switch(n){case Fe.Int:{const i=t.type(new si);return new Fn(i.isSigned(),i.bitWidth())}case Fe.FloatingPoint:{const i=t.type(new wr);return new ta(i.precision())}case Fe.Decimal:{const i=t.type(new zn);return new Ah(i.scale(),i.precision(),i.bitWidth())}case Fe.Date:{const i=t.type(new If);return new sc(i.unit())}case Fe.Time:{const i=t.type(new Ai);return new bs(i.unit(),i.bitWidth())}case Fe.Timestamp:{const i=t.type(new Ti);return new Th(i.unit(),i.timezone())}case Fe.Interval:{const i=t.type(new xr);return new ac(i.unit())}case Fe.Union:{const i=t.type(new qn);return new qu(i.mode(),i.typeIdsArray()||[],e||[])}case Fe.FixedSizeBinary:{const i=t.type(new _r);return new kh(i.byteWidth())}case Fe.FixedSizeList:{const i=t.type(new vr);return new cc(i.listSize(),(e||[])[0])}case Fe.Map:{const i=t.type(new Af);return new Wu((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Fe[n]}" (${n})`)}function Wq(t,e){const n=e.fields.map(s=>ue.encode(t,s));fr.startFieldsVector(t,n.length);const i=fr.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?fr.createCustomMetadataVector(t,[...e.metadata].map(([s,a])=>{const c=t.createString(`${s}`),u=t.createString(`${a}`);return Ke.startKeyValue(t),Ke.addKey(t,c),Ke.addValue(t,u),Ke.endKeyValue(t)})):-1;return fr.startSchema(t),fr.addFields(t,i),fr.addEndianness(t,Jq?fc.Little:fc.Big),r!==-1&&fr.addCustomMetadata(t,r),fr.endSchema(t)}function Hq(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;wt.isDictionary(s)?(a=s.dictionary.typeId,r=w0.visit(s,t),i=w0.visit(s.dictionary,t)):i=w0.visit(s,t);const c=(s.children||[]).map(f=>ue.encode(t,f)),u=xi.createChildrenVector(t,c),l=e.metadata&&e.metadata.size>0?xi.createCustomMetadataVector(t,[...e.metadata].map(([f,h])=>{const d=t.createString(`${f}`),p=t.createString(`${h}`);return Ke.startKeyValue(t),Ke.addKey(t,d),Ke.addValue(t,p),Ke.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),xi.startField(t),xi.addType(t,i),xi.addTypeType(t,a),xi.addChildren(t,u),xi.addNullable(t,!!e.nullable),n!==-1&&xi.addName(t,n),r!==-1&&xi.addDictionary(t,r),l!==-1&&xi.addCustomMetadata(t,l),xi.endField(t)}function Yq(t,e){const n=e.nodes||[],i=e.buffers||[];Qr.startNodesVector(t,n.length);for(const a of n.slice().reverse())co.encode(t,a);const r=t.endVector();Qr.startBuffersVector(t,i.length);for(const a of i.slice().reverse())Tr.encode(t,a);const s=t.endVector();return Qr.startRecordBatch(t),Qr.addLength(t,new to(e.length,0)),Qr.addNodes(t,r),Qr.addBuffers(t,s),Qr.endRecordBatch(t)}function Gq(t,e){const n=hi.encode(t,e.data);return Eo.startDictionaryBatch(t),Eo.addId(t,new to(e.id,0)),Eo.addIsDelta(t,e.isDelta),Eo.addData(t,n),Eo.endDictionaryBatch(t)}function Kq(t,e){return M4.createFieldNode(t,new to(e.length,0),new to(e.nullCount,0))}function Xq(t,e){return C4.createBuffer(t,new to(e.offset,0),new to(e.length,0))}const Jq=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),T1=t=>`Expected ${he[t]} Message in stream, but was null or length 0.`,k1=t=>`Header pointer of flatbuffer-encoded ${he[t]} Message is null or length 0.`,D4=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,R4=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class L4{constructor(e){this.source=e instanceof Bh?e:new Bh(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Re:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(T1(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=oe(this.source.read(e));if(n.byteLength<e)throw new Error(R4(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=he.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(k1(n));return r}readMetadataLength(){const e=this.source.read(cp),n=e&&new uc(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return Re;if(n.byteLength<e)throw new Error(D4(e,n.byteLength));return{done:!1,value:Nn.decode(n)}}}class Qq{constructor(e,n){this.source=e instanceof dc?e:zI(e)?new Ph(e,n):new dc(e)}[Symbol.asyncIterator](){return this}next(){return vt(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Re:e})}throw(e){return vt(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return vt(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return vt(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(T1(e));return n.value})}readMessageBody(e){return vt(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=oe(yield this.source.read(e));if(n.byteLength<e)throw new Error(R4(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return vt(this,void 0,void 0,function*(){const n=he.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(k1(n));return r})}readMetadataLength(){return vt(this,void 0,void 0,function*(){const e=yield this.source.read(cp),n=e&&new uc(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return vt(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Re;if(n.byteLength<e)throw new Error(D4(e,n.byteLength));return{done:!1,value:Nn.decode(n)}})}}class Zq extends L4{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof Zv?e:new Zv(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Nn.fromJSON(e.schema,he.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Nn.fromJSON(n,he.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Nn.fromJSON(n,he.RecordBatch)}}return this._body=[],Re}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(T1(e));return n.value}readSchema(){const e=he.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(k1(e));return i}}const cp=4,sg="ARROW1",Yu=new Uint8Array(sg.length);for(let t=0;t<sg.length;t+=1)Yu[t]=sg.codePointAt(t);function C1(t,e=0){for(let n=-1,i=Yu.length;++n<i;)if(Yu[n]!==t[e+n])return!1;return!0}const El=Yu.length,B4=El+cp,tW=El*2+cp;class Di extends v1{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Za(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ii.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ii.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Di?e:Gm(e)?rW(e):zI(e)?oW(e):Za(e)?(()=>vt(this,void 0,void 0,function*(){return yield Di.from(yield e)}))():qI(e)||Vy(e)||WI(e)||Cc(e)?aW(new dc(e)):sW(new Bh(e))}static readAll(e){return e instanceof Di?e.isSync()?cw(e):uw(e):Gm(e)||ArrayBuffer.isView(e)||_l(e)||jI(e)?cw(e):uw(e)}}class zh extends Di{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ar(this,arguments,function*(){yield Rt(yield*Ef(Pa(this[Symbol.iterator]())))})}}class qh extends Di{constructor(e){super(e),this._impl=e}readAll(){var e,n;return vt(this,void 0,void 0,function*(){const i=new Array;try{for(var r=Pa(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class P4 extends zh{constructor(e){super(e),this._impl=e}}class eW extends qh{constructor(e){super(e),this._impl=e}}class U4{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),r=Gt({type:new un(this.schema.fields),length:e.length,children:i});return new Wn(this.schema,r)}_loadDictionaryBatch(e,n){const{id:i,isDelta:r}=e,{dictionaries:s,schema:a}=this,c=s.get(i);if(r||!c){const u=a.dictionaries.get(i),l=this._loadVectors(e.data,n,[u]);return(c&&r?c.concat(new ee(l)):new ee(l)).memoize()}return c.memoize()}_loadVectors(e,n,i){return new u4(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class Wh extends U4{constructor(e,n){super(n),this._reader=Gm(e)?new Zq(this._handle=e):new L4(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=$4(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Re}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Re}next(){if(this.closed)return Re;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new A1(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Hh extends U4{constructor(e,n){super(n),this._reader=new Qq(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return vt(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return vt(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=$4(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return vt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Re})}return(e){return vt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Re})}next(){return vt(this,void 0,void 0,function*(){if(this.closed)return Re;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new A1(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return vt(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class V4 extends Wh{constructor(e,n){super(e instanceof tw?e:new tw(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(he.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(he.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),c=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,c)}}}_readFooter(){const{_handle:e}=this,n=e.size-B4,i=e.readInt32(n),r=e.readAt(n-i,i);return Hu.decode(r)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class nW extends Hh{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(e instanceof Ph?e:new Ph(e,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return vt(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return vt(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(he.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(e){var n;return vt(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(he.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),c=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,c)}}})}_readFooter(){return vt(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-B4,i=yield e.readInt32(n),r=yield e.readAt(n-i,i);return Hu.decode(r)})}_readNextMessageAndValidate(e){return vt(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class iW extends Wh{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new Yz(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function $4(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*cw(t){const e=Di.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function uw(t){return Ar(this,arguments,function*(){const n=yield Rt(Di.from(t));try{if(!(yield Rt(n.open({autoDestroy:!1}))).closed)do yield yield Rt(n);while(!(yield Rt(n.reset().open())).closed)}finally{yield Rt(n.cancel())}})}function rW(t){return new zh(new iW(t))}function sW(t){const e=t.peek(El+7&-8);return e&&e.byteLength>=4?C1(e)?new P4(new V4(t.read())):new zh(new Wh(t)):new zh(new Wh(function*(){}()))}function aW(t){return vt(this,void 0,void 0,function*(){const e=yield t.peek(El+7&-8);return e&&e.byteLength>=4?C1(e)?new P4(new V4(yield t.read())):new qh(new Hh(t)):new qh(new Hh(function(){return Ar(this,arguments,function*(){})}()))})}function oW(t){return vt(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Ph(t,e);return e>=tW&&C1(yield n.readAt(0,El+7&-8))?new eW(new nW(n)):new qh(new Hh(n))})}class qe extends Kt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Wn?s.data.children:s.data),i=new qe;return i.visitMany(n(e)),i}visit(e){if(e instanceof ee)return this.visitMany(e.data),this;const{type:n}=e;if(!wt.isDictionary(n)){const{length:i,nullCount:r}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");wt.isNull(n)||Xi.call(this,r<=0?new Uint8Array(0):m1(e.offset,i,e.nullBitmap)),this.nodes.push(new co(i,r))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Xi(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Tr(this._byteLength,e)),this._byteLength+=e,this}function cW(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(Xi.call(this,i),e.mode===fi.Sparse)return ag.call(this,t);if(e.mode===fi.Dense){if(t.offset<=0)return Xi.call(this,r),ag.call(this,t);{const s=i.reduce((f,h)=>Math.max(f,h),i[0]),a=new Int32Array(s+1),c=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=jy(-r[0],n,r);for(let f,h,d=-1;++d<n;)(h=c[f=i[d]])===-1&&(h=c[f]=l[f]),u[d]=l[d]-h,++a[f];Xi.call(this,u);for(let f,h=-1,d=e.children.length;++h<d;)if(f=t.children[h]){const p=e.typeIds[h],m=Math.min(n,a[p]);this.visit(f.slice(c[p],m))}}}return this}function uW(t){let e;return t.nullCount>=t.length?Xi.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Xi.call(this,m1(t.offset,t.length,e)):Xi.call(this,Ch(t.values))}function ba(t){return Xi.call(this,t.values.subarray(0,t.length*t.stride))}function j4(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],s=i[e],a=Math.min(s-r,n.byteLength-r);return Xi.call(this,jy(-i[0],e,i)),Xi.call(this,n.subarray(r,r+a)),this}function M1(t){const{length:e,valueOffsets:n}=t;return n&&Xi.call(this,jy(n[0],e,n)),this.visit(t.children[0])}function ag(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}qe.prototype.visitBool=uW;qe.prototype.visitInt=ba;qe.prototype.visitFloat=ba;qe.prototype.visitUtf8=j4;qe.prototype.visitBinary=j4;qe.prototype.visitFixedSizeBinary=ba;qe.prototype.visitDate=ba;qe.prototype.visitTimestamp=ba;qe.prototype.visitTime=ba;qe.prototype.visitDecimal=ba;qe.prototype.visitList=M1;qe.prototype.visitStruct=ag;qe.prototype.visitUnion=cW;qe.prototype.visitInterval=ba;qe.prototype.visitFixedSizeList=M1;qe.prototype.visitMap=M1;class z4 extends v1{constructor(e){super(),this._position=0,this._started=!1,this._sink=new kf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Qn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Za(e)?e.then(n=>this.writeAll(n)):Cc(e)?D1(this,e):F1(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof kf?this._sink=e:(this._sink=new kf,e&&rj(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&sj(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!ng(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof _s&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Wn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!ng(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Wn?e instanceof A1||this._writeRecordBatch(e):e instanceof _s?this.writeAll(e.batches):_l(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,r=Nn.encode(e),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,c=s+a+i&~i,u=c-s-a;return e.headerType===he.RecordBatch?this._recordBatchBlocks.push(new na(c,e.bodyLength,this._position)):e.headerType===he.DictionaryBatch&&this._dictionaryBlocks.push(new na(c,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(c-a)),s>0&&this._write(r),this._writePadding(u)}_write(e){if(this._started){const n=oe(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Nn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Yu)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=qe.assemble(e),a=new hi(e.numRows,i,r),c=Nn.from(a,n);return this._writeDictionaries(e)._writeMessage(c)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,i=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:c}=qe.assemble(new ee([e])),u=new hi(e.length,s,a),l=new Pr(u,n,i),f=Nn.from(l,r);return this._writeMessage(f)._writeBodyBuffers(c)}_writeBodyBuffers(e){let n,i,r;for(let s=-1,a=e.length;++s<a;)(n=e[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){for(let[n,i]of e.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class N1 extends z4{static writeAll(e,n){const i=new N1(n);return Za(e)?e.then(r=>i.writeAll(r)):Cc(e)?D1(i,e):F1(i,e)}}class O1 extends z4{static writeAll(e){const n=new O1;return Za(e)?e.then(i=>n.writeAll(i)):Cc(e)?D1(n,e):F1(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=Hu.encode(new Hu(e,ai.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function F1(t,e){let n=e;e instanceof _s&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function D1(t,e){var n,i,r,s;return vt(this,void 0,void 0,function*(){try{for(n=Pa(e);i=yield n.next(),!i.done;){const a=i.value;t.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return t.finish()})}function q4(t,e="stream"){return(e==="stream"?N1:O1).writeAll(t).toUint8Array(!0)}var lW=Object.create,W4=Object.defineProperty,fW=Object.getOwnPropertyDescriptor,hW=Object.getOwnPropertyNames,dW=Object.getPrototypeOf,pW=Object.prototype.hasOwnProperty,mW=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gW=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of hW(e))!pW.call(t,r)&&r!==n&&W4(t,r,{get:()=>e[r],enumerable:!(i=fW(e,r))||i.enumerable});return t},yW=(t,e,n)=>(n=t!=null?lW(dW(t)):{},gW(e||!t||!t.__esModule?W4(n,"default",{value:t,enumerable:!0}):n,t)),bW=mW((t,e)=>{e.exports=Worker}),_W=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(_W||{}),vW=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(vW||{}),wW=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(wW||{}),xW=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(xW||{}),SW=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(SW||{}),EW=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},IW=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(IW||{}),AW=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=Di.from(e);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new _s(n)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let n=new H4(this._bindings,this._conn,e),i=await Di.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new TW(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=q4(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},H4=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},TW=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=Di.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new _s(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new H4(this.bindings,this.connectionId,e),i=await Di.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},kW=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(kW||{}),CW=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(CW||{}),Zt=class{constructor(e,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=n,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function Nf(t){switch(t.typeId){case A.Binary:return{sqlType:"binary"};case A.Bool:return{sqlType:"bool"};case A.Date:return{sqlType:"date"};case A.DateDay:return{sqlType:"date32[d]"};case A.DateMillisecond:return{sqlType:"date64[ms]"};case A.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case A.Float:return{sqlType:"float"};case A.Float16:return{sqlType:"float16"};case A.Float32:return{sqlType:"float32"};case A.Float64:return{sqlType:"float64"};case A.Int:return{sqlType:"int32"};case A.Int16:return{sqlType:"int16"};case A.Int32:return{sqlType:"int32"};case A.Int64:return{sqlType:"int64"};case A.Uint16:return{sqlType:"uint16"};case A.Uint32:return{sqlType:"uint32"};case A.Uint64:return{sqlType:"uint64"};case A.Uint8:return{sqlType:"uint8"};case A.IntervalDayTime:return{sqlType:"interval[dt]"};case A.IntervalYearMonth:return{sqlType:"interval[m]"};case A.List:return{sqlType:"list",valueType:Nf(t.valueType)};case A.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case A.Null:return{sqlType:"null"};case A.Utf8:return{sqlType:"utf8"};case A.Struct:return{sqlType:"struct",fields:t.children.map(e=>og(e.name,e.type))};case A.Map:{let e=t;return{sqlType:"map",keyType:Nf(e.keyType),valueType:Nf(e.valueType)}}case A.Time:return{sqlType:"time[s]"};case A.TimeMicrosecond:return{sqlType:"time[us]"};case A.TimeMillisecond:return{sqlType:"time[ms]"};case A.TimeNanosecond:return{sqlType:"time[ns]"};case A.TimeSecond:return{sqlType:"time[s]"};case A.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case A.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case A.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case A.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case A.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error(`unsupported arrow type: ${t.toString()}`)}function og(t,e){let n=Nf(e);return n.name=t,n}var MW=new TextEncoder,NW=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){let e=t.data;switch(e.type){case"LOG":{this._logger.log(e.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(e.data);return}}let n=this._pendingRequests.get(e.requestId);if(!n){console.warn(`unassociated response: [${e.requestId}, ${e.type.toString()}]`);return}if(this._pendingRequests.delete(e.requestId),e.type=="ERROR"){let i=new Error(e.data.message);i.name=e.data.name,i.stack=e.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(e.type=="OK"){n.promiseResolver(e.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],e.type=="OK"){n.promiseResolver(e.data);return}break;case"GLOB_FILE_INFOS":if(e.type=="FILE_INFOS"){n.promiseResolver(e.data);return}break;case"GET_VERSION":if(e.type=="VERSION_STRING"){n.promiseResolver(e.data);return}break;case"GET_FEATURE_FLAGS":if(e.type=="FEATURE_FLAGS"){n.promiseResolver(e.data);return}break;case"GET_TABLE_NAMES":if(e.type=="TABLE_NAMES"){n.promiseResolver(e.data);return}break;case"TOKENIZE":if(e.type=="SCRIPT_TOKENS"){n.promiseResolver(e.data);return}break;case"COPY_FILE_TO_BUFFER":if(e.type=="FILE_BUFFER"){n.promiseResolver(e.data);return}break;case"EXPORT_FILE_STATISTICS":if(e.type=="FILE_STATISTICS"){n.promiseResolver(e.data);return}break;case"CONNECT":if(e.type=="CONNECTION_INFO"){n.promiseResolver(e.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(e.type=="QUERY_RESULT"){n.promiseResolver(e.data);return}break;case"SEND_PREPARED":if(e.type=="QUERY_RESULT_HEADER"){n.promiseResolver(e.data);return}break;case"START_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"POLL_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],e.type=="SUCCESS"){n.promiseResolver(e.data);return}break;case"FETCH_QUERY_RESULTS":if(e.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(e.data);return}break;case"CREATE_PREPARED":if(e.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(e.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${e.type.toString()}`))}onError(t){console.error(t),console.error(`error in duckdb worker: ${t.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let t=new Zt("RESET",null);return await this.postTask(t)}async ping(){let t=new Zt("PING",null);await this.postTask(t)}async dropFile(t){let e=new Zt("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new Zt("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new Zt("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new Zt("INSTANTIATE",[t,e]);return await this.postTask(i)}async getVersion(){let t=new Zt("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new Zt("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new Zt("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new Zt("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new Zt("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new AW(this,t)}async disconnect(t){let e=new Zt("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let n=new Zt("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e){let n=new Zt("START_PENDING_QUERY",[t,e]);return await this.postTask(n)}async pollPendingQuery(t){let e=new Zt("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new Zt("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new Zt("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new Zt("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new Zt("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new Zt("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let i=new Zt("RUN_PREPARED",[t,e,n]);return await this.postTask(i)}async sendPrepared(t,e,n){let i=new Zt("SEND_PREPARED",[t,e,n]);return await this.postTask(i)}async globFiles(t){let e=new Zt("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=MW.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,i){e===void 0&&(e=t);let r=new Zt("REGISTER_FILE_URL",[t,e,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(t){let e=new Zt("REGISTER_FILE_BUFFER",[t,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(t,e){let n=new Zt("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,i){let r=new Zt("REGISTER_FILE_HANDLE",[t,e,n,i]);await this.postTask(r,[])}async collectFileStatistics(t,e){let n=new Zt("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new Zt("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new Zt("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new Zt("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let i=new Zt("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(i,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(og(s,a))}n.columnsFlat=r,delete n.columns}let i=new Zt("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(i)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(og(s,a))}n.columnsFlat=r,delete n.columns}let i=new Zt("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(i)}},OW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),FW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),DW=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),RW=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),LW={name:"@duckdb/duckdb-wasm",version:"1.26.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},R1=LW.version.split(".");R1[0];R1[1];R1[2];var BW=()=>typeof navigator>"u",x0=null,S0=null,E0=null,I0=null,A0=null;async function PW(){return x0==null&&(x0=typeof BigInt64Array<"u"),S0==null&&(S0=await FW()),E0==null&&(E0=await RW()),I0==null&&(I0=await DW()),A0==null&&(A0=await OW()),{bigInt64Array:x0,crossOriginIsolated:BW()||globalThis.crossOriginIsolated||!1,wasmExceptions:S0,wasmSIMD:I0,wasmThreads:E0,wasmBulkMemory:A0}}async function UW(t){let e=await PW();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}yW(bW());function VW(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}VW();var $W=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))($W||{});const jW=""+new URL("../assets/duckdb-mvp.a4aa3c03.wasm",import.meta.url).href,zW=""+new URL("../assets/duckdb-browser-mvp.worker.91331f4b.js",import.meta.url).href,qW=""+new URL("../assets/duckdb-eh.13ec0755.wasm",import.meta.url).href,WW=""+new URL("../assets/duckdb-browser-eh.worker.80bdeff3.js",import.meta.url).href;class HW extends sr{constructor(e){super(),this.sources=[],this.db=null,this.conn=null,e.sources?this.sources.push.apply(this.sources,e.sources):e.name&&this.sources.push(e)}register(e){this.sources.push(e)}async query(e){return await this.conn.query(e)}async init(){const n=await UW({mvp:{mainModule:jW,mainWorker:zW},eh:{mainModule:qW,mainWorker:WW}}),i=new Worker(n.mainWorker),r=new EW;this.db=new NW(r,i),await this.db.instantiate(n.mainModule,n.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(e){let n=e.name;if(e.csv)await this.db.registerFileText(n,e.csv),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0});else if(e.url){let r=await(await fetch(e.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(n,s),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0})}else if(e.parquet){const i=`${gk}/${e.parquet}`;console.log("parquet_name and registration path:",e.parquet,i),await this.db.registerFileURL(e.parquet,i,4,!1);const r=`CREATE TABLE ${e.name} AS SELECT * FROM parquet_scan(${e.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(e,...n){for(const i of e){const r=i.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(c=>c.name),console.debug("duckdb.execute",r,a,...n),this.emit("data",a,...n),this.emit("debug",a),a}}}var Os=(t=>(t.LITERAL="literal",t.AST="ast",t.LIST="list",t.ANY="any",t.OPT="opt",t.FIXEDMULTI="fixedmulti",t.MULTI="multi",t))(Os||{});let lw=Ig(t=>t.length>0);class YW{constructor(e){this.binding={},this.spec={},this.spec=e}update(e){return this.binding=od(this.binding,e),this}snapshot(){return this.binding}restoreSnapshot(e){this.binding=e}toSQL(){return cg(this.binding,this.spec)}}function cg(t,e){let n=e.children??[],i=uC(cg,[t]),r=[],s;switch(e==null?void 0:e.type){case Os.LITERAL:return e.value;case Os.AST:return r=n.map(i),lw(r).join("");case Os.LIST:return r=n.map(i),lw(r).join(e.delim);case Os.ANY:if(s=t[e.id]??e.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case Os.OPT:return s=t[e.id]??e.default??0,j5(s,[1,"selected"])?i(n[0]):"";case Os.FIXEDMULTI:case Os.MULTI:let c=t[e.id]??e.default??[];return we(Array,c)||(c=[c]),c.map(u=>cg(u,n[0])).join(e.delim??"");default:return""}}class GW extends sr{constructor(e){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=e,this.dt=new YW(e.difftree),this.backend=we(String,e.backend)?gf(Hm)[e.backend]:e.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}snapshot(){return this.dt.snapshot()}async _execute(e,n){let i=e[0]??{};const r=this.dt.update(i).toSQL();if(console.log("ClientDT.execute",r,i),this.emit("debug",r),this.backend)return this.backend.execute(r,n)}}class KW extends sr{constructor(e){super(),this.q=[],this.q=e.data??[]}async execute(e,n){this.emit("data",e??this.q,n)}}class XW extends sr{constructor(e){super();let n=e.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),R5(r)}}async _execute(e,...n){this.emit("data",ux(this.gen,10),...n)}}class Y4 extends sr{constructor(e){super(),this.backend=e.backend,this.query=e.query,this.name=e.name,this.params=e.defaults??{}}snapshot(){return xu(this.params)}restoreSnapshot(e){this.params=e}prepareQuery(e,n){let i=e;return $n((r,s)=>{i=i.replaceAll(`var(${s})`,r)},n),i}async _execute(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.params=od(this.params,r)});let n=this.prepareQuery(this.query,this.params),i=await this.backend._execute([{q:n}],this.name);return this.emit("data",i,this.name),i}}const ce=Array.isArray;function ti(t){return t!=null?ce(t)?t:[t]:[]}function JW(t=0,e=1/0){return`${fw(t)} < row_number() && row_number() <= ${fw(e)}`}function fw(t){return t<0?`count() + ${t}`:t}class G4{constructor(e){e&&(this._params=e)}params(e){return arguments.length?(e&&(this._params={...this._params,...e}),this):this._params}reify(e){return this.__reify(this,e)}count(e){return this.__count(this,e)}derive(e,n){return this.__derive(this,e,n)}filter(e){return this.__filter(this,e)}slice(e,n){return this.filter(JW(e,n)).reify()}groupby(...e){return this.__groupby(this,e.flat())}orderby(...e){return this.__orderby(this,e.flat())}relocate(e,n){return this.__relocate(this,ti(e),n)}rename(...e){return this.__rename(this,e.flat())}rollup(e){return this.__rollup(this,e)}sample(e,n){return this.__sample(this,e,n)}select(...e){return this.__select(this,e.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...e){return this.__dedupe(this,e.flat())}impute(e,n){return this.__impute(this,e,n)}fold(e,n){return this.__fold(this,e,n)}pivot(e,n,i){return this.__pivot(this,e,n,i)}spread(e,n){return this.__spread(this,e,n)}unroll(e,n){return this.__unroll(this,e,n)}lookup(e,n,...i){return this.__lookup(this,e,n,i.flat())}join(e,n,i,r){return this.__join(this,e,n,i,r)}join_left(e,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,e,n,i,s)}join_right(e,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,e,n,i,s)}join_full(e,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,e,n,i,s)}cross(e,n,i){return this.__cross(this,e,n,i)}semijoin(e,n){return this.__semijoin(this,e,n)}antijoin(e,n){return this.__antijoin(this,e,n)}concat(...e){return this.__concat(this,e.flat())}union(...e){return this.__union(this,e.flat())}intersect(...e){return this.__intersect(this,e.flat())}except(...e){return this.__except(this,e.flat())}}function Vt(t){throw Error(t)}function Dn(t){return typeof t=="number"}function Me(t){return typeof t=="function"}function up(t,e){const n=Array(t);if(Me(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}class QW extends G4{constructor(e,n,i,r,s,a,c){super(c),this._names=Object.freeze(e),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(e){Vt("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const e=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${e}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(e){return e?this._names.filter(e):this._names.slice()}columnName(e){return this._names[e]}columnIndex(e){return this._names.indexOf(e)}columnArray(e,n){return this.array(e,n)}array(e,n){Vt("Not implemented")}*values(e){const n=this.getter(e),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(e,n=0){Vt("Not implemented")}getter(e){Vt("Not implemented")}objects(e){Vt("Not implemented")}object(e){Vt("Not implemented")}[Symbol.iterator](){Vt("Not implemented")}print(e={}){Dn(e)?e={limit:e}:e.limit==null&&(e.limit=10);const n=this.objects({...e,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(e=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let c=s.next(0);c>=0;c=s.next(c+1))i[++a]=c;else for(let c=0;c<n;++c)i[++a]=c;if(e&&r){const c=this._order,u=this._data;i.sort((l,f)=>c(l,f,u))}return(e||!r)&&(this._index=i),i}partitions(e=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(e)];const{keys:n,size:i}=this._group,r=up(i,()=>[]),s=this._index,a=this.mask(),c=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<c;++u)l=s[u],r[n[l]].push(l);else if(a)for(let u=a.next(0);u>=0;u=a.next(u+1))r[n[u]].push(u);else for(let u=0;u<c;++u)r[n[u]].push(u);if(e&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let f=0;f<i;++f)r[f].sort((h,d)=>u(h,d,l))}return(e||!this.isOrdered())&&(this._partitions=r),r}scan(e,n,i=1/0,r=0){const s=this._mask,a=this._nrows,c=this._data;let u=r||0;if(u>a)return;const l=Math.min(a,u+i),f=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),d=this._data;for(;u<l;++u)e(h[u],d,f)}else if(s){let h=l-u+1;for(u=s.nth(u);--h&&u>-1;u=s.next(u+1))e(u,c,f)}else for(;u<l;++u)e(u,c,f)}slice(e=0,n=1/0){if(this.isGrouped())return super.slice(e,n);const i=[],r=this.numRows();return e=Math.max(0,e+(e<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-e,e),this.reify(i)}reduce(e){return this.__reduce(this,e)}}let ZW=class{constructor(e){this.data=e}get length(){return this.data.length}get(e){return this.data[e]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},tH=function(t){return t&&Me(t.get)?t:new ZW(t)};function vs(t){return t instanceof Date}function xn(t){return t===Object(t)}function Yh(t){return t instanceof RegExp}function pn(t){return typeof t=="string"}function eH(t,e){const n=i=>Vt(`Illegal argument type: ${i||typeof t}`);return t instanceof Map?hw(t.entries(),e):vs(t)?n("Date"):Yh(t)?n("RegExp"):pn(t)?n():ce(t)?nH(t,e):Me(t[Symbol.iterator])?iH(t,e):xn(t)?hw(Object.entries(t),e):n()}function hw(t,e=["key","value"]){const n=[],i=[];for(const[s,a]of t)n.push(s),i.push(a);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}function nH(t,e){const n=t.length,i={},r=s=>i[s]=Array(n);if(n){e=e||Object.keys(t[0]);const s=e.map(r),a=s.length;for(let c=0;c<n;++c){const u=t[c];for(let l=0;l<a;++l)s[l][c]=u[e[l]]}}else e&&e.forEach(r);return i}function iH(t,e){const n={},i=a=>n[a]=[];let r,s;for(const a of t){r||(e=e||Object.keys(a),r=e.map(i),s=r.length);for(let c=0;c<s;++c)r[c].push(a[e[c]])}return!r&&e&&e.forEach(i),n}const{hasOwnProperty:rH}=Object.prototype;function nr(t,e){return rH.call(t,e)}function pi(t){return t?new dw({...t.data()},t.columnNames()):new dw}class dw{constructor(e,n){this.data=e||{},this.names=n||[]}add(e,n){return this.has(e)||this.names.push(e+""),this.data[e]=n}has(e){return nr(this.data,e)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(e){return this.groups=e,this}}const ie=void 0,sH=Object.getPrototypeOf(Int8Array);function Il(t){return t instanceof sH}function Fa(t){return ce(t)||Il(t)}function Ki(t){return t!=null&&t===t}const Jc=t=>Fa(t)||pn(t),aH={compact:t=>Fa(t)?t.filter(e=>Ki(e)):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>Jc(t)?t.includes(e,n):!1,indexof:(t,e)=>Jc(t)?t.indexOf(e):-1,join:(t,e)=>Fa(t)?t.join(e):ie,lastindexof:(t,e)=>Jc(t)?t.lastIndexOf(e):-1,length:t=>Jc(t)?t.length:0,pluck:(t,e)=>Fa(t)?t.map(n=>Ki(n)?n[e]:ie):ie,reverse:t=>Fa(t)?t.slice().reverse():pn(t)?t.split("").reverse().join(""):ie,slice:(t,e,n)=>Jc(t)?t.slice(e,n):ie};function oH(t,e,n,i,r){return t==null?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))}function Of(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const ur=t=>(t<10?"0":"")+t,cH=t=>t<0?"-"+Of(-t,6):t>9999?"+"+Of(t,6):Of(t,4);function K4(t,e,n,i,r,s,a,c,u){const l=c?"Z":"";return cH(t)+"-"+ur(e+1)+"-"+ur(n)+(!u||a?"T"+ur(i)+":"+ur(r)+":"+ur(s)+"."+Of(a,3)+l:s?"T"+ur(i)+":"+ur(r)+":"+ur(s)+l:r||i||!c?"T"+ur(i)+":"+ur(r)+l:"")}function X4(t,e){return isNaN(t)?"Invalid Date":K4(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function lp(t,e){return isNaN(t)?"Invalid Date":K4(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const uH=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function lH(t){return t.match(uH)}function fH(t,e=Date.parse){return lH(t)?e(t):t}const J4=6e4,Q4=864e5,Z4=6048e5,Be=new Date,Pe=new Date,Ve=t=>(Be.setTime(typeof t=="string"?fH(t):t),Be);function hH(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function dH(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function pH(t){Pe.setTime(+t),Pe.setHours(0,0,0,0),Be.setTime(+Pe),Be.setMonth(0),Be.setDate(1);const e=(Pe.getTimezoneOffset()-Be.getTimezoneOffset())*J4;return Math.floor(1+(Pe-Be-e)/Q4)}function mH(t){Pe.setTime(+t),Pe.setUTCHours(0,0,0,0);const e=Date.UTC(Pe.getUTCFullYear(),0,1);return Math.floor(1+(Pe-e)/Q4)}function gH(t,e){const n=e||0;Pe.setTime(+t),Pe.setDate(Pe.getDate()-(Pe.getDay()+7-n)%7),Pe.setHours(0,0,0,0),Be.setTime(+t),Be.setMonth(0),Be.setDate(1),Be.setDate(1-(Be.getDay()+7-n)%7),Be.setHours(0,0,0,0);const i=(Pe.getTimezoneOffset()-Be.getTimezoneOffset())*J4;return Math.floor((1+(Pe-Be)-i)/Z4)}function yH(t,e){const n=e||0;return Pe.setTime(+t),Pe.setUTCDate(Pe.getUTCDate()-(Pe.getUTCDay()+7-n)%7),Pe.setUTCHours(0,0,0,0),Be.setTime(+t),Be.setUTCMonth(0),Be.setUTCDate(1),Be.setUTCDate(1-(Be.getUTCDay()+7-n)%7),Be.setUTCHours(0,0,0,0),Math.floor((1+(Pe-Be))/Z4)}const bH={format_date:(t,e)=>X4(Ve(t),!e),format_utcdate:(t,e)=>lp(Ve(t),!e),timestamp:t=>+Ve(t),year:t=>Ve(t).getFullYear(),quarter:t=>Math.floor(Ve(t).getMonth()/3),month:t=>Ve(t).getMonth(),date:t=>Ve(t).getDate(),dayofweek:t=>Ve(t).getDay(),hours:t=>Ve(t).getHours(),minutes:t=>Ve(t).getMinutes(),seconds:t=>Ve(t).getSeconds(),milliseconds:t=>Ve(t).getMilliseconds(),utcyear:t=>Ve(t).getUTCFullYear(),utcquarter:t=>Math.floor(Ve(t).getUTCMonth()/3),utcmonth:t=>Ve(t).getUTCMonth(),utcdate:t=>Ve(t).getUTCDate(),utcdayofweek:t=>Ve(t).getUTCDay(),utchours:t=>Ve(t).getUTCHours(),utcminutes:t=>Ve(t).getUTCMinutes(),utcseconds:t=>Ve(t).getUTCSeconds(),utcmilliseconds:t=>Ve(t).getUTCMilliseconds(),datetime:hH,dayofyear:pH,week:gH,utcdatetime:dH,utcdayofyear:mH,utcweek:yH,now:Date.now};function L1(t,e){return t==null||e==null||t!==t||e!==e?!1:t===e?!0:vs(t)||vs(e)?+t==+e:Yh(t)&&Yh(e)?t+""==e+"":xn(t)&&xn(e)?_H(t,e):!1}function _H(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return pw(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length||(n.sort(),i.sort(),!pw(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!L1(t[a],e[a]))return!1}return!0}function pw(t,e,n=L1){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}const vH={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let wH=Math.random;function Fc(){return wH()}const xH={random:Fc,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function B1(t){return t instanceof Map}function SH(t){return t instanceof Set}function Ff(t){return B1(t)||SH(t)}function T0(t){return Array.from(t)}const EH={has:(t,e)=>Ff(t)?t.has(e):t!=null?nr(t,e):!1,keys:t=>B1(t)?T0(t.keys()):t!=null?Object.keys(t):[],values:t=>Ff(t)?T0(t.values()):t!=null?Object.values(t):[],entries:t=>Ff(t)?T0(t.entries()):t!=null?Object.entries(t):[],object:t=>t?Object.fromEntries(t):ie};function IH(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(nr(e,t))return e[t];return n!==void 0?n:t}function AH(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((e-t)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=t+s*n;return r}const TH={parse_date:t=>t==null?t:new Date(t),parse_float:t=>t==null?t:Number.parseFloat(t),parse_int:(t,e)=>t==null?t:Number.parseInt(t,e),endswith:(t,e,n)=>t==null?!1:String(t).endsWith(e,n),match:(t,e,n)=>{const i=t==null?t:String(t).match(e);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>t==null?t:String(t).normalize(e),padend:(t,e,n)=>t==null?t:String(t).padEnd(e,n),padstart:(t,e,n)=>t==null?t:String(t).padStart(e,n),upper:t=>t==null?t:String(t).toUpperCase(),lower:t=>t==null?t:String(t).toLowerCase(),repeat:(t,e)=>t==null?t:String(t).repeat(e),replace:(t,e,n)=>t==null?t:String(t).replace(e,String(n)),substring:(t,e,n)=>t==null?t:String(t).substring(e,n),split:(t,e,n)=>t==null?[]:String(t).split(e,n),startswith:(t,e,n)=>t==null?!1:String(t).startsWith(e,n),trim:t=>t==null?t:String(t).trim()},Mo={bin:oH,equal:L1,recode:IH,sequence:AH,...aH,...bH,...vH,...xH,...EH,...TH};function Gu(t){return typeof t=="bigint"}function Ur(t){return t===void 0?t+"":Gu(t)?t+"n":JSON.stringify(t)}function Ot(t,e=[],n=[]){return new kH(t,ti(e),ti(n))}let kH=class{constructor(e,n,i){this.name=e,this.fields=n,this.params=i}toString(){const e=[...this.fields.map(n=>`d[${Ur(n)}]`),...this.params.map(Ur)];return`d => op.${this.name}(${e})`}toObject(){return{expr:this.toString(),func:!0}}};const t8=t=>Ot("any",t),e8=()=>Ot("count"),n8=t=>Ot("array_agg",t),i8=t=>Ot("array_agg_distinct",t),r8=(t,e)=>Ot("map_agg",[t,e]),s8=(t,e)=>Ot("object_agg",[t,e]),a8=(t,e)=>Ot("entries_agg",[t,e]);({...Mo});function CH(t,e){t=Ff(t)?t:new Set(t);let n=e,i=0;for(;t.has(n);)n=e+ ++i;return n}function MH(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan(f=>s[n[f]]=1);const a=s.reduce((f,h)=>f+h,0);if(a===r)return t;const c=Array(a);let u=0;for(let f=0;f<r;++f)s[f]&&(c[s[f]=u++]=i[f]);const l=new Uint32Array(n.length);return e.scan(f=>l[f]=s[n[f]]),{...t,keys:l,rows:c,size:u}}function NH(t,e,n,i){const{keys:r,rows:s,size:a}=t;let c=s,u=a,l=null;if(n){l=new Int32Array(a),e(m=>l[r[m]]=1);const p=l.reduce((m,g)=>m+g,0);if(p!==a){c=Array(p),u=0;for(let m=0;m<a;++m)l[m]&&(c[l[m]=u++]=s[m])}}let f=-1;const h=new Uint32Array(i);return e(u!==a?p=>h[++f]=l[r[p]]:p=>h[++f]=r[p]),{...t,keys:h,rows:c,size:u}}function OH(t,e,n,i){const r=i==="map"||i===!0?r8:i==="entries"?a8:i==="object"?s8:Vt('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=CH(t.columnNames(),"_");let c=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:n8(a)});for(let u=s.length;--u>=0;)c=c.groupby(s.slice(0,u)).rollup({[a]:r(s[u],a)});return c.get(a)}const FH="ArrayPattern",DH="ArrowFunctionExpression",RH="FunctionExpression",qs="Identifier",Dc="Literal",o8="MemberExpression",LH="ObjectExpression",c8="ObjectPattern",u8="Property",Al="Column",BH="Constant",PH="Dictionary",UH="Function",VH="Parameter",l8="Op",Ee=(t,e)=>{const n=$H[t.type];return n?n(t,e):Vt(`Unsupported expression construct: ${t.type}`)},k0=(t,e)=>"("+Ee(t.left,e)+" "+t.operator+" "+Ee(t.right,e)+")",C0=(t,e)=>"("+dr(t.params,e)+")=>"+Ee(t.body,e),mw=(t,e)=>Ee(t.callee,e)+"("+dr(t.arguments,e)+")",dr=(t,e,n=",")=>t.map(i=>Ee(i,e)).join(n),f8=t=>t.computed?`[${Ur(t.name)}]`:`.${t.name}`,gw=(t,e,n)=>{const i=t.table||"";return`data${i}${f8(t)}.${n}(${e.index}${i})`},$H={Constant:t=>t.raw,Column:(t,e)=>gw(t,e,"get"),Dictionary:(t,e)=>gw(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${f8(t)}`,Op:(t,e)=>`op(${Ur(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+Ee(i[a],e)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=Ee(t.object,e),r=Ee(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:mw,NewExpression:(t,e)=>"new "+mw(t,e),ArrayExpression:(t,e)=>"["+dr(t.elements,e)+"]",AssignmentExpression:k0,BinaryExpression:k0,LogicalExpression:k0,UnaryExpression:(t,e)=>"("+t.operator+Ee(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+Ee(t.test,e)+"?"+Ee(t.consequent,e)+":"+Ee(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+dr(t.properties,e)+"})",Property:(t,e)=>{const n=Ee(t.key,e);return(t.computed?`[${n}]`:n)+":"+Ee(t.value,e)},ArrowFunctionExpression:C0,FunctionExpression:C0,FunctionDeclaration:C0,ArrayPattern:(t,e)=>"["+dr(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+dr(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+dr(t.declarations,e,","),VariableDeclarator:(t,e)=>Ee(t.id,e)+"="+Ee(t.init,e),SpreadElement:(t,e)=>"..."+Ee(t.argument,e),BlockStatement:(t,e)=>"{"+dr(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>Ee(t.expression,e),IfStatement:(t,e)=>"if ("+Ee(t.test,e)+")"+Ee(t.consequent,e)+(t.alternate?" else "+Ee(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+Ee(t.discriminant,e)+") {"+dr(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+Ee(t.test,e):"default")+": "+dr(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+Ee(t.argument,e),Program:(t,e)=>Ee(t.body[0],e)};function Gh(t,e={index:"row"}){return Ee(t,e)}function jH(t,e,n=15,i=!0,r=0,s){const c=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/c),l=e-t||Math.abs(t)||1,f=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(l)/c)-u));Math.ceil(l/s)>n;)s*=10;const h=f.length;for(let d=0;d<h;++d){const p=s/f[d];p>=r&&l/p<=n&&(s=p)}}if(i){let u=Math.log(s);const l=u>=0?0:~~(-u/c)+1,f=Math.pow(10,-l-1);u=Math.floor(t/s+f)*s,t=t<u?u-s:u,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}function mc(t){const e=typeof t;return e==="string"?`"${t}"`:e!=="object"||!t?t:vs(t)?+t:ce(t)||Il(t)?`[${t.map(mc)}]`:Yh(t)?t+"":zH(t)}function zH(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${mc(t[i])}`;return e+="}",e}function Kh(t,e){const n=t.length;return n===1?(i,r)=>mc(t[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const c=t[a](i,r);if(e&&(c==null||c!==c))return null;s+=mc(c)}return s}}function qH(){const t=new Map;return{count(){return t.size},values(){return Array.from(t.values(),e=>e.v)},increment(e){const n=mc(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=mc(e),i=t.get(n);i.n===1?t.delete(n):--i.n},forEach(e){t.forEach(({v:n,n:i})=>e(n,i))}}}function ts(){}function WH(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}function We(t){return t.init=t.init||ts,t.add=t.add||ts,t.rem=t.rem||ts,t}function yw(t,e){return t.product_v=!1,t.product=e}const h8={count:{create:()=>We({value:t=>t.count}),param:[]},array_agg:{create:()=>We({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>We({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>We({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>We({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>We({add:(t,e)=>{t.any==null&&(t.any=e)},value:t=>t.valid?t.any:ie}),param:[1]},valid:{create:()=>We({value:t=>t.valid}),param:[1]},invalid:{create:()=>We({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=qH(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>We({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>We({value:t=>{let e=ie,n=0;return t.distinct.forEach((i,r)=>{r>n&&(n=r,e=i)}),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:ie,add:(t,e)=>Gu(e)?t.sum===0?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>yw(t,1),value:t=>t.valid?t.product_v?yw(t,WH(t.list.values())):t.product:void 0,add:(t,e)=>Gu(e)&&t.product===1?t.product=e:t.product*=e,rem:(t,e)=>e==0||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:ie,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>We({value:t=>t.valid?t.mean:ie}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):ie,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>We({value:t=>t.valid>1?t.dev/t.valid:ie}),param:[1],req:["variance"]},stdev:{create:()=>We({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):ie}),param:[1],req:["variance"]},stdevp:{create:()=>We({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):ie}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=ie,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===ie)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=ie,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===ie)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>We({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>We({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):ie,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>We({value:t=>t.valid>1?t.cov/t.valid:ie}),param:[2],req:["covariance"]},corr:{create:()=>We({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):ie}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>We({value:r=>jH(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}},bw={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},_w={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]},d8={row_number:{create(){return{init:ts,value:t=>t.index+1}},param:[]},rank:bw,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=bw.create();return{init:t,value:n=>(e(n)-1)/(n.size-1)}},param:[]},cume_dist:_w,ntile:{create(t){t=+t,t>0||Vt("ntile num must be greater than zero.");const{init:e,value:n}=_w.create();return{init:e,value:i=>Math.ceil(t*n(i))}},param:[0,1]},lag:{create(t,e=ie){return t=+t||1,{init:ts,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}},param:[1,2]},lead:{create(t,e=ie){return t=+t||1,{init:ts,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}},param:[1,2]},first_value:{create(){return{init:ts,value:(t,e)=>t.value(t.i0,e)}},param:[1]},last_value:{create(){return{init:ts,value:(t,e)=>t.value(t.i1-1,e)}},param:[1]},nth_value:{create(t){return t=+t,t>0||Vt("nth_value nth must be greater than zero."),{init:ts,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):ie}}},param:[1,1]},fill_down:{create(t=ie){let e;return{init:()=>e=t,value:(n,i)=>{const r=n.value(n.index,i);return Ki(r)?e=r:e}}},param:[1,1]},fill_up:{create(t=ie){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=HH(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function HH(t,e,n){for(const i=t.size;n<i;++n)if(Ki(t.value(n,e)))return n;return-1}function P1(t){return nr(h8,t)}function U1(t){return nr(d8,t)}function p8(t){return nr(Mo,t)||t==="row_object"}function m8(t){return P1(t)&&h8[t]}function g8(t){return U1(t)&&d8[t]}function Qc(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}const V1={escape:(t,e,n)=>Qc(t,e,n),expr:(t,e)=>Qc(`(row,data,op)=>${t}`,Mo,e),expr2:(t,e)=>Qc(`(row0,data0,row,data)=>${t}`,Mo,e),join:(t,e)=>Qc(`(row1,data1,row2,data2)=>${t}`,Mo,e),param:(t,e)=>Qc(t,Mo,e)},YH={"==":1,"!=":1,"===":1,"!==":1};function y8(t,e,n=0,i,r){if(t.type=Al,t.name=e,t.table=n,r&&i&&Me(i.keyFor)){const s=YH[r.operator]?r.left===t?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===t?1:0]:null;s&&s.type===Dc&&GH(r,t,s,i.keyFor(s.value))}return t}function GH(t,e,n,i){return i<0?(t.type=Dc,t.value=!1,t.raw="false"):(e.type=PH,n.value=i,n.raw=i+""),!0}function fp(t){return ce(t)?t:B1(t)?t.entries():t?Object.entries(t):[]}const b8="row_object";function _8(t,e){t.type=LH;const n=t.properties=[];for(const i of fp(e)){const[r,s]=ce(i)?i:[i,i];n.push({type:u8,key:{type:Dc,raw:Ur(s)},value:y8({computed:!0},r)})}return t}function v8(t){return Gh(_8({},t))}function w8(t){return V1.expr(v8(t))}function $1(t,e=1){return(t*e+63&-64||64)/e}function ra(t,e,n=t.BYTES_PER_ELEMENT){return new t($1(e,n))}function j1(t){return t instanceof be?t:new be(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}function KH(t){return new ee([j1(t)])}const z1=new TextEncoder;function XH(t,e,n){const i=z1.encode(n);return t.set(i,e),i.length}function JH(t,e,n){return z1.encodeInto(n,t.subarray(e)).written}const QH=z1.encodeInto?JH:XH;function vw(t,e){const n=ra(t.ArrayType,e);return{set(i,r){n[r]=i},data:()=>({type:t,length:e,buffers:[null,n]})}}function ZH(t,e){const n=ra(t.ArrayType,e/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function tY(t,e){const n=ra(t.ArrayType,e);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function eY(t,e){const n=ra(t.ArrayType,e<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function nY(t){const e=Uh({type:t,nullValues:[null,void 0]});return{set(n,i){e.set(i,n)},data:()=>e.finish().flush()}}function iY(t,e,n){const i=ra(Int32Array,e+1),r=ra(Uint8Array,3*n);let s=0;return{set(a,c){s+=QH(r,s,a),i[c+1]=s},data:()=>{const a=$1(s),c=r.length>a?r.subarray(0,a):r;return{type:t,length:e,buffers:[i,c]}}}}function rY(t,e){const n=[],i=ra(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(c,u){const l=String(c);let f=r[l];f===void 0&&(a+=l.length,r[l]=f=++s,n.push(l)),i[u]=f},data:()=>({type:t,length:e,buffers:[null,i],dict:sY(t.dictionary,n,a)})}}function sY(t,e,n){const i=iY(t,e.length,n);return e.forEach(i.set),KH(i.data())}function aY(t,e){const n=ra(Uint8Array,e/8);let i=0;return{set(r,s){r==null?++i:(t.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=t.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function oY(t,e,n=!0){let i;switch(t.typeId){case A.Int:i=t.bitWidth<64?vw:null;break;case A.Float:i=t.precision>0?vw:null;break;case A.Dictionary:i=t.dictionary.typeId===A.Utf8&&t.indices.typeId===A.Int&&t.indices.bitWidth<64?rY:null;break;case A.Bool:i=ZH;break;case A.Date:i=t.unit?eY:tY;break}return i==null?nY(t):n?aY(i(t,e),e):i(t,e)}function cY(t,e){const n=t.length,i=$1(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),j1({type:e,length:n,buffers:[null,r]})}function x8(t,e,n,i,r=!0){const s=oY(i,t,r);return e(n,s.set),j1(s.data())}function q1(t){if(t instanceof wt||t==null)return t;switch(t){case A.Binary:return new ju;case A.Bool:return new zu;case A.DateDay:return new _j;case A.DateMillisecond:case A.Date:return new vj;case A.Dictionary:return new ea(new rc,new Zs);case A.Float16:return new dA;case A.Float32:return new Jy;case A.Float64:case A.Float:return new Qy;case A.Int8:return new qy;case A.Int16:return new Wy;case A.Int32:case A.Int:return new Zs;case A.Int64:return new Hy;case A.IntervalDayTime:return new Ij;case A.Interval:case A.IntervalYearMonth:return new Aj;case A.Null:return new ys;case A.TimeMicrosecond:return new Sj;case A.TimeMillisecond:case A.Time:return new xj;case A.TimeNanosecond:return new Ej;case A.TimeSecond:return new wj;case A.Uint8:return new Yy;case A.Uint16:return new Gy;case A.Uint32:return new Ky;case A.Uint64:return new Xy;case A.Utf8:return new rc;default:Vt(`Unsupported type code: ${Ur(t)}. Use a data type constructor instead?`)}}function uY(t){return t.getUTCHours()===0&&t.getUTCMinutes()===0&&t.getUTCSeconds()===0&&t.getUTCMilliseconds()===0}function S8(t,e){const n=ug();return t(e,n.add),n}function ug(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,e==null){++t.nulls;return}const n=typeof e;if(n==="string")++t.strings;else if(n==="number")++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if(n==="boolean")++t.bools;else if(n==="object")if(vs(e))++t.dates,uY(e)&&++t.utcdays;else if(Fa(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const i=t.array_prof||(t.array_prof=ug());e.forEach(i.add)}else{++t.structs;const i=t.struct_prof||(t.struct_prof={});for(const r in e)(i[r]||(i[r]=ug())).add(e[r])}else n==="bigint"&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e))},type(){return q1(lY(t))}};return t}function lY(t){const e=t.count-t.nulls;if(e===0)return A.Null;if(t.ints===e){const n=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?n>=2**31?A.Float64:n<128?A.Int8:n<32768?A.Int16:A.Int32:n>=2**32?A.Float64:n<256?A.Uint8:n<65536?A.Uint16:A.Uint32}else{if(t.nums===e)return A.Float64;if(t.bigints===e){const n=-t.min>t.max?-t.min-1n:t.max;return t.min<0?n<2**63?A.Int64:Vt(`BigInt exceeds 64 bits: ${n}`):t.max<2**64?A.Uint64:Vt(`BigInt exceeds 64 bits: ${t.max}`)}else{if(t.bools===e)return A.Bool;if(t.utcdays===e)return A.DateDay;if(t.dates===e)return A.DateMillisecond;if(t.arrays===e){const n=ue.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new cc(t.minlen,n):new oc(n)}else if(t.structs===e){const n=t.struct_prof;return new un(Object.keys(n).map(i=>ue.new(i,n[i].type(),!0)))}else{if(t.strings>0)return A.Dictionary;Vt("Type inference failure")}}}}function fY(t,e,n,i,r,s=!0){if(r=q1(r),!r){const a=S8(i,e);s=a.nulls>0,r=a.type()}return x8(n,i,e,r,s)}function hY(t,e,n,i,r,s=!0){r=q1(r);const a=t.column(e),c=!(t.isFiltered()||t.isOrdered()),u=dY(a);if(u&&c&&ww(u.type,r))return u;const l=a.data;if(Il(l)){const f=pY(l);if(c&&f&&ww(f,r))return cY(l,f);r=r||f,s=!1}if(!r){const f=S8(i,a);s=f.nulls>0,r=f.type()}return x8(n,i,a,r,s)}function dY(t){return t instanceof ee?t:t.vector instanceof ee?t.vector:null}function pY(t){const n={Float32Array:Jy,Float64Array:Qy,Int8Array:qy,Int16Array:Wy,Int32Array:Zs,Uint8Array:Yy,Uint16Array:Gy,Uint32Array:Ky,BigInt64Array:Hy,BigUint64Array:Xy}[t.constructor.name];return n?new n:null}function ww(t,e){return!t||!e?!0:t.compareTo(e)}function mY(t,e,n){const i=Math.min(t.length,n+e);return(r,s)=>{for(let a=n;a<i;++a)s(t[a][r],a)}}function gY(t,e,n){const i=n===0&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&Fa(r.data)?r.data.forEach(s):t.scan(c=>s(r.get(c),++a),!0,e,n)}}const yY=()=>Vt("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function bY(){try{return _s}catch{yY()}}function E8(t,e={}){const{types:n={}}=e,{dataFrom:i,names:r,nrows:s,scan:a}=_Y(t,e),c={};r.forEach(l=>{const f=i(t,l,s,a,n[l]);f.length!==s&&Vt("Column length mismatch"),c[l]=f});const u=bY();return new u(c)}function _Y(t,e){const{columns:n,limit:i=1/0,offset:r=0}=e,s=Me(n)?n(t):ce(n)?n:null;if(ce(t))return{dataFrom:fY,names:s||Object.keys(t[0]),nrows:Math.min(i,t.length-r),scan:mY(t,i,r)};if(vY(t))return{dataFrom:hY,names:s||t.columnNames(),nrows:Math.min(i,t.numRows()-r),scan:gY(t,i,r)};Vt("Unsupported input data type")}function vY(t){return t&&Me(t.reify)}function wY(t,e={}){const{format:n,...i}=e,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return q4(E8(t,i),n)}function xY(t){return t.getUTCHours()===0&&t.getUTCMinutes()===0&&t.getUTCSeconds()===0&&t.getUTCMilliseconds()===0}function SY(t,e={}){let n=0,i=0,r=0,s=0,a=0,c=0;return t(u=>{if(++n,u==null){++i;return}const l=typeof u;if(l==="object"&&vs(u))++r,xY(u)&&++s;else if(l==="number"&&(++a,u===u&&(u|0)!==u)){const f=u+"",h=f.indexOf(".");if(h>=0){const d=f.indexOf("e"),p=d>0?d:f.length;c=Math.max(c,p-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(c,e.maxdigits||6)}}}function hp(t,e){return Me(e)?e(t):e||t.columnNames()}function I8(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach(c=>{const u=SY(EY(t,c),n);a[c]=r[c]||u.align,s[c]=i[c]||u.format}),{align:a,format:s}}function EY(t,e){const n=t.column(e);return i=>t.scan(r=>i(n.get(r)))}function W1(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan(c=>{r.row(c);for(let u=0;u<a;++u){const l=e[u];r.cell(s[e[u]].get(c),l,u)}},!0,n,i)}function IY(t,e={}){const n=hp(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}
\r]`),a=l=>l==null?"":vs(l)?lp(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,c=n.map(a);let u="";return W1(t,n,e.limit||1/0,e.offset,{row(){u+=c.join(r)+`
`},cell(l,f,h){c[h]=a(i[f]?i[f](l):l)}}),u+c.join(r)}function A8(t,e={}){if(Me(e))return e(t)+"";const n=typeof t;if(n==="object"){if(vs(t))return e.utc?lp(t):X4(t);{const i=JSON.stringify(t,(s,a)=>Il(a)?Array.from(a):a),r=e.maxlen||30;return i.length>r?i.slice(0,28)+"…"+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=e.digits||0;let r;return t!==0&&((r=Math.abs(t))>=1e18||r<Math.pow(10,-i))?t.toExponential(i):t.toFixed(i)}else return t+""}function dp(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function AY(t,e={}){const n=hp(t,e.columns),{align:i,format:r}=I8(t,n,e),s=TY(e),a=e.null,c=g=>g==="c"?"center":g==="r"?"right":"left",u=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(g,y)=>u(A8(g,y)),f=a?(g,y)=>g==null?a(g):l(g,y):l;let h=-1,d=-1;const p=(g,y,v)=>{const b=v?c(i[y]):"",x=s[g]&&s[g](y,d,h)||"",w=(b?`text-align: ${b};`+(x?" ":""):"")+x;return`<${g}${w?` style="${w}"`:""}>`};let m=p("table")+p("thead")+p("tr",h)+n.map(g=>`${p("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+p("tbody");return W1(t,n,e.limit,e.offset,{row(g){h=g,m+=(++d?"</tr>":"")+p("tr")},cell(g,y){m+=p("td",y,1)+f(g,r[y])+"</td>"}}),m+"</tr></tbody></table>"}function TY(t){return dp(t.style,e=>Me(e)?e:()=>e)}function kY(t,e=!0,n=!1){return t===void 0||t?e:n}const CY=t=>vs(t)?lp(t,!0):t;function MY(t,e={}){const n=kY(e.schema),i=e.format||{},r=hp(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,c)=>{s+=(c?",":"")+JSON.stringify(a)+":[";const u=t.column(a),l=i[a]||CY;let f=-1;t.scan(h=>{const d=u.get(h);s+=(++f?",":"")+JSON.stringify(l(d))},!0,e.limit,e.offset),s+="]"}),s+"}"+(n?"}":"")}function NY(t,e={}){const n=hp(t,e.columns),{align:i,format:r}=I8(t,n,e),s=u=>u==="c"?":-:":u==="r"?"-:":":-",a=u=>u.replace(/\|/g,"\\|");let c="|"+n.map(a).join("|")+`|
|`+n.map(u=>s(i[u])).join("|")+"|";return W1(t,n,e.limit,e.offset,{row(){c+=`
|`},cell(u,l){c+=a(A8(u,r[l]))+"|"}}),c+`
`}function T8(t,e){for(const[n,i]of fp(e))t.set(n,i);return t}function OY(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ws(t,e,n=new Map){return e=Dn(e)?t.columnName(e):e,pn(e)?n.set(e,e):ce(e)?e.forEach(i=>ws(t,i,n)):Me(e)?ws(t,e(t),n):xn(e)?T8(n,e):Vt(`Invalid column selection: ${Ur(e)}`),n}function pp(t,e){return t.toObject=e,t}function k8(t){return ce(t)?t.map(k8):t&&t.toObject?t.toObject():t}function gc(){return pp(t=>t.columnNames(),()=>({all:[]}))}function C8(...t){return t=t.flat(),pp(e=>{const n=ws(e,t);return e.columnNames(i=>!n.has(i))},()=>({not:k8(t)}))}function FY(t,e){return pp(n=>{let i=Dn(t)?t:n.columnIndex(t),r=Dn(e)?e:n.columnIndex(e);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[t,e]}))}function DY(t){return pn(t)&&(t=RegExp(OY(t))),pp(e=>e.columnNames(n=>t.test(n)),()=>({matches:[t.source,t.flags]}))}function RY(t){return Il(t.data)?t.data.constructor:Array}class rs extends QW{static from(e,n){return new rs(eH(e,n),n)}static new(e,n){if(e instanceof rs)return e;const i={},r=[];for(const[s,a]of fp(e))i[s]=a,r.push(s);return new rs(i,n||r)}constructor(e,n,i,r,s,a){dp(e,tH,e),n=n||Object.keys(e);const c=n.length?e[n[0]].length:0;super(n,c,e,i,r,s,a)}create({data:e,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new rs(e||this._data,n||(e?null:this._names),a,r!==void 0?r:MH(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...e){const n=this.numRows(),i=this.reify(),r=pi(i).groupby(i.groups());return e.forEach(s=>{s=rs.new(s),s.numRows()!==n&&Vt("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(e){return this._data[e]}columnAt(e){return this._data[this._names[e]]}array(e,n=Array){const i=this.column(e),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(e,n=0){const i=this.column(e);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(e){const n=this.column(e),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):Vt(`Unrecognized column: ${e}`)}object(e=0){return xw(this)(e)}objects(e={}){const{grouped:n,limit:i,offset:r}=e,s=ws(this,e.columns||gc()),a=w8(s),c=[];if(this.scan((u,l)=>c.push(a(u,l)),!0,i,r),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,i,r),OH(this,u,c,n)}return c}*[Symbol.iterator](){const e=xw(this),n=this.numRows();for(let i=0;i<n;++i)yield e(i)}reify(e){const n=e?e.length:this.numRows(),i=this._names;let r,s;if(!e&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=e?u=>e.forEach(u):u=>this.scan(u,!0),c=i.length;r={};for(let u=0;u<c;++u){const l=i[u],f=this.column(l),h=r[l]=new(RY(f))(n);let d=-1;a(p=>h[++d]=f.get(p))}this.isGrouped()&&(s=NH(this.groups(),a,!!e,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...e){return e.flat().reduce((n,i)=>i(n),this)}toArrow(e){return E8(this,e)}toArrowBuffer(e){return wY(this,e)}toCSV(e){return IY(this,e)}toHTML(e){return AY(this,e)}toJSON(e){return MY(this,e)}toMarkdown(e){return NY(this,e)}}function xw(t){let e=t._builder;if(!e){const n=w8(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=s=>n(r[s],i)}else e=r=>n(r,i);t._builder=e}return e}class LY{constructor(e){this._outputs=e}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function te(t,e,n,i){const r=n[t.type]||n.Default;if(r&&r(t,e,i)===!1)return;const s=BY[t.type];s&&s(t,e,n)}const nf=(t,e,n)=>{te(t.argument,e,n,t)},M0=(t,e,n)=>{te(t.left,e,n,t),te(t.right,e,n,t)},Sw=(t,e,n)=>{te(t.test,e,n,t),te(t.consequent,e,n,t),t.alternate&&te(t.alternate,e,n,t)},N0=(t,e,n)=>{pr(t.params,e,n,t),te(t.body,e,n,t)},Ew=(t,e,n)=>{te(t.callee,e,n,t),pr(t.arguments,e,n,t)},pr=(t,e,n,i)=>{t.forEach(r=>te(r,e,n,i))},BY={TemplateLiteral:(t,e,n)=>{pr(t.expressions,e,n,t),pr(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{te(t.object,e,n,t),te(t.property,e,n,t)},CallExpression:Ew,NewExpression:Ew,ArrayExpression:(t,e,n)=>{pr(t.elements,e,n,t)},AssignmentExpression:M0,AwaitExpression:nf,BinaryExpression:M0,LogicalExpression:M0,UnaryExpression:nf,UpdateExpression:nf,ConditionalExpression:Sw,ObjectExpression:(t,e,n)=>{pr(t.properties,e,n,t)},Property:(t,e,n)=>{te(t.key,e,n,t),te(t.value,e,n,t)},ArrowFunctionExpression:N0,FunctionExpression:N0,FunctionDeclaration:N0,VariableDeclaration:(t,e,n)=>{pr(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{te(t.id,e,n,t),te(t.init,e,n,t)},SpreadElement:(t,e,n)=>{te(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{pr(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{te(t.expression,e,n,t)},IfStatement:Sw,ForStatement:(t,e,n)=>{te(t.init,e,n,t),te(t.test,e,n,t),te(t.update,e,n,t),te(t.body,e,n,t)},WhileStatement:(t,e,n)=>{te(t.test,e,n,t),te(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{te(t.body,e,n,t),te(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{te(t.discriminant,e,n,t),pr(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&te(t.test,e,n,t),pr(t.consequent,e,n,t)},ReturnStatement:nf,Program:(t,e,n)=>{te(t.body[0],e,n,t)}};function M8(t){delete t.start,delete t.end,delete t.optional}function Iw(t){M8(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function PY(t){return te(t,null,{Column:Iw,Constant:Iw,Default:M8}),t}function Xe(t,e){return e&&e.type===t}function UY(t){return Xe(RH,t)||Xe(DH,t)}function VY(t){return Me(t)?t:()=>t}const $Y="Escaped functions are not valid as rollup or pivot values.";function jY(t,e,n){t.aggronly&&Vt($Y);const i="(row,data)=>fn("+v8(t.table.columnNames())+",$)";return{escape:V1.escape(i,VY(e.expr),n)}}var zY=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],N8=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],qY="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",O8="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",O0={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},F0="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",WY={5:F0,"5module":F0+" export import",6:F0+" const class extends export import super"},HY=/^in(stanceof)?$/,YY=new RegExp("["+O8+"]"),GY=new RegExp("["+O8+qY+"]");function lg(t,e){for(var n=65536,i=0;i<e.length;i+=2){if(n+=e[i],n>t)return!1;if(n+=e[i+1],n>=t)return!0}return!1}function xs(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&YY.test(String.fromCharCode(t)):e===!1?!1:lg(t,N8)}function yc(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&GY.test(String.fromCharCode(t)):e===!1?!1:lg(t,N8)||lg(t,zY)}var ne=function(e,n){n===void 0&&(n={}),this.label=e,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function vi(t,e){return new ne(t,{beforeExpr:!0,binop:e})}var wi={beforeExpr:!0},Un={startsExpr:!0},H1={};function Jt(t,e){return e===void 0&&(e={}),e.keyword=t,H1[t]=new ne(t,e)}var S={num:new ne("num",Un),regexp:new ne("regexp",Un),string:new ne("string",Un),name:new ne("name",Un),privateId:new ne("privateId",Un),eof:new ne("eof"),bracketL:new ne("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ne("]"),braceL:new ne("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ne("}"),parenL:new ne("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ne(")"),comma:new ne(",",wi),semi:new ne(";",wi),colon:new ne(":",wi),dot:new ne("."),question:new ne("?",wi),questionDot:new ne("?."),arrow:new ne("=>",wi),template:new ne("template"),invalidTemplate:new ne("invalidTemplate"),ellipsis:new ne("...",wi),backQuote:new ne("`",Un),dollarBraceL:new ne("${",{beforeExpr:!0,startsExpr:!0}),eq:new ne("=",{beforeExpr:!0,isAssign:!0}),assign:new ne("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ne("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ne("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:vi("||",1),logicalAND:vi("&&",2),bitwiseOR:vi("|",3),bitwiseXOR:vi("^",4),bitwiseAND:vi("&",5),equality:vi("==/!=/===/!==",6),relational:vi("</>/<=/>=",7),bitShift:vi("<</>>/>>>",8),plusMin:new ne("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:vi("%",10),star:vi("*",10),slash:vi("/",10),starstar:new ne("**",{beforeExpr:!0}),coalesce:vi("??",1),_break:Jt("break"),_case:Jt("case",wi),_catch:Jt("catch"),_continue:Jt("continue"),_debugger:Jt("debugger"),_default:Jt("default",wi),_do:Jt("do",{isLoop:!0,beforeExpr:!0}),_else:Jt("else",wi),_finally:Jt("finally"),_for:Jt("for",{isLoop:!0}),_function:Jt("function",Un),_if:Jt("if"),_return:Jt("return",wi),_switch:Jt("switch"),_throw:Jt("throw",wi),_try:Jt("try"),_var:Jt("var"),_const:Jt("const"),_while:Jt("while",{isLoop:!0}),_with:Jt("with"),_new:Jt("new",{beforeExpr:!0,startsExpr:!0}),_this:Jt("this",Un),_super:Jt("super",Un),_class:Jt("class",Un),_extends:Jt("extends",wi),_export:Jt("export"),_import:Jt("import",Un),_null:Jt("null",Un),_true:Jt("true",Un),_false:Jt("false",Un),_in:Jt("in",{beforeExpr:!0,binop:7}),_instanceof:Jt("instanceof",{beforeExpr:!0,binop:7}),_typeof:Jt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Jt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Jt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$i=/\r\n?|\n|\u2028|\u2029/,KY=new RegExp($i.source,"g");function Rc(t){return t===10||t===13||t===8232||t===8233}function F8(t,e,n){n===void 0&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(Rc(r))return i<n-1&&r===13&&t.charCodeAt(i+1)===10?i+2:i+1}return-1}var D8=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ki=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,R8=Object.prototype,XY=R8.hasOwnProperty,JY=R8.toString,Tl=Object.hasOwn||function(t,e){return XY.call(t,e)},Aw=Array.isArray||function(t){return JY.call(t)==="[object Array]"};function Da(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function sa(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var QY=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ku=function(e,n){this.line=e,this.column=n};Ku.prototype.offset=function(e){return new Ku(this.line,this.column+e)};var mp=function(e,n,i){this.start=n,this.end=i,e.sourceFile!==null&&(this.source=e.sourceFile)};function L8(t,e){for(var n=1,i=0;;){var r=F8(t,i,e);if(r<0)return new Ku(n,e-i);++n,i=r}}var fg={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Tw=!1;function ZY(t){var e={};for(var n in fg)e[n]=t&&Tl(t,n)?t[n]:fg[n];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!Tw&&typeof console=="object"&&console.warn&&(Tw=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),Aw(e.onToken)){var i=e.onToken;e.onToken=function(r){return i.push(r)}}return Aw(e.onComment)&&(e.onComment=tG(e,e.onComment)),e}function tG(t,e){return function(n,i,r,s,a,c){var u={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(u.loc=new mp(this,a,c)),t.ranges&&(u.range=[r,s]),e.push(u)}}var Xu=1,Lc=2,Y1=4,B8=8,P8=16,U8=32,G1=64,V8=128,kl=256,K1=Xu|Lc|kl;function X1(t,e){return Lc|(t?Y1:0)|(e?B8:0)}var Xh=0,J1=1,fs=2,$8=3,j8=4,z8=5,Qe=function(e,n,i){this.options=e=ZY(e),this.sourceFile=e.sourceFile,this.keywords=Da(WY[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var r="";e.allowReserved!==!0&&(r=O0[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(r+=" await")),this.reservedWords=Da(r);var s=(r?r+" ":"")+O0.strict;this.reservedWordsStrict=Da(s),this.reservedWordsStrictBind=Da(s+" "+O0.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($i).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Xu),this.regexpState=null,this.privateNameStack=[]},zr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Qe.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};zr.inFunction.get=function(){return(this.currentVarScope().flags&Lc)>0};zr.inGenerator.get=function(){return(this.currentVarScope().flags&B8)>0&&!this.currentVarScope().inClassFieldInit};zr.inAsync.get=function(){return(this.currentVarScope().flags&Y1)>0&&!this.currentVarScope().inClassFieldInit};zr.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&kl)return!1;if(e.flags&Lc)return(e.flags&Y1)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zr.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&G1)>0||n||this.options.allowSuperOutsideMethod};zr.allowDirectSuper.get=function(){return(this.currentThisScope().flags&V8)>0};zr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zr.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&(Lc|kl))>0||n};zr.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&kl)>0};Qe.extend=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var i=this,r=0;r<e.length;r++)i=e[r](i);return i};Qe.parse=function(e,n){return new this(n,e).parse()};Qe.parseExpressionAt=function(e,n,i){var r=new this(i,e,n);return r.nextToken(),r.parseExpression()};Qe.tokenizer=function(e,n){return new this(n,e)};Object.defineProperties(Qe.prototype,zr);var Ln=Qe.prototype,eG=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ln.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){ki.lastIndex=t,t+=ki.exec(this.input)[0].length;var e=eG.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){ki.lastIndex=t+e[0].length;var n=ki.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||$i.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}t+=e[0].length,ki.lastIndex=t,t+=ki.exec(this.input)[0].length,this.input[t]===";"&&t++}};Ln.eat=function(t){return this.type===t?(this.next(),!0):!1};Ln.isContextual=function(t){return this.type===S.name&&this.value===t&&!this.containsEsc};Ln.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Ln.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Ln.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||$i.test(this.input.slice(this.lastTokEnd,this.start))};Ln.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Ln.semicolon=function(){!this.eat(S.semi)&&!this.insertSemicolon()&&this.unexpected()};Ln.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Ln.expect=function(t){this.eat(t)||this.unexpected()};Ln.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var gp=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Ln.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}};Ln.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Ln.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ln.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var yt=Qe.prototype;yt.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==S.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Q1={kind:"loop"},nG={kind:"switch"};yt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ki.lastIndex=this.pos;var e=ki.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(t)return!1;if(i===123||i>55295&&i<56320)return!0;if(xs(i,!0)){for(var r=n+1;yc(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!HY.test(s))return!0}return!1};yt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ki.lastIndex=this.pos;var t=ki.exec(this.input),e=this.pos+t[0].length,n;return!$i.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(yc(n=this.input.charCodeAt(e+8))||n>55295&&n<56320))};yt.parseStatement=function(t,e,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(t)&&(i=S._var,s="let"),i){case S._break:case S._continue:return this.parseBreakContinueStatement(r,i.keyword);case S._debugger:return this.parseDebuggerStatement(r);case S._do:return this.parseDoStatement(r);case S._for:return this.parseForStatement(r);case S._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!t);case S._class:return t&&this.unexpected(),this.parseClass(r,!0);case S._if:return this.parseIfStatement(r);case S._return:return this.parseReturnStatement(r);case S._switch:return this.parseSwitchStatement(r);case S._throw:return this.parseThrowStatement(r);case S._try:return this.parseTryStatement(r);case S._const:case S._var:return s=s||this.value,t&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case S._while:return this.parseWhileStatement(r);case S._with:return this.parseWithStatement(r);case S.braceL:return this.parseBlock(!0,r);case S.semi:return this.parseEmptyStatement(r);case S._export:case S._import:if(this.options.ecmaVersion>10&&i===S._import){ki.lastIndex=this.pos;var a=ki.exec(this.input),c=this.pos+a[0].length,u=this.input.charCodeAt(c);if(u===40||u===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===S._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!t);var l=this.value,f=this.parseExpression();return i===S.name&&f.type==="Identifier"&&this.eat(S.colon)?this.parseLabeledStatement(r,l,f,t):this.parseExpressionStatement(r,f)}};yt.parseBreakContinueStatement=function(t,e){var n=e==="break";this.next(),this.eat(S.semi)||this.insertSemicolon()?t.label=null:this.type!==S.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((t.label==null||r.name===t.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||t.label&&n))break}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")};yt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};yt.parseDoStatement=function(t){return this.next(),this.labels.push(Q1),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};yt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Q1),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===S._var||this.type===S._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===S._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,c=new gp,u=this.parseExpression(e>-1?"await":!0,c);return this.type===S._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===S._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,c),this.checkLValPattern(u),this.parseForIn(t,u)):(this.checkExpressionErrors(c,!0),e>-1&&this.unexpected(e),this.parseFor(t,u))};yt.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,bu|(n?0:hg),!1,e)};yt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};yt.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};yt.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(S.braceL),this.labels.push(nG),this.enterScope(0);for(var e,n=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var i=this.type===S._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(S.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};yt.parseThrowStatement=function(t){return this.next(),$i.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var iG=[];yt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===S._catch){var e=this.startNode();if(this.next(),this.eat(S.parenL)){e.param=this.parseBindingAtom();var n=e.param.type==="Identifier";this.enterScope(n?U8:0),this.checkLValPattern(e.param,n?j8:fs),this.expect(S.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(S._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};yt.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")};yt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Q1),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};yt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};yt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};yt.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var c=this.type.isLoop?"loop":this.type===S._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===t.start)l.statementStart=this.start,l.kind=c;else break}return this.labels.push({name:e,kind:c,statementStart:this.start}),t.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")};yt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};yt.parseBlock=function(t,e,n){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(S.braceL),t&&this.enterScope(0);this.type!==S.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};yt.parseFor=function(t,e){return t.init=e,this.expect(S.semi),t.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),t.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};yt.parseForIn=function(t,e){var n=this.type===S._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")};yt.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(S.eq)?i.init=this.parseMaybeAssign(e):n==="const"&&!(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(e&&(this.type===S._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(S.comma))break}return t};yt.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?J1:fs,!1)};var bu=1,hg=2,q8=4;yt.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===S.star&&e&hg&&this.unexpected(),t.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&bu&&(t.id=e&q8&&this.type!==S.name?null:this.parseIdent(),t.id&&!(e&hg)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?J1:fs:$8));var s=this.yieldPos,a=this.awaitPos,c=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(X1(t.async,t.generator)),e&bu||(t.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=c,this.finishNode(t,e&bu?"FunctionDeclaration":"FunctionExpression")};yt.parseFunctionParams=function(t){this.expect(S.parenL),t.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};yt.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(S.braceL);this.type!==S.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&rG(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};yt.parseClassElement=function(t){if(this.eat(S.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",c=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(S.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===S.star?c=!0:i="static"}if(n.static=c,!i&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===S.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(e>=9||!s)&&this.eat(S.star)&&(r=!0),!i&&!s&&!r){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:i=u)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===S.parenL||a!=="method"||r||s){var l=!n.static&&Jh(n,"constructor"),f=l&&t;l&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":a,this.parseClassMethod(n,r,s,f)}else this.parseClassField(n);return n};yt.isClassElementNameStart=function(){return this.type===S.name||this.type===S.privateId||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword};yt.parseClassElementName=function(t){this.type===S.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};yt.parseClassMethod=function(t,e,n,i){var r=t.key;t.kind==="constructor"?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&Jh(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return t.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),t.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),t.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};yt.parseClassField=function(t){if(Jh(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&Jh(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(S.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};yt.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(kl|G1);this.type!==S.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};yt.parseClassId=function(t,e){this.type===S.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,fs,!1)):(e===!0&&this.unexpected(),t.id=null)};yt.parseClassSuper=function(t){t.superClass=this.eat(S._extends)?this.parseExprSubscripts(null,!1):null};yt.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};yt.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,n=t.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];Tl(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function rG(t,e){var n=e.key.name,i=t[n],r="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(r=(e.static?"s":"i")+e.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(t[n]="true",!1):i?!0:(t[n]=r,!1)}function Jh(t,e){var n=t.computed,i=t.key;return!n&&(i.type==="Identifier"&&i.name===e||i.type==="Literal"&&i.value===e)}yt.parseExport=function(t,e){if(this.next(),this.eat(S.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==S.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(S._default)){this.checkExport(e,"default",this.lastTokStart);var n;if(this.type===S._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,bu|q8,!1,n)}else if(this.type===S._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var c=a[s];this.checkUnreserved(c.local),this.checkLocalExport(c.local),c.local.type==="Literal"&&this.raise(c.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};yt.checkExport=function(t,e,n){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),Tl(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)};yt.checkPatternExport=function(t,e){var n=e.type;if(n==="Identifier")this.checkExport(t,e,e.start);else if(n==="ObjectPattern")for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if(n==="ArrayPattern")for(var a=0,c=e.elements;a<c.length;a+=1){var u=c[a];u&&this.checkPatternExport(t,u)}else n==="Property"?this.checkPatternExport(t,e.value):n==="AssignmentPattern"?this.checkPatternExport(t,e.left):n==="RestElement"?this.checkPatternExport(t,e.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(t,e.expression)};yt.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}};yt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};yt.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(n)n=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e};yt.parseImport=function(t){return this.next(),this.type===S.string?(t.specifiers=iG,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};yt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===S.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,fs),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(S.comma))return t}if(this.type===S.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,fs),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(S.braceL);!this.eat(S.braceR);){if(e)e=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,fs),t.push(this.finishNode(r,"ImportSpecifier"))}return t};yt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===S.string){var t=this.parseLiteral(this.value);return QY.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};yt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};yt.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var or=Qe.prototype;or.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t};or.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];this.options.ecmaVersion===6&&e&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return t};or.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};or.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==S.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};or.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()};or.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(S.comma),e&&this.type===S.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===S.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};or.parseBindingListItem=function(t){return t};or.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};or.checkLValSimple=function(t,e,n){e===void 0&&(e=Xh);var i=e!==Xh;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(e===fs&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(Tl(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==z8&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}};or.checkLValPattern=function(t,e,n){switch(e===void 0&&(e=Xh),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,c=t.elements;a<c.length;a+=1){var u=c[a];u&&this.checkLValInnerPattern(u,e,n)}break;default:this.checkLValSimple(t,e,n)}};or.checkLValInnerPattern=function(t,e,n){switch(e===void 0&&(e=Xh),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var zi=function(e,n,i,r,s){this.token=e,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},Ne={b_stat:new zi("{",!1),b_expr:new zi("{",!0),b_tmpl:new zi("${",!1),p_stat:new zi("(",!1),p_expr:new zi("(",!0),q_tmpl:new zi("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new zi("function",!1),f_expr:new zi("function",!0),f_expr_gen:new zi("function",!0,!1,null,!0),f_gen:new zi("function",!1,!1,null,!0)},Bc=Qe.prototype;Bc.initialContext=function(){return[Ne.b_stat]};Bc.curContext=function(){return this.context[this.context.length-1]};Bc.braceIsBlock=function(t){var e=this.curContext();return e===Ne.f_expr||e===Ne.f_stat?!0:t===S.colon&&(e===Ne.b_stat||e===Ne.b_expr)?!e.isExpr:t===S._return||t===S.name&&this.exprAllowed?$i.test(this.input.slice(this.lastTokEnd,this.start)):t===S._else||t===S.semi||t===S.eof||t===S.parenR||t===S.arrow?!0:t===S.braceL?e===Ne.b_stat:t===S._var||t===S._const||t===S.name?!1:!this.exprAllowed};Bc.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Bc.updateContext=function(t){var e,n=this.type;n.keyword&&t===S.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr};Bc.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};S.parenR.updateContext=S.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===Ne.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};S.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ne.b_stat:Ne.b_expr),this.exprAllowed=!0};S.dollarBraceL.updateContext=function(){this.context.push(Ne.b_tmpl),this.exprAllowed=!0};S.parenL.updateContext=function(t){var e=t===S._if||t===S._for||t===S._with||t===S._while;this.context.push(e?Ne.p_stat:Ne.p_expr),this.exprAllowed=!0};S.incDec.updateContext=function(){};S._function.updateContext=S._class.updateContext=function(t){t.beforeExpr&&t!==S._else&&!(t===S.semi&&this.curContext()!==Ne.p_stat)&&!(t===S._return&&$i.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===S.colon||t===S.braceL)&&this.curContext()===Ne.b_stat)?this.context.push(Ne.f_expr):this.context.push(Ne.f_stat),this.exprAllowed=!1};S.backQuote.updateContext=function(){this.curContext()===Ne.q_tmpl?this.context.pop():this.context.push(Ne.q_tmpl),this.exprAllowed=!1};S.star.updateContext=function(t){if(t===S._function){var e=this.context.length-1;this.context[e]===Ne.f_expr?this.context[e]=Ne.f_expr_gen:this.context[e]=Ne.f_gen}this.exprAllowed=!0};S.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==S.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var jt=Qe.prototype;jt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i=t.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);return}r="$"+r;var a=e[r];if(a){var c;s==="init"?c=this.strict&&a.init||a.get||a.set:c=a.init||a[s],c&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=e[r]={init:!1,get:!1,set:!1};a[s]=!0}};jt.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===S.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(S.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r};jt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new gp,i=!0);var c=this.start,u=this.startLoc;(this.type===S.parenL||this.type===S.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,c,u)),this.type.isAssign){var f=this.startNodeAt(c,u);return f.operator=this.value,this.type===S.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===S.eq?this.checkLValPattern(l):this.checkLValSimple(l),f.left=l,this.next(),f.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(f,"AssignmentExpression")}else i&&this.checkExpressionErrors(e,!0);return r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),l};jt.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(S.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(S.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r};jt.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,t)};jt.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==S._in)&&s>i){var a=this.type===S.logicalOR||this.type===S.logicalAND,c=this.type===S.coalesce;c&&(s=S.logicalAND.binop);var u=this.value;this.next();var l=this.start,f=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),l,f,s,r),d=this.buildBinary(e,n,t,h,u,a||c);return(a&&this.type===S.coalesce||c&&(this.type===S.logicalOR||this.type===S.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,n,i,r)}return t};jt.buildBinary=function(t,e,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};jt.parseMaybeUnary=function(t,e,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),e=!0;else if(this.type.prefix){var c=this.startNode(),u=this.type===S.incDec;c.operator=this.value,c.prefix=!0,this.next(),c.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(t,!0),u?this.checkLValSimple(c.argument):this.strict&&c.operator==="delete"&&c.argument.type==="Identifier"?this.raiseRecoverable(c.start,"Deleting local variable in strict mode"):c.operator==="delete"&&W8(c.argument)?this.raiseRecoverable(c.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(c,u?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===S.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==S._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(r,s);l.operator=this.value,l.prefix=!1,l.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(S.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function W8(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&W8(t.expression)}jt.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&s.type==="MemberExpression"&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s};jt.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var c=this.parseSubscript(t,e,n,i,s,a,r);if(c.optional&&(a=!0),c===t||c.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(e,n);u.expression=c,c=this.finishNode(u,"ChainExpression")}return c}t=c}};jt.parseSubscript=function(t,e,n,i,r,s,a){var c=this.options.ecmaVersion>=11,u=c&&this.eat(S.questionDot);i&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(S.bracketL);if(l||u&&this.type!==S.parenL&&this.type!==S.backQuote||this.eat(S.dot)){var f=this.startNodeAt(e,n);f.object=t,l?(f.property=this.parseExpression(),this.expect(S.bracketR)):this.type===S.privateId&&t.type!=="Super"?f.property=this.parsePrivateIdent():f.property=this.parseIdent(this.options.allowReserved!=="never"),f.computed=!!l,c&&(f.optional=u),t=this.finishNode(f,"MemberExpression")}else if(!i&&this.eat(S.parenL)){var h=new gp,d=this.yieldPos,p=this.awaitPos,m=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!u&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(e,n),g,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=m||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=g,c&&(y.optional=u),t=this.finishNode(y,"CallExpression")}else if(this.type===S.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(e,n);v.tag=t,v.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(v,"TaggedTemplateExpression")}return t};jt.parseExprAtom=function(t,e){this.type===S.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===S.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(n,"Super");case S._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case S.name:var r=this.start,s=this.startLoc,a=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&c.name==="async"&&!this.canInsertSemicolon()&&this.eat(S._function))return this.overrideContext(Ne.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[c],!1,e);if(this.options.ecmaVersion>=8&&c.name==="async"&&this.type===S.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return c=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(S.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[c],!0,e)}return c;case S.regexp:var u=this.value;return n=this.parseLiteral(u.value),n.regex={pattern:u.pattern,flags:u.flags},n;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return n=this.startNode(),n.value=this.type===S._null?null:this.type===S._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case S.parenL:var l=this.start,f=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),f;case S.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(S.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case S.braceL:return this.overrideContext(Ne.b_expr),this.parseObj(!1,t);case S._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};jt.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case S.parenL:return this.parseDynamicImport(t);case S.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}};jt.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(S.parenR)){var e=this.start;this.eat(S.comma)&&this.eat(S.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};jt.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};jt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};jt.parseParenExpression=function(){this.expect(S.parenL);var t=this.parseExpression();return this.expect(S.parenR),t};jt.parseParenAndDistinguishExpression=function(t,e){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,c=this.startLoc,u=[],l=!0,f=!1,h=new gp,d=this.yieldPos,p=this.awaitPos,m;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;)if(l?l=!1:this.expect(S.comma),s&&this.afterTrailingComma(S.parenR,!0)){f=!0;break}else if(this.type===S.ellipsis){m=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var g=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(S.parenR),t&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,i,u,e);(!u.length||f)&&this.unexpected(this.lastTokStart),m&&this.unexpected(m),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?(r=this.startNodeAt(a,c),r.expressions=u,this.finishNodeAt(r,"SequenceExpression",g,y)):r=u[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,i);return v.expression=r,this.finishNode(v,"ParenthesizedExpression")}else return r};jt.parseParenItem=function(t){return t};jt.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var sG=[];jt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(S.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===S._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&t.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(S.parenL)?t.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1):t.arguments=sG,this.finishNode(t,"NewExpression")};jt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===S.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===S.backQuote,this.finishNode(n,"TemplateElement")};jt.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(S.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")};jt.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!$i.test(this.input.slice(this.lastTokEnd,this.start))};jt.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(S.braceR);){if(i)i=!1;else if(this.expect(S.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(S.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")};jt.parseProperty=function(t,e){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return t?(n.argument=this.parseIdent(!1),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,e),this.type===S.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(t||e)&&(s=this.start,a=this.startLoc),t||(i=this.eat(S.star)));var c=this.containsEsc;return this.parsePropertyName(n),!t&&!c&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,t,i,r,s,a,e,c),this.finishNode(n,"Property")};jt.parsePropertyValue=function(t,e,n,i,r,s,a,c){if((n||i)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===S.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(!e&&!c&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==S.comma&&this.type!==S.braceR&&this.type!==S.eq){(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u=t.kind==="get"?0:1;if(t.value.params.length!==u){var l=t.value.start;t.kind==="get"?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===S.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};jt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(S.bracketR),t.key;t.computed=!1}return t.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};jt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};jt.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(X1(e,i.generator)|G1|(n?V8:0)),this.expect(S.parenL),i.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};jt.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(X1(n,!1)|P8),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};jt.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==S.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var c=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!s||c)&&(a=this.strictDirective(this.end),a&&c&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,z8),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=u}this.exitScope()};jt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(i.type!=="Identifier")return!1}return!0};jt.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,J1,e?null:n)}};jt.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(S.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===S.comma?a=null:this.type===S.ellipsis?(a=this.parseSpread(i),i&&this.type===S.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};jt.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))}};jt.parseIdent=function(t){var e=this.startNode();return this.type===S.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};jt.parsePrivateIdent=function(){var t=this.startNode();return this.type===S.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t};jt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(S.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};jt.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var Qh=Qe.prototype;Qh.raise=function(t,e){var n=L8(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i};Qh.raiseRecoverable=Qh.raise;Qh.curPosition=function(){if(this.options.locations)return new Ku(this.curLine,this.pos-this.lineStart)};var _a=Qe.prototype,aG=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};_a.enterScope=function(t){this.scopeStack.push(new aG(t))};_a.exitScope=function(){this.scopeStack.pop()};_a.treatFunctionsAsVarInScope=function(t){return t.flags&Lc||!this.inModule&&t.flags&Xu};_a.declareName=function(t,e,n){var i=!1;if(e===fs){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&r.flags&Xu&&delete this.undefinedExports[t]}else if(e===j8){var s=this.currentScope();s.lexical.push(t)}else if(e===$8){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(t)>-1:i=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var c=this.scopeStack.length-1;c>=0;--c){var u=this.scopeStack[c];if(u.lexical.indexOf(t)>-1&&!(u.flags&U8&&u.lexical[0]===t)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(t)>-1){i=!0;break}if(u.var.push(t),this.inModule&&u.flags&Xu&&delete this.undefinedExports[t],u.flags&K1)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")};_a.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};_a.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};_a.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&K1)return e}};_a.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&K1&&!(e.flags&P8))return e}};var yp=function(e,n,i){this.type="",this.start=n,this.end=0,e.options.locations&&(this.loc=new mp(e,i)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[n,0])},Cl=Qe.prototype;Cl.startNode=function(){return new yp(this,this.start,this.startLoc)};Cl.startNodeAt=function(t,e){return new yp(this,t,e)};function H8(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}Cl.finishNode=function(t,e){return H8.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};Cl.finishNodeAt=function(t,e,n,i){return H8.call(this,t,e,n,i)};Cl.copyNode=function(t){var e=new yp(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var Y8="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",G8=Y8+" Extended_Pictographic",K8=G8,X8=K8+" EBase EComp EMod EPres ExtPict",J8=X8,oG=J8,cG={9:Y8,10:G8,11:K8,12:X8,13:J8,14:oG},kw="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Q8="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Z8=Q8+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",tT=Z8+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",eT=tT+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",nT=eT+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",uG=nT+" Kawi Nag_Mundari Nagm",lG={9:Q8,10:Z8,11:tT,12:eT,13:nT,14:uG},iT={};function fG(t){var e=iT[t]={binary:Da(cG[t]+" "+kw),nonBinary:{General_Category:Da(kw),Script:Da(lG[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var D0=0,Cw=[9,10,11,12,13,14];D0<Cw.length;D0+=1){var hG=Cw[D0];fG(hG)}var ht=Qe.prototype,ks=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=iT[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ks.prototype.reset=function(e,n,i){var r=i.indexOf("u")!==-1;this.start=e|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};ks.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};ks.prototype.at=function(e,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(e>=r)return-1;var s=i.charCodeAt(e);if(!(n||this.switchU)||s<=55295||s>=57344||e+1>=r)return s;var a=i.charCodeAt(e+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};ks.prototype.nextIndex=function(e,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(e>=r)return r;var s=i.charCodeAt(e),a;return!(n||this.switchU)||s<=55295||s>=57344||e+1>=r||(a=i.charCodeAt(e+1))<56320||a>57343?e+1:e+2};ks.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};ks.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};ks.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};ks.prototype.eat=function(e,n){return n===void 0&&(n=!1),this.current(n)===e?(this.advance(n),!0):!1};ht.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);e.indexOf(r)===-1&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}};ht.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))};ht.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];t.groupNames.indexOf(i)===-1&&t.raise("Invalid named capture referenced")}};ht.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};ht.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};ht.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};ht.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1};ht.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};ht.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};ht.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return r!==-1&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1};ht.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};ht.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};ht.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1};ht.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};ht.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};ht.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};ht.regexp_eatSyntaxCharacter=function(t){var e=t.current();return rT(e)?(t.lastIntValue=e,t.advance(),!0):!1};function rT(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}ht.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;(n=t.current())!==-1&&!rT(n);)t.advance();return t.pos!==e};ht.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};ht.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t)){t.groupNames.indexOf(t.lastStringValue)!==-1&&t.raise("Duplicate capture group name"),t.groupNames.push(t.lastStringValue);return}t.raise("Invalid group")}};ht.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};ht.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=sa(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=sa(t.lastIntValue);return!0}return!1};ht.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),dG(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function dG(t){return xs(t,!0)||t===36||t===95}ht.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),pG(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function pG(t){return yc(t,!0)||t===36||t===95||t===8204||t===8205}ht.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};ht.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1};ht.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};ht.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};ht.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};ht.regexp_eatZero=function(t){return t.current()===48&&!bp(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};ht.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};ht.regexp_eatControlLetter=function(t){var e=t.current();return sT(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function sT(t){return t>=65&&t<=90||t>=97&&t<=122}ht.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var n=t.pos,i=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(i&&r>=55296&&r<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}t.pos=s,t.lastIntValue=r}return!0}if(i&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&mG(t.lastIntValue))return!0;i&&t.raise("Invalid unicode escape"),t.pos=n}return!1};function mG(t){return t>=0&&t<=1114111}ht.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};ht.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};ht.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(gG(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(e===80||e===112)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1};function gG(t){return t===100||t===68||t===115||t===83||t===119||t===87}ht.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1};ht.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Tl(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")};ht.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")};ht.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";aT(e=t.current());)t.lastStringValue+=sa(e),t.advance();return t.lastStringValue!==""};function aT(t){return sT(t)||t===95}ht.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";yG(e=t.current());)t.lastStringValue+=sa(e),t.advance();return t.lastStringValue!==""};function yG(t){return aT(t)||bp(t)}ht.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};ht.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1};ht.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;t.switchU&&(e===-1||n===-1)&&t.raise("Invalid character class"),e!==-1&&n!==-1&&e>n&&t.raise("Range out of order in character class")}}};ht.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(n===99||uT(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return i!==93?(t.lastIntValue=i,t.advance(),!0):!1};ht.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};ht.regexp_eatClassControlLetter=function(t){var e=t.current();return bp(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};ht.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};ht.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;bp(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e};function bp(t){return t>=48&&t<=57}ht.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;oT(n=t.current());)t.lastIntValue=16*t.lastIntValue+cT(n),t.advance();return t.pos!==e};function oT(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function cT(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}ht.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+n*8+t.lastIntValue:t.lastIntValue=e*8+n}else t.lastIntValue=e;return!0}return!1};ht.regexp_eatOctalDigit=function(t){var e=t.current();return uT(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function uT(t){return t>=48&&t<=55}ht.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!oT(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+cT(r),t.advance()}return!0};var Z1=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new mp(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Xt=Qe.prototype;Xt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Z1(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Xt.getToken=function(){return this.next(),new Z1(this)};typeof Symbol<"u"&&(Xt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===S.eof,value:e}}}});Xt.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(S.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};Xt.readToken=function(t){return xs(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};Xt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};Xt.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=F8(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())};Xt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Rc(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())};Xt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(t>8&&t<14||t>=5760&&D8.test(String.fromCharCode(t)))++this.pos;else break t}}};Xt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)};Xt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))};Xt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(S.assign,2):this.finishOp(S.slash,1)};Xt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=t===42?S.star:S.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++n,i=S.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(S.assign,n+1):this.finishOp(i,n)};Xt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(S.assign,3)}return this.finishOp(t===124?S.logicalOR:S.logicalAND,2)}return e===61?this.finishOp(S.assign,2):this.finishOp(t===124?S.bitwiseOR:S.bitwiseAND,1)};Xt.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)};Xt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||$i.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(S.incDec,2):e===61?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)};Xt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(S.assign,n+1):this.finishOp(S.bitShift,n)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(n=2),this.finishOp(S.relational,n))};Xt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(S.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(t===61?S.eq:S.prefix,1)};Xt.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(S.questionDot,2)}if(e===63){if(t>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(S.assign,3)}return this.finishOp(S.coalesce,2)}}return this.finishOp(S.question,1)};Xt.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),xs(e,!0)||e===92))return this.finishToken(S.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+sa(e)+"'")};Xt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(S.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+sa(t)+"'")};Xt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)};Xt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if($i.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if(i==="[")e=!0;else if(i==="]"&&e)e=!1;else if(i==="/"&&!e)break;t=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var c=this.regexpState||(this.regexpState=new ks(this));c.reset(n,r,a),this.validateRegExpFlags(c),this.validateRegExpPattern(c);var u=null;try{u=new RegExp(r,a)}catch{}return this.finishToken(S.regexp,{pattern:r,flags:a,value:u})};Xt.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&e===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,c=0,u=0,l=e??1/0;u<l;++u,++this.pos){var f=this.input.charCodeAt(this.pos),h=void 0;if(i&&f===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),c===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),c=f;continue}if(f>=97?h=f-97+10:f>=65?h=f-65+10:f>=48&&f<=57?h=f-48:h=1/0,h>=t)break;c=f,a=a*t+h}return i&&c===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||e!=null&&this.pos-s!==e?null:a};function bG(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function lT(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}Xt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return n==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=lT(this.input.slice(e,this.pos)),++this.pos):xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,n)};Xt.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var n=this.pos-e>=2&&this.input.charCodeAt(e)===48;n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&i===110){var r=lT(this.input.slice(e,this.pos));return++this.pos,xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),xs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=bG(this.input.slice(e,this.pos),n);return this.finishToken(S.num,s)};Xt.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e};Xt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;i===92?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Rc(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(S.string,e)};var fT={};Xt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===fT)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};Xt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw fT;this.raise(t,e)};Xt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===S.template||this.type===S.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(S.template,t));if(n===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Rc(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};Xt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Xt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return sa(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),(i!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Rc(e)?"":String.fromCharCode(e)}};Xt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return n===null&&this.invalidStringToken(e,"Bad character escape sequence"),n};Xt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(yc(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?xs:yc)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=sa(a),n=this.pos}else break;e=!1}return t+this.input.slice(n,this.pos)};Xt.readWord=function(){var t=this.readWord1(),e=S.name;return this.keywords.test(t)&&(e=H1[t]),this.finishToken(e,t)};var _G="8.8.2";Qe.acorn={Parser:Qe,version:_G,defaultOptions:fg,Position:Ku,SourceLocation:mp,getLineInfo:L8,Node:yp,TokenType:ne,tokTypes:S,keywordTypes:H1,TokContext:zi,tokContexts:Ne,isIdentifierChar:yc,isIdentifierStart:xs,Token:Z1,isNewLine:Rc,lineBreak:$i,lineBreakG:KY,nonASCIIwhitespace:D8};function vG(t,e){return Qe.parse(t,e)}const tb={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},wG={ecmaVersion:11},Mw="$",xG="d",SG="d1",EG="d2",cn=t=>(e,n)=>n.error(e,t+" not allowed"),IG=cn("Aggregate function"),AG=cn("Window function"),TG="Invalid argument",eb="Invalid column reference",kG=eb+" (must be input to an aggregate function)",hT="Invalid function call",CG="Invalid member expression",MG="Invalid operator parameter",NG="Invalid param reference",OG="Invalid variable reference",FG="Variable not accessible in operator call",DG="Unsupported variable declaration",RG="Unsupported destructuring pattern",dT="Table expressions do not support closures",pT="Use aq.escape(fn) to use a function as-is (including closures)",LG="use table.params({ name: value }) to define dynamic parameters",BG="use aq.addFunction(name, fn) to add new op functions",PG=`
Note: ${dT}. ${pT}, or ${LG}.`,mT=`
Note: ${dT}. ${pT}, or ${BG}.`,UG=`The ${b8} method is not valid in multi-table expressions.`;function VG(t,e){const n=$G(e);let i=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,UY(i)?(zG(i,t),i=i.body):t.join?(t.scope.add(t.tuple1=SG),t.scope.add(t.tuple2=EG),t.scope.add(t.$param=Mw)):(t.scope.add(t.tuple=xG),t.scope.add(t.$param=Mw)),te(i,t,nb),t.root}function $G(t){try{const e=t.field?jG(t):ce(t)?Ur(t):t;return vG(`expr=(${e})`,wG).body[0].expression.right}catch{Vt(`Expression parse error: ${t+""}`)}}function jG(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}const nb={FunctionDeclaration:cn("Function definitions"),ForStatement:cn("For loops"),ForOfStatement:cn("For-of loops"),ForInStatement:cn("For-in loops"),WhileStatement:cn("While loops"),DoWhileStatement:cn("Do-while loops"),AwaitExpression:cn("Await expressions"),ArrowFunctionExpression:cn("Function definitions"),AssignmentExpression:cn("Assignments"),FunctionExpression:cn("Function definitions"),NewExpression:cn('Use of "new"'),UpdateExpression:cn("Update expressions"),VariableDeclarator(t,e){mg(t.id,e)},Identifier(t,e,n){bT(t,e,n)&&!e.scope.has(t.name)&&e.error(t,OG,PG)},CallExpression(t,e){const n=gT(t.callee),i=m8(n)||g8(n);if(i){if((e.join||e.aggregate===!1)&&P1(n)&&IG(t,e),(e.join||e.window===!1)&&U1(n)&&AG(t,e),e.$op=1,e.ast)pg(t,n,e),t.arguments.forEach(r=>te(r,e,dg));else{const r=e.op(qG(e,i,n,t.arguments));Object.assign(t,{type:l8,name:r.id})}return e.$op=0,!1}else p8(n)?pg(t,n,e):e.error(t,hT,mT)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!Xe(qs,i))return;const{name:s}=i;if(yT(t)&&Xe(qs,r)&&nr(tb,r.name)){wT(t,r.name);return}const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;if(a>=0)return Nw(t,a,e,_T,n);if(s===e.$param)return Nw(t,a,e,HG);e.paramsRef.has(s)?Ju(t,e.paramsRef.get(s)):e.columnRef.has(s)?vT(i,s,e,t):nr(e.params,s)&&Ju(i,s)}};function Nw(t,e,n,i,r){const{property:s,computed:a}=t;let c;if(!a)c=s.name;else if(Xe(Dc,s))c=s.value;else try{te(s,n,nb,t),c=n.param(s)}catch{n.error(t,CG)}return i(t,c,e,n,r),!1}const dg={...nb,VariableDeclarator:cn("Variable declaration in operator call"),Identifier(t,e,n){bT(t,e,n)&&e.error(t,FG)},CallExpression(t,e){const n=gT(t.callee);p8(n)?pg(t,n,e):e.error(t,hT,mT)}};function zG(t,e){t.generator&&cn("Generator functions")(t,e),t.async&&cn("Async functions")(t,e);const{params:n}=t,i=n.length,r=a=>(c,u)=>e.columnRef.set(c,[u,a]),s=(a,c)=>e.paramsRef.set(a,c);i&&(e.join?(Zc(e,n[0],"tuple1",r(1)),i>1&&Zc(e,n[1],"tuple2",r(2)),i>2&&Zc(e,n[2],"$param",s)):(Zc(e,n[0],"tuple",r(0)),i>1&&Zc(e,n[1],"$param",s))),e.root=t.body}function Zc(t,e,n,i){Xe(qs,e)?(t.scope.add(e.name),t[n]=e.name):Xe(c8,e)&&e.properties.forEach(r=>{const s=Xe(qs,r.key)?r.key.name:Xe(Dc,r.key)?r.key.value:t.error(r,TG);Xe(qs,r.value)||t.error(r.value,RG),i(r.value.name,s)})}function qG(t,e,n,i){const r=[],s=[],a=e.param[0]||0,c=a+(e.param[1]||0);return i.forEach((u,l)=>{l<a?(te(u,t,dg),r.push(t.field(u))):l<c?(te(u,t,dg),s.push(t.param(u))):t.error(u,MG)}),{name:n,fields:r,params:s,...t.spec.window||{}}}function gT(t){return Xe(qs,t)?t.name:Xe(o8,t)?yT(t)?WG(t.property.name):t.property.name:null}function yT(t){return Xe(qs,t.object)&&t.object.name==="Math"}function WG(t){return t==="max"?"greatest":t==="min"?"least":t}function bT(t,e,n){const{name:i}=t;if(!(Xe(o8,n)&&n.property===t)){if(!(Xe(u8,n)&&n.key===t))if(e.paramsRef.has(i))Ju(t,e.paramsRef.get(i));else if(e.columnRef.has(i))vT(t,i,e,n);else if(nr(e.params,i))Ju(t,i);else if(nr(tb,i))wT(t,i);else return!0}}function _T(t,e,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,eb),i.aggronly&&!i.$op&&i.error(t,kG),y8(t,e,n,a,r)}function vT(t,e,n,i){const[r,s]=n.columnRef.get(e);_T(t,r,s,n,i)}function HG(t,e,n,i){i.params&&!nr(i.params,e)&&i.error(t,NG),Ju(t,e)}function Ju(t,e){t.type=VH,t.name=e}function wT(t,e){t.type=BH,t.name=e,t.raw=tb[e]}function pg(t,e,n){if(e===b8){const i=n.table;i||n.error(t,UG),_8(t,t.arguments.length?t.arguments.map(r=>{const s=n.param(r),a=Dn(s)?i.columnName(s):s;return i.column(a)||n.error(r,eb),a}):i.columnNames())}else t.callee={type:UH,name:e}}function mg(t,e){Xe(qs,t)?e.scope.add(t.name):Xe(FH,t)?t.elements.forEach(n=>mg(n,e)):Xe(c8,t)?t.properties.forEach(n=>mg(n.value,e)):e.error(t.id,DG)}const YG={[Al]:1,[l8]:1};function ei(t,e={}){const n=e.generate||Gh,i=e.compiler||V1,r=KG(e),s={},a={},c=[],u=[];let l=0,f=-1;const h=e.join?i.join:e.index==1?i.expr2:i.expr,d={op(g){const y=GG(g);return a[y]||(g.id=++f,a[y]=g)},field(g){const y=n(g);return s[y]||(s[y]=++l)},param(g){return Xe(Dc,g)?g.value:i.param(n(g),r)},value(g,y){c.push(g);const v=y.escape||(e.ast?PY(y):h(n(y),r));u.push(v),YG[y.type]&&v!==y&&xn(v)&&(v.field=y.name)},error(g,y,v=""){const b=g.start-6,x=g.end-6,w=String(d.spec).slice(b,x);Vt(`${y}: "${w}"${v}`)}};Object.assign(d,e,{params:r});for(const[g,y]of fp(t))d.value(g+"",y.escape?jY(d,y,r):VG(d,y));if(e.ast)return{names:c,exprs:u};const p=[];for(const g in s)p[s[g]]=i.expr(g,r);const m=Object.values(a);return m.forEach(g=>g.fields=g.fields.map(y=>p[y])),{names:c,exprs:u,ops:m}}function GG(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){const n=t.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);e+=`[${n},${!!t.peers}]`}return e}function KG(t){return(t.table?R0(t.table):t.join?{...R0(t.join[1]),...R0(t.join[0])}:{})||{}}function R0(t){return t&&Me(t.params)?t.params():{}}const xT="Expr",qi="ExprList",ST="ExprNumber",lu="ExprObject",No="JoinKeys",Zh="JoinValues",Si="Options",ib="OrderKeys",Fs="SelectionList",Sa="TableRef",Oo="TableRefList",XG="Descending",JG="Query",QG="Selection",ZG="Verb",tK="Window";function rb(t,e){return t&&t.expr?new Ow({...t,...e}):new Ow(e,t)}class Ow{constructor(e,n){this.expr=n,Object.assign(this,e)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Me(this.expr)?{func:!0}:{}}}}function eK(t){return rb(t,{desc:!0})}function eo(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return rb(t,e?{expr:e,...i}:i)}function nK(t,e,n){return rb(t,{window:{frame:e||[-1/0,0],peers:!!n}})}function iK(t){const e=n=>n;return e.toString=()=>t,e}function Fw(t,e){return e=e&&Me(e.query)?e.query():e,e&&Me(e.evaluate)?e.evaluate(null,t):t(e)}function ET(t){return xn(t)&&(ce(t.all)||ce(t.matches)||ce(t.not)||ce(t.range))}function Qu(t){return t&&Me(t.toObject)?t.toObject():Me(t)?{expr:String(t),func:!0}:ce(t)?t.map(Qu):xn(t)?dp(t,e=>Qu(e)):t}function sb(t){return ce(t)?t.map(sb):xn(t)?ce(t.verbs)?Ml.from(t):ce(t.all)?gc():ce(t.range)?FY(...t.range):ce(t.match)?DY(RegExp(...t.match)):ce(t.not)?C8(t.not.map(Qu)):rK(t):t}function rK(t){let e=t,n=t.expr;if(n!=null){if(t.field===!0?e=n=eo(n):t.func===!0&&(e=n=iK(n)),xn(t.window)){const{frame:i,peers:r}=t.window;e=n=nK(n,i,r)}t.desc===!0&&(e=eK(n))}return t===e?dp(t,i=>sb(i)):e}function sK(t){return ce(t)?t.map(aK):t}function aK(t){const e=[];return ti(t).forEach(n=>{Dn(n)?e.push(n):pn(n)?e.push(eo(n,null)):xn(n)&&n.expr||Me(n)?e.push(n):Vt(`Invalid key value: ${n+""}`)}),e}function oK(t){return ce(t)?t.map(cK):t}function cK(t,e){return e<2?ti(t):t}function uK(t){const e=[];return t.forEach(n=>{const i=n.expr!=null?n.expr:n;if(xn(i)&&!Me(i))for(const r in i)e.push(i[r]);else n=Dn(i)?i:pn(i)?eo(n):Me(i)?n:Vt(`Invalid orderby field: ${n+""}`),e.push(n)}),e}const lK={[xT]:kT,[qi]:bc,[ST]:gK,[lu]:aa,[No]:yK,[Zh]:bK,[ib]:bc,[Fs]:pK};function fK(t,e,n){return e===Sa?Dw(t):e===Oo?t.map(Dw):IT(Qu(t),e,n)}function IT(t,e,n){return e===Si?t&&hK(t,n):lK[e](t)}function hK(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?IT(r,e[i]):r}return n}function dK(t,e){return ei({expr:t},{...e,ast:!0}).exprs[0]}function ab(t){return{type:Al,name:t}}function AT(t){return{type:Al,index:t}}function aa(t,e){if(pn(t))return dK(t,e);if(t.expr){let n;if(t.field===!0?n=ab(t.expr):t.func===!0&&(n=aa(t.expr,e)),n)return t.desc&&(n={type:XG,expr:n}),t.window&&(n={type:tK,expr:n,...t.window}),n}return Object.keys(t).map(n=>({...aa(t[n],e),as:n}))}function TT(t){const e=QG;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:bc(t.not)}:t.range?{type:e,operator:"range",arguments:bc(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:Vt("Invalid input")}function pK(t){return ti(t).map(mK).flat()}function mK(t){return ET(t)?TT(t):Dn(t)?AT(t):pn(t)?ab(t):xn(t)?Object.keys(t).map(e=>({type:Al,name:e,as:t[e]})):Vt("Invalid input")}function kT(t){return ET(t)?TT(t):Dn(t)?AT(t):pn(t)?ab(t):xn(t)?aa(t):Vt("Invalid input")}function bc(t){return ti(t).map(kT).flat()}function gK(t){return Dn(t)?t:aa(t)}function yK(t){return ce(t)?t.map(bc):aa(t,{join:!0})}function bK(t){return ce(t)?t.map((e,n)=>n<2?bc(e):aa(e,{join:!0})):aa(t,{join:!0})}function Dw(t){return t&&Me(t.toAST)?t.toAST():t}class CT{constructor(e,n=[],i=[]){this.verb=e,this.schema=n,n.forEach((r,s)=>{const a=r.type,c=i[s],u=a===No?sK(c):a===Zh?oK(c):a===ib?uK(c):c;this[r.name]=u!==void 0?u:r.default})}static from(e){const n=gg[e.verb],i=(n.schema||[]).map(({name:r})=>sb(e[r]));return n(...i)}evaluate(e,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===Sa?Fw(n,a):s===Oo?a.map(c=>Fw(n,c)):a});return e[this.verb](...i)}toObject(){const e={verb:this.verb};return this.schema.forEach(({name:n})=>{e[n]=Qu(this[n])}),e}toAST(){const e={type:ZG,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{e[n]=fK(this[n],i,r)}),e}}function ye(t,e){return Object.assign((...n)=>new CT(t,e,n),{schema:e})}const gg={count:ye("count",[{name:"options",type:Si}]),derive:ye("derive",[{name:"values",type:lu},{name:"options",type:Si,props:{before:Fs,after:Fs}}]),filter:ye("filter",[{name:"criteria",type:lu}]),groupby:ye("groupby",[{name:"keys",type:qi}]),orderby:ye("orderby",[{name:"keys",type:ib}]),relocate:ye("relocate",[{name:"columns",type:Fs},{name:"options",type:Si,props:{before:Fs,after:Fs}}]),rename:ye("rename",[{name:"columns",type:Fs}]),rollup:ye("rollup",[{name:"values",type:lu}]),sample:ye("sample",[{name:"size",type:ST},{name:"options",type:Si,props:{weight:xT}}]),select:ye("select",[{name:"columns",type:Fs}]),ungroup:ye("ungroup"),unorder:ye("unorder"),reify:ye("reify"),dedupe:ye("dedupe",[{name:"keys",type:qi,default:[]}]),impute:ye("impute",[{name:"values",type:lu},{name:"options",type:Si,props:{expand:qi}}]),fold:ye("fold",[{name:"values",type:qi},{name:"options",type:Si}]),pivot:ye("pivot",[{name:"keys",type:qi},{name:"values",type:qi},{name:"options",type:Si}]),spread:ye("spread",[{name:"values",type:qi},{name:"options",type:Si}]),unroll:ye("unroll",[{name:"values",type:qi},{name:"options",type:Si,props:{drop:qi}}]),lookup:ye("lookup",[{name:"table",type:Sa},{name:"on",type:No},{name:"values",type:qi}]),join:ye("join",[{name:"table",type:Sa},{name:"on",type:No},{name:"values",type:Zh},{name:"options",type:Si}]),cross:ye("cross",[{name:"table",type:Sa},{name:"values",type:Zh},{name:"options",type:Si}]),semijoin:ye("semijoin",[{name:"table",type:Sa},{name:"on",type:No}]),antijoin:ye("antijoin",[{name:"table",type:Sa},{name:"on",type:No}]),concat:ye("concat",[{name:"tables",type:Oo}]),union:ye("union",[{name:"tables",type:Oo}]),intersect:ye("intersect",[{name:"tables",type:Oo}]),except:ye("except",[{name:"tables",type:Oo}])};class Ml extends G4{constructor(e,n,i){super(n),this._verbs=e||[],this._table=i}static from({verbs:e,table:n,params:i}){return new Ml(e.map(CT.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(e){return arguments.length?(this._params={...this._params,...e},this):this._params}evaluate(e,n){e=e||n(this._table);for(const i of this._verbs)e=i.evaluate(e.params(this._params),n);return e}toObject(){return Rw(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Rw(this,"toAST",{type:JG})}}function Rw(t,e,n){return{...n,verbs:t._verbs.map(i=>i[e]()),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function _K(t,e){return new Ml(t._verbs.concat(e),t._params,t._table)}for(const t in gg){const e=gg[t];Ml.prototype["__"+t]=function(n,...i){return _K(n,e(...i))}}function Pc(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((c,u)=>`${i[a]}${u} = ${i[a]}[${u}]`).join(", ")).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}function vK(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()}function ob(t,e){const n=pi();return e.forEach((i,r)=>{const s=pn(i)?i:r;if(s){const a=t.column(r)||Vt(`Unrecognized column: ${r}`);n.add(s,a)}}),t.create(n)}function MT(t,e,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||Vt("relocate requires a before or after option."),r&&s&&Vt("relocate accepts only one of the before or after options."),e=ws(t,e);const a=[...ws(t,r?n:i).keys()],c=r?a[0]:a.pop(),u=new Map;return t.columnNames().forEach(l=>{const f=!e.has(l);if(l===c){s&&f&&u.set(l,l);for(const[h,d]of e)u.set(h,d);if(s)return}f&&u.set(l,l)}),ob(t,u)}function Nl(t,e=i=>i,n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function cb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function wK(t,e=0,n=t.length){let i=n?t[e++]:ie;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}function xK(t,e=0,n=t.length){let i=n?t[e++]:ie;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}function rf(t){return Gu(t)?t:+t}function SK(t,e){const n=t.length;if(!n)return ie;if((e=+e)<=0||n<2)return rf(t[0]);if(e>=1)return rf(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=rf(t[r]);return Gu(s)?s:s+(rf(t[r+1])-s)*(i-r)}class EK{constructor(e){this._values=e||[],this._sorted=null,this._start=0}values(e){return this._start&&(this._values=this._values.slice(this._start),this._start=0),e?this._values.slice():this._values}add(e){this._values.push(e),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:wK(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:xK(this._values,this._start)}quantile(e){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(cb)),SK(this._sorted,e)}}const td=(t,e,n)=>Pc(e,"{"+Nl(t,(i,r)=>`_${r}.${n}(${e});`)+"}",t);function IK(t,e){const{ops:n,output:i}=AK(t,e),r=t[0].fields,s=r.length,a=s===0?ub:s===1?TK:s===2?kK:Vt("Unsupported field count: "+s);return new a(r,n,i,e)}function AK(t,e){const n={},i=[];function r(a,c=[]){const u=a+":"+c;if(n[u])return n[u];const l=m8(a),f=l.create(...c);return e<0&&l.stream&&l.stream.forEach(h=>r(h,[])),l.req&&l.req.forEach(h=>r(h,[])),n[u]=f,i.push(f),f}const s=t.map(a=>{const c=r(a.name,a.params);return c.output=a.id,c});return{ops:i,output:s}}class ub extends LY{constructor(e,n,i,r){super(i),this._op=n,this._fields=e,this._stream=!!r}init(){const e={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(e)),e.values&&(e.list=new EK),e}write(e,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(e);return 1}_add(){}_rem(){}add(e){++e.count}rem(e){--e.count}}class TK extends ub{constructor(e,n,i,r){super(e,n,i,r);const s=["state","v1","v2"];this._add=td(n,s,"add"),this._rem=td(n,s,"rem")}add(e,n,i){const r=this._fields[0](n,i);++e.count,Ki(r)&&(++e.valid,e.list&&e.list.add(r),this._add(e,r))}rem(e,n,i){const r=this._fields[0](n,i);--e.count,Ki(r)&&(--e.valid,e.list&&e.list.rem(),this._rem(e,r))}}class kK extends ub{constructor(e,n,i,r){super(e,n,i,r);const s=["state","v1","v2"];this._add=td(n,s,"add"),this._rem=td(n,s,"rem")}add(e,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++e.count,Ki(r)&&Ki(s)&&(++e.valid,e.list&&e.list.add([r,s]),this._add(e,r,s))}rem(e,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--e.count,Ki(r)&&Ki(s)&&(--e.valid,e.list&&e.list.rem(),this._rem(e,r,s))}}function uo(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=Uc(t,e),a=r?(c,u)=>s[c][r[u]]:c=>s[c][0];n=n.map(c=>u=>c(u,i,a))}return n}function Uc(t,e,n){if(!e.length)return n;const i=NT(e),r=t.groups(),s=r?r.size:1;return n=n||up(e.length,()=>Array(s)),s>1?i.forEach(a=>{const c=FT(t,a,r);for(let u=0;u<s;++u)a.write(c[u],n,u)}):i.forEach(a=>{const c=OT(t,a);a.write(c,n,0)}),n}function NT(t,e){const n=[],i={};for(const r of t){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(IK(i[r],e));return n}function OT(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const a=t.indices();for(let c=0;c<i;++c)e.add(n,a[c],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))e.add(n,a,r);else for(let a=0;a<i;++a)e.add(n,a,r);return n}function FT(t,e,n){const{keys:i,size:r}=n,s=up(r,()=>e.init()),a=t.data();if(t.isOrdered()){const c=t.indices(),u=c.length;for(let l=0;l<u;++l){const f=c[l];e.add(s[i[f]],f,a)}}else if(t.isFiltered()){const c=t.mask();for(let u=c.next(0);u>=0;u=c.next(u+1))e.add(s[i[u]],u,a)}else{const c=t.totalRows();for(let u=0;u<c;++u)e.add(s[i[u]],u,a)}return s}function DT(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let c=0;c<a;++c){const u=t.add(i[c],Array(s)),l=n[c];for(let f=0;f<s;++f)u[f]=l(r[f])}}function RT(t){return{left(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const Lw=RT(cb);function CK(t,e,n,i,r){let s,a,c,u,l;const f=g=>a[g-1]===a[g],h=i.length,d=r.length,p=i.length?Pc(["w","r","k"],"{"+Nl(i,(g,y)=>`r[_${y}.id][k]=_${y}.value(w,_${y}.get);`)+"}",i):()=>{},m={i0:0,i1:0,index:0,size:0,peer:f,init(g,y,v,b){m.index=m.i0=m.i1=0,m.size=y.length,s=g,a=y,u=v,l=b,c=r?r.map(x=>x.init()):null;for(let x=0;x<h;++x)i[x].init();return m},value(g,y){return y(s[g],t)},step(g){const[y,v]=e,b=m.size,x=m.i0,w=m.i1;m.i0=y!=null?Math.max(0,g-Math.abs(y)):0,m.i1=v!=null?Math.min(b,g+Math.abs(v)+1):b,m.index=g,n&&(m.i0>0&&f(m.i0)&&(m.i0=Lw.left(a,a[m.i0])),m.i1<b&&f(m.i1)&&(m.i1=Lw.right(a,a[m.i1-1])));for(let _=0;_<d;++_){const E=r[_],T=c[_];for(let C=x;C<m.i0;++C)E.rem(T,s[C],t);for(let C=w;C<m.i1;++C)E.add(T,s[C],t);E.write(T,u,l)}return p(m,u,l),u}};return m}const MK=t=>(t.frame||[null,null]).map(e=>Number.isFinite(e)?Math.abs(e):null),NK=t=>!!t.peers;function OK(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=g8(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}function FK(t,e,n,i={},r){const s=t.data(),a=DK(r,s),c=a.length,u=Pc(["r","d","op"],"{"+Nl(e,(l,f)=>`_${f}[r] = $${f}(r, d, op);`)+"}",e,n);t.partitions().forEach((l,f)=>{const h=l.length,d=RK(t,l);for(let m=0;m<c;++m)a[m].init(l,d,i,f);const p=m=>i[m][f];for(let m=0;m<h;++m){for(let g=0;g<c;++g)a[g].step(m);u(l[m],s,p)}})}function DK(t,e){const n={};return t.forEach(i=>{const r=MK(i),s=NK(i),a=`${r},${s}`,{aggOps:c,winOps:u}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});P1(i.name)?c.push(i):u.push(OK(i))}),Object.values(n).map(i=>CK(e,i.frame,i.peers,i.winOps,NT(i.aggOps,i.frame[0]!=null?-1:1)))}function RK(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let a=1,c=0;a<r;++a)s[a]=n(e[a-1],e[a],i)?++c:c;return s}else return e}function LK(t){return U1(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function lb(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=pi(r.drop?null:t),c=e.map(d=>a.add(d,Array(s))),[u,l]=BK(i),f=t.isGrouped()?t.groups().size:1,h=Uc(t,u,up(i.length,()=>Array(f)));return l.length?FK(t,c,n,h,l):PK(t,c,n,h),t.create(a)}function BK(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const s=t[r];s.id=r,(LK(s)?n:e).push(s)}return[e,n]}function PK(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},c=a?(l,f)=>i[l][a[f]]:l=>i[l][0],u=e.length;for(let l=0;l<u;++l){const f=n[l],h=e[l];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))h[d]=f(d,s,c);else{const d=t.totalRows();for(let p=0;p<d;++p)h[p]=f(p,s,c)}}}function UK(t,e,n={}){const i=lb(t,ei(e,{table:t}),n);return n.drop||n.before==null&&n.after==null?i:MT(i,Object.keys(e).filter(r=>!t.column(r)),n)}function VK(t,e){if(e.length===0)return t;const n=t.columnNames();return e.reduce((i,r)=>i.antijoin(r.select(n)),t).dedupe()}const sf=2147483648,$K=4294967295;class LT{constructor(e){this._size=e,this._bits=new Uint32Array(Math.ceil(e/32))}get length(){return this._size}count(){const e=this._bits.length;let n=0;for(let i=0;i<e;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(e){return this._bits[e>>5]&sf>>>e}set(e){this._bits[e>>5]|=sf>>>e}clear(e){this._bits[e>>5]&=~(sf>>>e)}scan(e){for(let n=this.next(0);n>=0;n=this.next(n+1))e(n)}next(e){const n=this._bits,i=n.length;let r=e>>5,s=n[r]&$K>>>e;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(e){let n=this.next(0);for(;e--&&n>=0;)n=this.next(n+1);return n}not(){const e=this._bits,n=e.length;for(let r=0;r<n;++r)e[r]=~e[r];const i=this._size%32;return i&&(e[n-1]&=sf>>i-1),this}and(e){if(e){const n=this._bits,i=e._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(e){if(e){const n=this._bits,i=e._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function jK(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new LT(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))e(a,r)&&s.set(a);else for(let a=0;a<n;++a)e(a,r)&&s.set(a);return t.create({filter:s})}function zK(t,e){const n=ei({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:r}=lb(t,n,{drop:!0}).column("p");i=s=>r[s]}return jK(t,i)}function BT(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,c=new Set(r.drop),u=uo(t,i,n),l=pi(),f=new Set(e),h=[],d=[],p=[];t.columnNames().forEach(w=>{if(!c.has(w)){const _=l.add(w,[]);f.has(w)||(h.push(t.column(w)),d.push(_))}}),e.forEach(w=>{c.has(w)||(l.has(w)||l.add(w,[]),p.push(l.data[w]))});const m=a?l.add(a,[]):null;let g=0;const y=h.length,v=p.length,b=(w,_)=>{for(let E=0;E<y;++E)d[E].length=g+_,d[E].fill(h[E].get(w),g,g+_)},x=m?(w,_)=>{for(let E=0;E<_;++E)m[w+E]=E}:()=>{};if(v===1){const w=u[0],_=p[0];t.scan((E,T)=>{const C=ti(w(E,T)),D=Math.min(C.length,s);b(E,D);for(let O=0;O<D;++O)_[g+O]=C[O];x(g,D),g+=D})}else t.scan((w,_)=>{let E=0;const T=u.map(C=>{const D=ti(C(w,_));return E=Math.min(Math.max(E,D.length),s),D});b(w,E);for(let C=0;C<v;++C){const D=p[C],O=T[C];for(let k=0;k<E;++k)D[g+k]=O[k]}x(g,E),g+=E});return t.create(l.new())}function qK(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(e.length===0)return t;const[s="key",a="value"]=r.as||[],c=uo(t,i,n);return BT(t,{names:[s,a],exprs:[()=>e,(u,l)=>c.map(f=>f(u,l))]},{...r,drop:e})}function ir(t,e,n,i={window:!1}){const r=new Map,s=a=>{a=Dn(a)?e.columnName(a):a,pn(a)?r.set(a,eo(a)):Me(a)?ws(e,a).forEach(s):xn(a)?T8(r,a):Vt(`Invalid ${t} value: ${a+""}`)};return ti(n).forEach(s),i.preparse&&i.preparse(r),ei(r,{table:e,...i})}function WK(t,e,n){return qK(t,ir("fold",t,e),n)}function Bw(t,e,n,i){const r=n&&n.length;return HK(r?YK(t,n,i):t,e,r)}function HK(t,{names:e,exprs:n,ops:i},r){const s=uo(t,i,n),a=r?null:pi(t),c=t.totalRows();return e.forEach((u,l)=>{const f=t.column(u),h=r?f.data:a.add(u,Array(c)),d=s[l];t.scan(p=>{const m=f.get(p);h[p]=Ki(m)?m:d(p)})}),r?t:t.create(a)}function YK(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map(m=>t.getter(m))),c=new Set,u=Kh(a);t.scan((m,g)=>c.add(u(m,g)));const l=t.columnNames(),f=pi(),h=l.map(m=>f.add(m,[]));l.forEach((m,g)=>{const y=r[m],v=h[g];t.scan(b=>v.push(y.get(b)))});const d=Kh(a.map((m,g)=>y=>y[g])),p=Pc("v","{"+h.map((m,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",h,l.map(m=>s.indexOf(m)));if(i){let m=i.keys.length;const g=n.reduce((v,b)=>v*b.length,i.size),y=new Uint32Array(g+(m-c.size));y.set(i.keys),Pw(i,n,(v,b)=>{c.has(d(v))||(p(v),y[m++]=b[0])}),f.groupby({...i,keys:y})}else Pw(i,n,m=>{c.has(d(m))||p(m)});return t.create(f.new())}function Pw(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),c=new Int32Array(s),u=[];if(t){const{get:f,rows:h,size:d}=t;a[0]=d,u.push((p,m)=>{const g=h[m];for(let y=0;y<i;++y)p[y]=f[y](g)})}e.forEach((f,h)=>{const d=h+i;a[h+r]=f.length,u.push((p,m)=>p[d]=f[m])});const l=Array(i+e.length);for(let f=0;f<s;++f)u[f](l,0);n(l,c);for(let f=s-1;f>=0;){const h=++c[f];h<a[f]?(u[f](l,h),n(l,c),f=s-1):(c[f]=0,u[f](l,0),--f)}}function fb(t,{names:e,exprs:n,ops:i}){const r=pi(),s=t.groups();return s&&DT(r,s),GK(e,n,s,Uc(t,i),r),t.create(r.new())}function GK(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(u,l)=>i[u][l],c=t.length;for(let u=0;u<c;++u){const l=e[u];if(l.field!=null)r.add(t[u],i[l.field]);else if(s>1){const f=r.add(t[u],Array(s));for(let h=0;h<s;++h)f[h]=l(h,null,a)}else r.add(t[u],[l(0,null,a)])}}function KK(t,e,n={}){if(e=ei(e,{table:t}),e.names.forEach(i=>t.column(i)?0:Vt(`Invalid impute column ${Ur(i)}`)),n.expand){const i={preparse:XK,aggronly:!0},r=ir("impute",t,n.expand,i),s=fb(t.ungroup(),r);return Bw(t,e,r.names,r.names.map(a=>s.get(a,0)))}else return Bw(t,e)}function XK(t){t.forEach((e,n)=>e.field?t.set(n,i8(e+"")):0)}function JK(t,e){const n=t.columnNames();return e.length?e.reduce((i,r)=>i.semijoin(r.select(n)),t).dedupe():t.reify([])}function PT(t,e){const n=new Map;return t.scan((i,r)=>{const s=e(i,r);s!=null&&s===s&&n.set(s,i)}),n}function QK(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const a=t[s],c=n(a,e);c!=null&&c===c&&(i.has(c)?i.get(c).push(s):i.set(c,[s]))}return i}function ZK(t,e){const n=["i","a","j","b"];return Pc(n,"{"+Nl(t,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",t,e)}function tX(t,e,n,{names:i,exprs:r},s={}){const a=t.data(),c=t.indices(!1),u=c.length,l=new Int32Array(u),f=e.data(),h=e.indices(!1),d=h.length,p=new Int32Array(d),m=i.length,g=pi(),y=Array(m),v=Array(m);for(let w=0;w<i.length;++w)y[w]=g.add(i[w],[]),v[w]=r[w];const b=ZK(y,v);if((ce(n)?nX:eX)(b,n,a,f,c,h,l,p,u,d),s.left)for(let w=0;w<u;++w)l[w]||b(c[w],a,-1,f);if(s.right)for(let w=0;w<d;++w)p[w]||b(-1,a,h[w],f);return t.create(g.new())}function eX(t,e,n,i,r,s,a,c,u,l){for(let f=0;f<u;++f){const h=r[f];for(let d=0;d<l;++d){const p=s[d];e(h,n,p,i)&&(t(h,n,p,i),a[f]=1,c[d]=1)}}}function nX(t,[e,n],i,r,s,a,c,u,l,f){let h,d,p,m,g,y,v,b,x=t;l>=f?(h=i,d=e,p=c,m=s,g=r,y=n,v=u,b=a):(h=r,d=n,p=u,m=a,g=i,y=e,v=c,b=s,x=(E,T,C,D)=>t(C,D,E,T));const w=QK(b,g,y),_=m.length;for(let E=0;E<_;++E){const T=m[E],C=w.get(d(T,h));if(C){const D=C.length;for(let O=0;O<D;++O){const k=C[O];x(T,h,b[k],g),v[k]=1}p[E]=1}}}function ed(t,e,n){const i=new Map;ti(n).forEach((s,a)=>{s=Dn(s)?e.columnName(s):s,pn(s)?i.set(a,eo(s)):Me(s)||xn(s)&&s.expr?i.set(a,s):Vt(`Invalid ${t} key value: ${s+""}`)});const r=ei(i,{table:e,aggregate:!1,window:!1});return Kh(r.exprs,!0)}function iX(t,e){const n=new Set(e);return t.filter(i=>n.has(i))}function hb(t,e,n){if(n)pn(n)?n=[n,n]:ce(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=iX(t.columnNames(),e.columnNames());i.length||Vt("Natural join requires shared column names."),n=[i,i]}return n}function UT(t,e,n,i){return n.length!==i.length&&Vt("Mismatched number of join keys"),[ed("join",t,n),ed("join",e,i)]}const rX={aggregate:!1,window:!1},sX={...rX,index:1};function Uw(t,e,n,i,r={}){n=hb(t,e,n);const s={join:[t,e]};let a;if(ce(n)){const[c,u]=n.map(ti);a=UT(t,e,c,u),i||(i=aX(t,c,u,r))}else a=ei({on:n},s).exprs[0],i||(i=[gc(),gc()]);return tX(t,e,a,oX(t,e,i,s,r&&r.suffix),r)}function aX(t,e,n,i){const r=[];e.forEach((a,c)=>pn(a)&&a===n[c]?r.push(a):0);const s=C8(r);if(i.left&&i.right){const a=new Set(r);return[t.columnNames().map(c=>{const u=`[${Ur(c)}]`;return a.has(c)?{[c]:`(a, b) => a${u} == null ? b${u} : a${u}`}:c}),s]}return i.right?[s,gc()]:[gc(),s]}function oX(t,e,n,i,r=[]){if(ce(n)){let s,a,c,u=n.length;s=a=c={names:[],exprs:[]},u--&&(s=ir("join",t,n[0],i)),u--&&(a=ir("join",e,n[1],sX)),u--&&(c=ei(n[2],i));const l=new Set,f=new Set(s.names);return a.names.forEach(h=>{f.has(h)&&l.add(h)}),l.size&&(Vw(s.names,l,r[0]||"_1"),Vw(a.names,l,r[1]||"_2")),{names:s.names.concat(a.names,c.names),exprs:s.exprs.concat(a.exprs,c.exprs)}}else return ei(n,i)}function Vw(t,e,n){t.forEach((i,r)=>e.has(i)?t[r]=i+n:0)}function cX(t,e,n,i={}){const r=new LT(t.totalRows());return(ce(n)?uX:lX)(r,t,e,n),i.anti&&r.not().and(t.mask()),t.create({filter:r})}function uX(t,e,n,[i,r]){const s=PT(n,r);e.scan((a,c)=>{s.get(i(a,c))>=0&&t.set(a)})}function lX(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),c=n.data();if(e.isFiltered()||n.isFiltered()){const u=e.indices(!1),l=n.indices(!1);for(let f=0;f<r;++f){const h=u[f];for(let d=0;d<s;++d)if(i(h,a,l[d],c)){t.set(h);break}}}else for(let u=0;u<r;++u)for(let l=0;l<s;++l)if(i(u,a,l,c)){t.set(u);break}}function $w(t,e,n,i){n=hb(t,e,n);const r=ce(n)?UT(t,e,...n.map(ti)):ei({on:n},{join:[t,e]}).exprs[0];return cX(t,e,r,i)}function fX(t,e,[n,i],{names:r,exprs:s,ops:a}){const c=pi(t),u=t.totalRows();r.forEach(d=>c.add(d,Array(u).fill(ie)));const l=PT(e,i),f=Pc(["lr","rr","data"],"{"+Nl(r,(d,p)=>`_[${p}][lr] = $[${p}](rr, data);`)+"}",r.map(d=>c.data[d]),uo(e,a,s)),h=e.data();return t.scan((d,p)=>{const m=l.get(n(d,p));m>=0&&f(d,m,h)}),t.create(c)}function hX(t,e,n,i){return n=hb(t,e,n),fX(t,e,[ed("lookup",t,n[0]),ed("lookup",e,n[1])],ir("lookup",e,i))}const yg=(t,e)=>t??e;function dX(t,e,n,i={}){const{keys:r,keyColumn:s}=pX(t,e,i),a=yg(i.valueSeparator,"_"),c=n.names.length>1?(l,f)=>f+a+r[l]:l=>r[l],u=r.map(l=>Uc(t,n.ops.map(f=>{if(f.name==="count"){const d=p=>l===s[p]?1:NaN;return d.toString=()=>l+":1",{...f,name:"sum",fields:[d]}}const h=f.fields.map(d=>{const p=(m,g)=>l===s[m]?d(m,g):NaN;return p.toString=()=>l+":"+d,p});return{...f,fields:h}})));return t.create(mX(n,c,t.groups(),u))}function pX(t,e,n){const i=n.limit>0?+n.limit:1/0,r=yg(n.sort,!0),s=yg(n.keySeparator,"_"),a=uo(t,e.ops,e.exprs),c=a.length===1?a[0]:(h,d)=>a.map(p=>p(h,d)).join(s),u=Array(t.totalRows());t.scan((h,d)=>u[h]=c(h,d));const l=Uc(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>u[h]],params:[]}])[0][0],f=r?l.sort():l;return{keys:Number.isFinite(i)?f.slice(0,i):f,keyColumn:u}}function mX({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=pi(),c=r.length,u=t.length;let l;const f=(h,d)=>l[h][d];i&&DT(a,i);for(let h=0;h<u;++h){const d=e[h];if(d.field!=null)for(let p=0;p<c;++p)a.add(n(p,t[h]),r[p][d.field]);else if(s>1)for(let p=0;p<c;++p){l=r[p];const m=a.add(n(p,t[h]),Array(s));for(let g=0;g<s;++g)m[g]=d(g,null,f)}else for(let p=0;p<c;++p)l=r[p],a.add(n(p,t[h]),[d(0,null,f)])}return a.new()}function gX(t,e,n,i){return dX(t,ir("fold",t,e),ir("fold",t,n,{preparse:yX,aggronly:!0}),i)}function yX(t){t.forEach((e,n)=>e.field?t.set(n,t8(e+"")):0)}function bX(t,e){const n=new Map;return t.columnNames(i=>(n.set(i,i),0)),ob(t,ws(t,e,n))}function jw(t,e){return fb(t,ei(e,{table:t,aggronly:!0,window:!1}))}function _X(t,e,n,i){return(e?i?wX:vX:i?SX:xX)(t.length,t,n,i)}function vX(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*Fc()|0];return e}function wX(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let u=0;u<r;++u)s[u]=a+=i(n[u]);const c=RT(cb).right;for(let u=0;u<t;++u)e[u]=n[c(s,a*Fc())];return e}function xX(t,e,n){const i=n.length;if(t>=i)return n;for(let r=0;r<t;++r)e[r]=n[r];for(let r=t;r<i;++r){const s=r*Fc();s<t&&(e[s|0]=n[r])}return e}function SX(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let c=0;c<r;++c)a[c]=c,s[c]=-Math.log(Fc())/i(n[c]);a.sort((c,u)=>s[c]-s[u]);for(let c=0;c<t;++c)e[c]=n[a[c]];return e}function EX(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const r=Fc()*i--|0,s=t[i+e];t[i+e]=t[r+e],t[r+e]=s}return t}function IX(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let c=0;e=a.map((f,h)=>{let d=e(h);return c+=d=r?d:Math.min(f.length,d),d});const u=new Uint32Array(c);let l=0;return a.forEach((f,h)=>{const d=e[h],p=u.subarray(l,l+=d);!r&&d===f.length?p.set(f):_X(p,r,f,n)}),s!==!1&&(a.length>1||!r)&&EX(u),t.reify(u)}function AX(t,e,n={}){return IX(t,TX(t,e),kX(t,n.weight),n)}const VT=t=>e=>t.get(e)||0;function TX(t,e){return Dn(e)?()=>e:VT(fb(t,ei({size:e},{table:t,window:!1})).column("size"))}function kX(t,e){return e==null?null:(e=Dn(e)?t.columnName(e):e,VT(pn(e)?t.column(e):lb(t,ei({w:e},{table:t}),{drop:!0}).column("w")))}function CX(t,e){return ob(t,ws(t,e))}function MX(t,{names:e,exprs:n,ops:i=[]},r={}){if(e.length===0)return t;const s=e.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,c=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),u=uo(t,i,n),l=pi(),f=e.reduce((d,p,m)=>d.set(p,m),new Map),h=(d,p)=>{const m=NX(t,u[d],c),g=m.length;for(let y=0;y<g;++y)l.add(s[y]||`${p}_${y+1}`,m[y])};return t.columnNames().forEach(d=>{f.has(d)?(a||l.add(d,t.column(d)),h(f.get(d),d),f.delete(d)):l.add(d,t.column(d))}),f.forEach(h),t.create(l)}function NX(t,e,n){const i=t.totalRows(),r=[];return t.scan((s,a)=>{const c=ti(e(s,a)),u=Math.min(c.length,n);for(;r.length<u;)r.push(Array(i).fill(ie));for(let l=0;l<u;++l)r[l][s]=c[l]}),r}function OX(t,e,n){return MX(t,ir("spread",t,e),n)}function FX(t,e){return t.concat(e).dedupe()}function DX(t,e,n){return BT(t,ir("unroll",t,e),n&&n.drop?{...n,drop:ir("unroll",t,n.drop).names}:n)}function RX(t,e){return t.create({groups:LX(t,e)})}function LX(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(r===0)return null;if(r===1&&!t.isFiltered()&&n[0].field){const p=t.column(n[0].field);if(p.groups)return p.groups(e)}let s=uo(t,i,n);const a=Kh(s),c=t.totalRows(),u=new Uint32Array(c),l={},f=[],h=t.data(),d=t.mask();if(d)for(let p=d.next(0);p>=0;p=d.next(p+1)){const m=a(p,h)+"",g=l[m];u[p]=g??(l[m]=f.push(p)-1)}else for(let p=0;p<c;++p){const m=a(p,h)+"",g=l[m];u[p]=g??(l[m]=f.push(p)-1)}return i.length||(s=s.map(p=>m=>p(m,h))),{keys:u,get:s,names:e,rows:f,size:f.length}}function BX(t,e){return RX(t,ir("groupby",t,e))}function PX(t,e){return t.create({order:e})}const UX=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function VX(t,e){const n=[],i=[],r=[];let s=null,a="0",c="0";t.isGrouped()&&(s=t.groups().keys,a="ka",c="kb");const{ops:u}=ei(e,{table:t,value:(p,m)=>{if(n.push(p),m.escape){const g=y=>`fn[${r.length}](${y}, data)`;i.push([g("a"),g("b")]),r.push(m.escape)}else i.push([Gh(m,{index:"a",op:a}),Gh(m,{index:"b",op:c})])},window:!1}),l=Uc(t,u),f=(p,m)=>l[p][m],h=n.length;let d="return (a, b) => {"+(f&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let p=0;p<h;++p){const m=e.get(n[p]).desc?-1:1,[g,y]=i[p];d+=UX(g,y,-m,m)}return d+="0;};",Function("op","keys","fn","data",d)(f,s,r,t.data())}function $X(t,e){return PX(t,jX(t,e))}function jX(t,e){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return e.forEach(s=>{const a=s.expr!=null?s.expr:s;if(xn(a)&&!Me(a))for(const c in a)r(a[c]);else r(Dn(a)?eo(s,t.columnName(a)):pn(a)?eo(s):Me(a)?s:Vt(`Invalid orderby field: ${s+""}`))}),VX(t,i)}function zX(t,e){const n=t.numRows(),i=n+e.reduce((a,c)=>a+c.numRows(),0);if(n===i)return t;const r=[t,...e],s=pi();return t.columnNames().forEach(a=>{const c=Array(i);let u=0;r.forEach(l=>{const f=l.column(a)||{get:()=>ie};l.scan(h=>c[u++]=f.get(h))}),s.add(a,c)}),t.create(s.new())}function qX(t,e){const n=pi(),i=t.groups(),{get:r,names:s=[],rows:a,size:c=1}=i||{},u=new Uint32Array(c+1);s.forEach(d=>n.add(d,null));const l=i?FT(t,e,i):[OT(t,e)];e.outputs().map(d=>n.add(d,[]));const f=u.length-1;let h=0;for(let d=0;d<f;++d)h+=u[d+1]=e.write(l[d],n.data,u[d]);if(i){const d=t.data();s.forEach((p,m)=>{const g=n.data[p]=Array(h),y=r[m];for(let v=0,b=0;v<c;++v)g.fill(y(a[v],d),b,b+=u[v+1])})}return t.create(n.new())}function WX(t){return t.isGrouped()?t.create({groups:null}):t}function HX(t){return t.isOrdered()?t.create({order:null}):t}const YX={__antijoin:(t,e,n)=>$w(t,e,n,{anti:!0}),__count:(t,e={})=>jw(t,{[e.as||"count"]:e8()}),__cross:(t,e,n,i)=>Uw(t,e,()=>!0,n,{...i,left:!0,right:!0}),__concat:zX,__dedupe:vK,__derive:UK,__except:VK,__filter:zK,__fold:WK,__impute:KK,__intersect:JK,__join:Uw,__lookup:hX,__pivot:gX,__relocate:MT,__rename:bX,__rollup:jw,__sample:AX,__select:CX,__semijoin:$w,__spread:OX,__union:FX,__unroll:DX,__groupby:BX,__orderby:$X,__ungroup:WX,__unorder:HX,__reduce:qX};Object.assign(rs.prototype,YX);function GX(t,e){return rs.from(t,e)}rs.prototype;class $T extends sr{constructor(e){super(),this.function_store=e.matching,this.func_elected=e.default_func,this.ignore_cols=e.ignore_cols,this.backend=e.backend,this.params=e.defaults??{}}snapshot(){return{params:xu(this.params),func_elected:xu(this.func_elected)}}restoreSnapshot(e){this.params=e.params,this.func_elected=e.func_elected}async _execute(e=null){if(Ht(e))return;e.length==1&&U5("func_elected",e[0])?this.func_elected=e[0].func_elected:Cn(e)||e.forEach(u=>{this.params=od(this.params,u)});let n=await this.backend.execute(this.params),i=GX(n),r=i.columnNames();r=Iu(r,this.ignore_cols);let s=yC(r,r),a=this.function_store[0][this.func_elected],c=[];s.forEach(([u,l])=>{let f=a(u,i.array(u),l,i.array(l));c.push({x:u,y:l,value:f})}),this.emit("data",c,"matching_table")}}class jT extends sr{constructor(){super(),this.overlays={}}snapshot(){return xu(this.overlays)}restoreSnapshot(e){this.overlays=e}async _execute(e,n){e.forEach(r=>{this.overlays=iC(this.overlays,r)});let i=[];$n(({left:r,right:s},a)=>{i.push({key:a,left:r,right:s})},this.overlays),this.emit("data",i,"overlay")}}class KX extends sr{constructor(e){super(),this.backend=e.backend,this.name=e.name,this.params=e.params}async execute(e){this.params=e??this.params;const n=await this.backend.execute(this.params);let i=[];for(const s of n){let a=JSON.parse(s.feature);i.push(a)}const r={type:"FeatureCollection",name:this.name,features:i};return this.emit("data",r,this.name),r}}let zw={array:Z$,url:tj,duckdb:HW,cdt:GW,identity:KW,random:XW,query:Y4,matching:$T,overlay:jT,map:KX},XX=0;class JX extends Map{get backends(){return Hn(this)}registerClass(e,n){zw[e]=n}createBackends(e){for(const n of e)this.createBackend(n)}createBackend(e){e.id=e.id??`_backendid_${XX++}`;let n=zw[e.type];if(!n)throw new Error(`Backend type ${e.type} not found`);let i=new n(e);return i.id=e.id,this[e.id]=i,console.info("createBackend",e.id,i),i}}class QX{add(e,n,i){let r=`${i.view.id}::${i.eventname}`;return Ht(this[r])?this[r]={iact:i,oldVal:e,newVal:n}:this[r].newVal=n,console.log("WriteSet.add",r,this[r]),this}forEach(e){Hn(this).forEach(e)}merge(e){if(Ht(e))return this;e.forEach(({iact:n,oldVal:i,newVal:r})=>{this.add(i,r,n)})}}const Ps=we(Array),qw=()=>null;function jo(t,e,n){if(we(String,e))t[e]=n;else if(Ps(e)){let[i,...r]=e;Ht(t[i])&&(t[i]={}),Cn(r)?jo(t,i,n):jo(t[i],r,n)}}function nd(t,e,n){if(we(String,e))Ht(t[e])&&(t[e]=[]),t[e].push(n);else if(Ps(e)){let[i,...r]=e;Ht(t[i])&&(t[i]=Cn(r)?[]:{}),Cn(r)?nd(t,i,n):nd(t[i],r,n)}}function Ls(t,e,n){if(we(String,e))return t[e]||(we(Function,n)?n():n);if(Ps(e)){let[i,...r]=e;return Ht(t[i])?we(Function,n)?n():n:Cn(r)?Ls(t,i,n):Ls(t[i],r,n)}}class ZX{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(e,n,i=qw,r){if(!e.attr)return this;let s=e.view.id,a=e.eventname;return nd(this.dependencies,[s,a],{view:n,domainfunction:i}),nd(this.view2iacts,n.id,e),this.setDefault(n,r),this}dependentViews(e){let n=e.eventname;return Ls(this.dependencies,[e.view.id,n],[])}cmp(e,n){return this.isDependentOn(e.view,n)?1:this.isDependentOn(n.view,e)?-1:0}isDependentOn(e,n){let i=this.getAncestorIacts(e);return xg(r=>(r.store??r)==n,i)}setDefault(e,n){return Ht(n)||(this.defaults[e.id]=n),this}getDefault(e,n){return(Ls(this.defaults,e.id)??qw)(n,this.getAncestorIacts(e))}getAncestorIacts(e){let n=[];return Ls(this.view2iacts,e.id,[]).forEach(i=>{n.push(i),n=Eu(n,this.getAncestorIacts(i.view))}),n}getStatesKey(e){let n=this.getAncestorIacts(e),i=Eu([e.id],n.map(r=>[r.id,r.val()]));return console.debug("ancestorStates",i,JSON.stringify(i)),JSON.stringify(i)}saveState(e,n,i){let r=this.getStatesKey(n.view);!Ht(i)&&Ht(i.states[r])&&jo(i.states,[r,n.eventname],{old:Ls(this.states,[r,n.eventname]),iact:n}),console.debug("saveState",r,n.eventname,Ls(this.states,[r,n.eventname]),e),jo(this.states,[r,n.eventname],e)}restoreStates(e){$n((n,i)=>{$n(({iact:r,old:s},a)=>{console.debug("restoreState",i,r.eventname,s),jo(this.states,[i,r.eventname],s)},n)},e.states)}getState(e,n,i=!0){let r=this.getStatesKey(e);return Ht(n)?this.states[r]:Ls(this.states,[r,n],()=>i?this.getDefault(e,n):void 0)}}class tJ{constructor(e){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new ZX,this.transactions=[],this._isaborting=!1,this.backends=e,this._iactid=0,this._xid=0;const n=i=>r=>this.backends.createBackend({...r,type:i});this.backend=i=>this.backends.createBackend(i),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(e){if(this.views[e.id]=e,Ps(e)){e.forEach(n=>this.view(n));return}this.interactions[e.id]=this.interactions[e.id]??{_attrs:{}},e.magic=this,$n((n,i)=>{if(!Ht(this.interactions[e.id][i]))return;let r=s=>{e.load(o,event)};Object.assign(n,{start:(...s)=>this.start(n,...s),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>gf(n)??{},load:r,id:this._iactid++,view:e,eventname:i,isActive:!1}),n.get=(s,a=null)=>{if(!Ht(this.interactions[e.id]._attrs[s]))return this.interactions[e.id]._attrs[s];let c={store:n,attr:s,view:e,eventname:i,load:r,default:a,id:this._iactid++,val:()=>{let u=gf(n);return zo(s)(u)?u[s]:(Cn(u)||console.error("could not find attr:",ci(gf(n)).length),we(Function,a)?a():a)},start:()=>this.start(c),end:()=>this.end(c),abort:()=>this.abort(c)};return this.interactions[e.id]._attrs[s]=c,c},this.interactions[e.id][i]=n},e.interactions)}render(e,n,i,r={}){return e=Ps(e)?e:[e],n=Ps(n)?n:[n],e.map(a=>{if(we(sr,a))return a;let c=this.backend.identity();return this.connect(c,a),c}).forEach(a=>{n.forEach(c=>a.registerView(c,i,r))}),this}saveBackends(e){e=Ps(e)?e:[e],e.forEach(n=>{n.registerView((i,r)=>{console.debug("saveBackend",this,n,i,r),$n((s,a)=>{$n((c,u)=>{c.forEach(l=>{console.debug("saveBackend.DependencyLeaf.ViewIact",l.view.id,this.i2b[l.view.id]);let f=this.dependencies.getAncestorIacts(l.view),h=Eu([n.id],f.map(d=>[d.id,d.val()]));Cn(q0(ci(this.i2b[l.view.id]),n.id))||(console.debug("saveBackend.View",n.id,l.view.id),this.dependencies.viewData[h]=i)})},s)},this.dependencies.dependencies)})})}connect(e,n,i){var a;if(Ps(n)){n.forEach(c=>this.connect(e,c,i));return}let r=n,s=r.view;if(Ht(this.i2b[s.id])){let c=null;r.subscribe(u=>{if(Eg(c,u)){console.debug("iact.subscribe.duplicate",s.id);return}console.log("iact.subscribe.handleEvent",s.id,r.id),c=u,this.handleEvent(u,r)}),r.store?r.store.isActive=!0:r.isActive=!0,(a=s.registerInteraction)==null||a.call(s,r),this.i2b[s.id]={}}Ht(e)||jo(this.i2b,[s.id,e.id],this.processBindings(i))}processBindings(e){if(Ht(e)||Cn(e))return Rf;if(we(Function,e))return e;let n=z0(sx(we(Array),we(Object)),ds(i=>this.processBindings(i)),z0(we(Function),Rf,i=>()=>i))(e);return zo("*",e)?i=>od(i,Ab(n)(i)):Ab(n)}saveIactState(e,n,i){this.dependencies.saveState(e,n,i),this.dependencies.dependentViews(n).forEach(({view:r,domainfunction:s})=>{if(s){let c=this.dependencies.getAncestorIacts(r);r.render(s(e,c))}let a=this.dependencies.getState(r);$n((c,u)=>{c=c??this.dependencies.getDefault(r,u),c&&(console.debug("saveIactState.load",r.id,u,c),r.load(c,u))},a),(Ht(a)||Cn(a))&&(console.debug("saveIactState.load.default",r.id),r.load(this.dependencies.getDefault(r)))})}handleEvent(e,n){if(!Ht(e))if(console.log("handleEvent",this._isaborting,n.view.id,e),this._isaborting)this.dependencies.saveState(e,n,null),this.sendEventToBackends(e,n);else if(this.transactions.length==0||Sp(this.transactions).iact!=n)n.start(),this.handleEvent(e,n),n.end();else{let i=Sp(this.transactions),r=this.dependencies.getState(n.view,n.eventname,!1);i.writeSet.add(r,e,n),i.visible&&this.sendEventToBackends(e,n)}}sendEventToBackends(e,n){$n((i,r)=>{let s=i(e);this.backends[r].execute(s,n)},this.i2b[n.view.id])}snapshot(){return Z5(e=>e.snapshot(),this.backends)}restoreSnapshot(e){$n((n,i)=>{Ht(n)||this.backends[i].restoreSnapshot(n)},e.snapshot)}start(e,n=!0){this.transactions.push({xid:this._xid++,iact:e,visible:n,snapshot:this.snapshot(),states:{},writeSet:new QX}),console.log("magic.start",this.transactions)}end(e){if(!xg(s=>s.iact=e,this.transactions)){console.log("magic.end: can't find interaction",e);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:s,iact:a})=>{this.saveIactState(s,a,n),n.visible||this.sendEventToBackends(s,a)});let i=Hn(n.writeSet).map(({iact:s})=>s.id),r=Z2(s=>Hn(s).map(({iact:a})=>a.id),Hn(n.states));if(Cn(mC(i,r))||console.error("writeset != statesids",i,r),this.transactions.length>0){let s=Sp(this.transactions);s.snapshot=Bf(s.snapshot,n.snapshot),s.states=Bf(s.states,n.states),s.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(e){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",xu(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),dC((r,s)=>this.dependencies.cmp(r.iact,s.iact),Hn(n.writeSet)).forEach(({iact:r})=>{let s=this.dependencies.getState(r.view,r.eventname);s&&r.view.load&&(console.log("magic.abort.load",s,r),r.view.load(s,r.eventname))})}finally{this._isaborting=!1}}importState(e){let n=JSON.parse(e);this.dependencies.states=n,$n((i,r)=>{let s=this.views[r];this.walkViews(s)},this.dependencies.dependencies)}walkViews(e){let n=this.dependencies.getStatesKey(e),i=this.dependencies.states[n],r=Hn(i);if(r.length>1){console.error("unexpected behavior, multiple values for state");return}e.load(r[0]),$n((s,a)=>{this.dependencies.dependentViews(s).forEach(u=>{this.walkViews(u.view)})},e.interactions)}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const eJ=t=>({}),Ww=t=>({}),nJ=t=>({}),Hw=t=>({}),iJ=t=>({}),Yw=t=>({}),rJ=t=>({}),Gw=t=>({}),sJ=t=>({}),Kw=t=>({}),aJ=t=>({}),Xw=t=>({}),oJ=t=>({}),Jw=t=>({}),cJ=t=>({}),Qw=t=>({}),uJ=t=>({}),Zw=t=>({}),lJ=t=>({}),t2=t=>({}),fJ=t=>({}),e2=t=>({}),hJ=t=>({}),n2=t=>({}),dJ=t=>({}),i2=t=>({}),pJ=t=>({}),r2=t=>({}),mJ=t=>({}),s2=t=>({});function gJ(t){let e,n,i,r,s,a,c,u,l,f,h,d,p,m,g,y,v,b,x,w,_,E,T,C,D,O,k,N,B,z,I;const j=t[1].header,F=Sn(j,t,t[0],s2),P=t[1].alert,W=Sn(P,t,t[0],r2),J=t[1].dropdown1,X=Sn(J,t,t[0],i2),Q=t[1].chart1,ot=Sn(Q,t,t[0],n2),Ut=t[1].dropdown2,dt=Sn(Ut,t,t[0],e2),ut=t[1].chart2,rt=Sn(ut,t,t[0],t2),ct=t[1].dropdown3,M=Sn(ct,t,t[0],Zw),H=t[1].chart3,K=Sn(H,t,t[0],Qw),U=t[1].dropdown4,st=Sn(U,t,t[0],Jw),pt=t[1].chart4,bt=Sn(pt,t,t[0],Xw),mt=t[1].obplot,G=Sn(mt,t,t[0],Kw),St=t[1].slider1,re=Sn(St,t,t[0],Gw),_e=t[1].slider2,ge=Sn(_e,t,t[0],Yw),Bn=t[1].slider3,$e=Sn(Bn,t,t[0],Hw),cr=t[1].slider4,nn=Sn(cr,t,t[0],Ww);return{c(){e=Z("div"),n=Z("div"),F&&F.c(),i=zt(),r=Z("div"),W&&W.c(),s=zt(),a=Z("div"),X&&X.c(),c=zt(),u=Z("div"),ot&&ot.c(),l=zt(),f=Z("div"),dt&&dt.c(),h=zt(),d=Z("div"),rt&&rt.c(),p=zt(),m=Z("div"),M&&M.c(),g=zt(),y=Z("div"),K&&K.c(),v=zt(),b=Z("div"),st&&st.c(),x=zt(),w=Z("div"),bt&&bt.c(),_=zt(),E=Z("div"),G&&G.c(),T=zt(),C=Z("div"),re&&re.c(),D=zt(),O=Z("div"),ge&&ge.c(),k=zt(),N=Z("div"),$e&&$e.c(),B=zt(),z=Z("div"),nn&&nn.c(),this.h()},l(q){e=tt(q,"DIV",{class:!0});var at=et(e);n=tt(at,"DIV",{class:!0});var Oe=et(n);F&&F.l(Oe),Oe.forEach($),i=qt(at),r=tt(at,"DIV",{class:!0});var Pn=et(r);W&&W.l(Pn),Pn.forEach($),s=qt(at),a=tt(at,"DIV",{class:!0});var mi=et(a);X&&X.l(mi),mi.forEach($),c=qt(at),u=tt(at,"DIV",{class:!0});var gi=et(u);ot&&ot.l(gi),gi.forEach($),l=qt(at),f=tt(at,"DIV",{class:!0});var lo=et(f);dt&&dt.l(lo),lo.forEach($),h=qt(at),d=tt(at,"DIV",{class:!0});var L=et(d);rt&&rt.l(L),L.forEach($),p=qt(at),m=tt(at,"DIV",{class:!0});var ft=et(m);M&&M.l(ft),ft.forEach($),g=qt(at),y=tt(at,"DIV",{class:!0});var se=et(y);K&&K.l(se),se.forEach($),v=qt(at),b=tt(at,"DIV",{class:!0});var ae=et(b);st&&st.l(ae),ae.forEach($),x=qt(at),w=tt(at,"DIV",{class:!0});var yi=et(w);bt&&bt.l(yi),yi.forEach($),_=qt(at),E=tt(at,"DIV",{class:!0});var Vc=et(E);G&&G.l(Vc),Vc.forEach($),T=qt(at),C=tt(at,"DIV",{class:!0});var Fl=et(C);re&&re.l(Fl),Fl.forEach($),D=qt(at),O=tt(at,"DIV",{class:!0});var Dl=et(O);ge&&ge.l(Dl),Dl.forEach($),k=qt(at),N=tt(at,"DIV",{class:!0});var mb=et(N);$e&&$e.l(mb),mb.forEach($),B=qt(at),z=tt(at,"DIV",{class:!0});var gb=et(z);nn&&nn.l(gb),gb.forEach($),at.forEach($),this.h()},h(){V(n,"class","mx-auto"),V(r,"class",""),V(a,"class","mx-auto"),V(u,"class",""),V(f,"class","mx-auto"),V(d,"class",""),V(m,"class","mx-auto"),V(y,"class",""),V(b,"class","mx-auto"),V(w,"class",""),V(E,"class",""),V(C,"class",""),V(O,"class",""),V(N,"class",""),V(z,"class",""),V(e,"class","px-5 py-2 bg-white")},m(q,at){xt(q,e,at),Y(e,n),F&&F.m(n,null),Y(e,i),Y(e,r),W&&W.m(r,null),Y(e,s),Y(e,a),X&&X.m(a,null),Y(e,c),Y(e,u),ot&&ot.m(u,null),Y(e,l),Y(e,f),dt&&dt.m(f,null),Y(e,h),Y(e,d),rt&&rt.m(d,null),Y(e,p),Y(e,m),M&&M.m(m,null),Y(e,g),Y(e,y),K&&K.m(y,null),Y(e,v),Y(e,b),st&&st.m(b,null),Y(e,x),Y(e,w),bt&&bt.m(w,null),Y(e,_),Y(e,E),G&&G.m(E,null),Y(e,T),Y(e,C),re&&re.m(C,null),Y(e,D),Y(e,O),ge&&ge.m(O,null),Y(e,k),Y(e,N),$e&&$e.m(N,null),Y(e,B),Y(e,z),nn&&nn.m(z,null),I=!0},p(q,[at]){F&&F.p&&(!I||at&1)&&En(F,j,q,q[0],I?An(j,q[0],at,mJ):In(q[0]),s2),W&&W.p&&(!I||at&1)&&En(W,P,q,q[0],I?An(P,q[0],at,pJ):In(q[0]),r2),X&&X.p&&(!I||at&1)&&En(X,J,q,q[0],I?An(J,q[0],at,dJ):In(q[0]),i2),ot&&ot.p&&(!I||at&1)&&En(ot,Q,q,q[0],I?An(Q,q[0],at,hJ):In(q[0]),n2),dt&&dt.p&&(!I||at&1)&&En(dt,Ut,q,q[0],I?An(Ut,q[0],at,fJ):In(q[0]),e2),rt&&rt.p&&(!I||at&1)&&En(rt,ut,q,q[0],I?An(ut,q[0],at,lJ):In(q[0]),t2),M&&M.p&&(!I||at&1)&&En(M,ct,q,q[0],I?An(ct,q[0],at,uJ):In(q[0]),Zw),K&&K.p&&(!I||at&1)&&En(K,H,q,q[0],I?An(H,q[0],at,cJ):In(q[0]),Qw),st&&st.p&&(!I||at&1)&&En(st,U,q,q[0],I?An(U,q[0],at,oJ):In(q[0]),Jw),bt&&bt.p&&(!I||at&1)&&En(bt,pt,q,q[0],I?An(pt,q[0],at,aJ):In(q[0]),Xw),G&&G.p&&(!I||at&1)&&En(G,mt,q,q[0],I?An(mt,q[0],at,sJ):In(q[0]),Kw),re&&re.p&&(!I||at&1)&&En(re,St,q,q[0],I?An(St,q[0],at,rJ):In(q[0]),Gw),ge&&ge.p&&(!I||at&1)&&En(ge,_e,q,q[0],I?An(_e,q[0],at,iJ):In(q[0]),Yw),$e&&$e.p&&(!I||at&1)&&En($e,Bn,q,q[0],I?An(Bn,q[0],at,nJ):In(q[0]),Hw),nn&&nn.p&&(!I||at&1)&&En(nn,cr,q,q[0],I?An(cr,q[0],at,eJ):In(q[0]),Ww)},i(q){I||(je(F,q),je(W,q),je(X,q),je(ot,q),je(dt,q),je(rt,q),je(M,q),je(K,q),je(st,q),je(bt,q),je(G,q),je(re,q),je(ge,q),je($e,q),je(nn,q),I=!0)},o(q){He(F,q),He(W,q),He(X,q),He(ot,q),He(dt,q),He(rt,q),He(M,q),He(K,q),He(st,q),He(bt,q),He(G,q),He(re,q),He(ge,q),He($e,q),He(nn,q),I=!1},d(q){q&&$(e),F&&F.d(q),W&&W.d(q),X&&X.d(q),ot&&ot.d(q),dt&&dt.d(q),rt&&rt.d(q),M&&M.d(q),K&&K.d(q),st&&st.d(q),bt&&bt.d(q),G&&G.d(q),re&&re.d(q),ge&&ge.d(q),$e&&$e.d(q),nn&&nn.d(q)}}}function yJ(t,e,n){let{$$slots:i={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class bJ extends fn{constructor(e){super(),hn(this,e,yJ,gJ,dn,{})}}const id="_theplot_";function Ol(t,e){t.className=t.className||id,Ht(t.width);let n=Py(t),i=null;return n.tagName=="svg"&&n.classList.contains(t.className)?i=n:i=n.querySelector(`svg.${t.className}`),i.classList.add(id),t.width||i.setAttribute("width","100%"),t.height||i.setAttribute("height","100%"),e.innerHTML="",e.appendChild(n),n}class _p{constructor({iact:e,magic:n,plot:i=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=e,this.magic=n,this.plot=i,i&&this.init(i)}load(e){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!e||Cn(e)){this.el.call(this.brush.clear);return}const{left:n,right:i}=e;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(i)])}}brushed({selection:e}){if(this.iact.isActive)if(!e)this.iact.set(this.defaultSelection);else{const[n,i]=e;this.iact.set({left:this.x.invert(n),right:this.x.invert(i)})}}brushstart({selection:e,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:e,sourceEvent:n}){this.iact.isActive&&(e||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(e){if(!this.iact.isActive)return;if(this.plot=e,this.x=e.scale("x"),this.y=e.scale("y"),this.y.range[0]<this.y.range[1]){let i=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=i}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=e.classList.contains(id)?Yn(e):Yn(e.querySelector(`.${id}`));this.brush=SF().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",i=>this.brushed(i)).on("start",i=>this.brushstart(i)).on("end",i=>this.brushended(i)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function _J(t){let e,n;return{c(){e=Z("div"),n=Z("div"),this.h()},l(i){e=tt(i,"DIV",{id:!0});var r=et(e);n=tt(r,"DIV",{}),et(n).forEach($),r.forEach($),this.h()},h(){V(e,"id",t[0])},m(i,r){xt(i,e,r),Y(e,n),t[17](n)},p(i,[r]){r&1&&V(e,"id",i[0])},i:Bt,o:Bt,d(i){i&&$(e),t[17](null)}}}function vJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(y,N=>n(22,i=N)),y);t.$$.on_destroy.push(()=>r());let{id:a,name:c,magic:u,description:l,xAttr:f,yAttr:h,xLabel:d,xDomainMin:p=null,xDomainMax:m=null,brushX:g=On({}),dstore:y=On({}),interactions:v={brushX:g,dstore:y}}=e;s();let b,x=null,w={},_=[],E;function T(N,B){return B==="overlay"?(w=N,!0):!1}function C(N,B){!N||N.length===0||typeof B=="object"||(T(N,B)?console.debug("overlays"):_=N,kn(y,i={chart_data:_},i),O())}let{load:D=N=>E==null?void 0:E.load(N)}=e;function O(){n(3,p=p??Or(ds(V0(f),_))),n(4,m=m??Ri(ds(V0(f),_)));const N=Math.max(36,Math.min(_.length,20));let B={x:{domain:[+p,+m]},height:200,marginBottom:50,color:{scheme:"Tableau10",legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[so({ticks:N,fontSize:10}),Tc({fontSize:10}),Oy([p]),Fy([0]),$$(_,{x:f,y:h,marker:!0,strokeWidth:3}),bl(_,{x:f,y:0,text:d,rotate:90,dy:30}),Jd(w,{x1:"left",x2:"right",y2:Ri(X2(h,_)),fill:"key",color:"key",opacity:.2})]};x=Ol(B,b),g.isActive&&(E=E??new _p({iact:g,magic:u}),E.init(x))}function k(N){oa[N?"unshift":"push"](()=>{b=N,n(2,b)})}return t.$$set=N=>{"id"in N&&n(5,a=N.id),"name"in N&&n(0,c=N.name),"magic"in N&&n(6,u=N.magic),"description"in N&&n(7,l=N.description),"xAttr"in N&&n(8,f=N.xAttr),"yAttr"in N&&n(9,h=N.yAttr),"xLabel"in N&&n(10,d=N.xLabel),"xDomainMin"in N&&n(3,p=N.xDomainMin),"xDomainMax"in N&&n(4,m=N.xDomainMax),"brushX"in N&&n(11,g=N.brushX),"dstore"in N&&s(n(1,y=N.dstore)),"interactions"in N&&n(12,v=N.interactions),"load"in N&&n(15,D=N.load)},[c,y,b,p,m,a,u,l,f,h,d,g,v,T,C,D,O,k]}class wJ extends fn{constructor(e){super(),hn(this,e,vJ,_J,dn,{id:5,name:0,magic:6,description:7,xAttr:8,yAttr:9,xLabel:10,xDomainMin:3,xDomainMax:4,brushX:11,dstore:1,interactions:12,overlay:13,render:14,load:15,update:16})}get id(){return this.$$.ctx[5]}set id(e){this.$$set({id:e}),nt()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),nt()}get magic(){return this.$$.ctx[6]}set magic(e){this.$$set({magic:e}),nt()}get description(){return this.$$.ctx[7]}set description(e){this.$$set({description:e}),nt()}get xAttr(){return this.$$.ctx[8]}set xAttr(e){this.$$set({xAttr:e}),nt()}get yAttr(){return this.$$.ctx[9]}set yAttr(e){this.$$set({yAttr:e}),nt()}get xLabel(){return this.$$.ctx[10]}set xLabel(e){this.$$set({xLabel:e}),nt()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),nt()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),nt()}get brushX(){return this.$$.ctx[11]}set brushX(e){this.$$set({brushX:e}),nt()}get dstore(){return this.$$.ctx[1]}set dstore(e){this.$$set({dstore:e}),nt()}get interactions(){return this.$$.ctx[12]}set interactions(e){this.$$set({interactions:e}),nt()}get overlay(){return this.$$.ctx[13]}get render(){return this.$$.ctx[14]}get load(){return this.$$.ctx[15]}set load(e){this.$$set({load:e}),nt()}get update(){return this.$$.ctx[16]}}function a2(t){return Object.prototype.toString.call(t)==="[object Date]"}function bg(t,e,n,i){if(typeof n=="number"||a2(n)){const r=i-n,s=(n-e)/(t.dt||1/60),a=t.opts.stiffness*r,c=t.opts.damping*s,u=(a-c)*t.inv_mass,l=(s+u)*t.dt;return Math.abs(l)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,a2(n)?new Date(n.getTime()+l):n+l)}else{if(Array.isArray(n))return n.map((r,s)=>bg(t,e[s],n[s],i[s]));if(typeof n=="object"){const r={};for(const s in n)r[s]=bg(t,e[s],n[s],i[s]);return r}else throw new Error(`Cannot spring ${typeof n} values`)}}function xJ(t,e={}){const n=On(t),{stiffness:i=.15,damping:r=.8,precision:s=.01}=e;let a,c,u,l=t,f=t,h=1,d=0,p=!1;function m(y,v={}){f=y;const b=u={};return t==null||v.hard||g.stiffness>=1&&g.damping>=1?(p=!0,a=yb(),l=y,n.set(t=f),Promise.resolve()):(v.soft&&(d=1/((v.soft===!0?.5:+v.soft)*60),h=0),c||(a=yb(),p=!1,c=ik(x=>{if(p)return p=!1,c=null,!1;h=Math.min(h+d,1);const w={inv_mass:h,opts:g,settled:!0,dt:(x-a)*60/1e3},_=bg(w,l,t,f);return a=x,l=t,n.set(t=_),w.settled&&(c=null),!w.settled})),new Promise(x=>{c.promise.then(()=>{b===u&&x()})}))}const g={set:m,update:(y,v)=>m(y(f,t),v),subscribe:n.subscribe,stiffness:i,damping:r,precision:s};return g}function o2(t,e,n){const i=t.slice();return i[28]=e[n],i[30]=n,i}function c2(t){let e,n,i,r,s=(t[6]==="label"||t[7]==="label")&&u2(t);return{c(){e=Z("span"),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0,style:!0});var c=et(e);s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","pip first"),V(e,"style",n=t[14]+": 0%;"),_t(e,"selected",t[18](t[0])),_t(e,"in-range",t[17](t[0]))},m(a,c){xt(a,e,c),s&&s.m(e,null),i||(r=[fe(e,"click",function(){Ws(t[21](t[0]))&&t[21](t[0]).apply(this,arguments)}),fe(e,"touchend",vu(function(){Ws(t[21](t[0]))&&t[21](t[0]).apply(this,arguments)}))],i=!0)},p(a,c){t=a,t[6]==="label"||t[7]==="label"?s?s.p(t,c):(s=u2(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),c&16384&&n!==(n=t[14]+": 0%;")&&V(e,"style",n),c&262145&&_t(e,"selected",t[18](t[0])),c&131073&&_t(e,"in-range",t[17](t[0]))},d(a){a&&$(e),s&&s.d(),i=!1,ca(r)}}}function u2(t){let e,n=t[12](t[16](t[0]),0,0)+"",i,r=t[10]&&l2(t),s=t[11]&&f2(t);return{c(){e=Z("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0});var c=et(e);r&&r.l(c),i=Ce(c,n),s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","pipVal")},m(a,c){xt(a,e,c),r&&r.m(e,null),Y(e,i),s&&s.m(e,null)},p(a,c){a[10]?r?r.p(a,c):(r=l2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),c&69633&&n!==(n=a[12](a[16](a[0]),0,0)+"")&&Je(i,n),a[11]?s?s.p(a,c):(s=f2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&$(e),r&&r.d(),s&&s.d()}}}function l2(t){let e,n;return{c(){e=Z("span"),n=ke(t[10]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[10]),r.forEach($),this.h()},h(){V(e,"class","pipVal-prefix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&$(e)}}}function f2(t){let e,n;return{c(){e=Z("span"),n=ke(t[11]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[11]),r.forEach($),this.h()},h(){V(e,"class","pipVal-suffix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&$(e)}}}function h2(t){let e,n=Array(t[20]+1),i=[];for(let r=0;r<n.length;r+=1)i[r]=y2(o2(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Hs()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);e=Hs()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);xt(r,e,s)},p(r,s){if(s&4120131){n=Array(r[20]+1);let a;for(a=0;a<n.length;a+=1){const c=o2(r,n,a);i[a]?i[a].p(c,s):(i[a]=y2(c),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ad(i,r),r&&$(e)}}}function d2(t){let e,n,i,r,s,a=(t[6]==="label"||t[9]==="label")&&p2(t);return{c(){e=Z("span"),a&&a.c(),n=zt(),this.h()},l(c){e=tt(c,"SPAN",{class:!0,style:!0});var u=et(e);a&&a.l(u),n=qt(u),u.forEach($),this.h()},h(){V(e,"class","pip"),V(e,"style",i=t[14]+": "+t[15](t[19](t[30]))+"%;"),_t(e,"selected",t[18](t[19](t[30]))),_t(e,"in-range",t[17](t[19](t[30])))},m(c,u){xt(c,e,u),a&&a.m(e,null),Y(e,n),r||(s=[fe(e,"click",function(){Ws(t[21](t[19](t[30])))&&t[21](t[19](t[30])).apply(this,arguments)}),fe(e,"touchend",vu(function(){Ws(t[21](t[19](t[30])))&&t[21](t[19](t[30])).apply(this,arguments)}))],r=!0)},p(c,u){t=c,t[6]==="label"||t[9]==="label"?a?a.p(t,u):(a=p2(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),u&573440&&i!==(i=t[14]+": "+t[15](t[19](t[30]))+"%;")&&V(e,"style",i),u&786432&&_t(e,"selected",t[18](t[19](t[30]))),u&655360&&_t(e,"in-range",t[17](t[19](t[30])))},d(c){c&&$(e),a&&a.d(),r=!1,ca(s)}}}function p2(t){let e,n=t[12](t[19](t[30]),t[30],t[15](t[19](t[30])))+"",i,r=t[10]&&m2(t),s=t[11]&&g2(t);return{c(){e=Z("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0});var c=et(e);r&&r.l(c),i=Ce(c,n),s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","pipVal")},m(a,c){xt(a,e,c),r&&r.m(e,null),Y(e,i),s&&s.m(e,null)},p(a,c){a[10]?r?r.p(a,c):(r=m2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),c&561152&&n!==(n=a[12](a[19](a[30]),a[30],a[15](a[19](a[30])))+"")&&Je(i,n),a[11]?s?s.p(a,c):(s=g2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&$(e),r&&r.d(),s&&s.d()}}}function m2(t){let e,n;return{c(){e=Z("span"),n=ke(t[10]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[10]),r.forEach($),this.h()},h(){V(e,"class","pipVal-prefix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&$(e)}}}function g2(t){let e,n;return{c(){e=Z("span"),n=ke(t[11]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[11]),r.forEach($),this.h()},h(){V(e,"class","pipVal-suffix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&$(e)}}}function y2(t){let e=t[19](t[30])!==t[0]&&t[19](t[30])!==t[1],n,i=e&&d2(t);return{c(){i&&i.c(),n=Hs()},l(r){i&&i.l(r),n=Hs()},m(r,s){i&&i.m(r,s),xt(r,n,s)},p(r,s){s&524291&&(e=r[19](r[30])!==r[0]&&r[19](r[30])!==r[1]),e?i?i.p(r,s):(i=d2(r),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(r){i&&i.d(r),r&&$(n)}}}function b2(t){let e,n,i,r,s=(t[6]==="label"||t[8]==="label")&&_2(t);return{c(){e=Z("span"),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0,style:!0});var c=et(e);s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","pip last"),V(e,"style",n=t[14]+": 100%;"),_t(e,"selected",t[18](t[1])),_t(e,"in-range",t[17](t[1]))},m(a,c){xt(a,e,c),s&&s.m(e,null),i||(r=[fe(e,"click",function(){Ws(t[21](t[1]))&&t[21](t[1]).apply(this,arguments)}),fe(e,"touchend",vu(function(){Ws(t[21](t[1]))&&t[21](t[1]).apply(this,arguments)}))],i=!0)},p(a,c){t=a,t[6]==="label"||t[8]==="label"?s?s.p(t,c):(s=_2(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),c&16384&&n!==(n=t[14]+": 100%;")&&V(e,"style",n),c&262146&&_t(e,"selected",t[18](t[1])),c&131074&&_t(e,"in-range",t[17](t[1]))},d(a){a&&$(e),s&&s.d(),i=!1,ca(r)}}}function _2(t){let e,n=t[12](t[16](t[1]),t[20],100)+"",i,r=t[10]&&v2(t),s=t[11]&&w2(t);return{c(){e=Z("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0});var c=et(e);r&&r.l(c),i=Ce(c,n),s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","pipVal")},m(a,c){xt(a,e,c),r&&r.m(e,null),Y(e,i),s&&s.m(e,null)},p(a,c){a[10]?r?r.p(a,c):(r=v2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),c&1118210&&n!==(n=a[12](a[16](a[1]),a[20],100)+"")&&Je(i,n),a[11]?s?s.p(a,c):(s=w2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&$(e),r&&r.d(),s&&s.d()}}}function v2(t){let e,n;return{c(){e=Z("span"),n=ke(t[10]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[10]),r.forEach($),this.h()},h(){V(e,"class","pipVal-prefix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&1024&&Je(n,i[10])},d(i){i&&$(e)}}}function w2(t){let e,n;return{c(){e=Z("span"),n=ke(t[11]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[11]),r.forEach($),this.h()},h(){V(e,"class","pipVal-suffix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&2048&&Je(n,i[11])},d(i){i&&$(e)}}}function SJ(t){let e,n,i,r=(t[6]&&t[7]!==!1||t[7])&&c2(t),s=(t[6]&&t[9]!==!1||t[9])&&h2(t),a=(t[6]&&t[8]!==!1||t[8])&&b2(t);return{c(){e=Z("div"),r&&r.c(),n=zt(),s&&s.c(),i=zt(),a&&a.c(),this.h()},l(c){e=tt(c,"DIV",{class:!0});var u=et(e);r&&r.l(u),n=qt(u),s&&s.l(u),i=qt(u),a&&a.l(u),u.forEach($),this.h()},h(){V(e,"class","rangePips"),_t(e,"disabled",t[5]),_t(e,"hoverable",t[4]),_t(e,"vertical",t[2]),_t(e,"reversed",t[3]),_t(e,"focus",t[13])},m(c,u){xt(c,e,u),r&&r.m(e,null),Y(e,n),s&&s.m(e,null),Y(e,i),a&&a.m(e,null)},p(c,[u]){c[6]&&c[7]!==!1||c[7]?r?r.p(c,u):(r=c2(c),r.c(),r.m(e,n)):r&&(r.d(1),r=null),c[6]&&c[9]!==!1||c[9]?s?s.p(c,u):(s=h2(c),s.c(),s.m(e,i)):s&&(s.d(1),s=null),c[6]&&c[8]!==!1||c[8]?a?a.p(c,u):(a=b2(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null),u&32&&_t(e,"disabled",c[5]),u&16&&_t(e,"hoverable",c[4]),u&4&&_t(e,"vertical",c[2]),u&8&&_t(e,"reversed",c[3]),u&8192&&_t(e,"focus",c[13])},i:Bt,o:Bt,d(c){c&&$(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function EJ(t,e,n){let i,r,s,a,c,{range:u=!1}=e,{min:l=0}=e,{max:f=100}=e,{step:h=1}=e,{values:d=[(f+l)/2]}=e,{vertical:p=!1}=e,{reversed:m=!1}=e,{hoverable:g=!0}=e,{disabled:y=!1}=e,{pipstep:v=void 0}=e,{all:b=!0}=e,{first:x=void 0}=e,{last:w=void 0}=e,{rest:_=void 0}=e,{prefix:E=""}=e,{suffix:T=""}=e,{formatter:C=(I,j)=>I}=e,{focus:D=void 0}=e,{orientationStart:O=void 0}=e,{percentOf:k=void 0}=e,{moveHandle:N=void 0}=e,{fixFloat:B=void 0}=e;function z(I){y||N(void 0,I)}return t.$$set=I=>{"range"in I&&n(22,u=I.range),"min"in I&&n(0,l=I.min),"max"in I&&n(1,f=I.max),"step"in I&&n(23,h=I.step),"values"in I&&n(24,d=I.values),"vertical"in I&&n(2,p=I.vertical),"reversed"in I&&n(3,m=I.reversed),"hoverable"in I&&n(4,g=I.hoverable),"disabled"in I&&n(5,y=I.disabled),"pipstep"in I&&n(25,v=I.pipstep),"all"in I&&n(6,b=I.all),"first"in I&&n(7,x=I.first),"last"in I&&n(8,w=I.last),"rest"in I&&n(9,_=I.rest),"prefix"in I&&n(10,E=I.prefix),"suffix"in I&&n(11,T=I.suffix),"formatter"in I&&n(12,C=I.formatter),"focus"in I&&n(13,D=I.focus),"orientationStart"in I&&n(14,O=I.orientationStart),"percentOf"in I&&n(15,k=I.percentOf),"moveHandle"in I&&n(26,N=I.moveHandle),"fixFloat"in I&&n(16,B=I.fixFloat)},t.$$.update=()=>{t.$$.dirty&41943047&&n(27,i=v||((f-l)/h>=(p?50:100)?(f-l)/(p?10:20):1)),t.$$.dirty&142606339&&n(20,r=parseInt((f-l)/(h*i),10)),t.$$.dirty&142671873&&n(19,s=function(I){return B(l+I*h*i)}),t.$$.dirty&16842752&&n(18,a=function(I){return d.some(j=>B(j)===B(I))}),t.$$.dirty&20971520&&n(17,c=function(I){if(u==="min")return d[0]>I;if(u==="max")return d[0]<I;if(u)return d[0]<I&&d[1]>I})},[l,f,p,m,g,y,b,x,w,_,E,T,C,D,O,k,B,c,a,s,r,z,u,h,d,v,N,i]}class IJ extends fn{constructor(e){super(),hn(this,e,EJ,SJ,dn,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function x2(t,e,n){const i=t.slice();return i[64]=e[n],i[66]=n,i}function S2(t){let e,n=t[21](t[64],t[66],t[23](t[64]))+"",i,r=t[18]&&E2(t),s=t[19]&&I2(t);return{c(){e=Z("span"),r&&r.c(),i=ke(n),s&&s.c(),this.h()},l(a){e=tt(a,"SPAN",{class:!0});var c=et(e);r&&r.l(c),i=Ce(c,n),s&&s.l(c),c.forEach($),this.h()},h(){V(e,"class","rangeFloat")},m(a,c){xt(a,e,c),r&&r.m(e,null),Y(e,i),s&&s.m(e,null)},p(a,c){a[18]?r?r.p(a,c):(r=E2(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),c[0]&10485761&&n!==(n=a[21](a[64],a[66],a[23](a[64]))+"")&&Je(i,n),a[19]?s?s.p(a,c):(s=I2(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&$(e),r&&r.d(),s&&s.d()}}}function E2(t){let e,n;return{c(){e=Z("span"),n=ke(t[18]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[18]),r.forEach($),this.h()},h(){V(e,"class","rangeFloat-prefix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r[0]&262144&&Je(n,i[18])},d(i){i&&$(e)}}}function I2(t){let e,n;return{c(){e=Z("span"),n=ke(t[19]),this.h()},l(i){e=tt(i,"SPAN",{class:!0});var r=et(e);n=Ce(r,t[19]),r.forEach($),this.h()},h(){V(e,"class","rangeFloat-suffix")},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r[0]&524288&&Je(n,i[19])},d(i){i&&$(e)}}}function A2(t){let e,n,i,r,s,a,c,u,l,f,h,d,p=t[7]&&S2(t);return{c(){e=Z("span"),n=Z("span"),i=zt(),p&&p.c(),this.h()},l(m){e=tt(m,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var g=et(e);n=tt(g,"SPAN",{class:!0}),et(n).forEach($),i=qt(g),p&&p.l(g),g.forEach($),this.h()},h(){V(n,"class","rangeNub"),V(e,"role","slider"),V(e,"class","rangeHandle"),V(e,"data-handle",t[66]),V(e,"style",r=t[28]+": "+t[29][t[66]]+"%; z-index: "+(t[26]===t[66]?3:2)+";"),V(e,"aria-valuemin",s=t[2]===!0&&t[66]===1?t[0][0]:t[3]),V(e,"aria-valuemax",a=t[2]===!0&&t[66]===0?t[0][1]:t[4]),V(e,"aria-valuenow",c=t[64]),V(e,"aria-valuetext",u=""+(t[18]+t[21](t[64],t[66],t[23](t[64]))+t[19])),V(e,"aria-orientation",l=t[6]?"vertical":"horizontal"),V(e,"aria-disabled",t[10]),V(e,"disabled",t[10]),V(e,"tabindex",f=t[10]?-1:0),_t(e,"active",t[24]&&t[26]===t[66]),_t(e,"press",t[25]&&t[26]===t[66])},m(m,g){xt(m,e,g),Y(e,n),Y(e,i),p&&p.m(e,null),h||(d=[fe(e,"blur",t[34]),fe(e,"focus",t[35]),fe(e,"keydown",t[36])],h=!0)},p(m,g){m[7]?p?p.p(m,g):(p=S2(m),p.c(),p.m(e,null)):p&&(p.d(1),p=null),g[0]&872415232&&r!==(r=m[28]+": "+m[29][m[66]]+"%; z-index: "+(m[26]===m[66]?3:2)+";")&&V(e,"style",r),g[0]&13&&s!==(s=m[2]===!0&&m[66]===1?m[0][0]:m[3])&&V(e,"aria-valuemin",s),g[0]&21&&a!==(a=m[2]===!0&&m[66]===0?m[0][1]:m[4])&&V(e,"aria-valuemax",a),g[0]&1&&c!==(c=m[64])&&V(e,"aria-valuenow",c),g[0]&11272193&&u!==(u=""+(m[18]+m[21](m[64],m[66],m[23](m[64]))+m[19]))&&V(e,"aria-valuetext",u),g[0]&64&&l!==(l=m[6]?"vertical":"horizontal")&&V(e,"aria-orientation",l),g[0]&1024&&V(e,"aria-disabled",m[10]),g[0]&1024&&V(e,"disabled",m[10]),g[0]&1024&&f!==(f=m[10]?-1:0)&&V(e,"tabindex",f),g[0]&83886080&&_t(e,"active",m[24]&&m[26]===m[66]),g[0]&100663296&&_t(e,"press",m[25]&&m[26]===m[66])},d(m){m&&$(e),p&&p.d(),h=!1,ca(d)}}}function T2(t){let e,n;return{c(){e=Z("span"),this.h()},l(i){e=tt(i,"SPAN",{class:!0,style:!0}),et(e).forEach($),this.h()},h(){V(e,"class","rangeBar"),V(e,"style",n=t[28]+": "+t[32](t[29])+"%; "+t[27]+": "+t[33](t[29])+"%;")},m(i,r){xt(i,e,r)},p(i,r){r[0]&939524096&&n!==(n=i[28]+": "+i[32](i[29])+"%; "+i[27]+": "+i[33](i[29])+"%;")&&V(e,"style",n)},d(i){i&&$(e)}}}function k2(t){let e,n;return e=new IJ({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[28],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[24],percentOf:t[23],moveHandle:t[31],fixFloat:t[30]}}),{c(){j2(e.$$.fragment)},l(i){z2(e.$$.fragment,i)},m(i,r){q2(e,i,r),n=!0},p(i,r){const s={};r[0]&1&&(s.values=i[0]),r[0]&8&&(s.min=i[3]),r[0]&16&&(s.max=i[4]),r[0]&32&&(s.step=i[5]),r[0]&4&&(s.range=i[2]),r[0]&64&&(s.vertical=i[6]),r[0]&256&&(s.reversed=i[8]),r[0]&268435456&&(s.orientationStart=i[28]),r[0]&512&&(s.hoverable=i[9]),r[0]&1024&&(s.disabled=i[10]),r[0]&8192&&(s.all=i[13]),r[0]&16384&&(s.first=i[14]),r[0]&32768&&(s.last=i[15]),r[0]&65536&&(s.rest=i[16]),r[0]&4096&&(s.pipstep=i[12]),r[0]&262144&&(s.prefix=i[18]),r[0]&524288&&(s.suffix=i[19]),r[0]&1048576&&(s.formatter=i[20]),r[0]&16777216&&(s.focus=i[24]),r[0]&8388608&&(s.percentOf=i[23]),e.$set(s)},i(i){n||(je(e.$$.fragment,i),n=!0)},o(i){He(e.$$.fragment,i),n=!1},d(i){W2(e,i)}}}function AJ(t){let e,n,i,r,s,a,c=t[0],u=[];for(let h=0;h<c.length;h+=1)u[h]=A2(x2(t,c,h));let l=t[2]&&T2(t),f=t[11]&&k2(t);return{c(){e=Z("div");for(let h=0;h<u.length;h+=1)u[h].c();n=zt(),l&&l.c(),i=zt(),f&&f.c(),this.h()},l(h){e=tt(h,"DIV",{id:!0,class:!0});var d=et(e);for(let p=0;p<u.length;p+=1)u[p].l(d);n=qt(d),l&&l.l(d),i=qt(d),f&&f.l(d),d.forEach($),this.h()},h(){V(e,"id",t[17]),V(e,"class","rangeSlider"),_t(e,"range",t[2]),_t(e,"disabled",t[10]),_t(e,"hoverable",t[9]),_t(e,"vertical",t[6]),_t(e,"reversed",t[8]),_t(e,"focus",t[24]),_t(e,"min",t[2]==="min"),_t(e,"max",t[2]==="max"),_t(e,"pips",t[11]),_t(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(h,d){xt(h,e,d);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(e,null);Y(e,n),l&&l.m(e,null),Y(e,i),f&&f.m(e,null),t[50](e),r=!0,s||(a=[fe(window,"mousedown",t[39]),fe(window,"touchstart",t[39]),fe(window,"mousemove",t[40]),fe(window,"touchmove",t[40]),fe(window,"mouseup",t[41]),fe(window,"touchend",t[42]),fe(window,"keydown",t[43]),fe(e,"mousedown",t[37]),fe(e,"mouseup",t[38]),fe(e,"touchstart",vu(t[37])),fe(e,"touchend",vu(t[38]))],s=!0)},p(h,d){if(d[0]&934020317|d[1]&56){c=h[0];let p;for(p=0;p<c.length;p+=1){const m=x2(h,c,p);u[p]?u[p].p(m,d):(u[p]=A2(m),u[p].c(),u[p].m(e,n))}for(;p<u.length;p+=1)u[p].d(1);u.length=c.length}h[2]?l?l.p(h,d):(l=T2(h),l.c(),l.m(e,i)):l&&(l.d(1),l=null),h[11]?f?(f.p(h,d),d[0]&2048&&je(f,1)):(f=k2(h),f.c(),je(f,1),f.m(e,null)):f&&(rk(),He(f,1,1,()=>{f=null}),sk()),(!r||d[0]&131072)&&V(e,"id",h[17]),(!r||d[0]&4)&&_t(e,"range",h[2]),(!r||d[0]&1024)&&_t(e,"disabled",h[10]),(!r||d[0]&512)&&_t(e,"hoverable",h[9]),(!r||d[0]&64)&&_t(e,"vertical",h[6]),(!r||d[0]&256)&&_t(e,"reversed",h[8]),(!r||d[0]&16777216)&&_t(e,"focus",h[24]),(!r||d[0]&4)&&_t(e,"min",h[2]==="min"),(!r||d[0]&4)&&_t(e,"max",h[2]==="max"),(!r||d[0]&2048)&&_t(e,"pips",h[11]),(!r||d[0]&122880)&&_t(e,"pip-labels",h[13]==="label"||h[14]==="label"||h[15]==="label"||h[16]==="label")},i(h){r||(je(f),r=!0)},o(h){He(f),r=!1},d(h){h&&$(e),ad(u,h),l&&l.d(),f&&f.d(),t[50](null),s=!1,ca(a)}}}function C2(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function L0(t){return t.type.includes("touch")?t.touches[0]:t}function TJ(t,e,n){let i,r,s,a,c,u,l=Bt,f=()=>(l(),l=kr(M,L=>n(29,u=L)),M);t.$$.on_destroy.push(()=>l());let{slider:h=void 0}=e,{range:d=!1}=e,{pushy:p=!1}=e,{min:m=0}=e,{max:g=100}=e,{step:y=1}=e,{values:v=[(g+m)/2]}=e,{vertical:b=!1}=e,{float:x=!1}=e,{reversed:w=!1}=e,{hoverable:_=!0}=e,{disabled:E=!1}=e,{pips:T=!1}=e,{pipstep:C=void 0}=e,{all:D=void 0}=e,{first:O=void 0}=e,{last:k=void 0}=e,{rest:N=void 0}=e,{id:B=void 0}=e,{prefix:z=""}=e,{suffix:I=""}=e,{formatter:j=(L,ft,se)=>L}=e,{handleFormatter:F=j}=e,{precision:P=2}=e,{springValues:W={stiffness:.15,damping:.4}}=e;const J=ak();let X=0,Q=!1,ot=!1,Ut=!1,dt=!1,ut=v.length-1,rt,ct,M;const H=L=>parseFloat(L.toFixed(P));function K(L){const ft=h.querySelectorAll(".handle"),se=Array.prototype.includes.call(ft,L),ae=Array.prototype.some.call(ft,yi=>yi.contains(L));return se||ae}function U(L){return d==="min"||d==="max"?L.slice(0,1):d?L.slice(0,2):L}function st(){return h.getBoundingClientRect()}function pt(L){const ft=st();let se=0,ae=0,yi=0;b?(se=L.clientY-ft.top,ae=se/ft.height*100,ae=w?ae:100-ae):(se=L.clientX-ft.left,ae=se/ft.width*100,ae=w?100-ae:ae),yi=(g-m)/100*ae+m;let Vc;return d===!0&&v[0]===v[1]?yi>v[1]?1:0:(Vc=v.indexOf([...v].sort((Fl,Dl)=>Math.abs(yi-Fl)-Math.abs(yi-Dl))[0]),Vc)}function bt(L){const ft=st();let se=0,ae=0,yi=0;b?(se=L.clientY-ft.top,ae=se/ft.height*100,ae=w?ae:100-ae):(se=L.clientX-ft.left,ae=se/ft.width*100,ae=w?100-ae:ae),yi=(g-m)/100*ae+m,mt(ut,yi)}function mt(L,ft){return ft=s(ft),typeof L>"u"&&(L=ut),d&&(L===0&&ft>v[1]?p?n(0,v[1]=ft,v):ft=v[1]:L===1&&ft<v[0]&&(p?n(0,v[0]=ft,v):ft=v[0])),v[L]!==ft&&n(0,v[L]=ft,v),ct!==ft&&(gi(),ct=ft),ft}function G(L){return d==="min"?0:L[0]}function St(L){return d==="max"?0:d==="min"?100-L[0]:100-L[1]}function re(L){dt&&(n(24,Q=!1),ot=!1,n(25,Ut=!1))}function _e(L){E||(n(26,ut=C2(L.target)),n(24,Q=!0))}function ge(L){if(!E){const ft=C2(L.target);let se=L.ctrlKey||L.metaKey||L.shiftKey?y*10:y,ae=!1;switch(L.key){case"PageDown":se*=10;case"ArrowRight":case"ArrowUp":mt(ft,v[ft]+se),ae=!0;break;case"PageUp":se*=10;case"ArrowLeft":case"ArrowDown":mt(ft,v[ft]-se),ae=!0;break;case"Home":mt(ft,m),ae=!0;break;case"End":mt(ft,g),ae=!0;break}ae&&(L.preventDefault(),L.stopPropagation())}}function Bn(L){if(!E){const ft=L.target,se=L0(L);n(24,Q=!0),ot=!0,n(25,Ut=!0),n(26,ut=pt(se)),rt=ct=s(v[ut]),Pn(),L.type==="touchstart"&&!ft.matches(".pipVal")&&bt(se)}}function $e(L){L.type==="touchend"&&mi(),n(25,Ut=!1)}function cr(L){dt=!1,Q&&L.target!==h&&!h.contains(L.target)&&n(24,Q=!1)}function nn(L){E||ot&&bt(L0(L))}function q(L){if(!E){const ft=L.target;ot&&((ft===h||h.contains(ft))&&(n(24,Q=!0),!K(ft)&&!ft.matches(".pipVal")&&bt(L0(L))),mi())}ot=!1,n(25,Ut=!1)}function at(L){ot=!1,n(25,Ut=!1)}function Oe(L){E||(L.target===h||h.contains(L.target))&&(dt=!0)}function Pn(){!E&&J("start",{activeHandle:ut,value:rt,values:v.map(L=>s(L))})}function mi(){!E&&J("stop",{activeHandle:ut,startValue:rt,value:v[ut],values:v.map(L=>s(L))})}function gi(){!E&&J("change",{activeHandle:ut,startValue:rt,previousValue:typeof ct>"u"?rt:ct,value:v[ut],values:v.map(L=>s(L))})}function lo(L){oa[L?"unshift":"push"](()=>{h=L,n(1,h)})}return t.$$set=L=>{"slider"in L&&n(1,h=L.slider),"range"in L&&n(2,d=L.range),"pushy"in L&&n(44,p=L.pushy),"min"in L&&n(3,m=L.min),"max"in L&&n(4,g=L.max),"step"in L&&n(5,y=L.step),"values"in L&&n(0,v=L.values),"vertical"in L&&n(6,b=L.vertical),"float"in L&&n(7,x=L.float),"reversed"in L&&n(8,w=L.reversed),"hoverable"in L&&n(9,_=L.hoverable),"disabled"in L&&n(10,E=L.disabled),"pips"in L&&n(11,T=L.pips),"pipstep"in L&&n(12,C=L.pipstep),"all"in L&&n(13,D=L.all),"first"in L&&n(14,O=L.first),"last"in L&&n(15,k=L.last),"rest"in L&&n(16,N=L.rest),"id"in L&&n(17,B=L.id),"prefix"in L&&n(18,z=L.prefix),"suffix"in L&&n(19,I=L.suffix),"formatter"in L&&n(20,j=L.formatter),"handleFormatter"in L&&n(21,F=L.handleFormatter),"precision"in L&&n(45,P=L.precision),"springValues"in L&&n(46,W=L.springValues)},t.$$.update=()=>{t.$$.dirty[0]&24&&n(49,r=function(L){return L<=m?m:L>=g?g:L}),t.$$.dirty[0]&56|t.$$.dirty[1]&262144&&n(48,s=function(L){if(L<=m)return H(m);if(L>=g)return H(g);let ft=(L-m)%y,se=L-ft;return Math.abs(ft)*2>=y&&(se+=ft>0?y:-y),se=r(se),H(se)}),t.$$.dirty[0]&24&&n(23,i=function(L){let ft=(L-m)/(g-m)*100;return isNaN(ft)||ft<=0?0:ft>=100?100:H(ft)}),t.$$.dirty[0]&12582937|t.$$.dirty[1]&229376&&(Array.isArray(v)||(n(0,v=[(g+m)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),n(0,v=U(v.map(L=>s(L)))),X!==v.length?f(n(22,M=xJ(v.map(L=>i(L)),W))):M.set(v.map(L=>i(L))),n(47,X=v.length)),t.$$.dirty[0]&320&&n(28,a=b?w?"top":"bottom":w?"right":"left"),t.$$.dirty[0]&320&&n(27,c=b?w?"bottom":"top":w?"left":"right")},[v,h,d,m,g,y,b,x,w,_,E,T,C,D,O,k,N,B,z,I,j,F,M,i,Q,Ut,ut,c,a,u,H,mt,G,St,re,_e,ge,Bn,$e,cr,nn,q,at,Oe,p,P,W,X,s,r,lo]}class kJ extends fn{constructor(e){super(),hn(this,e,TJ,AJ,dn,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function M2(t){let e,n;return{c(){e=Z("p"),n=ke(t[2])},l(i){e=tt(i,"P",{});var r=et(e);n=Ce(r,t[2]),r.forEach($)},m(i,r){xt(i,e,r),Y(e,n)},p(i,r){r&4&&Je(n,i[2])},d(i){i&&$(e)}}}function CJ(t){let e,n,i,r,s,a=t[2]&&M2(t);function c(l){t[14](l)}let u={min:+t[0],max:+t[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return t[6]!==void 0&&(u.values=t[6]),i=new kJ({props:u}),oa.push(()=>ok(i,"values",c)),i.$on("start",t[8]),i.$on("change",t[7]),i.$on("stop",t[9]),{c(){e=Z("div"),a&&a.c(),n=zt(),j2(i.$$.fragment),this.h()},l(l){e=tt(l,"DIV",{class:!0,id:!0});var f=et(e);a&&a.l(f),n=qt(f),z2(i.$$.fragment,f),f.forEach($),this.h()},h(){V(e,"class","px-[1%] py-[1%] ml-[2.1%]"),V(e,"id","slider")},m(l,f){xt(l,e,f),a&&a.m(e,null),Y(e,n),q2(i,e,null),s=!0},p(l,[f]){l[2]?a?a.p(l,f):(a=M2(l),a.c(),a.m(e,n)):a&&(a.d(1),a=null);const h={};f&1&&(h.min=+l[0]),f&2&&(h.max=+l[1]),!r&&f&64&&(r=!0,h.values=l[6],ck(()=>r=!1)),i.$set(h)},i(l){s||(je(i.$$.fragment,l),s=!0)},o(l){He(i.$$.fragment,l),s=!1},d(l){l&&$(e),a&&a.d(),W2(i)}}}function MJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(b,k=>n(15,i=k)),b),a,c=Bt,u=()=>(c(),c=kr(y,k=>n(16,a=k)),y),l,f=Bt,h=()=>(f(),f=kr(v,k=>n(17,l=k)),v);t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>f());let{min:d=0,max:p=100,id:m,description:g}=e,{change:y=On({})}=e;u();let{stop:v=On({})}=e;h();let{drag:b=On({})}=e;s();let{interactions:x={change:y,stop:v,drag:b}}=e;uk("dims");let w=[d,p];[...w];function _(k){console.log("Slider.render",k),k&&we(Array,k)&&Cn(k.filter(N=>N===void 0))&&(n(6,w=[+k[0].min,+k[0].max]),n(0,[d,p]=w,d,n(1,p)),console.log("Slider.render.to",w)),w&&w.length>=2&&T()}function E(k,N){console.log("Slider.load",k,N),!(!zo("left")(k)||!zo("right")(k))&&(k=k??{left:d,right:p},n(6,w=[k.left??d,k.right??p]),T())}function T(){y.isActive&&kn(y,a={left:w[0],right:w[1]},a),b.isActive&&kn(b,i={left:w[0],right:w[1]},i)}function C(){b.isActive&&kn(b,i={left:w[0],right:w[1]},i)}function D(){v.isActive&&kn(v,l={left:w[0],right:w[1]},l),y.isActive&&kn(y,a={left:w[0],right:w[1]},a),b.isActive&&kn(b,i={left:w[0],right:w[1]},i)}function O(k){w=k,n(6,w)}return t.$$set=k=>{"min"in k&&n(0,d=k.min),"max"in k&&n(1,p=k.max),"id"in k&&n(10,m=k.id),"description"in k&&n(2,g=k.description),"change"in k&&u(n(3,y=k.change)),"stop"in k&&h(n(4,v=k.stop)),"drag"in k&&s(n(5,b=k.drag)),"interactions"in k&&n(11,x=k.interactions)},[d,p,g,y,v,b,w,T,C,D,m,x,_,E,O]}class NJ extends fn{constructor(e){super(),hn(this,e,MJ,CJ,dn,{min:0,max:1,id:10,description:2,change:3,stop:4,drag:5,interactions:11,render:12,load:13})}get min(){return this.$$.ctx[0]}set min(e){this.$$set({min:e}),nt()}get max(){return this.$$.ctx[1]}set max(e){this.$$set({max:e}),nt()}get id(){return this.$$.ctx[10]}set id(e){this.$$set({id:e}),nt()}get description(){return this.$$.ctx[2]}set description(e){this.$$set({description:e}),nt()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),nt()}get stop(){return this.$$.ctx[4]}set stop(e){this.$$set({stop:e}),nt()}get drag(){return this.$$.ctx[5]}set drag(e){this.$$set({drag:e}),nt()}get interactions(){return this.$$.ctx[11]}set interactions(e){this.$$set({interactions:e}),nt()}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}}function OJ(t){let e,n;return{c(){e=Z("div"),n=Z("div"),this.h()},l(i){e=tt(i,"DIV",{id:!0});var r=et(e);n=tt(r,"DIV",{}),et(n).forEach($),r.forEach($),this.h()},h(){V(e,"id",t[0])},m(i,r){xt(i,e,r),Y(e,n),t[20](n)},p(i,[r]){r&1&&V(e,"id",i[0])},i:Bt,o:Bt,d(i){i&&$(e),t[20](null)}}}function FJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(x,I=>n(25,i=I)),x);t.$$.on_destroy.push(()=>r());let{id:a,name:c,groupNames:u=[],title:l="",xAttr:f,yAttr:h="val",yMax:d,magic:p,xDomainMin:m=null,xDomainMax:g=null,theplot:y=null}=e,v={},{brushX:b=On({}),dstore:x=On({}),interactions:w={dstore:x,brushX:b}}=e;s();let _,E=null,T=[],C=[{},{}],{load:D=I=>_==null?void 0:_.load(I)}=e;function O(I,j){return j!="overlay"?!1:(v=I,!0)}function k(I,j){return j!="badyear"?!1:(I.forEach((F,P)=>{F.rank=P+1,F[f]=Number(F[f])}),C=I,!0)}function N(I,j){!I||I.length===0||typeof j=="object"||(k(I,j)||O(I,j)?console.debug("overlay or badyear"):(T=K$(I,{include:u}),T.forEach(F=>F[f]=Number(F[f]))),kn(x,i={chart_data:T},i),B())}function B(){n(3,m=+m),n(4,g=+g);let I=$m({x:{type:"linear",domain:[m-1,g]}}),j=P=>(C.length-P.rank)*(.3/C.length)+.7,F={x:I,color:{domain:u,range:E3,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[so({ticks:ux(P=>P+m,g-m),tickRotate:-90,fontSize:10,tickFormat:P=>(P+"").slice(-2)}),Tc({fontSize:10,label:"Payout"}),Fy([0]),Oy([I.domain[0]]),Eh(C,{x1:P=>P[f]-.5,x2:P=>P[f]+.5,y:j,stroke:"black",opacity:.8,strokeWidth:1}),z$(C,{x1:P=>P[f]-.5,x2:P=>P[f]+.5,y1:0,y2:j,fill:"gray",opacity:.1}),Jd(v,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),B$(T,{filter:P=>P.key==u[3]&&P[f]>=m&&P[f]<=g&&+P[h]==0,x:P=>+P[f],y:0,stroke:"red",strokeWidth:1})]};u.forEach((P,W)=>{let J=(1+W)/u.length*.7;F.marks.push(Eh(T,{filter:X=>X.key==P&&X[f]>=m&&X[f]<=g,x:X=>+X[f]+J-.35,y1:0,y2:h,stroke:"key",strokeWidth:4}))}),n(5,y=Ol(F,E)),b.isActive&&(_=_??new _p({iact:b,magic:p}),_.init(y))}function z(I){oa[I?"unshift":"push"](()=>{E=I,n(2,E)})}return t.$$set=I=>{"id"in I&&n(6,a=I.id),"name"in I&&n(0,c=I.name),"groupNames"in I&&n(7,u=I.groupNames),"title"in I&&n(8,l=I.title),"xAttr"in I&&n(9,f=I.xAttr),"yAttr"in I&&n(10,h=I.yAttr),"yMax"in I&&n(11,d=I.yMax),"magic"in I&&n(12,p=I.magic),"xDomainMin"in I&&n(3,m=I.xDomainMin),"xDomainMax"in I&&n(4,g=I.xDomainMax),"theplot"in I&&n(5,y=I.theplot),"brushX"in I&&n(13,b=I.brushX),"dstore"in I&&s(n(1,x=I.dstore)),"interactions"in I&&n(14,w=I.interactions),"load"in I&&n(15,D=I.load)},[c,x,E,m,g,y,a,u,l,f,h,d,p,b,w,D,O,k,N,B,z]}class DJ extends fn{constructor(e){super(),hn(this,e,FJ,OJ,dn,{id:6,name:0,groupNames:7,title:8,xAttr:9,yAttr:10,yMax:11,magic:12,xDomainMin:3,xDomainMax:4,theplot:5,brushX:13,dstore:1,interactions:14,load:15,overlay:16,badyear:17,render:18,update:19})}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),nt()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),nt()}get groupNames(){return this.$$.ctx[7]}set groupNames(e){this.$$set({groupNames:e}),nt()}get title(){return this.$$.ctx[8]}set title(e){this.$$set({title:e}),nt()}get xAttr(){return this.$$.ctx[9]}set xAttr(e){this.$$set({xAttr:e}),nt()}get yAttr(){return this.$$.ctx[10]}set yAttr(e){this.$$set({yAttr:e}),nt()}get yMax(){return this.$$.ctx[11]}set yMax(e){this.$$set({yMax:e}),nt()}get magic(){return this.$$.ctx[12]}set magic(e){this.$$set({magic:e}),nt()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),nt()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),nt()}get theplot(){return this.$$.ctx[5]}set theplot(e){this.$$set({theplot:e}),nt()}get brushX(){return this.$$.ctx[13]}set brushX(e){this.$$set({brushX:e}),nt()}get dstore(){return this.$$.ctx[1]}set dstore(e){this.$$set({dstore:e}),nt()}get interactions(){return this.$$.ctx[14]}set interactions(e){this.$$set({interactions:e}),nt()}get load(){return this.$$.ctx[15]}set load(e){this.$$set({load:e}),nt()}get overlay(){return this.$$.ctx[16]}get badyear(){return this.$$.ctx[17]}get render(){return this.$$.ctx[18]}get update(){return this.$$.ctx[19]}}function RJ(t){let e,n;return{c(){e=Z("div"),n=Z("div"),this.h()},l(i){e=tt(i,"DIV",{id:!0});var r=et(e);n=tt(r,"DIV",{}),et(n).forEach($),r.forEach($),this.h()},h(){V(e,"id",t[0])},m(i,r){xt(i,e,r),Y(e,n),t[11](n)},p(i,[r]){r&1&&V(e,"id",i[0])},i:Bt,o:Bt,d(i){i&&$(e),t[11](null)}}}function LJ(t,e,n){let{id:i,name:r,xDomainMin:s,xDomainMax:a,magic:c}=e,{brushX:u=On({})}=e,{interactions:l={brushX:u}}=e,f,h,d,p={},m=[];function g(x,w){return w!="overlay"?!1:(p=x,!0)}function y(x,w){n(1,h.innerHTML="",h),!(!x||x.length===0||typeof w=="object")&&(g(x,w)?console.debug("overlay"):m=x,v())}function v(){let x=0,w={x:{domain:[+s,+a],type:"linear"},y:{axis:null,label:!0},marginBottom:50,height:m.length*40,color:{style:{"font-size":10,"margin-left":"2rem"},scheme:"Tableau10",legend:!0},marks:[so({ticks:36,fontSize:10}),Eh(m,{x1:"start_time",x2:"end_time",y:"crop",strokeWidth:3,fy:"activity"}),bl(m,{x:_=>{let E=(_.end_time-_.start_time)/2+_.start_time;return x++,console.log("yy",x,_,E),E},y:"crop",dy:3,lineAnchor:"top",fy:"activity",fontSize:10,color:"gray",text:"crop"}),Jd(p,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2})]};f=Ol(w,h),u.isActive&&(d=d??new _p({iact:u,magic:c}),d.init(f))}function b(x){oa[x?"unshift":"push"](()=>{h=x,n(1,h)})}return t.$$set=x=>{"id"in x&&n(2,i=x.id),"name"in x&&n(0,r=x.name),"xDomainMin"in x&&n(3,s=x.xDomainMin),"xDomainMax"in x&&n(4,a=x.xDomainMax),"magic"in x&&n(5,c=x.magic),"brushX"in x&&n(6,u=x.brushX),"interactions"in x&&n(7,l=x.interactions)},[r,h,i,s,a,c,u,l,g,y,v,b]}class BJ extends fn{constructor(e){super(),hn(this,e,LJ,RJ,dn,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),nt()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),nt()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),nt()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),nt()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),nt()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),nt()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),nt()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function PJ(t){let e,n;return{c(){e=Z("div"),n=Z("div"),this.h()},l(i){e=tt(i,"DIV",{id:!0});var r=et(e);n=tt(r,"DIV",{}),et(n).forEach($),r.forEach($),this.h()},h(){V(e,"id",t[0])},m(i,r){xt(i,e,r),Y(e,n),t[6](n)},p(i,[r]){r&1&&V(e,"id",i[0])},i:Bt,o:Bt,d(i){i&&$(e),t[6](null)}}}function UJ(t,e,n){let{name:i,id:r,interactions:s={}}=e,a,c=[];function u(h,d){!h||h.length===0||(c=h,l())}function l(){let h=$m({color:{type:"linear",scheme:"greens"}}),d=$m({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),p=c.map(g=>d.apply(Kf(h.apply(+g.value)).l)),m={padding:0,marginLeft:150,height:300,color:h,marks:[so({fontSize:10,label:null}),Tc({fontSize:10,label:null}),F$(c,{x:"x",y:"y",fill:g=>+g.value,stroke:"white"}),bl(c,{x:"x",y:"y",text:g=>g.value,fill:p,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};Ol(m,a)}function f(h){oa[h?"unshift":"push"](()=>{a=h,n(1,a)})}return t.$$set=h=>{"name"in h&&n(0,i=h.name),"id"in h&&n(2,r=h.id),"interactions"in h&&n(3,s=h.interactions)},[i,a,r,s,u,l,f]}class VJ extends fn{constructor(e){super(),hn(this,e,UJ,PJ,dn,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),nt()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),nt()}get interactions(){return this.$$.ctx[3]}set interactions(e){this.$$set({interactions:e}),nt()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}function N2(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function $J(t){let e,n=t[13][t[2]]+"",i;return{c(){e=Z("option"),i=ke(n),this.h()},l(r){e=tt(r,"OPTION",{});var s=et(e);i=Ce(s,n),s.forEach($),this.h()},h(){e.__value=t[15],e.value=e.__value},m(r,s){xt(r,e,s),Y(e,i)},p(r,s){s&36&&n!==(n=r[13][r[2]]+"")&&Je(i,n)},d(r){r&&$(e)}}}function jJ(t){let e,n=t[13][t[2]]+"",i;return{c(){e=Z("option"),i=ke(n),this.h()},l(r){e=tt(r,"OPTION",{});var s=et(e);i=Ce(s,n),s.forEach($),this.h()},h(){e.__value=t[15],e.value=e.__value,e.selected=!0},m(r,s){xt(r,e,s),Y(e,i)},p(r,s){s&36&&n!==(n=r[13][r[2]]+"")&&Je(i,n)},d(r){r&&$(e)}}}function O2(t){let e;function n(s,a){return s[15]===s[1]?jJ:$J}let i=n(t),r=i(t);return{c(){r.c(),e=Hs()},l(s){r.l(s),e=Hs()},m(s,a){r.m(s,a),xt(s,e,a)},p(s,a){i===(i=n(s))&&r?r.p(s,a):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&$(e)}}}function zJ(t){let e,n,i,r,s=t[5],a=[];for(let c=0;c<s.length;c+=1)a[c]=O2(N2(t,s,c));return{c(){e=Z("div"),n=Z("select");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=tt(c,"DIV",{class:!0,id:!0});var u=et(e);n=tt(u,"SELECT",{class:!0});var l=et(n);for(let f=0;f<a.length;f+=1)a[f].l(l);l.forEach($),u.forEach($),this.h()},h(){V(n,"class","form-select appearance-none block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),t[4]===void 0&&lk(()=>t[10].call(n)),V(e,"class","px-[1%] py-[1%]"),V(e,"id",t[0])},m(c,u){xt(c,e,u),Y(e,n);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(n,null);bb(n,t[4],!0),i||(r=[fe(n,"change",t[10]),fe(n,"change",t[6])],i=!0)},p(c,[u]){if(u&38){s=c[5];let l;for(l=0;l<s.length;l+=1){const f=N2(c,s,l);a[l]?a[l].p(f,u):(a[l]=O2(f),a[l].c(),a[l].m(n,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=s.length}u&16&&bb(n,c[4]),u&1&&V(e,"id",c[0])},i:Bt,o:Bt,d(c){c&&$(e),ad(a,c),i=!1,ca(r)}}}function qJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(l,v=>n(11,i=v)),l);t.$$.on_destroy.push(()=>r());let{id:a,index:c,dropdown_key:u}=e,{change:l=On({})}=e;s();let{interactions:f={change:l}}=e,h=null,d=[];function p(v,b){n(5,d=v??d),n(4,h=h??c),console.log("Dropdown.render",d,h,b),g()}function m(v){console.log("Dropdown.load",v),n(4,h=v.idx),p()}function g(){l.isActive&&kn(l,i={...d[h],idx:h},i)}function y(){h=fk(this),n(4,h)}return t.$$set=v=>{"id"in v&&n(0,a=v.id),"index"in v&&n(1,c=v.index),"dropdown_key"in v&&n(2,u=v.dropdown_key),"change"in v&&s(n(3,l=v.change)),"interactions"in v&&n(7,f=v.interactions)},[a,c,u,l,h,d,g,f,p,m,y]}class WJ extends fn{constructor(e){super(),hn(this,e,qJ,zJ,dn,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),nt()}get index(){return this.$$.ctx[1]}set index(e){this.$$set({index:e}),nt()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(e){this.$$set({dropdown_key:e}),nt()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),nt()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),nt()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function HJ(t){let e,n,i,r,s,a,c,u,l,f,h,d,p,m;return{c(){e=Z("form"),n=Z("div"),i=Z("input"),r=zt(),s=Z("button"),a=ke("Login"),c=zt(),u=Z("button"),l=ke("Save"),f=zt(),h=Z("button"),d=ke("Logout"),this.h()},l(g){e=tt(g,"FORM",{class:!0});var y=et(e);n=tt(y,"DIV",{class:!0});var v=et(n);i=tt(v,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),r=qt(v),s=tt(v,"BUTTON",{class:!0,type:!0});var b=et(s);a=Ce(b,"Login"),b.forEach($),c=qt(v),u=tt(v,"BUTTON",{class:!0,type:!0});var x=et(u);l=Ce(x,"Save"),x.forEach($),f=qt(v),h=tt(v,"BUTTON",{class:!0,type:!0});var w=et(h);d=Ce(w,"Logout"),w.forEach($),v.forEach($),y.forEach($),this.h()},h(){V(i,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),V(i,"type","text"),V(i,"placeholder","Login..."),V(i,"aria-label","username"),V(s,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),V(s,"type","button"),V(u,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),V(u,"type","button"),V(h,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),V(h,"type","button"),V(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),V(e,"class","w-full max-w-sm mx-auto")},m(g,y){xt(g,e,y),Y(e,n),Y(n,i),Df(i,t[1]),Y(n,r),Y(n,s),Y(s,a),Y(n,c),Y(n,u),Y(u,l),Y(n,f),Y(n,h),Y(h,d),p||(m=[fe(i,"input",t[14]),fe(s,"click",t[2]),fe(u,"click",t[3]),fe(h,"click",t[4])],p=!0)},p(g,[y]){y&2&&i.value!==g[1]&&Df(i,g[1])},i:Bt,o:Bt,d(g){g&&$(e),p=!1,ca(m)}}}function zT(t,e){console.debug("login invoked",t,e)}function YJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(a,_=>n(16,i=_)),a);t.$$.on_destroy.push(()=>r());let{status:a=On({}),interactions:c={status:a}}=e;s();let{id:u,magic:l,client:f,exportFunc:h,importFunc:d,dataTable:p,stateTable:m}=e,g,y;const v=async()=>{console.debug("login user: ",g),y=l.exportState();const _=await f.query(d,{table:m,user:g});if(!_){alert("there is no data for this user"),kn(a,i={user:g,loggedin:!0},i);return}kn(a,i={user:g,loggedin:!0},i),l.importState(_.data)},b=async()=>{let _=l.exportData();await f.mutation(h,{data:_,table:p,user:g}),_=l.exportState(),await f.mutation(h,{data:_,table:m,user:g}),alert("save function executed")},x=async()=>{l.importState(y),n(1,g=null)};function w(){g=this.value,n(1,g)}return t.$$set=_=>{"status"in _&&s(n(0,a=_.status)),"interactions"in _&&n(5,c=_.interactions),"id"in _&&n(6,u=_.id),"magic"in _&&n(7,l=_.magic),"client"in _&&n(8,f=_.client),"exportFunc"in _&&n(9,h=_.exportFunc),"importFunc"in _&&n(10,d=_.importFunc),"dataTable"in _&&n(11,p=_.dataTable),"stateTable"in _&&n(12,m=_.stateTable)},[a,g,v,b,x,c,u,l,f,h,d,p,m,zT,w]}class GJ extends fn{constructor(e){super(),hn(this,e,YJ,HJ,dn,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,render:13})}get status(){return this.$$.ctx[0]}set status(e){this.$$set({status:e}),nt()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),nt()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),nt()}get magic(){return this.$$.ctx[7]}set magic(e){this.$$set({magic:e}),nt()}get client(){return this.$$.ctx[8]}set client(e){this.$$set({client:e}),nt()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(e){this.$$set({exportFunc:e}),nt()}get importFunc(){return this.$$.ctx[10]}set importFunc(e){this.$$set({importFunc:e}),nt()}get dataTable(){return this.$$.ctx[11]}set dataTable(e){this.$$set({dataTable:e}),nt()}get stateTable(){return this.$$.ctx[12]}set stateTable(e){this.$$set({stateTable:e}),nt()}get render(){return zT}}function KJ(t){let e,n,i,r;return{c(){e=Z("form"),n=Z("input"),this.h()},l(s){e=tt(s,"FORM",{class:!0});var a=et(e);n=tt(a,"INPUT",{type:!0,class:!0,placeholder:!0}),a.forEach($),this.h()},h(){V(n,"type","text"),V(n,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),V(n,"placeholder",t[0]),V(e,"class","px-[1%] py-[1%] ml-[5.9%]")},m(s,a){xt(s,e,a),Y(e,n),Df(n,t[2]),i||(r=[fe(n,"input",t[8]),fe(n,"change",t[3])],i=!0)},p(s,[a]){a&1&&V(n,"placeholder",s[0]),a&4&&n.value!==s[2]&&Df(n,s[2])},i:Bt,o:Bt,d(s){s&&$(e),i=!1,ca(r)}}}function XJ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(u,g=>n(9,i=g)),u);t.$$.on_destroy.push(()=>r());let a=null,{placeholder:c="textbox"}=e,{change:u=On({})}=e;s();let{id:l}=e,{interactions:f={change:u}}=e;function h(){u.isActive&&kn(u,i={text:a},i)}function d(g){g&&R.is(Array,g)&&g.length&&n(0,c=String(g[0]))}function p(g,y){n(2,a=g),h()}function m(){a=this.value,n(2,a)}return t.$$set=g=>{"placeholder"in g&&n(0,c=g.placeholder),"change"in g&&s(n(1,u=g.change)),"id"in g&&n(4,l=g.id),"interactions"in g&&n(5,f=g.interactions)},[c,u,a,h,l,f,d,p,m]}class JJ extends fn{constructor(e){super(),hn(this,e,XJ,KJ,dn,{placeholder:0,change:1,id:4,interactions:5,render:6,load:7})}get placeholder(){return this.$$.ctx[0]}set placeholder(e){this.$$set({placeholder:e}),nt()}get change(){return this.$$.ctx[1]}set change(e){this.$$set({change:e}),nt()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),nt()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),nt()}get render(){return this.$$.ctx[6]}get load(){return this.$$.ctx[7]}}var qT={exports:{}},QJ=qT.exports={};QJ.forEach=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}};var WT=qT.exports,ZJ=function(t){var e=t.stateHandler.getState;function n(a){var c=e(a);return c&&!!c.isDetectable}function i(a){e(a).isDetectable=!0}function r(a){return!!e(a).busy}function s(a,c){e(a).busy=!!c}return{isDetectable:n,markAsDetectable:i,isBusy:r,markBusy:s}},tQ=function(t){var e={};function n(a){var c=t.get(a);return c===void 0?[]:e[c]||[]}function i(a,c){var u=t.get(a);e[u]||(e[u]=[]),e[u].push(c)}function r(a,c){for(var u=n(a),l=0,f=u.length;l<f;++l)if(u[l]===c){u.splice(l,1);break}}function s(a){var c=n(a);c&&(c.length=0)}return{get:n,add:i,removeListener:r,removeAllListeners:s}},eQ=function(){var t=1;function e(){return t++}return{generate:e}},nQ=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function i(s){var a=n(s);return a&&a.id!==void 0?a.id:null}function r(s){var a=n(s);if(!a)throw new Error("setId required the element to have a resize detection state.");var c=e.generate();return a.id=c,c}return{get:i,set:r}},iQ=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var i=function(r,s){r[s]=function(){var c=console[s];if(c.apply)c.apply(console,arguments);else for(var u=0;u<arguments.length;u++)c(arguments[u])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n},HT={exports:{}},YT=HT.exports={};YT.isIE=function(t){function e(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var n=function(){var i,r=3,s=document.createElement("div"),a=s.getElementsByTagName("i");do s.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(a[0]);return r>4?r:i}();return t===n};YT.isLegacyOpera=function(){return!!window.opera};var GT=HT.exports,KT={exports:{}},rQ=KT.exports={};rQ.getOption=sQ;function sQ(t,e,n){var i=t[e];return i==null&&n!==void 0?n:i}var aQ=KT.exports,F2=aQ,oQ=function(e){e=e||{};var n=e.reporter,i=F2.getOption(e,"async",!0),r=F2.getOption(e,"auto",!0);r&&!i&&(n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),i=!0);var s=D2(),a,c=!1;function u(m,g){!c&&r&&i&&s.size()===0&&h(),s.add(m,g)}function l(){for(c=!0;s.size();){var m=s;s=D2(),m.process()}c=!1}function f(m){c||(m===void 0&&(m=i),a&&(d(a),a=null),m?h():l())}function h(){a=p(l)}function d(m){var g=clearTimeout;return g(m)}function p(m){var g=function(y){return setTimeout(y,0)};return g(m)}return{add:u,force:f}};function D2(){var t={},e=0,n=0,i=0;function r(c,u){u||(u=c,c=0),c>n?n=c:c<i&&(i=c),t[c]||(t[c]=[]),t[c].push(u),e++}function s(){for(var c=i;c<=n;c++)for(var u=t[c],l=0;l<u.length;l++){var f=u[l];f()}}function a(){return e}return{add:r,process:s,size:a}}var db="_erd";function cQ(t){return t[db]={},XT(t)}function XT(t){return t[db]}function uQ(t){delete t[db]}var lQ={initState:cQ,getState:XT,cleanState:uQ},tu=GT,fQ=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function r(l,f){function h(){f(l)}if(tu.isIE(8))i(l).object={proxy:h},l.attachEvent("onresize",h);else{var d=c(l);if(!d)throw new Error("Element is not detectable by this strategy.");d.contentDocument.defaultView.addEventListener("resize",h)}}function s(l){var f=t.important?" !important; ":"; ";return(l.join(f)+f).trim()}function a(l,f,h){h||(h=f,f=l,l=null),l=l||{},l.debug;function d(p,m){var g=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),y=!1,v=window.getComputedStyle(p),b=p.offsetWidth,x=p.offsetHeight;i(p).startSize={width:b,height:x};function w(){function _(){if(v.position==="static"){p.style.setProperty("position","relative",l.important?"important":"");var C=function(D,O,k,N){function B(I){return I.replace(/[^-\d\.]/g,"")}var z=k[N];z!=="auto"&&B(z)!=="0"&&(D.warn("An element that is positioned static has style."+N+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+N+" will be set to 0. Element: ",O),O.style.setProperty(N,"0",l.important?"important":""))};C(e,p,v,"top"),C(e,p,v,"right"),C(e,p,v,"bottom"),C(e,p,v,"left")}}function E(){y||_();function C(O,k){if(!O.contentDocument){var N=i(O);N.checkForObjectDocumentTimeoutId&&window.clearTimeout(N.checkForObjectDocumentTimeoutId),N.checkForObjectDocumentTimeoutId=setTimeout(function(){N.checkForObjectDocumentTimeoutId=0,C(O,k)},100);return}k(O.contentDocument)}var D=this;C(D,function(k){m(p)})}v.position!==""&&(_(),y=!0);var T=document.createElement("object");T.style.cssText=g,T.tabIndex=-1,T.type="text/html",T.setAttribute("aria-hidden","true"),T.onload=E,tu.isIE()||(T.data="about:blank"),i(p)&&(p.appendChild(T),i(p).object=T,tu.isIE()&&(T.data="about:blank"))}n?n.add(w):w()}tu.isIE(8)?h(f):d(f,h)}function c(l){return i(l).object}function u(l){if(i(l)){var f=c(l);f&&(tu.isIE(8)?l.detachEvent("onresize",f.proxy):l.removeChild(f),i(l).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(l).checkForObjectDocumentTimeoutId),delete i(l).object)}}return{makeDetectable:a,addListener:r,uninstall:u}},hQ=WT.forEach,dQ=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;t.stateHandler.hasState;var r=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var s=f(),a="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function u(w){h(w,a,c)}u(window.document);function l(w){var _=t.important?" !important; ":"; ";return(w.join(_)+_).trim()}function f(){var w=500,_=500,E=document.createElement("div");E.style.cssText=l(["position: absolute","width: "+w*2+"px","height: "+_*2+"px","visibility: hidden","margin: 0","padding: 0"]);var T=document.createElement("div");T.style.cssText=l(["position: absolute","width: "+w+"px","height: "+_+"px","overflow: scroll","visibility: none","top: "+-w*3+"px","left: "+-_*3+"px","visibility: hidden","margin: 0","padding: 0"]),T.appendChild(E),document.body.insertBefore(T,document.body.firstChild);var C=w-T.clientWidth,D=_-T.clientHeight;return document.body.removeChild(T),{width:C,height:D}}function h(w,_,E){function T(k,N){N=N||function(z){w.head.appendChild(z)};var B=w.createElement("style");return B.innerHTML=k,B.id=_,N(B),B}if(!w.getElementById(_)){var C=E+"_animation",D=E+"_animation_active",O=`/* Created by the element-resize-detector library. */
`;O+="."+E+" > div::-webkit-scrollbar { "+l(["display: none"])+` }

`,O+="."+D+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+C,"animation-name: "+C])+` }
`,O+="@-webkit-keyframes "+C+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,O+="@keyframes "+C+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",T(O)}}function d(w){w.className+=" "+c+"_animation_active"}function p(w,_,E){if(w.addEventListener)w.addEventListener(_,E);else if(w.attachEvent)w.attachEvent("on"+_,E);else return e.error("[scroll] Don't know how to add event listeners.")}function m(w,_,E){if(w.removeEventListener)w.removeEventListener(_,E);else if(w.detachEvent)w.detachEvent("on"+_,E);else return e.error("[scroll] Don't know how to remove event listeners.")}function g(w){return i(w).container.childNodes[0].childNodes[0].childNodes[0]}function y(w){return i(w).container.childNodes[0].childNodes[0].childNodes[1]}function v(w,_){var E=i(w).listeners;if(!E.push)throw new Error("Cannot add listener to an element that is not detectable.");i(w).listeners.push(_)}function b(w,_,E){E||(E=_,_=w,w=null),w=w||{};function T(){if(w.debug){var M=Array.prototype.slice.call(arguments);if(M.unshift(r.get(_),"Scroll: "),e.log.apply)e.log.apply(null,M);else for(var H=0;H<M.length;H++)e.log(M[H])}}function C(M){function H(K){var U=K.getRootNode&&K.getRootNode().contains(K);return K===K.ownerDocument.body||K.ownerDocument.body.contains(K)||U}return!H(M)||window.getComputedStyle(M)===null}function D(M){var H=i(M).container.childNodes[0],K=window.getComputedStyle(H);return!K.width||K.width.indexOf("px")===-1}function O(){var M=window.getComputedStyle(_),H={};return H.position=M.position,H.width=_.offsetWidth,H.height=_.offsetHeight,H.top=M.top,H.right=M.right,H.bottom=M.bottom,H.left=M.left,H.widthCSS=M.width,H.heightCSS=M.height,H}function k(){var M=O();i(_).startSize={width:M.width,height:M.height},T("Element start size",i(_).startSize)}function N(){i(_).listeners=[]}function B(){if(T("storeStyle invoked."),!i(_)){T("Aborting because element has been uninstalled");return}var M=O();i(_).style=M}function z(M,H,K){i(M).lastWidth=H,i(M).lastHeight=K}function I(M){return g(M).childNodes[0]}function j(){return 2*s.width+1}function F(){return 2*s.height+1}function P(M){return M+10+j()}function W(M){return M+10+F()}function J(M){return M*2+j()}function X(M){return M*2+F()}function Q(M,H,K){var U=g(M),st=y(M),pt=P(H),bt=W(K),mt=J(H),G=X(K);U.scrollLeft=pt,U.scrollTop=bt,st.scrollLeft=mt,st.scrollTop=G}function ot(){var M=i(_).container;if(!M){M=document.createElement("div"),M.className=c,M.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(_).container=M,d(M),_.appendChild(M);var H=function(){i(_).onRendered&&i(_).onRendered()};p(M,"animationstart",H),i(_).onAnimationStart=H}return M}function Ut(){function M(){var Oe=i(_).style;if(Oe.position==="static"){_.style.setProperty("position","relative",w.important?"important":"");var Pn=function(mi,gi,lo,L){function ft(ae){return ae.replace(/[^-\d\.]/g,"")}var se=lo[L];se!=="auto"&&ft(se)!=="0"&&(mi.warn("An element that is positioned static has style."+L+"="+se+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+L+" will be set to 0. Element: ",gi),gi.style[L]=0)};Pn(e,_,Oe,"top"),Pn(e,_,Oe,"right"),Pn(e,_,Oe,"bottom"),Pn(e,_,Oe,"left")}}function H(Oe,Pn,mi,gi){return Oe=Oe?Oe+"px":"0",Pn=Pn?Pn+"px":"0",mi=mi?mi+"px":"0",gi=gi?gi+"px":"0",["left: "+Oe,"top: "+Pn,"right: "+gi,"bottom: "+mi]}if(T("Injecting elements"),!i(_)){T("Aborting because element has been uninstalled");return}M();var K=i(_).container;K||(K=ot());var U=s.width,st=s.height,pt=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),bt=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(H(-(1+U),-(1+st),-st,-U))),mt=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),G=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),St=l(["position: absolute","left: 0","top: 0"]),re=l(["position: absolute","width: 200%","height: 200%"]),_e=document.createElement("div"),ge=document.createElement("div"),Bn=document.createElement("div"),$e=document.createElement("div"),cr=document.createElement("div"),nn=document.createElement("div");_e.dir="ltr",_e.style.cssText=pt,_e.className=c,ge.className=c,ge.style.cssText=bt,Bn.style.cssText=mt,$e.style.cssText=St,cr.style.cssText=G,nn.style.cssText=re,Bn.appendChild($e),cr.appendChild(nn),ge.appendChild(Bn),ge.appendChild(cr),_e.appendChild(ge),K.appendChild(_e);function q(){var Oe=i(_);Oe&&Oe.onExpand?Oe.onExpand():T("Aborting expand scroll handler: element has been uninstalled")}function at(){var Oe=i(_);Oe&&Oe.onShrink?Oe.onShrink():T("Aborting shrink scroll handler: element has been uninstalled")}p(Bn,"scroll",q),p(cr,"scroll",at),i(_).onExpandScroll=q,i(_).onShrinkScroll=at}function dt(){function M(mt,G,St){var re=I(mt),_e=P(G),ge=W(St);re.style.setProperty("width",_e+"px",w.important?"important":""),re.style.setProperty("height",ge+"px",w.important?"important":"")}function H(mt){var G=_.offsetWidth,St=_.offsetHeight,re=G!==i(_).lastWidth||St!==i(_).lastHeight;T("Storing current size",G,St),z(_,G,St),n.add(0,function(){if(re){if(!i(_)){T("Aborting because element has been uninstalled");return}if(!K()){T("Aborting because element container has not been initialized");return}if(w.debug){var ge=_.offsetWidth,Bn=_.offsetHeight;(ge!==G||Bn!==St)&&e.warn(r.get(_),"Scroll: Size changed before updating detector elements.")}M(_,G,St)}}),n.add(1,function(){if(!i(_)){T("Aborting because element has been uninstalled");return}if(!K()){T("Aborting because element container has not been initialized");return}Q(_,G,St)}),re&&mt&&n.add(2,function(){if(!i(_)){T("Aborting because element has been uninstalled");return}if(!K()){T("Aborting because element container has not been initialized");return}mt()})}function K(){return!!i(_).container}function U(){function mt(){return i(_).lastNotifiedWidth===void 0}T("notifyListenersIfNeeded invoked");var G=i(_);if(mt()&&G.lastWidth===G.startSize.width&&G.lastHeight===G.startSize.height)return T("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(G.lastWidth===G.lastNotifiedWidth&&G.lastHeight===G.lastNotifiedHeight)return T("Not notifying: Size already notified");T("Current size not notified, notifying..."),G.lastNotifiedWidth=G.lastWidth,G.lastNotifiedHeight=G.lastHeight,hQ(i(_).listeners,function(St){St(_)})}function st(){if(T("startanimation triggered."),D(_)){T("Ignoring since element is still unrendered...");return}T("Element rendered.");var mt=g(_),G=y(_);(mt.scrollLeft===0||mt.scrollTop===0||G.scrollLeft===0||G.scrollTop===0)&&(T("Scrollbars out of sync. Updating detector elements..."),H(U))}function pt(){if(T("Scroll detected."),D(_)){T("Scroll event fired while unrendered. Ignoring...");return}H(U)}if(T("registerListenersAndPositionElements invoked."),!i(_)){T("Aborting because element has been uninstalled");return}i(_).onRendered=st,i(_).onExpand=pt,i(_).onShrink=pt;var bt=i(_).style;M(_,bt.width,bt.height)}function ut(){if(T("finalizeDomMutation invoked."),!i(_)){T("Aborting because element has been uninstalled");return}var M=i(_).style;z(_,M.width,M.height),Q(_,M.width,M.height)}function rt(){E(_)}function ct(){T("Installing..."),N(),k(),n.add(0,B),n.add(1,Ut),n.add(2,dt),n.add(3,ut),n.add(4,rt)}T("Making detectable..."),C(_)?(T("Element is detached"),ot(),T("Waiting until element is attached..."),i(_).onRendered=function(){T("Element is now attached"),ct()}):ct()}function x(w){var _=i(w);_&&(_.onExpandScroll&&m(g(w),"scroll",_.onExpandScroll),_.onShrinkScroll&&m(y(w),"scroll",_.onShrinkScroll),_.onAnimationStart&&m(_.container,"animationstart",_.onAnimationStart),_.container&&w.removeChild(_.container))}return{makeDetectable:b,addListener:v,uninstall:x,initDocument:u}},fu=WT.forEach,pQ=ZJ,mQ=tQ,gQ=eQ,yQ=nQ,bQ=iQ,R2=GT,_Q=oQ,Ms=lQ,vQ=fQ,wQ=dQ;function L2(t){return Array.isArray(t)||t.length!==void 0}function B2(t){if(Array.isArray(t))return t;var e=[];return fu(t,function(n){e.push(n)}),e}function P2(t){return t&&t.nodeType===1}var xQ=function(t){t=t||{};var e;if(t.idHandler)e={get:function(b){return t.idHandler.get(b,!0)},set:t.idHandler.set};else{var n=gQ(),i=yQ({idGenerator:n,stateHandler:Ms});e=i}var r=t.reporter;if(!r){var s=r===!1;r=bQ(s)}var a=Ns(t,"batchProcessor",_Q({reporter:r})),c={};c.callOnAdd=!!Ns(t,"callOnAdd",!0),c.debug=!!Ns(t,"debug",!1);var u=mQ(e),l=pQ({stateHandler:Ms}),f,h=Ns(t,"strategy","object"),d=Ns(t,"important",!1),p={reporter:r,batchProcessor:a,stateHandler:Ms,idHandler:e,important:d};if(h==="scroll"&&(R2.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),h="object"):R2.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),h="object")),h==="scroll")f=wQ(p);else if(h==="object")f=vQ(p);else throw new Error("Invalid strategy name: "+h);var m={};function g(b,x,w){function _(k){var N=u.get(k);fu(N,function(z){z(k)})}function E(k,N,B){u.add(N,B),k&&B(N)}if(w||(w=x,x=b,b={}),!x)throw new Error("At least one element required.");if(!w)throw new Error("Listener required.");if(P2(x))x=[x];else if(L2(x))x=B2(x);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var T=0,C=Ns(b,"callOnAdd",c.callOnAdd),D=Ns(b,"onReady",function(){}),O=Ns(b,"debug",c.debug);fu(x,function(N){Ms.getState(N)||(Ms.initState(N),e.set(N));var B=e.get(N);if(O&&r.log("Attaching listener to element",B,N),!l.isDetectable(N)){if(O&&r.log(B,"Not detectable."),l.isBusy(N)){O&&r.log(B,"System busy making it detectable"),E(C,N,w),m[B]=m[B]||[],m[B].push(function(){T++,T===x.length&&D()});return}return O&&r.log(B,"Making detectable..."),l.markBusy(N,!0),f.makeDetectable({debug:O,important:d},N,function(I){if(O&&r.log(B,"onElementDetectable"),Ms.getState(I)){l.markAsDetectable(I),l.markBusy(I,!1),f.addListener(I,_),E(C,I,w);var j=Ms.getState(I);if(j&&j.startSize){var F=I.offsetWidth,P=I.offsetHeight;(j.startSize.width!==F||j.startSize.height!==P)&&_(I)}m[B]&&fu(m[B],function(W){W()})}else O&&r.log(B,"Element uninstalled before being detectable.");delete m[B],T++,T===x.length&&D()})}O&&r.log(B,"Already detecable, adding listener."),E(C,N,w),T++}),T===x.length&&D()}function y(b){if(!b)return r.error("At least one element is required.");if(P2(b))b=[b];else if(L2(b))b=B2(b);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");fu(b,function(x){u.removeAllListeners(x),f.uninstall(x),Ms.cleanState(x)})}function v(b){f.initDocument&&f.initDocument(b)}return{listenTo:g,removeListener:u.removeListener,removeAllListeners:u.removeAllListeners,uninstall:y,initDocument:v}};function Ns(t,e,n){var i=t[e];return i==null&&n!==void 0?n:i}const SQ=G$(xQ);SQ({strategy:"scroll"});function EQ(t){let e,n;return{c(){e=Z("div"),n=hk("svg"),this.h()},l(i){e=tt(i,"DIV",{class:!0});var r=et(e);n=dk(r,"svg",{id:!0,viewBox:!0,width:!0,height:!0});var s=et(n);s.forEach($),r.forEach($),this.h()},h(){V(n,"id","svgcontainer"),V(n,"viewBox","372 130 30 30"),V(n,"width","100%"),V(n,"height","100%"),V(e,"class","w-5/5 h-5/5")},m(i,r){xt(i,e,r),Y(e,n),t[4](e)},p:Bt,i:Bt,o:Bt,d(i){i&&$(e),t[4](null)}}}function IQ(t,e,n){let{spec:i}=e,{theplot:r=null}=e,s,a=[],c;function u(f,h){if(!f||f.length==0)return;h=="overlay"||(a=f??a),console.log("map data to plot: ",a);let d={projection:"equirectangular",color:{type:"quantile",n:9,scheme:"blues"},marks:[Y$(a,{strokeOpacity:.5,strokeWidth:.01,precision:.01,fill:m=>m.properties.OBJECTID})]};n(1,r=Py(d)),c=r.children[1];let p=document.getElementById("svgcontainer");p.innerHTML="",p.append(c)}function l(f){oa[f?"unshift":"push"](()=>{s=f,n(0,s)})}return t.$$set=f=>{"spec"in f&&n(2,i=f.spec),"theplot"in f&&n(1,r=f.theplot)},[s,r,i,u,l]}let AQ=class extends fn{constructor(e){super(),hn(this,e,IQ,EQ,dn,{spec:2,theplot:1,render:3})}get spec(){return this.$$.ctx[2]}set spec(e){this.$$set({spec:e}),nt()}get theplot(){return this.$$.ctx[1]}set theplot(e){this.$$set({theplot:e}),nt()}get render(){return this.$$.ctx[3]}};function U2(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function TQ(t){let e,n=t[13][t[2]]+"",i,r,s,a;return{c(){e=Z("button"),i=ke(n),r=zt(),this.h()},l(c){e=tt(c,"BUTTON",{class:!0});var u=et(e);i=Ce(u,n),r=qt(u),u.forEach($),this.h()},h(){V(e,"class","bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded")},m(c,u){xt(c,e,u),Y(e,i),Y(e,r),s||(a=fe(e,"click",function(){Ws(t[5](t[13],t[15]))&&t[5](t[13],t[15]).apply(this,arguments)}),s=!0)},p(c,u){t=c,u&20&&n!==(n=t[13][t[2]]+"")&&Je(i,n)},d(c){c&&$(e),s=!1,a()}}}function kQ(t){let e,n=t[13][t[2]]+"",i,r,s,a;return{c(){e=Z("button"),i=ke(n),r=zt(),this.h()},l(c){e=tt(c,"BUTTON",{class:!0});var u=et(e);i=Ce(u,n),r=qt(u),u.forEach($),this.h()},h(){V(e,"class","bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded")},m(c,u){xt(c,e,u),Y(e,i),Y(e,r),s||(a=fe(e,"click",function(){Ws(t[5](t[13],t[15]))&&t[5](t[13],t[15]).apply(this,arguments)}),s=!0)},p(c,u){t=c,u&20&&n!==(n=t[13][t[2]]+"")&&Je(i,n)},d(c){c&&$(e),s=!1,a()}}}function V2(t){let e;function n(s,a){return s[3]===s[15]?kQ:TQ}let i=n(t),r=i(t);return{c(){r.c(),e=Hs()},l(s){r.l(s),e=Hs()},m(s,a){r.m(s,a),xt(s,e,a)},p(s,a){i===(i=n(s))&&r?r.p(s,a):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&$(e)}}}function CQ(t){let e,n=t[4],i=[];for(let r=0;r<n.length;r+=1)i[r]=V2(U2(t,n,r));return{c(){e=Z("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=tt(r,"DIV",{class:!0,id:!0});var s=et(e);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach($),this.h()},h(){V(e,"class","px-[1%] py-[1%] flex items-center space-x-4"),V(e,"id",t[1])},m(r,s){xt(r,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null)},p(r,[s]){if(s&60){n=r[4];let a;for(a=0;a<n.length;a+=1){const c=U2(r,n,a);i[a]?i[a].p(c,s):(i[a]=V2(c),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}s&2&&V(e,"id",r[1])},i:Bt,o:Bt,d(r){r&&$(e),ad(i,r)}}}function MQ(t,e,n){let i,r=Bt,s=()=>(r(),r=kr(a,b=>n(11,i=b)),a);t.$$.on_destroy.push(()=>r());let{change:a=On({})}=e;s();let{userFunc:c=()=>{}}=e,{id:u}=e,{button_key:l}=e,{default_idx:f}=e,{interactions:h={change:a}}=e,d,p=[];function m(b,x){console.debug("button clicked with selected state and idx: ",b,x),kn(a,i=cx([l],b),i),n(3,d=x)}function g(b,x){!b||!we(Array,b)||!b.length||n(4,p=b)}function y(b){let x=-1;return $n((w,_)=>{console.debug("buttons row, keyed value, and idx",w,w[l],_),w[l]===i[l]&&(x=_)},b),console.debug("getActiveIdx returns: ",x),Number(x)}function v(b,x){kn(a,i=b,i),n(3,d=y(p))}return t.$$set=b=>{"change"in b&&s(n(0,a=b.change)),"userFunc"in b&&n(6,c=b.userFunc),"id"in b&&n(1,u=b.id),"button_key"in b&&n(2,l=b.button_key),"default_idx"in b&&n(7,f=b.default_idx),"interactions"in b&&n(8,h=b.interactions)},[a,u,l,d,p,m,c,f,h,g,v]}class NQ extends fn{constructor(e){super(),hn(this,e,MQ,CQ,dn,{change:0,userFunc:6,id:1,button_key:2,default_idx:7,interactions:8,render:9,load:10})}get change(){return this.$$.ctx[0]}set change(e){this.$$set({change:e}),nt()}get userFunc(){return this.$$.ctx[6]}set userFunc(e){this.$$set({userFunc:e}),nt()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),nt()}get button_key(){return this.$$.ctx[2]}set button_key(e){this.$$set({button_key:e}),nt()}get default_idx(){return this.$$.ctx[7]}set default_idx(e){this.$$set({default_idx:e}),nt()}get interactions(){return this.$$.ctx[8]}set interactions(e){this.$$set({interactions:e}),nt()}get render(){return this.$$.ctx[9]}get load(){return this.$$.ctx[10]}}function OQ(t){let e,n;return{c(){e=Z("div"),n=Z("div"),this.h()},l(i){e=tt(i,"DIV",{id:!0});var r=et(e);n=tt(r,"DIV",{}),et(n).forEach($),r.forEach($),this.h()},h(){V(e,"id",t[0])},m(i,r){xt(i,e,r),Y(e,n),t[12](n)},p(i,[r]){r&1&&V(e,"id",i[0])},i:Bt,o:Bt,d(i){i&&$(e),t[12](null)}}}let af="activity";function FQ(t,e,n){let{id:i,name:r,xDomainMin:s,xDomainMax:a,magic:c}=e,{brushX:u=On({})}=e,{interactions:l={brushX:u}}=e,f,h,d,p={},m=[],g=[];function y(_,E){return E!="overlay"?!1:(p=_,!0)}function v(_,E){return E!="ignored"?!1:(g=_.map(T=>Hn(T)),g=g.flat(),!0)}function b(_,E){n(1,h.innerHTML="",h),!(!_||_.length===0||typeof E=="object")&&(y(_,E)?console.debug("overlays updated"):v(_,E)?console.debug("ignored updated"):(m=_,ax(Hn(m.map(T=>T[af])))),x())}function x(){let _={x:{domain:[+s,+a],type:"linear"},marginTop:20,marginBottom:50,color:{scheme:"Tableau10",legend:!0},marks:[Tc({tickRotate:60,fontSize:6,label:null}),so({ticks:a-s+1,fontSize:7}),Eh(m,{y:"village",x1:"start_time",x2:"end_time",stroke:E=>Cn(q0(g,[E[af]]))?E[af]:null,opacity:E=>Cn(q0(g,[E[af]]))?1:.1}),Jd(p,{x1:"left",x2:"right",fill:"key",color:"key",opacity:.2})]};f=Ol(_,h),u.isActive&&(d=d??new _p({iact:u,magic:c}),d.init(f))}function w(_){oa[_?"unshift":"push"](()=>{h=_,n(1,h)})}return t.$$set=_=>{"id"in _&&n(2,i=_.id),"name"in _&&n(0,r=_.name),"xDomainMin"in _&&n(3,s=_.xDomainMin),"xDomainMax"in _&&n(4,a=_.xDomainMax),"magic"in _&&n(5,c=_.magic),"brushX"in _&&n(6,u=_.brushX),"interactions"in _&&n(7,l=_.interactions)},[r,h,i,s,a,c,u,l,y,v,b,x,w]}class DQ extends fn{constructor(e){super(),hn(this,e,FQ,OQ,dn,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,ignore:9,render:10,update:11})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),nt()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),nt()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),nt()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),nt()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),nt()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),nt()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),nt()}get overlay(){return this.$$.ctx[8]}get ignore(){return this.$$.ctx[9]}get render(){return this.$$.ctx[10]}get update(){return this.$$.ctx[11]}}const RQ=Object.freeze(Object.defineProperty({__proto__:null,BarGrouped:DJ,Buttons:NQ,Container:bJ,CropCal:BJ,CropCalLink:DQ,DropDown:WJ,Header:xk,Line:wJ,Login:GJ,Map:AQ,MatchingTable:VJ,MatchingTableBackend:$T,OverlayBackend:jT,QueryBackend:Y4,Slider:NJ,Spinner:_k,Textbox:JJ},Symbol.toStringTag,{value:"Module"}));let LQ=Bf(RQ,X$);function of(t,e){if(!t)throw new Error(e)}function BQ(t){let e=t.replaceAll(/\$\w+/g,n=>`o['${n.substring(1)}']`);return new Function("o",`return ${e}`)}const JT=z0(sx(we(Array),we(Object)),ds(t=>JT(t)),BQ);let B0={};class PQ{constructor(e,n){this.magic=e,this.config=n,this.backends={},this.interactions={},this.views={},this.viewIdToViews,this.deferred=[],this._deferredMode=!1;const i=s=>a=>{let c=this.magic.backend[s](a);return c.type=s,c};["overlay","duckdb","array","identity"].forEach(s=>this[s]=i(s)),this.root=document.createElement("div"),document.body.appendChild(this.root),this.loadBackends(n.backends??[]),this.loadViews(n.views??[]),this._deferredMode=!0,this.deferred.forEach(s=>s())}defer(e,n){if(this._deferredMode)throw new Error(n);this.deferred.push(e.bind(this))}async init(){await this.loadDependencies(this.config.dependencies??[]);for(let e of Hn(this.backends))e.type=="duckdb"&&await e.init();for(let e of Hn(this.backends))switch(e.type){case"array":e.execute();break;case"query":await e.execute();break;case"matching":await e.execute();break}$n((e,n)=>{var i;(i=this.views[n])==null||i.load(e())},this.magic.dependencies.defaults);for(let e of Hn(this.backends))e.save&&this.magic.saveBackends(e)}newName(e="name"){return B0[e]=B0[e]??0,`${e}${B0[e]++}`}loadBackends(e){let n=Mb(this.createBackend.bind(this));return Ig(i=>i.type=="duckdb",e).forEach(n),ix(i=>i.type=="duckdb",e).forEach(n),this}createBackend(e){let n=e.name??(e.type?this.newName(e.type):this.newName("backend"));if(this.backends[n])throw new Error(`Backend ${n} already exists`);let i=null;if(e.type)i=this[e.type](e);else if(e.query)i=this.query(e);else if(e.matching)i=this.matching(e);else{if(e.backend)return this.backends[e.backend];if(e.interaction){i=this.identity();let r=this.interactions[e.interaction];Ht(r)&&this.defer(()=>this.createBackend(e),`Interaction ${e.interaction} not found`),i&&r&&this.magic.connect(i,r)}else if(e.array)i=this.array({...e,data:e.array});else throw new Error("Can't initialize backend config:",e)}return of(!Ht(i),`Backend is null ${i.type}`),of(!Ht(i.type),`New Backend must have type attr ${JSON.stringify(e)}`),i.save=e.save,this.backends[n]=i,i}matching({name:e,ignore_cols:n,default_func:i,backend:r,matching:s,defaults:a={}}){r=we(String,r)?this.backends[r]:r,e=e??this.newName("matching");let c=this.magic.backend.matching({id:e,backend:r,default_func:i,matching:s,ignore_cols:n,defaults:a});return c.type="matching",c}query({name:e,query:n,defaults:i={},db:r="duckdb"}){r=we(String,r)?this.backends[r]:r,e=e??this.newName("query");let s=this.magic.backend.query({id:e,backend:r,query:n,name:e,defaults:i});return s.type="query",s}loadViews(e){e=e??[];let n=e.map(i=>{let r=this.canonicalizeData(i.data),s=this.makeView(i);return this.views[i.name]=s,this.magic.view(s),s.backends=Eu(s.backends??[],r??[]),s.backends.forEach(a=>{this.magic.render(a,s)}),s});_C(e,n).forEach(([i,r])=>{(i.interactions??[]).forEach(a=>{this.connectInteractions(r,a)})})}connectInteractions(e,{to:n,name:i,type:r,defaults:s}){let a=e.interactions[r];if(Ht(a))throw new Error(`Interaction ${r} not found in View ${e.id}`);if(this.interactions[i]=a,Ht(s)||this.magic.dependencies.setDefault(e,()=>s),Ht(n)||Cn(n)){this.magic.connect(null,a,null);return}(we(Array,n)?n:[n]).forEach(u=>{u=we(String,u)?{backend:u}:u;let l=this.backends[u.backend],f=JT(Ob(["opts","backend","view"],u));if(Ht(l)){let h=u.backend;if(/\w+\.\d+/.test(h)){let[d,p]=h.split(".");l=this.views[d].backends[parseInt(p)],of(!Ht(l),`Backend not found ${h}`)}else{let d=this.views[h];Ht(d)&&this.defer(()=>this.connectInteractions(e,{to:u,name:i,type:r,defaults:s}),`Interaction references nonexistent backend ${u.backend} and view ${h}`),l=this.identity(),this.magic.render(l,d)}}this.magic.connect(l,a,f)})}makeView(e){let n=e.type,i=Ob(["data","interactions"],e);i.id=i.id??i.name??this.newName(n);let r=null;e.selector?r=document.querySelector(e.selector):(r=document.createElement("div"),this.root.appendChild(r)),console.log("new View",n,i);let s=new LQ[n]({target:r,props:i});return s.el=r,s}canonicalizeData(e){if(we(String,e)){let n=this.backends[e];return of(!Ht(n),`Backend named ${e} not found`),[n]}return e=we(Array,e)?e:[e],xg(zo(Sk,e[0]),["query","matching","backend","interaction"])||(e=[{array:e}]),e.map(Mb(this.createBackend.bind(this)))}async loadDependencies(e){(e??[]).forEach(({source:n,attr:i,target:r})=>{let s=null;if(s=this.interactions[n],Ht(s)&&/\w+\.\w+/.test(n)){let[c,u]=n.split(".");s=this.views[c].interactions[u]}if(Ht(s))throw new Error(`Interaction not found ${n}`);(we(Array,r)?r:[r]).forEach(async c=>{c=we(String,c)?{view:c}:c;let u=c.view,l=this.views[u];if(Ht(l))throw new Error("View not found: ",u);let f;if(zo("function")(c.defaults)){let h=await this.backends[c.defaults.backend].execute();f=new Function("e","a",c.defaults.function).bind(h)}else f=c.defaults?()=>c.defaults:null;this.magic.dependencies.add(s.get(i),l,null,f)})})}}const UQ=`backends:
- type: duckdb
  name: duckdb
  sources:
  - parquet: "Decads.parquet" #might be able to remove this
    name: "decads"
  - parquet: "DRC_CHIRPS.parquet"
    name: "DRC_CHIRPS"
  - parquet: "farmer_clean.parquet"
    name: "farmer_clean"
- type: query
  name: clim_q
  db: duckdb
  query: "
    WITH T1 AS (
    SELECT 
    territory,
    decad,
    avg(chirps) as chirps,
    FROM DRC_CHIRPS
    WHERE territory = 'var(region)'
    AND decad < 56
    GROUP BY territory, decad
    ORDER BY territory, decad
    ) 
    SELECT
    T1.chirps,
    T1.territory as territory,
    T1.decad as decad,
    Decads.Month as month
    FROM T1 
    JOIN Decads
    ON
    (T1.decad = Decads.decad)
    "
  defaults:
    region: "bulungu"
  save: true
- type: query
  name: crop_q
  db: duckdb
  query: "
  WITH T1 AS
  (
  SELECT
  activity,
  season,
  village,
  crop,
  province,
  territory,
  sector,
  avg(start) as start_time,
  avg(farmer_clean.end) as end_time
  FROM farmer_clean
  WHERE 
  territory = 'var(region)'
  AND season = 'var(season)'
  AND crop = 'var(crop)'
  GROUP BY activity, season, village, crop, province, territory, sector
  ORDER BY crop
  ),
  T2 AS 
  (
  SELECT
  crop,
  village,
  activity, 
  start_time as start_time,
  end_time as end_time
  FROM T1
  )
  SELECT *
  FROM T2;
  "
  defaults:
    region: 'bulungu'
    crop: 'manioc'
    season: 'A'
  save: true
- type: query
  name: ignored 
  query: "
  SELECT DISTINCT 
  ACTIVITY FROM 
  farmer_clean 
  WHERE
  activity != 'var(activity)'
  "
  defaults:
    activity: 'prep'
- type: overlay
  name: overlay
views:
  # discussion point: for login should we have a separate
  # convex function to different table
- type: Login
  name: Login
  selector: "#login"
  dataTable: DRC_Data
  stateTable: DRC_State
- type: DropDown
  name: dd_territory
  selector: "#dd-territory"
  dropdown_key: territory
  index: 0
  data:
    - query: "SELECT DISTINCT territory FROM DRC_CHIRPS"
  interactions:
    - type: change
      name: ddc-territory
      defaults:
        region: bulungu
      to:
        - backend: clim_q
          region: $territory
        - backend: crop_q
          region: $territory
- type: Line
  name: clim
  selector: "#clim-chart"
  xAttr: decad
  yAttr: chirps
  xLabel: month
  data:
    - backend: clim_q
    - backend: overlay
- type: Buttons
  name: seasons
  selector: "#season-buttons"
  button_key: season
  data:
    - query: "SELECT DISTINCT season FROM farmer_clean WHERE season != 'This Season'"
  interactions:
    - type: change
      name: season-buttons 
      defaults:
        season: 'A'
      to:
        - backend: crop_q
          season: $season
- type: Buttons
  name: crops
  selector: "#crop-buttons"
  button_key: crop
  data:
    - query: "SELECT DISTINCT crop FROM farmer_clean WHERE crop != 'rain'"
  interactions:
    - type: change
      name: crop-buttons
      defaults:
        crop: 'manioc'
      to:
        - backend: crop_q
          crop: $crop
- type: Buttons
  name: activities
  selector: "#activity-buttons"
  button_key: activity
  data:
    - query: "SELECT DISTINCT activity FROM farmer_clean"
  interactions:
    - type: change
      name: activity-buttons
      defaults:
        activity: "prep" 
      to:
        - backend: ignored  
          activity: $activity
- type: CropCalLink
  name: crop
  selector: "#crop-chart"
  xDomainMin: 1
  xDomainMax: 55 
  data:
    - backend: crop_q
    - backend: overlay
    - backend: ignored
- type: Slider
  name: prep
  min: 1
  max: 55
  selector: "#prep-slider"
  description: "prep"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          prep:
            left: $left
            right: $right
- type: Slider
  name: planting 
  min: 1
  max: 55
  selector: "#planting-slider"
  description: "planting"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          planting:
            left: $left
            right: $right
- type: Slider
  name: flowering
  min: 1
  max: 55
  selector: "#flowering-slider"
  description: "flowering"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          flowering:
            left: $left
            right: $right
- type: Slider
  name: tasseling
  min: 1
  max: 55
  selector: "#tasseling-slider"
  description: "tasseling"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          tasseling:
            left: $left
            right: $right
- type: Slider
  name: harvesting
  min: 1
  max: 55
  selector: "#harvesting-slider"
  description: "harvesting"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          harvesting:
            left: $left
            right: $right
- type: Slider
  name: rain 
  min: 1
  max: 55
  selector: "#rain-slider"
  description: "rain"
  interactions:
    - type: change
      to:
        - backend: clim_q
        - backend: crop_q
        - backend: overlay
          rain:
            left: $left
            right: $right
dependencies:
  - source: ddc-territory
    attr: "territory"
    target:
      - view: seasons
        defaults:
          season: 'A'
      - view: crops
        defaults:
          crop: 'manioc'
      - view: activities
        defaults:
          activity: "prep"
      - view: prep
        defaults:
          left: 10
          right: 15
      - view: rain
        defaults:
          left: 30
          right: 35
      - view: planting 
        defaults:
          left: 15
          right: 20
      - view: flowering
        defaults:
          left: 30
          right: 40
      - view: tasseling
        defaults:
          left: 45
          right: 50
      - view: harvesting
        defaults:
          left: 50
          right: 55
`,cf="1.0.3";var Sr=[],Ei=[],VQ=Uint8Array,P0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _o=0,$Q=P0.length;_o<$Q;++_o)Sr[_o]=P0[_o],Ei[P0.charCodeAt(_o)]=_o;Ei["-".charCodeAt(0)]=62;Ei["_".charCodeAt(0)]=63;function jQ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function zQ(t,e,n){return(e+n)*3/4-n}function rd(t){var e,n=jQ(t),i=n[0],r=n[1],s=new VQ(zQ(t,i,r)),a=0,c=r>0?i-4:i,u;for(u=0;u<c;u+=4)e=Ei[t.charCodeAt(u)]<<18|Ei[t.charCodeAt(u+1)]<<12|Ei[t.charCodeAt(u+2)]<<6|Ei[t.charCodeAt(u+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Ei[t.charCodeAt(u)]<<2|Ei[t.charCodeAt(u+1)]>>4,s[a++]=e&255),r===1&&(e=Ei[t.charCodeAt(u)]<<10|Ei[t.charCodeAt(u+1)]<<4|Ei[t.charCodeAt(u+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function qQ(t){return Sr[t>>18&63]+Sr[t>>12&63]+Sr[t>>6&63]+Sr[t&63]}function WQ(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(qQ(i));return r.join("")}function sd(t){for(var e,n=t.length,i=n%3,r=[],s=16383,a=0,c=n-i;a<c;a+=s)r.push(WQ(t,a,a+s>c?c:a+s));return i===1?(e=t[n-1],r.push(Sr[e>>2]+Sr[e<<4&63]+"==")):i===2&&(e=(t[n-2]<<8)+t[n-1],r.push(Sr[e>>10]+Sr[e>>4&63]+Sr[e<<2&63]+"=")),r.join("")}function uf(t){if(t===void 0)return{};if(!QT(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function HQ(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);if(!(t.indexOf("127.0.0.1")!==-1||t.indexOf("localhost")!==-1)&&!t.endsWith(".convex.cloud"))throw new Error(`Invalid deployment address: Must end with ".convex.cloud". Found "${t}".`)}function QT(t){var r;const e=typeof t=="object",n=Object.getPrototypeOf(t),i=n===null||n===Object.prototype||((r=n==null?void 0:n.constructor)==null?void 0:r.name)==="Object";return e&&i}const ZT=!0,_c=BigInt("-9223372036854775808"),pb=BigInt("9223372036854775807"),_g=BigInt("0"),YQ=BigInt("8"),GQ=BigInt("256");function tk(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function KQ(t){t<_g&&(t-=_c+_c);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let i=0;for(const r of e.match(/.{2}/g).reverse())n.set([parseInt(r,16)],i++),t>>=YQ;return sd(n)}function XQ(t){const e=rd(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=_g,i=_g;for(const r of e)n+=BigInt(r)*GQ**i,i++;return n>pb&&(n+=_c+_c),n}function JQ(t){if(t<_c||pb<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),sd(new Uint8Array(e))}function QQ(t){const e=rd(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const ZQ=DataView.prototype.setBigInt64?JQ:KQ,tZ=DataView.prototype.getBigInt64?QQ:XQ,$2=1024;function vg(t){if(t.length===0)throw new Error("Empty field names are disallowed.");if(t.length>$2)throw new Error(`Field name ${t} exceeds maximum field name length ${$2}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function Io(t,e){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>Io(r,e));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const n=Object.entries(t);if(n.length===1){const r=n[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return rd(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return tZ(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const s=rd(t.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const c=new DataView(s.buffer).getFloat64(0,ZT);if(!tk(c))throw new Error(`Float ${c} should be encoded as a number`);return c}if(r==="$set"){if(!Array.isArray(t.$set))throw new Error(`Malformed $set field on ${t}`);if(!e)throw new Error(`Received a Set which is no longer supported as a Convex type, with values: ${t.$set}.`);return new Set(t.$set.map(s=>Io(s,e)))}if(r==="$map"){if(!Array.isArray(t.$map))throw new Error(`Malformed $map field on ${t}`);if(!e)throw new Error(`Received a Map which is no longer supported as a Convex type, with entries: ${t.$map}.`);const s=new Map;for(const a of t.$map){if(!Array.isArray(a)||a.length!==2)throw new Error(`Malformed pair in $map ${t}`);const c=Io(a[0],e),u=Io(a[1],e);s.set(c,u)}return s}}const i={};for(const[r,s]of Object.entries(t))vg(r),i[r]=Io(s,e);return i}function lf(t,e=!1){return Io(t,e)}function _u(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function Ea(t,e,n,i,r){var a;if(t===void 0){const c=n&&` (present at path ${n} in original object ${_u(e)})`;throw new Error(`undefined is not a valid Convex value${c}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<_c||pb<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:ZQ(t)}}if(typeof t=="number")if(tk(t)){const c=new ArrayBuffer(8);return new DataView(c).setFloat64(0,t,ZT),{$float:sd(new Uint8Array(c))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:sd(new Uint8Array(t))};if(Array.isArray(t))return t.map((c,u)=>Ea(c,e,n+`[${u}]`,!1,r));if(t instanceof Set){if(!r)throw new Error(U0(n,"Set",[...t],e));return{$set:[...t].map((c,u)=>Ea(c,e,n+`.keys()[${u}]`,!1,r))}}if(t instanceof Map){if(!r)throw new Error(U0(n,"Map",[...t],e));return{$map:[...t].map(([c,u],l)=>{const f=Ea(c,e,n+`.keys()[${l}]`,!1,r),h=Ea(u,e,n+`.values()[${l}]`,!1,r);return[f,h]})}}if(!QT(t)){const c=(a=t==null?void 0:t.constructor)==null?void 0:a.name,u=c?`${c} `:"";throw new Error(U0(n,u,t,e))}const s={};for(const[c,u]of Object.entries(t))u!==void 0?(vg(c),s[c]=Ea(u,e,n+`.${c}`,!1,r)):i&&(vg(c),s[c]=eZ(u,e,n+`.${c}`));return s}function U0(t,e,n,i){return t?`${e}${_u(n)} is not a supported Convex type (present at path ${t} in original object ${_u(i)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${_u(n)} is not a supported Convex type.`}function eZ(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${_u(t)} but original value is undefined`);return Ea(t,e,n,!1,!1)}function ff(t,e=!1){return Ea(t,t,"",!1,e)}const nZ="color:rgb(0, 145, 255)";function iZ(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}function hf(t,e,n,i){const r=iZ(e);if(t==="info"){const s=i.match(/^\[.*?\] /);if(s===null){console.error(`[CONVEX ${r}(${n})] Could not parse console.log`);return}const a=i.slice(1,s[0].length-2),c=i.slice(s[0].length);console.log(`%c[CONVEX ${r}(${n})] [${a}]`,nZ,c)}else console.error(`[CONVEX ${r}(${n})] ${i}`)}const ek=Symbol.for("functionName");function df(t){if(typeof t=="string")return t;const e=t[ek];if(!e)throw new Error(`${t} is not a functionReference`);return e}function nk(t=[]){const e={get(n,i){if(typeof i=="string"){const r=[...t,i];return nk(r)}else if(i===ek){if(t.length<2)throw new Error("API path must include at least 2 parts (module name and function name). Found: "+t);const r=t.slice(0,-1).join("/"),s=t[t.length-1];return s==="default"?r:r+":"+s}else return i===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}nk();const pf=560,mf=globalThis.fetch||((...t)=>yk(()=>import("./index.e4c1bca7.js"),[],import.meta.url).then(({default:e})=>e(...t)));class rZ{constructor(e){HQ(e),this.address=`${e}/api`,this.debug=!0}backendUrl(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e){this.clearAuth(),this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}async query(e,...n){const i=uf(n[0]),r=df(e),s=JSON.stringify({path:r,args:[ff(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${cf}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const c=await mf(`${this.address}/query`,{body:s,method:"POST",headers:a,credentials:"include"});if(!c.ok&&c.status!==pf)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])hf("info","query",r,l);switch(u.status){case"success":return lf(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async mutation(e,...n){const i=uf(n[0]),r=df(e),s=JSON.stringify({path:r,args:[ff(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${cf}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const c=await mf(`${this.address}/mutation`,{body:s,method:"POST",headers:a,credentials:"include"});if(!c.ok&&c.status!==pf)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])hf("info","mutation",r,l);switch(u.status){case"success":return lf(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async action(e,...n){const i=uf(n[0]),r=df(e),s=JSON.stringify({path:r,args:[ff(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${cf}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const c=await mf(`${this.address}/action`,{body:s,method:"POST",headers:a,credentials:"include"});if(!c.ok&&c.status!==pf)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])hf("info","action",r,l);switch(u.status){case"success":return lf(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async function(e,...n){const i=uf(n[0]),r=typeof e=="string"?e:df(e),s=JSON.stringify({path:r,args:[ff(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${cf}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const c=await mf(`${this.address}/function`,{body:s,method:"POST",headers:a,credentials:"include"});if(!c.ok&&c.status!==pf)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])hf("info","any",r,l);switch(u.status){case"success":return lf(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}}function sZ(t){let e,n,i,r,s,a,c,u,l,f,h,d,p,m,g,y,v,b,x,w,_,E,T,C,D,O,k,N,B;return{c(){e=Z("div"),n=Z("div"),i=Z("div"),r=zt(),s=Z("div"),a=zt(),c=Z("div"),u=Z("div"),l=zt(),f=Z("div"),h=zt(),d=Z("div"),p=zt(),m=Z("div"),g=zt(),y=Z("div"),v=zt(),b=Z("div"),x=Z("div"),w=zt(),_=Z("div"),E=zt(),T=Z("div"),C=zt(),D=Z("div"),O=zt(),k=Z("div"),N=zt(),B=Z("div"),this.h()},l(z){e=tt(z,"DIV",{class:!0});var I=et(e);n=tt(I,"DIV",{class:!0});var j=et(n);i=tt(j,"DIV",{id:!0}),et(i).forEach($),r=qt(j),s=tt(j,"DIV",{id:!0}),et(s).forEach($),j.forEach($),a=qt(I),c=tt(I,"DIV",{class:!0});var F=et(c);u=tt(F,"DIV",{id:!0}),et(u).forEach($),l=qt(F),f=tt(F,"DIV",{id:!0}),et(f).forEach($),h=qt(F),d=tt(F,"DIV",{id:!0}),et(d).forEach($),p=qt(F),m=tt(F,"DIV",{id:!0}),et(m).forEach($),g=qt(F),y=tt(F,"DIV",{id:!0}),et(y).forEach($),F.forEach($),v=qt(I),b=tt(I,"DIV",{class:!0});var P=et(b);x=tt(P,"DIV",{id:!0}),et(x).forEach($),w=qt(P),_=tt(P,"DIV",{id:!0}),et(_).forEach($),E=qt(P),T=tt(P,"DIV",{id:!0}),et(T).forEach($),C=qt(P),D=tt(P,"DIV",{id:!0}),et(D).forEach($),O=qt(P),k=tt(P,"DIV",{id:!0}),et(k).forEach($),N=qt(P),B=tt(P,"DIV",{id:!0}),et(B).forEach($),P.forEach($),I.forEach($),this.h()},h(){V(i,"id","login"),V(s,"id","dd-territory"),V(n,"class","col-span-2"),V(u,"id","clim-chart"),V(f,"id","season-buttons"),V(d,"id","crop-buttons"),V(m,"id","activity-buttons"),V(y,"id","crop-chart"),V(c,"class","flex-col overflow-auto"),V(x,"id","prep-slider"),V(_,"id","planting-slider"),V(T,"id","flowering-slider"),V(D,"id","tasseling-slider"),V(k,"id","harvesting-slider"),V(B,"id","rain-slider"),V(b,"class","flex-col my-[60%] overflow-auto"),V(e,"class","grid grid-cols-2")},m(z,I){xt(z,e,I),Y(e,n),Y(n,i),Y(n,r),Y(n,s),Y(e,a),Y(e,c),Y(c,u),Y(c,l),Y(c,f),Y(c,h),Y(c,d),Y(c,p),Y(c,m),Y(c,g),Y(c,y),Y(e,v),Y(e,b),Y(b,x),Y(b,w),Y(b,_),Y(b,E),Y(b,T),Y(b,C),Y(b,D),Y(b,O),Y(b,k),Y(b,N),Y(b,B)},p:Bt,i:Bt,o:Bt,d(z){z&&$(e)}}}function aZ(t,e,n){let i;pk(t,Hm,l=>n(1,i=l));let r=rZ;const s=new r("https://rightful-anteater-150.convex.cloud");let a=cN(UQ,"utf8");console.log(a),kn(Hm,i=new JX,i);let c=new tJ(i),u;return mk(async()=>{(a.views??[]).forEach(l=>{l.type==="Login"&&(l.magic=c,l.exportFunc="saveToConvex",l.importFunc="getFromConvex",l.client=s)}),u=new PQ(c,a),await u.init()}),[]}class oZ extends fn{constructor(e){super(),hn(this,e,aZ,sZ,dn,{})}}const LZ=Object.freeze(Object.defineProperty({__proto__:null,default:oZ},Symbol.toStringTag,{value:"Module"}));export{oZ as P,LZ as _,mZ as g};
